!function(){var t=navigator.userAgent.toLowerCase();if(/(chrome|firefox|safari)/.test(t.toLowerCase())){var e=["padding: 20px 5px 16px","background-color: #171718","color: #bc994e"].join(";");t.indexOf("chrome")>-1&&(e+=";",e+=["padding: 20px 5px 16px 40px","background-image: url(http://epic.net/img/signature/epic-logo.png)","background-position: 10px 9px","background-repeat: no-repeat","background-size: 26px 30px"].join(";"));var i=["padding: 20px 5px 16px","background-color: #bc994e","color: #ffffff"].join(";"),n=["background-color: transparent"].join(";");console.log("\n\n %c Crafted with ♥︎ ΞʝɑwiⱧαcκεЯΞ %c http://dev.polybees.network %c \n\n\n",e,i,n)}else window.console&&console.log("Crafted with love by ΞʝɑwiⱧαcκεЯΞ- http://dev.polybees.network")}(),function(){function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){return r(e[o][1][t]||t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}return t}()({1:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,r="/"===o.charAt(0))}return i=e(n(i.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+i||"."},i.normalize=function(t){var r=i.isAbsolute(t),s="/"===o(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),o=Math.min(r.length,s.length),a=o,h=0;h<o;h++)if(r[h]!==s[h]){a=h;break}for(var l=[],h=a;h<r.length;h++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:2}],2:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?m=d.concat(m):g=-1,m.length&&h())}function h(){if(!v){var t=s(a);v=!0;for(var e=m.length;e;){for(d=m,m=[];++g<e;)d&&d[g].run();g=-1,e=m.length}d=null,v=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,p,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var d,m=[],v=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];m.push(new l(t,e)),1!==m.length||v||s(h)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],3:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(R[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function o(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(k,"."),n+s(t.split("."),e).join(".")}function a(t){for(var e,i,n=[],r=0,s=t.length;r<s;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<s?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=F(t>>>10&1023|55296),t=56320|1023&t),e+=F(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,i){var n=0;for(t=i?D(t/M):t>>1,t+=D(t/e);t>I*S>>1;n+=w)t=D(t/I);return D(n+(I+1)*t/(t+E))}function p(t){var e,i,n,s,o,a,u,p,f,d,m=[],v=t.length,g=0,y=A,_=P;for(i=t.lastIndexOf(C),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&r("not-basic"),m.push(t.charCodeAt(n));for(s=i>0?i+1:0;s<v;){for(o=g,a=1,u=w;s>=v&&r("invalid-input"),p=l(t.charCodeAt(s++)),(p>=w||p>D((x-g)/a))&&r("overflow"),g+=p*a,f=u<=_?T:u>=_+S?S:u-_,!(p<f);u+=w)d=w-f,a>D(x/d)&&r("overflow"),a*=d;e=m.length+1,_=c(g-o,e,0==o),D(g/e)>x-y&&r("overflow"),y+=D(g/e),g%=e,m.splice(g++,0,y)}return h(m)}function f(t){var e,i,n,s,o,h,l,p,f,d,m,v,g,y,_,b=[];for(t=a(t),v=t.length,e=A,i=0,o=P,h=0;h<v;++h)(m=t[h])<128&&b.push(F(m));for(n=s=b.length,s&&b.push(C);n<v;){for(l=x,h=0;h<v;++h)(m=t[h])>=e&&m<l&&(l=m);for(g=n+1,l-e>D((x-i)/g)&&r("overflow"),i+=(l-e)*g,e=l,h=0;h<v;++h)if(m=t[h],m<e&&++i>x&&r("overflow"),m==e){for(p=i,f=w;d=f<=o?T:f>=o+S?S:f-o,!(p<d);f+=w)_=p-d,y=w-d,b.push(F(u(d+_%y,0))),p=D(_/y);b.push(F(u(p,0))),o=c(i,g,n==s),i=0,++n}++i,++e}return b.join("")}function d(t){return o(t,function(t){return O.test(t)?p(t.slice(4).toLowerCase()):t})}function m(t){return o(t,function(t){return L.test(t)?"xn--"+f(t):t})}var v="object"==typeof i&&i&&!i.nodeType&&i,g="object"==typeof e&&e&&!e.nodeType&&e,y="object"==typeof t&&t;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var _,b,x=2147483647,w=36,T=1,S=26,E=38,M=700,P=72,A=128,C="-",O=/^xn--/,L=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-T,D=Math.floor,F=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:a,encode:h},decode:p,encode:f,toASCII:m,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return _});else if(v&&g)if(e.exports==v)g.exports=_;else for(b in _)_.hasOwnProperty(b)&&(v[b]=_[b]);else n.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;u<l;++u){var c,p,f,d,m=t[u].replace(a,"%20"),v=m.indexOf(i);v>=0?(c=m.substr(0,v),p=m.substr(v+1)):(c=m,p=""),f=decodeURIComponent(c),d=decodeURIComponent(p),n(o,f)?r(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],5:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var a=encodeURIComponent(r(o))+i;return s(t[o])?n(t[o],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[o]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],6:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":4,"./encode":5}],7:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&l.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function s(t){return l.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function o(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var h=t("punycode"),l=t("./util");i.parse=r,i.resolve=o,i.resolveObject=a,i.format=s,i.Url=n;var u=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(d),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=t("querystring");n.prototype.parse=function(t,e,i){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",s=t.split(r),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var c=p.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],this.query=e?T.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=u.exec(a);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,a=a.substr(f.length)}if(i||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===a.substr(0,2);!S||f&&x[f]||(a=a.substr(2),this.slashes=!0)}if(!x[f]&&(S||f&&!w[f])){for(var E=-1,M=0;M<g.length;M++){var P=a.indexOf(g[M]);-1!==P&&(-1===E||P<E)&&(E=P)}var A,C;C=-1===E?a.lastIndexOf("@"):a.lastIndexOf("@",E),-1!==C&&(A=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(A)),E=-1;for(var M=0;M<v.length;M++){var P=a.indexOf(v[M]);-1!==P&&(-1===E||P<E)&&(E=P)}-1===E&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var L=this.hostname.split(/\./),M=0,k=L.length;M<k;M++){var R=L[M];if(R&&!R.match(y)){for(var I="",D=0,F=R.length;D<F;D++)R.charCodeAt(D)>127?I+="x":I+=R[D];if(!I.match(y)){var N=L.slice(0,M),B=L.slice(M+1),j=R.match(_);j&&(N.push(j[1]),B.unshift(j[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=h.toASCII(this.hostname));var U=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+U,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!b[d])for(var M=0,k=m.length;M<k;M++){var G=m[M];if(-1!==a.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),a=a.split(G).join(V)}}var X=a.indexOf("#");-1!==X&&(this.hash=a.substr(X),a=a.slice(0,X));var W=a.indexOf("?");if(-1!==W?(this.search=a.substr(W),this.query=a.substr(W+1),e&&(this.query=T.parse(this.query)),a=a.slice(0,W)):e&&(this.search="",this.query={}),a&&(this.pathname=a),w[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",H=this.search||"";this.path=U+H}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(s=T.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+r+i+o+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(l.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var u=a[h];"protocol"!==u&&(i[u]=t[u])}return w[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!w[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var f=c[p];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||x[t.protocol])i.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",v=i.search||"";i.path=m+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=y||g||i.host&&t.pathname,b=_,T=i.pathname&&i.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],S=i.protocol&&!w[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===T[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),i.search=t.search,i.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(S){i.hostname=i.host=T.shift();var E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");E&&(i.auth=E.shift(),i.host=i.hostname=E.shift())}return i.search=t.search,i.query=t.query,l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var M=T.slice(-1)[0],P=(i.host||t.host||T.length>1)&&("."===M||".."===M)||""===M,A=0,C=T.length;C>=0;C--)M=T[C],"."===M?T.splice(C,1):".."===M?(T.splice(C,1),A++):A&&(T.splice(C,1),A--);if(!_&&!b)for(;A--;A)T.unshift("..");!_||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),P&&"/"!==T.join("/").substr(-1)&&T.push("");var O=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(S){i.hostname=i.host=O?"":T.length?T.shift():"";var E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");E&&(i.auth=E.shift(),i.host=i.hostname=E.shift())}return _=_||i.host&&T.length,_&&!O&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":8,punycode:3,querystring:6}],8:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],9:[function(t,e,i){!function(t,n){"object"==typeof i&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define("Barba",[],n):"object"==typeof i?i.Barba=n():t.Barba=n()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="http://localhost:8080/dist",e(0)}([function(t,e,i){"function"!=typeof Promise&&(window.Promise=i(1));var n={version:"1.0.0",BaseTransition:i(4),BaseView:i(6),BaseCache:i(8),Dispatcher:i(7),HistoryManager:i(9),Pjax:i(10),Prefetch:i(13),Utils:i(5)};t.exports=n},function(t,e,i){(function(e){!function(i){function n(){}function r(t,e){return function(){t.apply(e,arguments)}}function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function o(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,f(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._state?a:h)(e.promise,t._value);var n;try{n=i(t._value)}catch(t){return void h(e.promise,t)}a(e.promise,n)})}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof s)return t._state=3,t._value=e,void l(t);if("function"==typeof i)return void c(r(i,e),t)}t._state=1,t._value=e,l(t)}catch(e){h(t,e)}}function h(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&f(function(){t._handled||d(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function c(t,e){var i=!1;try{t(function(t){i||(i=!0,a(e,t))},function(t){i||(i=!0,h(e,t))})}catch(t){if(i)return;i=!0,h(e,t)}}var p=setTimeout,f="function"==typeof e&&e||function(t){p(t,0)},d=function(t){"undefined"!=typeof console&&console};s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var i=new this.constructor(n);return o(this,new u(t,e,i)),i},s.all=function(t){var e=Array.prototype.slice.call(t);return new s(function(t,i){function n(s,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(t){n(s,t)},i)}e[s]=o,0==--r&&t(e)}catch(t){i(t)}}if(0===e.length)return t([]);for(var r=e.length,s=0;s<e.length;s++)n(s,e[s])})},s.resolve=function(t){return t&&"object"==typeof t&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,i){i(t)})},s.race=function(t){return new s(function(e,i){for(var n=0,r=t.length;n<r;n++)t[n].then(e,i)})},s._setImmediateFn=function(t){f=t},s._setUnhandledRejectionFn=function(t){d=t},void 0!==t&&t.exports?t.exports=s:i.Promise||(i.Promise=s)}(this)}).call(e,i(2).setImmediate)},function(t,e,i){(function(t,n){function r(t,e){this._id=t,this._clearFn=e}var s=i(3).nextTick,o=Function.prototype.apply,a=Array.prototype.slice,h={},l=0;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var i=l++,n=!(arguments.length<2)&&a.call(arguments,1);return h[i]=!0,s(function(){h[i]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(i))}),i},e.clearImmediate="function"==typeof n?n:function(t){delete h[t]}}).call(e,i(2).setImmediate,i(2).clearImmediate)},function(t,e){function i(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&n())}function n(){if(!c){var t=o(i);c=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,c=!1,a(t)}}function r(t,e){this.fun=t,this.array=e}function s(){}var o,a,h=t.exports={};!function(){try{o=setTimeout}catch(t){o=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,u=[],c=!1,p=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new r(t,e)),1!==u.length||c||o(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,i){var n=i(5),r={oldContainer:void 0,newContainer:void 0,newContainerLoading:void 0,extend:function(t){return n.extend(this,t)},init:function(t,e){var i=this;return this.oldContainer=t,this._newContainerPromise=e,this.deferred=n.deferred(),this.newContainerReady=n.deferred(),this.newContainerLoading=this.newContainerReady.promise,this.start(),this._newContainerPromise.then(function(t){i.newContainer=t,i.newContainerReady.resolve()}),this.deferred.promise},done:function(){this.oldContainer.parentNode.removeChild(this.oldContainer),this.newContainer.style.visibility="visible",this.deferred.resolve()},start:function(){}};t.exports=r},function(t,e){var i={getCurrentUrl:function(){return window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search},cleanLink:function(t){return t.replace(/#.*/,"")},xhrTimeout:5e3,xhr:function(t){var e=this.deferred(),i=new XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return 200===i.status?e.resolve(i.responseText):e.reject(new Error("xhr: HTTP code is not 200"))},i.ontimeout=function(){return e.reject(new Error("xhr: Timeout exceeded"))},i.open("GET",t),i.timeout=this.xhrTimeout,i.setRequestHeader("x-barba","yes"),i.send(),e.promise},extend:function(t,e){var i=Object.create(t);for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},deferred:function(){return new function(){this.resolve=null,this.reject=null,this.promise=new Promise(function(t,e){this.resolve=t,this.reject=e}.bind(this))}},getPort:function(t){var e=void 0!==t?t:window.location.port,i=window.location.protocol;return""!=e?parseInt(e):"http:"===i?80:"https:"===i?443:void 0}};t.exports=i},function(t,e,i){var n=i(7),r=i(5),s={namespace:null,extend:function(t){return r.extend(this,t)},init:function(){var t=this;n.on("initStateChange",function(e,i){i&&i.namespace===t.namespace&&t.onLeave()}),n.on("newPageReady",function(e,i,n){t.container=n,e.namespace===t.namespace&&t.onEnter()}),n.on("transitionCompleted",function(e,i){e.namespace===t.namespace&&t.onEnterCompleted(),i&&i.namespace===t.namespace&&t.onLeaveCompleted()})},onEnter:function(){},onEnterCompleted:function(){},onLeave:function(){},onLeaveCompleted:function(){}};t.exports=s},function(t,e){var i={events:{},on:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},off:function(t,e){t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)},trigger:function(t){if(t in this.events!=!1)for(var e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}};t.exports=i},function(t,e,i){var n=i(5),r={data:{},extend:function(t){return n.extend(this,t)},set:function(t,e){this.data[t]=e},get:function(t){return this.data[t]},reset:function(){this.data={}}};t.exports=r},function(t,e){var i={history:[],add:function(t,e){e||(e=void 0),this.history.push({url:t,namespace:e})},currentStatus:function(){return this.history[this.history.length-1]},prevStatus:function(){var t=this.history;return t.length<2?null:t[t.length-2]}};t.exports=i},function(t,e,i){var n=i(5),r=i(7),s=i(11),o=i(8),a=i(9),h=i(12),l={Dom:h,History:a,Cache:o,cacheEnabled:!0,transitionProgress:!1,ignoreClassLink:"no-barba",start:function(){this.init()},init:function(){var t=this.Dom.getContainer();this.Dom.getWrapper().setAttribute("aria-live","polite"),this.History.add(this.getCurrentUrl(),this.Dom.getNamespace(t)),r.trigger("initStateChange",this.History.currentStatus()),r.trigger("newPageReady",this.History.currentStatus(),{},t,this.Dom.currentHTML),r.trigger("transitionCompleted",this.History.currentStatus()),this.bindEvents()},bindEvents:function(){document.addEventListener("click",this.onLinkClick.bind(this)),window.addEventListener("popstate",this.onStateChange.bind(this))},getCurrentUrl:function(){return n.cleanLink(n.getCurrentUrl())},goTo:function(t){window.history.pushState(null,null,t),this.onStateChange()},forceGoTo:function(t){window.location=t},load:function(t){var e,i=n.deferred(),r=this;return e=this.Cache.get(t),e||(e=n.xhr(t),this.Cache.set(t,e)),e.then(function(t){var e=r.Dom.parseResponse(t);r.Dom.putContainer(e),r.cacheEnabled||r.Cache.reset(),i.resolve(e)},function(){r.forceGoTo(t),i.reject()}),i.promise},getHref:function(t){if(t)return t.getAttribute&&"string"==typeof t.getAttribute("xlink:href")?t.getAttribute("xlink:href"):"string"==typeof t.href?t.href:void 0},onLinkClick:function(t){for(var e=t.target;e&&!this.getHref(e);)e=e.parentNode;if(this.preventCheck(t,e)){t.stopPropagation(),t.preventDefault(),r.trigger("linkClicked",e,t);var i=this.getHref(e);this.goTo(i)}},preventCheck:function(t,e){if(!window.history.pushState)return!1;var i=this.getHref(e);return!(!e||!i)&&(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)&&((!e.target||"_blank"!==e.target)&&(window.location.protocol===e.protocol&&window.location.hostname===e.hostname&&(n.getPort()===n.getPort(e.port)&&(!(i.indexOf("#")>-1)&&((!e.getAttribute||"string"!=typeof e.getAttribute("download"))&&(n.cleanLink(i)!=n.cleanLink(location.href)&&!e.classList.contains(this.ignoreClassLink))))))))},getTransition:function(){return s},onStateChange:function(){var t=this.getCurrentUrl();if(this.transitionProgress&&this.forceGoTo(t),this.History.currentStatus().url===t)return!1;this.History.add(t);var e=this.load(t),i=Object.create(this.getTransition());this.transitionProgress=!0,r.trigger("initStateChange",this.History.currentStatus(),this.History.prevStatus());var n=i.init(this.Dom.getContainer(),e);e.then(this.onNewContainerLoaded.bind(this)),n.then(this.onTransitionEnd.bind(this))},onNewContainerLoaded:function(t){this.History.currentStatus().namespace=this.Dom.getNamespace(t),r.trigger("newPageReady",this.History.currentStatus(),this.History.prevStatus(),t,this.Dom.currentHTML)},onTransitionEnd:function(){this.transitionProgress=!1,r.trigger("transitionCompleted",this.History.currentStatus(),this.History.prevStatus())}};t.exports=l},function(t,e,i){var n=i(4),r=n.extend({start:function(){this.newContainerLoading.then(this.finish.bind(this))},finish:function(){document.body.scrollTop=0,this.done()}});t.exports=r},function(t,e){var i={dataNamespace:"namespace",wrapperId:"barba-wrapper",containerClass:"barba-container",currentHTML:document.documentElement.innerHTML,parseResponse:function(t){this.currentHTML=t;var e=document.createElement("div");e.innerHTML=t;var i=e.querySelector("title");return i&&(document.title=i.textContent),this.getContainer(e)},getWrapper:function(){var t=document.getElementById(this.wrapperId);if(!t)throw new Error("Barba.js: wrapper not found!");return t},getContainer:function(t){if(t||(t=document.body),!t)throw new Error("Barba.js: DOM not ready!");var e=this.parseContainer(t);if(e&&e.jquery&&(e=e[0]),!e)throw new Error("Barba.js: no container found");return e},getNamespace:function(t){return t&&t.dataset?t.dataset[this.dataNamespace]:t?t.getAttribute("data-"+this.dataNamespace):null},putContainer:function(t){t.style.visibility="hidden",this.getWrapper().appendChild(t)},parseContainer:function(t){return t.querySelector("."+this.containerClass)}};t.exports=i},function(t,e,i){var n=i(5),r=i(10),s={ignoreClassLink:"no-barba-prefetch",init:function(){if(!window.history.pushState)return!1;document.body.addEventListener("mouseover",this.onLinkEnter.bind(this)),document.body.addEventListener("touchstart",this.onLinkEnter.bind(this))},onLinkEnter:function(t){for(var e=t.target;e&&!r.getHref(e);)e=e.parentNode;if(e&&!e.classList.contains(this.ignoreClassLink)){var i=r.getHref(e);if(r.preventCheck(t,e)&&!r.Cache.get(i)){var s=n.xhr(i);r.Cache.set(i,s)}}}};t.exports=s}])})},{}],10:[function(t,e,i){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}i.INT_BITS=32,i.INT_MAX=2147483647,i.INT_MIN=-1<<31,i.sign=function(t){return(t>0)-(t<0)},i.abs=function(t){var e=t>>31;return(t^e)-e},i.min=function(t,e){return e^(t^e)&-(t<e)},i.max=function(t,e){return t^(t^e)&-(t<e)},i.isPow2=function(t){return!(t&t-1||!t)},i.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,(e|=i)|t>>1},i.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},i.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},i.countTrailingZeros=n,i.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},i.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},i.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),i.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},i.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},i.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},i.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,
e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},i.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},i.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],11:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(function(){return i(t)}):"object"==typeof e&&e.exports?e.exports=i(t):t.bodymovin=i(t)}(window||{},function(t){function e(){return{}}function i(t){_t=t?Math.round:function(t){return t}}function n(t){return Math.round(1e4*t)/1e4}function r(t){t.style.userSelect="none",t.style.MozUserSelect="none",t.style.webkitUserSelect="none",t.style.oUserSelect="none"}function s(t,e,i,n){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=n<0?-1:1}function o(t,e){this.type=t,this.direction=e<0?-1:1}function a(t,e,i,n){this.type=t,this.currentLoop=e,this.totalLoops=i,this.direction=n<0?-1:1}function h(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function l(t,e){this.type=t,this.target=e}function u(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)}function c(t,e){if(e){if(this._cbs[t]){for(var i=0,n=this._cbs[t].length;i<n;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,n-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}function p(t,e){if(this._cbs[t])for(var i=this._cbs[t].length,n=0;n<i;n++)this._cbs[t][n](e)}function f(t,e){void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var i,n="";for(i=t;i>0;--i)n+=e[Math.round(Math.random()*(e.length-1))];return n}function d(t,e,i){var n,r,s,o,a,h,l,u;switch(1===arguments.length&&(e=t.s,i=t.v,t=t.h),o=Math.floor(6*t),a=6*t-o,h=i*(1-e),l=i*(1-a*e),u=i*(1-(1-a)*e),o%6){case 0:n=i,r=u,s=h;break;case 1:n=l,r=i,s=h;break;case 2:n=h,r=i,s=u;break;case 3:n=h,r=l,s=i;break;case 4:n=u,r=h,s=i;break;case 5:n=i,r=h,s=l}return[n,r,s]}function m(t,e,i){1===arguments.length&&(e=t.g,i=t.b,t=t.r);var n,r=Math.max(t,e,i),s=Math.min(t,e,i),o=r-s,a=0===r?0:o/r,h=r/255;switch(r){case s:n=0;break;case t:n=e-i+o*(e<i?6:0),n/=6*o;break;case e:n=i-t+2*o,n/=6*o;break;case i:n=t-e+4*o,n/=6*o}return[n,a,h]}function v(t,e){var i=m(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),d(i[0],i[1],i[2])}function g(t,e){var i=m(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),d(i[0],i[1],i[2])}function y(t,e){var i=m(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),d(i[0],i[1],i[2])}function _(t){var e,i,n=[],r=[],s=[],o={},a=0;t.c&&(n[0]=t.o[0],r[0]=t.i[0],s[0]=t.v[0],a=1),i=t.i.length;var h=i-1;for(e=a;e<i;e+=1)n.push(t.o[h]),r.push(t.i[h]),s.push(t.v[h]),h-=1;return o.i=n,o.o=r,o.v=s,o}function b(){}function x(t,e,i){if(!e){var n=Object.create(t.prototype,i),r={};return n&&"[object Function]"===r.toString.call(n.init)&&n.init(),n}e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._parent=t.prototype}function w(t,e){for(var i in t.prototype)t.prototype.hasOwnProperty(i)&&(e.prototype[i]=t.prototype[i])}function T(){this.c=!1,this._length=0,this._maxLength=8,this.v=Array.apply(null,{length:this._maxLength}),this.o=Array.apply(null,{length:this._maxLength}),this.i=Array.apply(null,{length:this._maxLength})}function S(){}function E(){}function M(){}function P(){}function A(){this._length=0,this._maxLength=4,this.shapes=Array.apply(null,{length:this._maxLength})}function C(t,e,i){this.mdf=!1,this._firstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._dynamicProperties=[],this._textData=t,this._renderType=e,this._elem=i,this._animatorsData=Array.apply(null,{length:this._textData.a.length}),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1}function O(t,e,i,n,r,s){this.o=t,this.sw=e,this.sc=i,this.fc=n,this.m=r,this.p=s,this.mdf={o:!0,sw:!!e,sc:!!i,fc:!!n,m:!0,p:!0}}function L(t,e,i){this._frameId=-99999,this.pv="",this.v="",this.kf=!1,this.firstFrame=!0,this.mdf=!0,this.data=e,this.elem=t,this.keysIndex=-1,this.currentData={ascent:0,boxWidth:[0,0],f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,__complete:!1},this.searchProperty()?i.push(this):this.getValue(!0)}function k(){}function R(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!e||!1!==e.hideOnTransparent,viewBoxOnly:e&&e.viewBoxOnly||!1,className:e&&e.className||""},this.globalData.renderConfig=this.renderConfig,this.elements=[],this.pendingElements=[],this.destroyed=!1}function I(t,e,i){this.dynamicProperties=[],this.data=t,this.element=e,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties,this.viewData=Array.apply(null,{length:this.masksProperties.length}),this.maskElement=null,this.firstFrame=!0;var n,r,s,o,a,h,l,u,c=this.globalData.defs,p=this.masksProperties.length,d=this.masksProperties,m=0,v=[],g=f(10),y="clipPath",_="clip-path";for(n=0;n<p;n++)if(("a"!==d[n].mode&&"n"!==d[n].mode||d[n].inv||100!==d[n].o.k)&&(y="mask",_="mask"),"s"!=d[n].mode&&"i"!=d[n].mode||0!=m?a=null:(a=document.createElementNS(bt,"rect"),a.setAttribute("fill","#ffffff"),a.setAttribute("width",this.element.comp.data.w),a.setAttribute("height",this.element.comp.data.h),v.push(a)),r=document.createElementNS(bt,"path"),"n"!=d[n].mode){if(m+=1,"s"==d[n].mode?r.setAttribute("fill","#000000"):r.setAttribute("fill","#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==d[n].x.k){y="mask",_="mask",u=Nt.getProp(this.element,d[n].x,0,null,this.dynamicProperties);var b="fi_"+f(10);h=document.createElementNS(bt,"filter"),h.setAttribute("id",b),l=document.createElementNS(bt,"feMorphology"),l.setAttribute("operator","dilate"),l.setAttribute("in","SourceGraphic"),l.setAttribute("radius","0"),h.appendChild(l),c.appendChild(h),"s"==d[n].mode?r.setAttribute("stroke","#000000"):r.setAttribute("stroke","#ffffff")}else l=null,u=null;if(this.storedData[n]={elem:r,x:u,expan:l,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"==d[n].mode){o=v.length;var x=document.createElementNS(bt,"g");for(s=0;s<o;s+=1)x.appendChild(v[s]);var w=document.createElementNS(bt,"mask");w.setAttribute("mask-type","alpha"),w.setAttribute("id",g+"_"+m),w.appendChild(r),c.appendChild(w),x.setAttribute("mask","url("+xt+"#"+g+"_"+m+")"),v.length=0,v.push(x)}else v.push(r);d[n].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[n]={elem:r,lastPath:"",op:Nt.getProp(this.element,d[n].o,0,.01,this.dynamicProperties),prop:Bt.getShapeProp(this.element,d[n],3,this.dynamicProperties,null)},a&&(this.viewData[n].invRect=a),this.viewData[n].prop.k||this.drawPath(d[n],this.viewData[n].prop.v,this.viewData[n])}else this.viewData[n]={op:Nt.getProp(this.element,d[n].o,0,.01,this.dynamicProperties),prop:Bt.getShapeProp(this.element,d[n],3,this.dynamicProperties,null),elem:r},c.appendChild(r);for(this.maskElement=document.createElementNS(bt,y),p=v.length,n=0;n<p;n+=1)this.maskElement.appendChild(v[n]);this.maskElement.setAttribute("id",g),m>0&&this.element.maskedElement.setAttribute(_,"url("+xt+"#"+g+")"),c.appendChild(this.maskElement)}function D(){}function F(t,e,i,n,r){this.globalData=i,this.comp=n,this.data=t,this.matteElement=null,this.transformedElement=null,this.isTransparent=!1,this.parentContainer=e,this.layerId=r?r.layerId:"ly_"+f(10),this.placeholder=r,this._sizeChanged=!1,this.init()}function N(t,e,i,n,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,t,e,i,n,r)}function B(t,e,i,n){}function j(t,e,i,n,r){this.textSpans=[],this.renderType="svg",this._parent.constructor.call(this,t,e,i,n,r)}function U(t,e){this.filterManager=e;var i=document.createElementNS(bt,"feColorMatrix");if(i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i),i=document.createElementNS(bt,"feColorMatrix"),i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result","f2"),t.appendChild(i),this.matrixFilter=i,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var n=document.createElementNS(bt,"feMerge");t.appendChild(n);var r;r=document.createElementNS(bt,"feMergeNode"),r.setAttribute("in","SourceGraphic"),n.appendChild(r),r=document.createElementNS(bt,"feMergeNode"),r.setAttribute("in","f2"),n.appendChild(r)}}function z(t,e){this.filterManager=e;var i=document.createElementNS(bt,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(i),this.matrixFilter=i}function G(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function V(t,e){this.filterManager=e;var i=document.createElementNS(bt,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i);var n=document.createElementNS(bt,"feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.matrixFilter=n;var r=document.createElementNS(bt,"feFuncR");r.setAttribute("type","table"),n.appendChild(r),this.feFuncR=r;var s=document.createElementNS(bt,"feFuncG");s.setAttribute("type","table"),n.appendChild(s),this.feFuncG=s;var o=document.createElementNS(bt,"feFuncB");o.setAttribute("type","table"),n.appendChild(o),this.feFuncB=o}function X(t,e){this.filterManager=e;var i=this.filterManager.effectElements,n=document.createElementNS(bt,"feComponentTransfer");(i[9].p.k||0!==i[9].p.v||i[10].p.k||1!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||0!==i[12].p.v||i[13].p.k||1!==i[13].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(i[16].p.k||0!==i[16].p.v||i[17].p.k||1!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||0!==i[19].p.v||i[20].p.k||1!==i[20].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(i[23].p.k||0!==i[23].p.v||i[24].p.k||1!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||0!==i[26].p.v||i[27].p.k||1!==i[27].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(i[30].p.k||0!==i[30].p.v||i[31].p.k||1!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||0!==i[33].p.v||i[34].p.k||1!==i[34].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),n=document.createElementNS(bt,"feComponentTransfer")),(i[2].p.k||0!==i[2].p.v||i[3].p.k||1!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||0!==i[5].p.v||i[6].p.k||1!==i[6].p.v)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function W(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","400%"),t.setAttribute("height","400%"),this.filterManager=e;var i=document.createElementNS(bt,"feGaussianBlur");i.setAttribute("in","SourceAlpha"),i.setAttribute("result","drop_shadow_1"),i.setAttribute("stdDeviation","0"),this.feGaussianBlur=i,t.appendChild(i);var n=document.createElementNS(bt,"feOffset");n.setAttribute("dx","25"),n.setAttribute("dy","0"),n.setAttribute("in","drop_shadow_1"),n.setAttribute("result","drop_shadow_2"),this.feOffset=n,t.appendChild(n);var r=document.createElementNS(bt,"feFlood");r.setAttribute("flood-color","#00ff00"),r.setAttribute("flood-opacity","1"),r.setAttribute("result","drop_shadow_3"),this.feFlood=r,t.appendChild(r);var s=document.createElementNS(bt,"feComposite");s.setAttribute("in","drop_shadow_3"),s.setAttribute("in2","drop_shadow_2"),s.setAttribute("operator","in"),s.setAttribute("result","drop_shadow_4"),t.appendChild(s);var o=document.createElementNS(bt,"feMerge");t.appendChild(o);var a;a=document.createElementNS(bt,"feMergeNode"),o.appendChild(a),a=document.createElementNS(bt,"feMergeNode"),a.setAttribute("in","SourceGraphic"),this.feMergeNode=a,this.feMerge=o,this.originalNodeAdded=!1,o.appendChild(a)}function H(t,e,i){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=i,i.matteElement=document.createElementNS(bt,"g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}function q(t){var e,i=t.data.ef.length,n=f(10),r=Gt.createFilter(n),s=0;this.filters=[];var o;for(e=0;e<i;e+=1)20===t.data.ef[e].ty?(s+=1,o=new U(r,t.effects.effectElements[e]),this.filters.push(o)):21===t.data.ef[e].ty?(s+=1,o=new z(r,t.effects.effectElements[e]),this.filters.push(o)):22===t.data.ef[e].ty?(o=new G(t,t.effects.effectElements[e]),this.filters.push(o)):23===t.data.ef[e].ty?(s+=1,o=new V(r,t.effects.effectElements[e]),this.filters.push(o)):24===t.data.ef[e].ty?(s+=1,o=new X(r,t.effects.effectElements[e]),this.filters.push(o)):25===t.data.ef[e].ty?(s+=1,o=new W(r,t.effects.effectElements[e]),this.filters.push(o)):28===t.data.ef[e].ty&&(o=new H(r,t.effects.effectElements[e],t),this.filters.push(o));s&&(t.globalData.defs.appendChild(r),t.layerElement.setAttribute("filter","url("+xt+"#"+n+")"))}function Y(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r),this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?Array.apply(null,{length:this.layers.length}):[],this.data.tm&&(this.tm=Nt.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),this.data.xt?(this.layerElement=document.createElementNS(bt,"g"),this.buildAllItems()):i.progressiveLoad||this.buildAllItems()}function Z(t,e,i,n,r){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i,n,r)}function Q(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r)}function K(t){xt=t}function J(t){qt.play(t)}function $(t){qt.pause(t)}function tt(t){qt.togglePause(t)}function et(t,e){qt.setSpeed(t,e)}function it(t,e){qt.setDirection(t,e)}function nt(t){qt.stop(t)}function rt(t){qt.moveFrame(t)}function st(){!0===Qt?qt.searchAnimations(Kt,Qt,Jt):qt.searchAnimations()}function ot(t){return qt.registerAnimation(t)}function at(){qt.resize()}function ht(){qt.start()}function lt(t,e,i){qt.goToAndStop(t,e,i)}function ut(t){wt=t}function ct(t){return!0===Qt&&(t.animationData=JSON.parse(Kt)),qt.loadAnimation(t)}function pt(t){return qt.destroy(t)}function ft(t){if("string"==typeof t)switch(t){case"high":Ct=200;break;case"medium":Ct=50;break;case"low":Ct=10}else!isNaN(t)&&t>1&&(Ct=t);i(!(Ct>=50))}function dt(){return"undefined"!=typeof navigator}function mt(t,e){"expressions"===t&&(yt=e)}function vt(t){switch(t){case"propertyFactory":return Nt;case"shapePropertyFactory":return Bt;case"matrix":return b}}function gt(){"complete"===document.readyState&&(clearInterval(ne),st())}var yt,_t,bt="http://www.w3.org/2000/svg",xt="",wt=!0,Tt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),St=(Math.round,Math.pow),Et=Math.sqrt,Mt=(Math.abs,Math.floor),Pt=(Math.max,Math.min),At={};!function(){var t,e=Object.getOwnPropertyNames(Math),i=e.length;for(t=0;t<i;t+=1)At[e[t]]=Math[e[t]]}(),At.random=Math.random,At.abs=function(t){if("object"==typeof t&&t.length){var e,i=Array.apply(null,{length:t.length}),n=t.length;for(e=0;e<n;e+=1)i[e]=Math.abs(t[e]);return i}return Math.abs(t)};var Ct=150,Ot=Math.PI/180,Lt=.5519;i(!1);var kt=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1==e.length?"0"+e:e;return function(t,e,n){return t<0&&(t=0),e<0&&(e=0),n<0&&(n=0),"#"+i[t]+i[e]+i[n]}}(),b=(function(){var t=[]}(),function(){function t(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function e(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function i(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1)}function r(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1)}function s(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function o(t,e){return this._t(1,e,t,1,0,0)}function a(t,e){return this.shear(Math.tan(t),Math.tan(e))}function h(t,e){var i=Math.cos(e),n=Math.sin(e);return this._t(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1)._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function l(t,e,i){return i=isNaN(i)?1:i,1==t&&1==e&&1==i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function u(t,e,i,n,r,s,o,a,h,l,u,c,p,f,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=n,this.props[4]=r,this.props[5]=s,this.props[6]=o,this.props[7]=a,this.props[8]=h,this.props[9]=l,this.props[10]=u,this.props[11]=c,this.props[12]=p,this.props[13]=f,this.props[14]=d,this.props[15]=m,this}function c(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function p(t,e,i,n,r,s,o,a,h,l,u,c,p,f,d,m){if(1===t&&0===e&&0===i&&0===n&&0===r&&1===s&&0===o&&0===a&&0===h&&0===l&&1===u&&0===c)return 0===p&&0===f&&0===d||(this.props[12]=this.props[12]*t+this.props[13]*r+this.props[14]*h+this.props[15]*p,this.props[13]=this.props[12]*e+this.props[13]*s+this.props[14]*l+this.props[15]*f,this.props[14]=this.props[12]*i+this.props[13]*o+this.props[14]*u+this.props[15]*d,this.props[15]=this.props[12]*n+this.props[13]*a+this.props[14]*c+this.props[15]*m),this._identityCalculated=!1,this;var v=this.props[0],g=this.props[1],y=this.props[2],_=this.props[3],b=this.props[4],x=this.props[5],w=this.props[6],T=this.props[7],S=this.props[8],E=this.props[9],M=this.props[10],P=this.props[11],A=this.props[12],C=this.props[13],O=this.props[14],L=this.props[15];return this.props[0]=v*t+g*r+y*h+_*p,this.props[1]=v*e+g*s+y*l+_*f,this.props[2]=v*i+g*o+y*u+_*d,this.props[3]=v*n+g*a+y*c+_*m,this.props[4]=b*t+x*r+w*h+T*p,this.props[5]=b*e+x*s+w*l+T*f,this.props[6]=b*i+x*o+w*u+T*d,this.props[7]=b*n+x*a+w*c+T*m,this.props[8]=S*t+E*r+M*h+P*p,this.props[9]=S*e+E*s+M*l+P*f,this.props[10]=S*i+E*o+M*u+P*d,this.props[11]=S*n+E*a+M*c+P*m,this.props[12]=A*t+C*r+O*h+L*p,this.props[13]=A*e+C*s+O*l+L*f,this.props[14]=A*i+C*o+O*u+L*d,this.props[15]=A*n+C*a+O*c+L*m,this._identityCalculated=!1,this}function f(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function d(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function m(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function v(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function g(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function y(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function _(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function b(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],i=this.props[5]/e,n=-this.props[1]/e,r=-this.props[4]/e,s=this.props[0]/e,o=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*i+t[1]*r+o,t[0]*n+t[1]*s+a,0]}function x(t){var e,i=t.length,n=[];for(e=0;e<i;e+=1)n[e]=b(t[e]);return n}function w(t,e,i,n){if(n&&2===n){var r=Xt.newPoint();return r[0]=t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],r[1]=t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],r}return[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function T(t,e){return this.isIdentity()?t+","+e:_t(t*this.props[0]+e*this.props[4]+this.props[12])+","+_t(t*this.props[1]+e*this.props[5]+this.props[13])}function S(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function E(){return Tt?"matrix3d("+n(this.props[0])+","+n(this.props[1])+","+n(this.props[2])+","+n(this.props[3])+","+n(this.props[4])+","+n(this.props[5])+","+n(this.props[6])+","+n(this.props[7])+","+n(this.props[8])+","+n(this.props[9])+","+n(this.props[10])+","+n(this.props[11])+","+n(this.props[12])+","+n(this.props[13])+","+n(this.props[14])+","+n(this.props[15])+")":(this.cssParts[1]=this.props.join(","),this.cssParts.join(""))}function M(){return"matrix("+n(this.props[0])+","+n(this.props[1])+","+n(this.props[4])+","+n(this.props[5])+","+n(this.props[12])+","+n(this.props[13])+")"}function P(){return""+this.toArray()}return function(){this.reset=t,this.rotate=e,this.rotateX=i,this.rotateY=r,this.rotateZ=s,this.skew=a,this.skewFromAxis=h,this.shear=o,this.scale=l,this.setTransform=u,this.translate=c,this.transform=p,this.applyToPoint=v,this.applyToX=g,this.applyToY=y,this.applyToZ=_,this.applyToPointArray=w,this.applyToPointStringified=T,this.toArray=S,this.toCSS=E,this.to2dCSS=M,this.toString=P,this.clone=d,this.cloneFromProps=m,this.inversePoints=x,this.inversePoint=b,this._t=this.transform,this.isIdentity=f,this._identity=!0,this._identityCalculated=!1,this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.cssParts=["matrix3d(","",")"]}}());!function(t,e){function i(i,l,u){var g=[];l=1==l?{entropy:!0}:l||{};var y=o(s(l.entropy?[i,h(t)]:null==i?a():i,3),g),_=new n(g),b=function(){for(var t=_.g(p),e=d,i=0;t<m;)t=(t+i)*c,e*=c,i=_.g(1);for(;t>=v;)t/=2,e/=2,i>>>=1;return(t+i)/e};return b.int32=function(){return 0|_.g(4)},b.quick=function(){return _.g(4)/4294967296},b.double=b,o(h(_.S),t),(l.pass||u||function(t,i,n,s){return s&&(s.S&&r(s,_),t.state=function(){return r(_,{})}),n?(e[f]=t,i):t})(b,y,"global"in l?l.global:this==e,l.state)}function n(t){var e,i=t.length,n=this,r=0,s=n.i=n.j=0,o=n.S=[];for(i||(t=[i++]);r<c;)o[r]=r++;for(r=0;r<c;r++)o[r]=o[s=g&s+t[r%i]+(e=o[r])],o[s]=e;(n.g=function(t){for(var e,i=0,r=n.i,s=n.j,o=n.S;t--;)e=o[r=g&r+1],i=i*c+o[g&(o[r]=o[s=g&s+e])+(o[s]=e)];return n.i=r,n.j=s,i})(c)}function r(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function s(t,e){var i,n=[],r=typeof t;if(e&&"object"==r)for(i in t)try{n.push(s(t[i],e-1))}catch(t){}return n.length?n:"string"==r?t:t+"\0"}function o(t,e){for(var i,n=t+"",r=0;r<n.length;)e[g&r]=g&(i^=19*e[g&r])+n.charCodeAt(r++);return h(e)}function a(){try{if(l)return h(l.randomBytes(c));var e=new Uint8Array(c);return(u.crypto||u.msCrypto).getRandomValues(e),h(e)}catch(e){var i=u.navigator,n=i&&i.plugins;return[+new Date,u,n,u.screen,h(t)]}}function h(t){return String.fromCharCode.apply(0,t)}var l,u=this,c=256,p=6,f="random",d=e.pow(c,p),m=e.pow(2,52),v=2*m,g=c-1;e["seed"+f]=i,o(e.random(),t)}([],At);var Rt=function(){function t(t,e,i,n,r){var s=r||("bez_"+t+"_"+e+"_"+i+"_"+n).replace(/\./g,"p");if(u[s])return u[s];var o=new h([t,e,i,n]);return u[s]=o,o}function e(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function r(t,r,s){return((e(r,s)*t+i(r,s))*t+n(r))*t}function s(t,r,s){return 3*e(r,s)*t*t+2*i(r,s)*t+n(r)}function o(t,e,i,n,s){var o,a,h=0;do{a=e+(i-e)/2,o=r(a,n,s)-t,o>0?i=a:e=a}while(Math.abs(o)>p&&++h<f);return a}function a(t,e,i,n){for(var o=0;o<c;++o){var a=s(e,i,n);if(0===a)return e;e-=(r(e,i,n)-t)/a}return e}function h(t){this._p=t,this._mSampleValues=v?new Float32Array(d):new Array(d),this._precomputed=!1,this.get=this.get.bind(this)}var l={};l.getBezierEasing=t;var u={},c=4,p=1e-7,f=10,d=11,m=1/(d-1),v="function"==typeof Float32Array;return h.prototype={get:function(t){var e=this._p[0],i=this._p[1],n=this._p[2],s=this._p[3];return this._precomputed||this._precompute(),e===i&&n===s?t:0===t?0:1===t?1:r(this._getTForX(t),i,s)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],n=this._p[3];this._precomputed=!0,t===e&&i===n||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<d;++i)this._mSampleValues[i]=r(i*m,t,e)},_getTForX:function(t){for(var e=this._p[0],i=this._p[2],n=this._mSampleValues,r=0,h=1,l=d-1;h!==l&&n[h]<=t;++h)r+=m;--h;var u=(t-n[h])/(n[h+1]-n[h]),c=r+u*m,p=s(c,e,i);return p>=.001?a(t,c,e,i):0===p?c:o(t,r,r+m,e,i)}},l}();!function(){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),s=setTimeout(function(){t(n+r)},r);return e=n+r,s}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}();var It=function(){function t(t,e,i,n,r,s){var o=t*n+e*r+i*s-r*n-s*t-i*e;return o>-1e-4&&o<1e-4}function e(e,i,n,r,s,o,a,h,l){if(0===n&&0===o&&0===l)return t(e,i,r,s,a,h);var u,c=Math.sqrt(Math.pow(r-e,2)+Math.pow(s-i,2)+Math.pow(o-n,2)),p=Math.sqrt(Math.pow(a-e,2)+Math.pow(h-i,2)+Math.pow(l-n,2)),f=Math.sqrt(Math.pow(a-r,2)+Math.pow(h-s,2)+Math.pow(l-o,2));return(u=c>p?c>f?c-p-f:f-p-c:f>p?f-p-c:p-c-f)>-1e-4&&u<1e-4}function i(t){var e,i=t.c,n=t.v,r=t.o,s=t.i,o=t._length,a=[],h=0;for(e=0;e<o-1;e+=1)a[e]=l(n[e],n[e+1],r[e],s[e+1]),h+=a[e].addedLength;return i&&(a[e]=l(n[e],n[0],r[e],s[0]),h+=a[e].addedLength),{lengths:a,totalLength:h}}function n(t){this.segmentLength=0,this.points=new Array(t)}function r(t,e){this.partialLength=t,this.point=e}function s(t,e){var i=e.segments,n=i.length,r=Mt((n-1)*t),s=t*e.addedLength,o=0;if(s==i[r].l)return i[r].p;for(var a=i[r].l>s?-1:1,h=!0;h;)i[r].l<=s&&i[r+1].l>s?(o=(s-i[r].l)/(i[r+1].l-i[r].l),h=!1):r+=a,(r<0||r>=n-1)&&(h=!1);return i[r].p+(i[r+1].p-i[r].p)*o}function o(){this.pt1=new Array(2),this.pt2=new Array(2),this.pt3=new Array(2),this.pt4=new Array(2)}function a(t,e,i,n,r,o){var a=s(r,o),h=1-a;return[Math.round(1e3*(h*h*h*t[0]+(a*h*h+h*a*h+h*h*a)*i[0]+(a*a*h+h*a*a+a*h*a)*n[0]+a*a*a*e[0]))/1e3,Math.round(1e3*(h*h*h*t[1]+(a*h*h+h*a*h+h*h*a)*i[1]+(a*a*h+h*a*a+a*h*a)*n[1]+a*a*a*e[1]))/1e3]}function h(t,e,i,n,r,a,h){var l=new o;r=r<0?0:r>1?1:r;var u=s(r,h);a=a>1?1:a;var c,p=s(a,h),f=t.length,d=1-u,m=1-p;for(c=0;c<f;c+=1)l.pt1[c]=Math.round(1e3*(d*d*d*t[c]+(u*d*d+d*u*d+d*d*u)*i[c]+(u*u*d+d*u*u+u*d*u)*n[c]+u*u*u*e[c]))/1e3,l.pt3[c]=Math.round(1e3*(d*d*m*t[c]+(u*d*m+d*u*m+d*d*p)*i[c]+(u*u*m+d*u*p+u*d*p)*n[c]+u*u*p*e[c]))/1e3,l.pt4[c]=Math.round(1e3*(d*m*m*t[c]+(u*m*m+d*p*m+d*m*p)*i[c]+(u*p*m+d*p*p+u*m*p)*n[c]+u*p*p*e[c]))/1e3,l.pt2[c]=Math.round(1e3*(m*m*m*t[c]+(p*m*m+m*p*m+m*m*p)*i[c]+(p*p*m+m*p*p+p*m*p)*n[c]+p*p*p*e[c]))/1e3;return l}var l=(Math,function(){function t(t,e){this.l=t,this.p=e}return function(e,i,n,r){var s,o,a,h,l,u,c=Ct,p=0,f=[],d=[],m={addedLength:0,segments:[]};for(a=n.length,s=0;s<c;s+=1){for(l=s/(c-1),u=0,o=0;o<a;o+=1)h=St(1-l,3)*e[o]+3*St(1-l,2)*l*n[o]+3*(1-l)*St(l,2)*r[o]+St(l,3)*i[o],f[o]=h,null!==d[o]&&(u+=St(f[o]-d[o],2)),d[o]=f[o];u&&(u=Et(u),p+=u),m.segments.push(new t(p,l))}return m.addedLength=p,m}}()),u=function(){var e={};return function(i){var s=i.s,o=i.e,a=i.to,h=i.ti,l=(s.join("_")+"_"+o.join("_")+"_"+a.join("_")+"_"+h.join("_")).replace(/\./g,"p");if(e[l])return void(i.bezierData=e[l]);var u,c,p,f,d,m,v,g=Ct,y=0,_=null;2===s.length&&(s[0]!=o[0]||s[1]!=o[1])&&t(s[0],s[1],o[0],o[1],s[0]+a[0],s[1]+a[1])&&t(s[0],s[1],o[0],o[1],o[0]+h[0],o[1]+h[1])&&(g=2);var b=new n(g);for(p=a.length,u=0;u<g;u+=1){for(v=new Array(p),d=u/(g-1),m=0,c=0;c<p;c+=1)f=St(1-d,3)*s[c]+3*St(1-d,2)*d*(s[c]+a[c])+3*(1-d)*St(d,2)*(o[c]+h[c])+St(d,3)*o[c],v[c]=f,null!==_&&(m+=St(v[c]-_[c],2));m=Et(m),y+=m,b.points[u]=new r(m,v),_=v}b.segmentLength=y,i.bezierData=b,e[l]=b}}();return{getBezierLength:l,getSegmentsLength:i,getNewSegment:h,getPointInSegment:a,buildBezierData:u,pointOnLine2D:t,pointOnLine3D:e}}(),Dt=function(){function t(r,s,a){var h,l,u,c,p,f,d=r.length;for(l=0;l<d;l+=1)if("ks"in(h=r[l])&&!h.completed){if(h.completed=!0,h.tt&&(r[l-1].td=h.tt),[],-1,h.hasMask){var m=h.masksProperties;for(c=m.length,u=0;u<c;u+=1)if(m[u].pt.k.i)n(m[u].pt.k);else for(f=m[u].pt.k.length,p=0;p<f;p+=1)m[u].pt.k[p].s&&n(m[u].pt.k[p].s[0]),m[u].pt.k[p].e&&n(m[u].pt.k[p].e[0])}0===h.ty?(h.layers=e(h.refId,s),t(h.layers,s,a)):4===h.ty?i(h.shapes):5==h.ty&&o(h,a)}}function e(t,e){for(var i=0,n=e.length;i<n;){if(e[i].id===t)return e[i].layers.__used?JSON.parse(JSON.stringify(e[i].layers)):(e[i].layers.__used=!0,e[i].layers);i+=1}}function i(t){var e,r,s,o=t.length;for(e=o-1;e>=0;e-=1)if("sh"==t[e].ty){if(t[e].ks.k.i)n(t[e].ks.k);else for(s=t[e].ks.k.length,r=0;r<s;r+=1)t[e].ks.k[r].s&&n(t[e].ks.k[r].s[0]),t[e].ks.k[r].e&&n(t[e].ks.k[r].e[0]);!0}else"gr"==t[e].ty&&i(t[e].it)}function n(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&void 0))}function s(e,i){e.__complete||(l(e),a(e),h(e),u(e),t(e.layers,e.assets,i),e.__complete=!0)}function o(t,e){0!==t.t.a.length||"m"in t.t.p||(t.singleShape=!0)}var a=function(){function t(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function e(e){var i,n=e.length;for(i=0;i<n;i+=1)5===e[i].ty&&t(e[i])}var i=[4,4,14];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,s=t.assets.length;for(n=0;n<s;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),h=function(){var t=[4,7,99];return function(e){if(e.chars&&!r(t,e.v)){var i,s,o,a,h,l=e.chars.length;for(i=0;i<l;i+=1)if(e.chars[i].data&&e.chars[i].data.shapes)for(h=e.chars[i].data.shapes[0].it,o=h.length,s=0;s<o;s+=1)a=h[s].ks.k,a.__converted||(n(h[s].ks.k),a.__converted=!0)}}}(),l=function(){function t(e){var i,n,r,s=e.length;for(i=0;i<s;i+=1)if("gr"===e[i].ty)t(e[i].it);else if("fl"===e[i].ty||"st"===e[i].ty)if(e[i].c.k&&e[i].c.k[0].i)for(r=e[i].c.k.length,n=0;n<r;n+=1)e[i].c.k[n].s&&(e[i].c.k[n].s[0]/=255,e[i].c.k[n].s[1]/=255,e[i].c.k[n].s[2]/=255,e[i].c.k[n].s[3]/=255),e[i].c.k[n].e&&(e[i].c.k[n].e[0]/=255,e[i].c.k[n].e[1]/=255,e[i].c.k[n].e[2]/=255,e[i].c.k[n].e[3]/=255);else e[i].c.k[0]/=255,e[i].c.k[1]/=255,e[i].c.k[2]/=255,e[i].c.k[3]/=255}function e(e){var i,n=e.length;for(i=0;i<n;i+=1)4===e[i].ty&&t(e[i].shapes)}var i=[4,1,9];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,s=t.assets.length;for(n=0;n<s;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),u=function(){function t(e){var i,n,r,s=e.length;for(i=s-1;i>=0;i-=1)if("sh"==e[i].ty){
if(e[i].ks.k.i)e[i].ks.k.c=e[i].closed;else for(r=e[i].ks.k.length,n=0;n<r;n+=1)e[i].ks.k[n].s&&(e[i].ks.k[n].s[0].c=e[i].closed),e[i].ks.k[n].e&&(e[i].ks.k[n].e[0].c=e[i].closed);!0}else"gr"==e[i].ty&&t(e[i].it)}function e(e){var i,n,r,s,o,a,h=e.length;for(n=0;n<h;n+=1){if(i=e[n],i.hasMask){var l=i.masksProperties;for(s=l.length,r=0;r<s;r+=1)if(l[r].pt.k.i)l[r].pt.k.c=l[r].cl;else for(a=l[r].pt.k.length,o=0;o<a;o+=1)l[r].pt.k[o].s&&(l[r].pt.k[o].s[0].c=l[r].cl),l[r].pt.k[o].e&&(l[r].pt.k[o].e[0].c=l[r].cl)}4===i.ty&&t(i.shapes)}}var i=[4,4,18];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,s=t.assets.length;for(n=0;n<s;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),c={};return c.completeData=s,c}(),Ft=function(){function e(t,e){var i=document.createElement("span");i.style.fontFamily=e;var n=document.createElement("span");n.innerHTML="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(n),document.body.appendChild(i);var r=n.offsetWidth;return n.style.fontFamily=t+", "+e,{node:n,w:r,parent:i}}function i(){var e,n,r,s=this.fonts.length,o=s;for(e=0;e<s;e+=1)if(this.fonts[e].loaded)o-=1;else if("t"===this.fonts[e].fOrigin||2===this.fonts[e].origin){if(t.Typekit&&t.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{t.Typekit.load({async:!0,active:function(){this.typekitLoaded=2}.bind(this)})}catch(t){}}2===this.typekitLoaded&&(this.fonts[e].loaded=!0)}else"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(n=this.fonts[e].monoCase.node,r=this.fonts[e].monoCase.w,n.offsetWidth!==r?(o-=1,this.fonts[e].loaded=!0):(n=this.fonts[e].sansCase.node,r=this.fonts[e].sansCase.w,n.offsetWidth!==r&&(o-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==o&&Date.now()-this.initTime<l?setTimeout(i.bind(this),20):setTimeout(function(){this.loaded=!0}.bind(this),0)}function n(t,e){var i=document.createElementNS(bt,"text");i.style.fontSize="100px",i.style.fontFamily=e.fFamily,i.textContent="1",e.fClass?(i.style.fontFamily="inherit",i.className=e.fClass):i.style.fontFamily=e.fFamily,t.appendChild(i);var n=document.createElement("canvas").getContext("2d");return n.font="100px "+e.fFamily,n}function r(t,r){if(!t)return void(this.loaded=!0);if(this.chars)return this.loaded=!0,void(this.fonts=t.list);var s,o=t.list,a=o.length;for(s=0;s<a;s+=1){if(o[s].loaded=!1,o[s].monoCase=e(o[s].fFamily,"monospace"),o[s].sansCase=e(o[s].fFamily,"sans-serif"),o[s].fPath){if("p"===o[s].fOrigin||3===o[s].origin){var h=document.createElement("style");h.type="text/css",h.innerHTML="@font-face {font-family: "+o[s].fFamily+"; font-style: normal; src: url('"+o[s].fPath+"');}",r.appendChild(h)}else if("g"===o[s].fOrigin||1===o[s].origin){var l=document.createElement("link");l.type="text/css",l.rel="stylesheet",l.href=o[s].fPath,r.appendChild(l)}else if("t"===o[s].fOrigin||2===o[s].origin){var u=document.createElement("script");u.setAttribute("src",o[s].fPath),r.appendChild(u)}}else o[s].loaded=!0;o[s].helper=n(r,o[s]),this.fonts.push(o[s])}i.bind(this)()}function s(t){if(t){this.chars||(this.chars=[]);var e,i,n,r=t.length,s=this.chars.length;for(e=0;e<r;e+=1){for(i=0,n=!1;i<s;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(n=!0),i+=1;n||(this.chars.push(t[e]),s+=1)}}}function o(t,e,i){for(var n=0,r=this.chars.length;n<r;){if(this.chars[n].ch===t&&this.chars[n].style===e&&this.chars[n].fFamily===i)return this.chars[n];n+=1}}function a(t,e,i){return this.getFontByName(e).helper.measureText(t).width*i/100}function h(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return"sans-serif"}var l=5e3,u=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.loaded=!1,this.initTime=Date.now()};return u.prototype.addChars=s,u.prototype.addFonts=r,u.prototype.getCharData=o,u.prototype.getFontByName=h,u.prototype.measureText=a,u}(),Nt=function(){function t(t,e,i,n){var r,s=this.offsetTime;i.constructor===Array&&(r=Array.apply(null,{length:i.length}));for(var o,a,h=e,l=this.keyframes.length-1,u=!0;u;){if(o=this.keyframes[h],a=this.keyframes[h+1],h==l-1&&t>=a.t-s){o.h&&(o=a),e=0;break}if(a.t-s>t){e=h;break}h<l-1?h+=1:(e=0,u=!1)}var c,p,f,d,m,v;if(o.to){o.bezierData||It.buildBezierData(o);var g=o.bezierData;if(t>=a.t-s||t<o.t-s){var y=t>=a.t-s?g.points.length-1:0;for(p=g.points[y].point.length,c=0;c<p;c+=1)r[c]=g.points[y].point[c];n._lastBezierData=null}else{o.__fnct?v=o.__fnct:(v=Rt.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,o.__fnct=v),f=v((t-(o.t-s))/(a.t-s-(o.t-s)));var _,b=g.segmentLength*f,x=n.lastFrame<t&&n._lastBezierData===g?n._lastAddedLength:0;for(m=n.lastFrame<t&&n._lastBezierData===g?n._lastPoint:0,u=!0,d=g.points.length;u;){if(x+=g.points[m].partialLength,0===b||0===f||m==g.points.length-1){for(p=g.points[m].point.length,c=0;c<p;c+=1)r[c]=g.points[m].point[c];break}if(b>=x&&b<x+g.points[m+1].partialLength){for(_=(b-x)/g.points[m+1].partialLength,p=g.points[m].point.length,c=0;c<p;c+=1)r[c]=g.points[m].point[c]+(g.points[m+1].point[c]-g.points[m].point[c])*_;break}m<d-1?m+=1:u=!1}n._lastPoint=m,n._lastAddedLength=x-g.points[m].partialLength,n._lastBezierData=g}}else{var w,T,S,E,M;for(l=o.s.length,h=0;h<l;h+=1){if(1!==o.h&&(t>=a.t-s?f=1:t<o.t-s?f=0:(o.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[h]?v=o.__fnct[h]:(w=o.o.x[h]||o.o.x[0],T=o.o.y[h]||o.o.y[0],S=o.i.x[h]||o.i.x[0],E=o.i.y[h]||o.i.y[0],v=Rt.getBezierEasing(w,T,S,E).get,o.__fnct[h]=v)):o.__fnct?v=o.__fnct:(w=o.o.x,T=o.o.y,S=o.i.x,E=o.i.y,v=Rt.getBezierEasing(w,T,S,E).get,o.__fnct=v),f=v((t-(o.t-s))/(a.t-s-(o.t-s))))),this.sh&&1!==o.h){var P=o.s[h],A=o.e[h];P-A<-180?P+=360:P-A>180&&(P-=360),M=P+(A-P)*f}else M=1===o.h?o.s[h]:o.s[h]+(o.e[h]-o.s[h])*f;1===l?r=M:r[h]=M}}return{value:r,iterationIndex:e}}function e(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==u&&(this._caching.lastFrame>=i&&t>=i||this._caching.lastFrame<e&&t<e))){var n=this._caching.lastFrame<t?this._caching.lastIndex:0,r=this.interpolateValue(t,n,this.pv,this._caching);if(this._caching.lastIndex=r.iterationIndex,this.pv.constructor===Array)for(n=0;n<this.v.length;)this.pv[n]=r.value[n],this.v[n]=this.mult?this.pv[n]*this.mult:this.pv[n],this.lastPValue[n]!==this.pv[n]&&(this.mdf=!0,this.lastPValue[n]=this.pv[n]),n+=1;else this.pv=r.value,this.v=this.mult?this.pv*this.mult:this.pv,this.lastPValue!=this.pv&&(this.mdf=!0,this.lastPValue=this.pv)}this._caching.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function i(){}function n(t,e,n){this.mult=n,this.v=n?e.k*n:e.k,this.pv=e.k,this.mdf=!1,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.getValue=i}function r(t,e,n){this.mult=n,this.data=e,this.mdf=!1,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1,this.v=Array.apply(null,{length:e.k.length}),this.pv=Array.apply(null,{length:e.k.length}),this.lastValue=Array.apply(null,{length:e.k.length});var r=Array.apply(null,{length:e.k.length});this.vel=r.map(function(){return 0});var s,o=e.k.length;for(s=0;s<o;s+=1)this.v[s]=n?e.k[s]*n:e.k[s],this.pv[s]=e.k[s];this.getValue=i}function s(i,n,r){this.keyframes=n.k,this.offsetTime=i.data.st,this.lastValue=-99999,this.lastPValue=-99999,this.frameId=-1,this._caching={lastFrame:u,lastIndex:0},this.k=!0,this.kf=!0,this.data=n,this.mult=r,this.elem=i,this.comp=i.comp,this.v=r?n.k[0].s[0]*r:n.k[0].s[0],this.pv=n.k[0].s[0],this.getValue=e,this.interpolateValue=t}function o(i,n,r){var s,o,a,h,l,c=n.k.length;for(s=0;s<c-1;s+=1)n.k[s].to&&n.k[s].s&&n.k[s].e&&(o=n.k[s].s,a=n.k[s].e,h=n.k[s].to,l=n.k[s].ti,(2===o.length&&(o[0]!==a[0]||o[1]!==a[1])&&It.pointOnLine2D(o[0],o[1],a[0],a[1],o[0]+h[0],o[1]+h[1])&&It.pointOnLine2D(o[0],o[1],a[0],a[1],a[0]+l[0],a[1]+l[1])||3===o.length&&(o[0]!==a[0]||o[1]!==a[1]||o[2]!==a[2])&&It.pointOnLine3D(o[0],o[1],o[2],a[0],a[1],a[2],o[0]+h[0],o[1]+h[1],o[2]+h[2])&&It.pointOnLine3D(o[0],o[1],o[2],a[0],a[1],a[2],a[0]+l[0],a[1]+l[1],a[2]+l[2]))&&(n.k[s].to=null,n.k[s].ti=null));this.keyframes=n.k,this.offsetTime=i.data.st,this.k=!0,this.kf=!0,this.mult=r,this.elem=i,this.comp=i.comp,this._caching={lastFrame:u,lastIndex:0},this.getValue=e,this.interpolateValue=t,this.frameId=-1,this.v=Array.apply(null,{length:n.k[0].s.length}),this.pv=Array.apply(null,{length:n.k[0].s.length}),this.lastValue=Array.apply(null,{length:n.k[0].s.length}),this.lastPValue=Array.apply(null,{length:n.k[0].s.length})}function a(t,e,i,a,h){var l;if(2===i)l=new c(t,e,h);else if(0===e.a)l=0===i?new n(t,e,a):new r(t,e,a);else if(1===e.a)l=0===i?new s(t,e,a):new o(t,e,a);else if(e.k.length)if("number"==typeof e.k[0])l=new r(t,e,a);else switch(i){case 0:l=new s(t,e,a);break;case 1:l=new o(t,e,a)}else l=new n(t,e,a);return l.k&&h.push(l),l}function h(t,e,i,n){return new f(t,e,i,n)}function l(t,e,i){return new d(t,e,i)}var u=-999999,c=function(){function t(){return this.p?ExpressionValue(this.p):[this.px.v,this.py.v,this.pz?this.pz.v:0]}function e(){return ExpressionValue(this.px)}function i(){return ExpressionValue(this.py)}function n(){return ExpressionValue(this.a)}function r(){return ExpressionValue(this.or)}function s(){return this.r?ExpressionValue(this.r,1/Ot):ExpressionValue(this.rz,1/Ot)}function o(){return ExpressionValue(this.s,100)}function a(){return ExpressionValue(this.o,100)}function h(){return ExpressionValue(this.sk)}function l(){return ExpressionValue(this.sa)}function u(t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function c(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);if(this.mdf){if(this.v.reset(),this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&this.p.keyframes&&this.p.getValueAtTime){var i,n;this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/this.elem.globalData.frameRate,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/this.elem.globalData.frameRate,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/this.elem.globalData.frameRate,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/this.elem.globalData.frameRate,0)):(i=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/this.elem.globalData.frameRate,this.p.offsetTime)),this.v.rotate(-Math.atan2(i[1]-n[1],i[0]-n[0]))}this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function p(){this.inverted=!0,this.iv=new b,this.k||(this.data.p.s?this.iv.translate(this.px.v,this.py.v,-this.pz.v):this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]),this.r?this.iv.rotate(-this.r.v):this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.s&&this.iv.scale(this.s.v[0],this.s.v[1],1),this.a&&this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]))}function f(){}return function(d,m,v){this.elem=d,this.frameId=-1,this.type="transform",this.dynamicProperties=[],this.mdf=!1,this.data=m,this.getValue=c,this.applyToMatrix=u,this.setInverted=p,this.autoOrient=f,this.v=new b,m.p.s?(this.px=Nt.getProp(d,m.p.x,0,0,this.dynamicProperties),this.py=Nt.getProp(d,m.p.y,0,0,this.dynamicProperties),m.p.z&&(this.pz=Nt.getProp(d,m.p.z,0,0,this.dynamicProperties))):this.p=Nt.getProp(d,m.p,1,0,this.dynamicProperties),m.r?this.r=Nt.getProp(d,m.r,0,Ot,this.dynamicProperties):m.rx&&(this.rx=Nt.getProp(d,m.rx,0,Ot,this.dynamicProperties),this.ry=Nt.getProp(d,m.ry,0,Ot,this.dynamicProperties),this.rz=Nt.getProp(d,m.rz,0,Ot,this.dynamicProperties),this.or=Nt.getProp(d,m.or,1,Ot,this.dynamicProperties),this.or.sh=!0),m.sk&&(this.sk=Nt.getProp(d,m.sk,0,Ot,this.dynamicProperties),this.sa=Nt.getProp(d,m.sa,0,Ot,this.dynamicProperties)),m.a&&(this.a=Nt.getProp(d,m.a,1,0,this.dynamicProperties)),m.s&&(this.s=Nt.getProp(d,m.s,1,.01,this.dynamicProperties)),m.o?this.o=Nt.getProp(d,m.o,0,.01,this.dynamicProperties):this.o={mdf:!1,v:1},this.dynamicProperties.length?v.push(this):(this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?m.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),Object.defineProperty(this,"position",{get:t}),Object.defineProperty(this,"xPosition",{get:e}),Object.defineProperty(this,"yPosition",{get:i}),Object.defineProperty(this,"orientation",{get:r}),Object.defineProperty(this,"anchorPoint",{get:n}),Object.defineProperty(this,"rotation",{get:s}),Object.defineProperty(this,"scale",{get:o}),Object.defineProperty(this,"opacity",{get:a}),Object.defineProperty(this,"skew",{get:h}),Object.defineProperty(this,"skewAxis",{get:l})}}(),p=function(){function t(t){if(this.prop.getValue(),this.cmdf=!1,this.omdf=!1,this.prop.mdf||t){var e,i,n,r=4*this.data.p;for(e=0;e<r;e+=1)i=e%4==0?100:255,n=Math.round(this.prop.v[e]*i),this.c[e]!==n&&(this.c[e]=n,this.cmdf=!0);if(this.o.length)for(r=this.prop.v.length,e=4*this.data.p;e<r;e+=1)i=e%2==0?100:1,n=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==n&&(this.o[e-4*this.data.p]=n,this.omdf=!0)}}function e(e,i,n){this.prop=a(e,i.k,1,null,[]),this.data=i,this.k=this.prop.k,this.c=Array.apply(null,{length:4*i.p});var r=i.k.k[0].s?i.k.k[0].s.length-4*i.p:i.k.k.length-4*i.p;this.o=Array.apply(null,{length:r}),this.cmdf=!1,this.omdf=!1,this.getValue=t,this.prop.k&&n.push(this),this.getValue(!0)}return function(t,i,n){return new e(t,i,n)}}(),f=function(){function t(t){var e=0,i=this.dataProps.length;if(this.elem.globalData.frameId!==this.frameId||t){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId;e<i;){if(this.dataProps[e].p.mdf){this.mdf=!0;break}e+=1}if(this.mdf||t)for("svg"===this.renderer&&(this.dasharray=""),e=0;e<i;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dasharray+=" "+this.dataProps[e].p.v:this.dasharray[e]=this.dataProps[e].p.v:this.dashoffset=this.dataProps[e].p.v}}return function(e,i,n,r){this.elem=e,this.frameId=-1,this.dataProps=new Array(i.length),this.renderer=n,this.mdf=!1,this.k=!1,"svg"===this.renderer?this.dasharray="":this.dasharray=new Array(i.length-1),this.dashoffset=0;var s,o,a=i.length;for(s=0;s<a;s+=1)o=Nt.getProp(e,i[s].v,0,0,r),this.k=!!o.k||this.k,this.dataProps[s]={n:i[s].n,p:o};this.getValue=t,this.k?r.push(this):this.getValue(!0)}}(),d=function(){function t(t){if(this.mdf=t||!1,this.dynamicProperties.length){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}var n=this.elem.textProperty.currentData?this.elem.textProperty.currentData.l.length:0;t&&2===this.data.r&&(this.e.v=n);var r=2===this.data.r?1:100/n,s=this.o.v/r,o=this.s.v/r+s,a=this.e.v/r+s;if(o>a){var h=o;o=a,a=h}this.finalS=o,this.finalE=a}function e(t){var e=Rt.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,s=0,o=this.finalS,a=this.finalE,h=this.data.sh;if(2==h)s=a===o?t>=a?1:0:i(0,n(.5/(a-o)+(t-o)/(a-o),1)),s=e(s);else if(3==h)s=a===o?t>=a?0:1:1-i(0,n(.5/(a-o)+(t-o)/(a-o),1)),s=e(s);else if(4==h)a===o?s=0:(s=i(0,n(.5/(a-o)+(t-o)/(a-o),1)),s<.5?s*=2:s=1-2*(s-.5)),s=e(s);else if(5==h){if(a===o)s=0;else{var l=a-o;t=n(i(0,t+.5-o),a-o);var u=-l/2+t,c=l/2;s=Math.sqrt(1-u*u/(c*c))}s=e(s)}else 6==h?(a===o?s=0:(t=n(i(0,t+.5-o),a-o),s=(1+Math.cos(Math.PI+2*Math.PI*t/(a-o)))/2),s=e(s)):(t>=r(o)&&(s=t-o<0?1-(o-t):i(0,n(a-t,1))),s=e(s));return s*this.a.v}var i=Math.max,n=Math.min,r=Math.floor;return function(i,n,r){this.mdf=!1,this.k=!1,this.data=n,this.dynamicProperties=[],this.getValue=t,this.getMult=e,this.elem=i,this.comp=i.comp,this.finalS=0,this.finalE=0,this.s=Nt.getProp(i,n.s||{k:0},0,0,this.dynamicProperties),this.e="e"in n?Nt.getProp(i,n.e,0,0,this.dynamicProperties):{v:100},this.o=Nt.getProp(i,n.o||{k:0},0,0,this.dynamicProperties),this.xe=Nt.getProp(i,n.xe||{k:0},0,0,this.dynamicProperties),this.ne=Nt.getProp(i,n.ne||{k:0},0,0,this.dynamicProperties),this.a=Nt.getProp(i,n.a,0,.01,this.dynamicProperties),this.dynamicProperties.length?r.push(this):this.getValue()}}();return{getProp:a,getDashProp:h,getTextSelectorProp:l,getGradientProp:p}}();T.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=Xt.newPoint(),this.o[i]=Xt.newPoint(),this.i[i]=Xt.newPoint(),i+=1},T.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},T.prototype.doubleArrayLength=function(){this.v=this.v.concat(Array.apply(null,{length:this._maxLength})),this.i=this.i.concat(Array.apply(null,{length:this._maxLength})),this.o=this.o.concat(Array.apply(null,{length:this._maxLength})),this._maxLength*=2},T.prototype.setXYAt=function(t,e,i,n,r){var s;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o}(!s[n]||s[n]&&!r)&&(s[n]=Xt.newPoint()),s[n][0]=t,s[n][1]=e},T.prototype.setTripleAt=function(t,e,i,n,r,s,o,a){this.setXYAt(t,e,"v",o,a),this.setXYAt(i,n,"o",o,a),this.setXYAt(r,s,"i",o,a)};var Bt=function(){function t(t,e,i,n){var r,s,o;if(t<this.keyframes[0].t-this.offsetTime)r=this.keyframes[0].s[0],o=!0,e=0;else if(t>=this.keyframes[this.keyframes.length-1].t-this.offsetTime)r=1===this.keyframes[this.keyframes.length-2].h?this.keyframes[this.keyframes.length-1].s[0]:this.keyframes[this.keyframes.length-2].e[0],o=!0;else{for(var a,h,l,u,c,p,f=e,d=this.keyframes.length-1,m=!0;m&&(a=this.keyframes[f],h=this.keyframes[f+1],!(h.t-this.offsetTime>t));)f<d-1?f+=1:m=!1;o=1===a.h,e=f;var v;if(!o){if(t>=h.t-this.offsetTime)v=1;else if(t<a.t-this.offsetTime)v=0;else{var g;a.__fnct?g=a.__fnct:(g=Rt.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y).get,a.__fnct=g),v=g((t-(a.t-this.offsetTime))/(h.t-this.offsetTime-(a.t-this.offsetTime)))}s=a.e[0]}r=a.s[0]}u=i._length,p=r.i[0].length;var y,_=!1;for(l=0;l<u;l+=1)for(c=0;c<p;c+=1)o?(y=r.i[l][c],i.i[l][c]!==y&&(i.i[l][c]=y,n&&(this.pv.i[l][c]=y),_=!0),y=r.o[l][c],i.o[l][c]!==y&&(i.o[l][c]=y,n&&(this.pv.o[l][c]=y),_=!0),y=r.v[l][c],i.v[l][c]!==y&&(i.v[l][c]=y,n&&(this.pv.v[l][c]=y),_=!0)):(y=r.i[l][c]+(s.i[l][c]-r.i[l][c])*v,i.i[l][c]!==y&&(i.i[l][c]=y,n&&(this.pv.i[l][c]=y),_=!0),y=r.o[l][c]+(s.o[l][c]-r.o[l][c])*v,i.o[l][c]!==y&&(i.o[l][c]=y,n&&(this.pv.o[l][c]=y),_=!0),y=r.v[l][c]+(s.v[l][c]-r.v[l][c])*v,i.v[l][c]!==y&&(i.v[l][c]=y,n&&(this.pv.v[l][c]=y),_=!0));return _&&(i.c=r.c),{iterationIndex:e,hasModified:_}}function e(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(this.lastFrame===l||!(this.lastFrame<e&&t<e||this.lastFrame>i&&t>i)){var n=this.lastFrame<t?this._lastIndex:0,r=this.interpolateShape(t,n,this.v,!0);this._lastIndex=r.iterationIndex,this.mdf=r.hasModified,r.hasModified&&(this.paths=this.localShapeCollection)}this.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function i(){return this.v}function n(){this.paths=this.localShapeCollection,this.k||(this.mdf=!1)}function r(t,e,i){this.__shapeObject=1,this.comp=t.comp,this.k=!1,this.mdf=!1;var r=3===i?e.pt.k:e.ks.k;this.v=Wt.clone(r),this.pv=Wt.clone(this.v),this.localShapeCollection=Ht.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n}function s(t,e,i){this.__shapeObject=1,this.comp=t.comp,this.elem=t,this.offsetTime=t.data.st,this._lastIndex=0,this.keyframes=3===i?e.pt.k:e.ks.k,this.k=!0,this.kf=!0;var r=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length;this.v=Wt.newShape(),this.v.setPathData(this.keyframes[0].s[0].c,r),this.pv=Wt.clone(this.v),this.localShapeCollection=Ht.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=l,this.reset=n}function o(t,e,i,n){var o;if(3===i||4===i){var a=3===i?e.pt:e.ks,h=a.k;o=1===a.a||h.length?new s(t,e,i):new r(t,e,i)}else 5===i?o=new p(t,e):6===i?o=new u(t,e):7===i&&(o=new c(t,e));return o.k&&n.push(o),o}function a(){return r}function h(){return s}var l=-999999;r.prototype.interpolateShape=t,r.prototype.getValue=i,s.prototype.getValue=e,s.prototype.interpolateShape=t;var u=function(){function t(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2;3!==this.d?(this.v.v[0][0]=t,this.v.v[0][1]=e-r,this.v.v[1][0]=t+n,this.v.v[1][1]=e,this.v.v[2][0]=t,this.v.v[2][1]=e+r,this.v.v[3][0]=t-n,this.v.v[3][1]=e,this.v.i[0][0]=t-n*i,this.v.i[0][1]=e-r,this.v.i[1][0]=t+n,this.v.i[1][1]=e-r*i,this.v.i[2][0]=t+n*i,this.v.i[2][1]=e+r,this.v.i[3][0]=t-n,this.v.i[3][1]=e+r*i,this.v.o[0][0]=t+n*i,this.v.o[0][1]=e-r,this.v.o[1][0]=t+n,this.v.o[1][1]=e+r*i,this.v.o[2][0]=t-n*i,this.v.o[2][1]=e+r,this.v.o[3][0]=t-n,this.v.o[3][1]=e-r*i):(this.v.v[0][0]=t,this.v.v[0][1]=e-r,this.v.v[1][0]=t-n,this.v.v[1][1]=e,this.v.v[2][0]=t,this.v.v[2][1]=e+r,this.v.v[3][0]=t+n,this.v.v[3][1]=e,this.v.i[0][0]=t+n*i,this.v.i[0][1]=e-r,this.v.i[1][0]=t-n,this.v.i[1][1]=e-r*i,this.v.i[2][0]=t-n*i,this.v.i[2][1]=e+r,this.v.i[3][0]=t+n,this.v.i[3][1]=e+r*i,this.v.o[0][0]=t-n*i,this.v.o[0][1]=e-r,this.v.o[1][0]=t-n,this.v.o[1][1]=e+r*i,this.v.o[2][0]=t+n*i,this.v.o[2][1]=e+r,this.v.o[3][0]=t+n,this.v.o[3][1]=e-r*i)}function e(t){var e,i=this.dynamicProperties.length;if(this.elem.globalData.frameId!==this.frameId){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId,e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertEllToPath()}}var i=Lt;return function(i,r){this.v=Wt.newShape(),this.v.setPathData(!0,4),this.localShapeCollection=Ht.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=r.d,this.dynamicProperties=[],this.elem=i,this.comp=i.comp,this.frameId=-1,this.mdf=!1,this.getValue=e,this.convertEllToPath=t,this.reset=n,this.p=Nt.getProp(i,r.p,1,0,this.dynamicProperties),this.s=Nt.getProp(i,r.s,1,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertEllToPath()}}(),c=function(){function t(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,n=this.or.v,r=this.os.v,s=2*Math.PI*n/(4*e),o=-Math.PI/2,a=3===this.data.d?-1:1;for(o+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var h=n*Math.cos(o),l=n*Math.sin(o),u=0===h&&0===l?0:l/Math.sqrt(h*h+l*l),c=0===h&&0===l?0:-h/Math.sqrt(h*h+l*l);h+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(h,l,h-u*s*r*a,l-c*s*r*a,h+u*s*r*a,l+c*s*r*a,t,!0),o+=i*a}this.paths.length=0,this.paths[0]=this.v}function e(){var t,e,i,n,r=2*Math.floor(this.pt.v),s=2*Math.PI/r,o=!0,a=this.or.v,h=this.ir.v,l=this.os.v,u=this.is.v,c=2*Math.PI*a/(2*r),p=2*Math.PI*h/(2*r),f=-Math.PI/2;f+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<r;t+=1){e=o?a:h,i=o?l:u,n=o?c:p;var m=e*Math.cos(f),v=e*Math.sin(f),g=0===m&&0===v?0:v/Math.sqrt(m*m+v*v),y=0===m&&0===v?0:-m/Math.sqrt(m*m+v*v);m+=+this.p.v[0],v+=+this.p.v[1],this.v.setTripleAt(m,v,m-g*n*i*d,v-y*n*i*d,m+g*n*i*d,v+y*n*i*d,t,!0),o=!o,f+=s*d}}function i(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&this.convertToPath()}}return function(r,s){this.v=Wt.newShape(),this.v.setPathData(!0,0),this.elem=r,this.comp=r.comp,this.data=s,this.frameId=-1,this.d=s.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=i,this.reset=n,1===s.sy?(this.ir=Nt.getProp(r,s.ir,0,0,this.dynamicProperties),this.is=Nt.getProp(r,s.is,0,.01,this.dynamicProperties),this.convertToPath=e):this.convertToPath=t,this.pt=Nt.getProp(r,s.pt,0,0,this.dynamicProperties),this.p=Nt.getProp(r,s.p,1,0,this.dynamicProperties),this.r=Nt.getProp(r,s.r,0,Ot,this.dynamicProperties),this.or=Nt.getProp(r,s.or,0,0,this.dynamicProperties),this.os=Nt.getProp(r,s.os,0,.01,this.dynamicProperties),this.localShapeCollection=Ht.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:this.convertToPath()}}(),p=function(){function t(t){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertRectToPath()}}function e(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,r=Pt(i,n,this.r.v),s=r*(1-Lt);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-n+r,t+i,e-n+r,t+i,e-n+s,0,!0),this.v.setTripleAt(t+i,e+n-r,t+i,e+n-s,t+i,e+n-r,1,!0),0!==r?(this.v.setTripleAt(t+i-r,e+n,t+i-r,e+n,t+i-s,e+n,2,!0),this.v.setTripleAt(t-i+r,e+n,t-i+s,e+n,t-i+r,e+n,3,!0),this.v.setTripleAt(t-i,e+n-r,t-i,e+n-r,t-i,e+n-s,4,!0),this.v.setTripleAt(t-i,e-n+r,t-i,e-n+s,t-i,e-n+r,5,!0),this.v.setTripleAt(t-i+r,e-n,t-i+r,e-n,t-i+s,e-n,6,!0),this.v.setTripleAt(t+i-r,e-n,t+i-s,e-n,t+i-r,e-n,7,!0)):(this.v.setTripleAt(t-i,e+n,t-i+s,e+n,t-i,e+n,2),this.v.setTripleAt(t-i,e-n,t-i,e-n+s,t-i,e-n,3))):(this.v.setTripleAt(t+i,e-n+r,t+i,e-n+s,t+i,e-n+r,0,!0),0!==r?(this.v.setTripleAt(t+i-r,e-n,t+i-r,e-n,t+i-s,e-n,1,!0),this.v.setTripleAt(t-i+r,e-n,t-i+s,e-n,t-i+r,e-n,2,!0),this.v.setTripleAt(t-i,e-n+r,t-i,e-n+r,t-i,e-n+s,3,!0),this.v.setTripleAt(t-i,e+n-r,t-i,e+n-s,t-i,e+n-r,4,!0),this.v.setTripleAt(t-i+r,e+n,t-i+r,e+n,t-i+s,e+n,5,!0),this.v.setTripleAt(t+i-r,e+n,t+i-s,e+n,t+i-r,e+n,6,!0),this.v.setTripleAt(t+i,e+n-r,t+i,e+n-r,t+i,e+n-s,7,!0)):(this.v.setTripleAt(t-i,e-n,t-i+s,e-n,t-i,e-n,1,!0),this.v.setTripleAt(t-i,e+n,t-i,e+n-s,t-i,e+n,2,!0),this.v.setTripleAt(t+i,e+n,t+i-s,e+n,t+i,e+n,3,!0)))}return function(i,r){this.v=Wt.newShape(),this.v.c=!0,this.localShapeCollection=Ht.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=i,this.comp=i.comp,this.frameId=-1,this.d=r.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=t,this.convertRectToPath=e,this.reset=n,this.p=Nt.getProp(i,r.p,1,0,this.dynamicProperties),this.s=Nt.getProp(i,r.s,1,0,this.dynamicProperties),this.r=Nt.getProp(i,r.r,0,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertRectToPath()}}(),f={};return f.getShapeProp=o,f.getConstructorFunction=a,f.getKeyframedConstructorFunction=h,f}(),jt=function(){function t(t,e){n[t]||(n[t]=e)}function e(t,e,i,r){return new n[t](e,i,r)}var i={},n={};return i.registerModifier=t,i.getModifier=e,i}();S.prototype.initModifierProperties=function(){},S.prototype.addShapeToModifier=function(){},S.prototype.addShape=function(t){this.closed||(this.shapes.push({shape:t.sh,data:t,localShapeCollection:Ht.newShapeCollection()}),this.addShapeToModifier(t.sh))},S.prototype.init=function(t,e,i){this.elem=t,this.frameId=-1,this.shapes=[],this.dynamicProperties=[],this.mdf=!1,this.closed=!1,this.k=!1,this.comp=t.comp,this.initModifierProperties(t,e),this.dynamicProperties.length?(this.k=!0,i.push(this)):this.getValue(!0)},w(S,E),E.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);if(this.mdf||t){var n=this.o.v%360/360;n<0&&(n+=1);var r=this.s.v+n,s=this.e.v+n;if(r>s){var o=r;r=s,s=o}this.sValue=r,this.eValue=s,this.oValue=n}}},E.prototype.initModifierProperties=function(t,e){this.sValue=0,this.eValue=0,this.oValue=0,this.getValue=this.processKeys,this.s=Nt.getProp(t,e.s,0,.01,this.dynamicProperties),this.e=Nt.getProp(t,e.e,0,.01,this.dynamicProperties),this.o=Nt.getProp(t,e.o,0,0,this.dynamicProperties),this.m=e.m,this.dynamicProperties.length||this.getValue(!0)},E.prototype.calculateShapeEdges=function(t,e,i,n,r){var s=[];e<=1?s.push({s:t,e:e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var o,a,h=[],l=s.length;for(o=0;o<l;o+=1)if(a=s[o],a.e*r<n||a.s*r>n+i);else{var u,c;u=a.s*r<=n?0:(a.s*r-n)/i,c=a.e*r>=n+i?1:(a.e*r-n)/i,h.push([u,c])}return h.length||h.push([0,0]),h},E.prototype.processShapes=function(t){var e,i,n,r,s,o,a,h=this.shapes.length,l=this.sValue,u=this.eValue,c=0;if(u===l)for(i=0;i<h;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape.mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection;else if(1===u&&0===l||0===u&&1===l){if(this.mdf)for(i=0;i<h;i+=1)this.shapes[i].shape.mdf=!0}else{var p,f,d=[];for(i=0;i<h;i+=1)if(p=this.shapes[i],p.shape.mdf||this.mdf||t||2===this.m){if(e=p.shape.paths,r=e._length,a=0,!p.shape.mdf&&p.pathsData)a=p.totalShapeLength;else{for(s=[],n=0;n<r;n+=1)o=It.getSegmentsLength(e.shapes[n]),s.push(o),a+=o.totalLength;p.totalShapeLength=a,p.pathsData=s}c+=a,p.shape.mdf=!0}else p.shape.paths=p.localShapeCollection;var n,r,m=l,v=u,g=0;for(i=h-1;i>=0;i-=1)if(p=this.shapes[i],p.shape.mdf){if(f=p.localShapeCollection,f.releaseShapes(),2===this.m&&h>1){var y=this.calculateShapeEdges(l,u,p.totalShapeLength,g,c);g+=p.totalShapeLength}else y=[[m,v]];for(r=y.length,n=0;n<r;n+=1){m=y[n][0],v=y[n][1],d.length=0,v<=1?d.push({s:p.totalShapeLength*m,e:p.totalShapeLength*v}):m>=1?d.push({s:p.totalShapeLength*(m-1),e:p.totalShapeLength*(v-1)}):(d.push({s:p.totalShapeLength*m,e:p.totalShapeLength}),d.push({s:0,e:p.totalShapeLength*(v-1)}));var _=this.addShapes(p,d[0]);if(d[0].s!==d[0].e){if(d.length>1)if(p.shape.v.c){var b=_.pop();this.addPaths(_,f),_=this.addShapes(p,d[1],b)}else this.addPaths(_,f),_=this.addShapes(p,d[1]);this.addPaths(_,f)}}p.shape.paths=f}}this.dynamicProperties.length||(this.mdf=!1)},E.prototype.addPaths=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)e.addShape(t[i])},E.prototype.addSegment=function(t,e,i,n,r,s,o){r.setXYAt(e[0],e[1],"o",s),r.setXYAt(i[0],i[1],"i",s+1),o&&r.setXYAt(t[0],t[1],"v",s),r.setXYAt(n[0],n[1],"v",s+1)},E.prototype.addShapes=function(t,e,i){var n,r,s,o,a,h,l,u,c=t.pathsData,p=t.shape.paths.shapes,f=t.shape.paths._length,d=0,m=[],v=!0;for(i?(a=i._length,u=i._length):(i=Wt.newShape(),a=0,u=0),
m.push(i),n=0;n<f;n+=1){for(h=c[n].lengths,i.c=p[n].c,s=p[n].c?h.length:h.length+1,r=1;r<s;r+=1)if(o=h[r-1],d+o.addedLength<e.s)d+=o.addedLength,i.c=!1;else{if(d>e.e){i.c=!1;break}e.s<=d&&e.e>=d+o.addedLength?(this.addSegment(p[n].v[r-1],p[n].o[r-1],p[n].i[r],p[n].v[r],i,a,v),v=!1):(l=It.getNewSegment(p[n].v[r-1],p[n].v[r],p[n].o[r-1],p[n].i[r],(e.s-d)/o.addedLength,(e.e-d)/o.addedLength,h[r-1]),this.addSegment(l.pt1,l.pt3,l.pt4,l.pt2,i,a,v),v=!1,i.c=!1),d+=o.addedLength,a+=1}if(p[n].c){if(o=h[r-1],d<=e.e){var g=h[r-1].addedLength;e.s<=d&&e.e>=d+g?(this.addSegment(p[n].v[r-1],p[n].o[r-1],p[n].i[0],p[n].v[0],i,a,v),v=!1):(l=It.getNewSegment(p[n].v[r-1],p[n].v[0],p[n].o[r-1],p[n].i[0],(e.s-d)/g,(e.e-d)/g,h[r-1]),this.addSegment(l.pt1,l.pt3,l.pt4,l.pt2,i,a,v),v=!1,i.c=!1)}else i.c=!1;d+=o.addedLength,a+=1}if(i._length&&(i.setXYAt(i.v[u][0],i.v[u][1],"i",u),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),d>e.e)break;n<f-1&&(i=Wt.newShape(),v=!0,m.push(i),a=0)}return m},jt.registerModifier("tm",E),w(S,M),M.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}},M.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=Nt.getProp(t,e.r,0,null,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},M.prototype.processPath=function(t,e){var i=Wt.newShape();i.c=t.c;var n,r,s,o,a,h,l,u,c,p,f,d,m,v=t._length,g=0;for(n=0;n<v;n+=1)r=t.v[n],o=t.o[n],s=t.i[n],r[0]===o[0]&&r[1]===o[1]&&r[0]===s[0]&&r[1]===s[1]?0!==n&&n!==v-1||t.c?(a=0===n?t.v[v-1]:t.v[n-1],h=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)),l=h?Math.min(h/2,e)/h:0,u=d=r[0]+(a[0]-r[0])*l,c=m=r[1]-(r[1]-a[1])*l,p=u-(u-r[0])*Lt,f=c-(c-r[1])*Lt,i.setTripleAt(u,c,p,f,d,m,g),g+=1,a=n===v-1?t.v[0]:t.v[n+1],h=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)),l=h?Math.min(h/2,e)/h:0,u=p=r[0]+(a[0]-r[0])*l,c=f=r[1]+(a[1]-r[1])*l,d=u-(u-r[0])*Lt,m=c-(c-r[1])*Lt,i.setTripleAt(u,c,p,f,d,m,g),g+=1):(i.setTripleAt(r[0],r[1],o[0],o[1],s[0],s[1],g),g+=1):(i.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],g),g+=1);return i},M.prototype.processShapes=function(t){var e,i,n,r,s=this.shapes.length,o=this.rd.v;if(0!==o){var a,h;for(i=0;i<s;i+=1){if(a=this.shapes[i],a.shape.paths,h=a.localShapeCollection,a.shape.mdf||this.mdf||t)for(h.releaseShapes(),a.shape.mdf=!0,e=a.shape.paths.shapes,r=a.shape.paths._length,n=0;n<r;n+=1)h.addShape(this.processPath(e[n],o));a.shape.paths=a.localShapeCollection}}this.dynamicProperties.length||(this.mdf=!1)},jt.registerModifier("rd",M),P.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}},P.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=Nt.getProp(t,e.c,0,null,this.dynamicProperties),this.o=Nt.getProp(t,e.o,0,null,this.dynamicProperties),this.tr=Nt.getProp(t,e.tr,2,null,this.dynamicProperties),this.data=e,this.dynamicProperties.length||this.getValue(!0),this.pMatrix=new b,this.rMatrix=new b,this.sMatrix=new b,this.tMatrix=new b,this.matrix=new b},P.prototype.applyTransforms=function(t,e,i,n,r,s){var o=s?-1:1,a=n.s.v[0]+(1-n.s.v[0])*(1-r),h=n.s.v[1]+(1-n.s.v[1])*(1-r);t.translate(n.p.v[0]*o*r,n.p.v[1]*o*r,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*o*r),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),i.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),i.scale(s?1/a:a,s?1/h:h),i.translate(n.a.v[0],n.a.v[1],n.a.v[2])},P.prototype.init=function(t,e,i,n,r){this.elem=t,this.arr=e,this.pos=i,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.dynamicProperties=[],this.frameId=-1,this.initModifierProperties(t,e[i]);for(var s=0;i>0;)i-=1,this._elements.unshift(e[i]),s+=1;this.dynamicProperties.length?(this.k=!0,r.push(this)):this.getValue(!0)},P.prototype.resetElements=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},P.prototype.cloneElements=function(t){var e=(t.length,JSON.parse(JSON.stringify(t)));return this.resetElements(e),e},P.prototype.changeGroupRender=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},P.prototype.processShapes=function(t){if(this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.dynamicProperties.length||t||(this.mdf=!1),this.mdf)){var e=Math.ceil(this.c.v);if(this._groups.length<e){for(;this._groups.length<e;){var i={it:this.cloneElements(this._elements),ty:"gr"};i.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:0,ix:6,k:0},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,i),this._groups.splice(0,0,i),this._currentCopies+=1}this.elem.reloadShapes()}var n,r,s=0;for(n=0;n<=this._groups.length-1;n+=1)r=s<e,this._groups[n]._render=r,this.changeGroupRender(this._groups[n].it,r),s+=1;this._currentCopies=e,this.elem.firstFrame=!0;var o=this.o.v,a=o%1,h=o>0?Math.floor(o):Math.ceil(o),l=(this.tr.v.props,this.pMatrix.props),u=this.rMatrix.props,c=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var p=0;if(o>0){for(;p<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),p+=1;a&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,a,!1),p+=a)}else if(o<0){for(;p>h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),p-=1;a&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-a,!0),p-=a)}n=1===this.data.m?0:this._currentCopies-1;var f=1===this.data.m?1:-1;for(s=this._currentCopies;s;){if(0!==p){(0!==n&&1===f||n!==this._currentCopies-1&&-1===f)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),this.matrix.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]),this.matrix.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]);var d,m=this.elemsData[n].it,v=m[m.length-1].transform.mProps.v.props,g=v.length;for(d=0;d<g;d+=1)v[d]=this.matrix.props[d];this.matrix.reset()}else{this.matrix.reset();var d,m=this.elemsData[n].it,v=m[m.length-1].transform.mProps.v.props,g=v.length;for(d=0;d<g;d+=1)v[d]=this.matrix.props[d]}p+=1,s-=1,n+=f}}},P.prototype.addShape=function(){},jt.registerModifier("rp",P),A.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(Array.apply(null,{length:this._maxLength})),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},A.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)Wt.release(this.shapes[t]);this._length=0};var Ut=function(){function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&o&&o(null)}function e(t){var e="";if(this.assetsPath){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e}function i(e){var i=document.createElement("img");i.addEventListener("load",t.bind(this),!1),i.addEventListener("error",t.bind(this),!1),i.src=e}function n(t,n){o=n,this.totalAssets=t.length;var r;for(r=0;r<this.totalAssets;r+=1)t[r].layers||(i.bind(this)(e.bind(this)(t[r])),this.totalImages+=1)}function r(t){this.path=t||""}function s(t){this.assetsPath=t||""}var o;return function(){this.loadAssets=n,this.setAssetsPath=s,this.setPath=r,this.assetsPath="",this.path="",this.totalAssets=0,this.totalImages=0,this.loadedAssets=0}}(),zt=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),Gt=function(){function t(t){var e=document.createElementNS(bt,"filter");return e.setAttribute("id",t),e.setAttribute("filterUnits","objectBoundingBox"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e}function e(){var t=document.createElementNS(bt,"feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}var i={};return i.createFilter=t,i.createAlphaToLuminanceFilter=e,i}();C.prototype.searchProperties=function(t){var e,i,n,r=this._textData.a.length,s=Nt.getProp;for(e=0;e<r;e+=1)n=this._textData.a[e],i={a:{},s:{}},"r"in n.a&&(i.a.r=s(this._elem,n.a.r,0,Ot,this._dynamicProperties)),"rx"in n.a&&(i.a.rx=s(this._elem,n.a.rx,0,Ot,this._dynamicProperties)),"ry"in n.a&&(i.a.ry=s(this._elem,n.a.ry,0,Ot,this._dynamicProperties)),"sk"in n.a&&(i.a.sk=s(this._elem,n.a.sk,0,Ot,this._dynamicProperties)),"sa"in n.a&&(i.a.sa=s(this._elem,n.a.sa,0,Ot,this._dynamicProperties)),"s"in n.a&&(i.a.s=s(this._elem,n.a.s,1,.01,this._dynamicProperties)),"a"in n.a&&(i.a.a=s(this._elem,n.a.a,1,0,this._dynamicProperties)),"o"in n.a&&(i.a.o=s(this._elem,n.a.o,0,.01,this._dynamicProperties)),"p"in n.a&&(i.a.p=s(this._elem,n.a.p,1,0,this._dynamicProperties)),"sw"in n.a&&(i.a.sw=s(this._elem,n.a.sw,0,0,this._dynamicProperties)),"sc"in n.a&&(i.a.sc=s(this._elem,n.a.sc,1,0,this._dynamicProperties)),"fc"in n.a&&(i.a.fc=s(this._elem,n.a.fc,1,0,this._dynamicProperties)),"fh"in n.a&&(i.a.fh=s(this._elem,n.a.fh,0,0,this._dynamicProperties)),"fs"in n.a&&(i.a.fs=s(this._elem,n.a.fs,0,.01,this._dynamicProperties)),"fb"in n.a&&(i.a.fb=s(this._elem,n.a.fb,0,.01,this._dynamicProperties)),"t"in n.a&&(i.a.t=s(this._elem,n.a.t,0,0,this._dynamicProperties)),i.s=Nt.getTextSelectorProp(this._elem,n.s,this._dynamicProperties),i.s.t=n.s.t,this._animatorsData[e]=i;this._textData.p&&"m"in this._textData.p?(this._pathData={f:s(this._elem,this._textData.p.f,0,0,this._dynamicProperties),l:s(this._elem,this._textData.p.l,0,0,this._dynamicProperties),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=s(this._elem,this._textData.m.a,1,0,this._dynamicProperties),this._dynamicProperties.length&&t.push(this)},C.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this.mdf||this._firstFrame||e||this._hasMaskedPath&&this._pathData.m.mdf){this._firstFrame=!1;var i,n,r,s,o=this._moreOptions.alignment.v,a=this._animatorsData,h=this._textData,l=this.mHelper,u=this._renderType,c=this.renderedLetters.length,p=(this.data,t.l);if(this._hasMaskedPath){var f=this._pathData.m;if(!this._pathData.n||this._pathData.mdf){var d=f.v;this._pathData.r&&(d=_(d));var m={tLength:0,segments:[]};s=d._length-1;var b,x=0;for(r=0;r<s;r+=1)b={s:d.v[r],e:d.v[r+1],to:[d.o[r][0]-d.v[r][0],d.o[r][1]-d.v[r][1]],ti:[d.i[r+1][0]-d.v[r+1][0],d.i[r+1][1]-d.v[r+1][1]]},It.buildBezierData(b),m.tLength+=b.bezierData.segmentLength,m.segments.push(b),x+=b.bezierData.segmentLength;r=s,f.v.c&&(b={s:d.v[r],e:d.v[0],to:[d.o[r][0]-d.v[r][0],d.o[r][1]-d.v[r][1]],ti:[d.i[0][0]-d.v[0][0],d.i[0][1]-d.v[0][1]]},It.buildBezierData(b),m.tLength+=b.bezierData.segmentLength,m.segments.push(b),x+=b.bezierData.segmentLength),this._pathData.pi=m}var w,T,S,m=this._pathData.pi,E=this._pathData.f.v,M=0,P=1,A=0,C=!0,L=m.segments;if(E<0&&f.v.c)for(m.tLength<Math.abs(E)&&(E=-Math.abs(E)%m.tLength),M=L.length-1,S=L[M].bezierData.points,P=S.length-1;E<0;)E+=S[P].partialLength,(P-=1)<0&&(M-=1,S=L[M].bezierData.points,P=S.length-1);S=L[M].bezierData.points,T=S[P-1],w=S[P];var k,R,I=w.partialLength}s=p.length,i=0,n=0;var D,F,N,B,j,U=1.2*t.s*.714,z=!0;if(B=a.length,e)for(N=0;N<B;N+=1)F=a[N].s,F.getValue(!0);var G,V,X,W,H,q,Y,Z,Q,K,J,$,tt,et=-1,it=E,nt=M,rt=P,st=-1,ot=0,at="",ht=this.defaultPropsArray;for(r=0;r<s;r+=1){if(l.reset(),H=1,p[r].n)i=0,n+=t.yOffset,n+=z?1:0,E=it,z=!1,ot=0,this._hasMaskedPath&&(M=nt,P=rt,S=L[M].bezierData.points,T=S[P-1],w=S[P],I=w.partialLength,A=0),tt=K=$=at="",ht=this.defaultPropsArray;else{if(this._hasMaskedPath){if(st!==p[r].line){switch(t.j){case 1:E+=x-t.lineWidths[p[r].line];break;case 2:E+=(x-t.lineWidths[p[r].line])/2}st=p[r].line}et!==p[r].ind&&(p[et]&&(E+=p[et].extra),E+=p[r].an/2,et=p[r].ind),E+=o[0]*p[r].an/200;var lt=0;for(N=0;N<B;N+=1)D=a[N].a,"p"in D&&(F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),G.length?lt+=D.p.v[0]*G[0]:lt+=D.p.v[0]*G),"a"in D&&(F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),G.length?lt+=D.a.v[0]*G[0]:lt+=D.a.v[0]*G);for(C=!0;C;)A+I>=E+lt||!S?(k=(E+lt-A)/w.partialLength,X=T.point[0]+(w.point[0]-T.point[0])*k,W=T.point[1]+(w.point[1]-T.point[1])*k,l.translate(-o[0]*p[r].an/200,-o[1]*U/100),C=!1):S&&(A+=w.partialLength,P+=1,P>=S.length&&(P=0,M+=1,L[M]?S=L[M].bezierData.points:f.v.c?(P=0,M=0,S=L[M].bezierData.points):(A-=w.partialLength,S=null)),S&&(T=w,w=S[P],I=w.partialLength));V=p[r].an/2-p[r].add,l.translate(-V,0,0)}else V=p[r].an/2-p[r].add,l.translate(-V,0,0),l.translate(-o[0]*p[r].an/200,-o[1]*U/100,0);for(ot+=p[r].l/2,N=0;N<B;N+=1)"t"in(D=a[N].a)&&(F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),this._hasMaskedPath?G.length?E+=D.t*G[0]:E+=D.t*G:G.length?i+=D.t.v*G[0]:i+=D.t.v*G);for(ot+=p[r].l/2,t.strokeWidthAnim&&(Y=t.sw||0),t.strokeColorAnim&&(q=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(Z=[t.fc[0],t.fc[1],t.fc[2]]),N=0;N<B;N+=1)"a"in(D=a[N].a)&&(F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),G.length?l.translate(-D.a.v[0]*G[0],-D.a.v[1]*G[1],D.a.v[2]*G[2]):l.translate(-D.a.v[0]*G,-D.a.v[1]*G,D.a.v[2]*G));for(N=0;N<B;N+=1)"s"in(D=a[N].a)&&(F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),G.length?l.scale(1+(D.s.v[0]-1)*G[0],1+(D.s.v[1]-1)*G[1],1):l.scale(1+(D.s.v[0]-1)*G,1+(D.s.v[1]-1)*G,1));for(N=0;N<B;N+=1){if(D=a[N].a,F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),"sk"in D&&(G.length?l.skewFromAxis(-D.sk.v*G[0],D.sa.v*G[1]):l.skewFromAxis(-D.sk.v*G,D.sa.v*G)),"r"in D&&(G.length?l.rotateZ(-D.r.v*G[2]):l.rotateZ(-D.r.v*G)),"ry"in D&&(G.length?l.rotateY(D.ry.v*G[1]):l.rotateY(D.ry.v*G)),"rx"in D&&(G.length?l.rotateX(D.rx.v*G[0]):l.rotateX(D.rx.v*G)),"o"in D&&(G.length?H+=(D.o.v*G[0]-H)*G[0]:H+=(D.o.v*G-H)*G),t.strokeWidthAnim&&"sw"in D&&(G.length?Y+=D.sw.v*G[0]:Y+=D.sw.v*G),t.strokeColorAnim&&"sc"in D)for(Q=0;Q<3;Q+=1)G.length?q[Q]=q[Q]+(D.sc.v[Q]-q[Q])*G[0]:q[Q]=q[Q]+(D.sc.v[Q]-q[Q])*G;if(t.fillColorAnim&&t.fc){if("fc"in D)for(Q=0;Q<3;Q+=1)G.length?Z[Q]=Z[Q]+(D.fc.v[Q]-Z[Q])*G[0]:Z[Q]=Z[Q]+(D.fc.v[Q]-Z[Q])*G;"fh"in D&&(Z=G.length?y(Z,D.fh.v*G[0]):y(Z,D.fh.v*G)),"fs"in D&&(Z=G.length?v(Z,D.fs.v*G[0]):v(Z,D.fs.v*G)),"fb"in D&&(Z=G.length?g(Z,D.fb.v*G[0]):g(Z,D.fb.v*G))}}for(N=0;N<B;N+=1)"p"in(D=a[N].a)&&(F=a[N].s,G=F.getMult(p[r].anIndexes[N],h.a[N].s.totalChars),this._hasMaskedPath?G.length?l.translate(0,D.p.v[1]*G[0],-D.p.v[2]*G[1]):l.translate(0,D.p.v[1]*G,-D.p.v[2]*G):G.length?l.translate(D.p.v[0]*G[0],D.p.v[1]*G[1],-D.p.v[2]*G[2]):l.translate(D.p.v[0]*G,D.p.v[1]*G,-D.p.v[2]*G));if(t.strokeWidthAnim&&(K=Y<0?0:Y),t.strokeColorAnim&&(J="rgb("+Math.round(255*q[0])+","+Math.round(255*q[1])+","+Math.round(255*q[2])+")"),t.fillColorAnim&&t.fc&&($="rgb("+Math.round(255*Z[0])+","+Math.round(255*Z[1])+","+Math.round(255*Z[2])+")"),this._hasMaskedPath){if(l.translate(0,-t.ls),l.translate(0,o[1]*U/100+n,0),h.p.p){R=(w.point[1]-T.point[1])/(w.point[0]-T.point[0]);var ut=180*Math.atan(R)/Math.PI;w.point[0]<T.point[0]&&(ut+=180),l.rotate(-ut*Math.PI/180)}l.translate(X,W,0),E-=o[0]*p[r].an/200,p[r+1]&&et!==p[r+1].ind&&(E+=p[r].an/2,E+=t.tr/1e3*t.s)}else{switch(l.translate(i,n,0),t.ps&&l.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:l.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[p[r].line]),0,0);break;case 2:l.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[p[r].line])/2,0,0)}l.translate(0,-t.ls),l.translate(V,0,0),l.translate(o[0]*p[r].an/200,o[1]*U/100,0),i+=p[r].l+t.tr/1e3*t.s}"html"===u?at=l.toCSS():"svg"===u?at=l.to2dCSS():ht=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],tt=H}c<=r?(j=new O(tt,K,J,$,at,ht),this.renderedLetters.push(j),c+=1,this.lettersChangedFlag=!0):(j=this.renderedLetters[r],this.lettersChangedFlag=j.update(tt,K,J,$,at,ht)||this.lettersChangedFlag)}}},C.prototype.getValue=function(){if(this._elem.globalData.frameId!==this._frameId){this._frameId=this._elem.globalData.frameId;var t,e=this._dynamicProperties.length;for(this.mdf=!1,t=0;t<e;t+=1)this._dynamicProperties[t].getValue(),this.mdf=this._dynamicProperties[t].mdf||this.mdf}},C.prototype.mHelper=new b,C.prototype.defaultPropsArray=[],O.prototype.update=function(t,e,i,n,r,s){this.mdf.o=!1,this.mdf.sw=!1,this.mdf.sc=!1,this.mdf.fc=!1,this.mdf.m=!1,this.mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this.mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this.mdf.sw=!0,o=!0),this.sc!==i&&(this.sc=i,this.mdf.sc=!0,o=!0),this.fc!==n&&(this.fc=n,this.mdf.fc=!0,o=!0),this.m!==r&&(this.m=r,this.mdf.m=!0,o=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this.mdf.p=!0,o=!0),o},L.prototype.setCurrentData=function(t){var e=this.currentData;e.ascent=t.ascent,e.boxWidth=t.boxWidth?t.boxWidth:e.boxWidth,e.f=t.f,e.fStyle=t.fStyle,e.fWeight=t.fWeight,e.fc=t.fc,e.j=t.j,e.justifyOffset=t.justifyOffset,e.l=t.l,e.lh=t.lh,e.lineWidths=t.lineWidths,e.ls=t.ls,e.of=t.of,e.s=t.s,e.sc=t.sc,e.sw=t.sw,e.t=t.t,e.tr=t.tr,e.fillColorAnim=t.fillColorAnim||e.fillColorAnim,e.strokeColorAnim=t.strokeColorAnim||e.strokeColorAnim,e.strokeWidthAnim=t.strokeWidthAnim||e.strokeWidthAnim,e.yOffset=t.yOffset,e.__complete=!1},L.prototype.searchProperty=function(){return this.kf=this.data.d.k.length>1,this.kf},L.prototype.getValue=function(){this.mdf=!1;var t=this.elem.globalData.frameId;if(t!==this._frameId&&this.kf||this.firstFrame){for(var e,i=this.data.d.k,n=0,r=i.length;n<=r-1&&(e=i[n].s,!(n===r-1||i[n+1].t>t));)n+=1;this.keysIndex!==n&&(e.__complete||this.completeTextData(e),this.setCurrentData(e),this.mdf=!this.firstFrame,this.pv=this.v=this.currentData.t,this.keysIndex=n),this._frameId=t}},L.prototype.completeTextData=function(t){t.__complete=!0;var e,i,n,r,s,o,a,h=this.elem.globalData.fontManager,l=this.data,u=[],c=0,p=l.m.g,f=0,d=0,m=0,v=[],g=0,y=0,_=h.getFontByName(t.f),b=0,x=_.fStyle.split(" "),w="normal",T="normal";i=x.length;for(e=0;e<i;e+=1)switch(x[e].toLowerCase()){case"italic":T="italic";break;case"bold":w="700";break;case"black":w="900";break;case"medium":w="500";break;case"regular":case"normal":w="400";case"light":case"thin":w="200"}t.fWeight=w,t.fStyle=T,i=t.t.length;var S=t.tr/1e3*t.s;if(t.sz){var E=t.sz[0],M=-1;for(e=0;e<i;e+=1)n=!1," "===t.t.charAt(e)?M=e:13===t.t.charCodeAt(e)&&(g=0,n=!0),h.chars?(a=h.getCharData(t.t.charAt(e),_.fStyle,_.fFamily),b=n?0:a.w*t.s/100):b=h.measureText(t.t.charAt(e),t.f,t.s),g+b>E&&" "!==t.t.charAt(e)?(-1===M?i+=1:e=M,t.t=t.t.substr(0,e)+"\r"+t.t.substr(e===M?e+1:e),M=-1,g=0):(g+=b,g+=S);i=t.t.length}g=-S,b=0;var P,A=0;for(e=0;e<i;e+=1)if(n=!1,P=t.t.charAt(e)," "===P?r=" ":13===P.charCodeAt(0)?(A=0,v.push(g),y=g>y?g:y,g=-2*S,r="",n=!0,m+=1):r=t.t.charAt(e),h.chars?(a=h.getCharData(P,_.fStyle,h.getFontByName(t.f).fFamily),b=n?0:a.w*t.s/100):b=h.measureText(r,t.f,t.s)," "===P?A+=b+S:(g+=b+S+A,A=0),u.push({l:b,an:b,add:f,n:n,anIndexes:[],val:r,line:m}),2==p){if(f+=b,""==r||" "==r||e==i-1){for(""!=r&&" "!=r||(f-=b);d<=e;)u[d].an=f,u[d].ind=c,u[d].extra=b,d+=1;c+=1,f=0}}else if(3==p){if(f+=b,""==r||e==i-1){for(""==r&&(f-=b);d<=e;)u[d].an=f,u[d].ind=c,u[d].extra=b,d+=1;f=0,c+=1}}else u[c].ind=c,u[c].extra=0,c+=1;if(t.l=u,y=g>y?g:y,v.push(g),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=y,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=v;var C,O,L=l.a;o=L.length;var k,R,I=[];for(s=0;s<o;s+=1){for(C=L[s],C.a.sc&&(t.strokeColorAnim=!0),C.a.sw&&(t.strokeWidthAnim=!0),(C.a.fc||C.a.fh||C.a.fs||C.a.fb)&&(t.fillColorAnim=!0),R=0,k=C.s.b,e=0;e<i;e+=1)O=u[e],O.anIndexes[s]=R,(1==k&&""!=O.val||2==k&&""!=O.val&&" "!=O.val||3==k&&(O.n||" "==O.val||e==i-1)||4==k&&(O.n||e==i-1))&&(1===C.s.rn&&I.push(R),R+=1);l.a[s].s.totalChars=R;var D,F=-1;if(1===C.s.rn)for(e=0;e<i;e+=1)O=u[e],F!=O.anIndexes[s]&&(F=O.anIndexes[s],D=I.splice(Math.floor(Math.random()*I.length),1)[0]),O.anIndexes[s]=D}t.yOffset=t.lh||1.2*t.s,t.ls=t.ls||0,t.ascent=_.ascent*t.s/100},L.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var i=this.data.d.k[e].s;i.__complete=!1,i.t=t.t,this.keysIndex=-1,this.firstFrame=!0,this.getValue()};var Vt=function(){function t(t){return t.concat(Array.apply(null,{length:t.length}))}return{double:t}}(),Xt=function(){function t(){var t;return n?(n-=1,t=s[n]):t=[.1,.1],t}function e(t){n===r&&(s=Vt.double(s),r*=2),s[n]=t,n+=1}var i={newPoint:t,release:e},n=0,r=8,s=Array.apply(null,{length:r});return i}(),Wt=function(){function t(){var t;return s?(s-=1,t=a[s]):t=new T,t}function e(t){s===o&&(a=Vt.double(a),o*=2);var e,i=t._length;for(e=0;e<i;e+=1)Xt.release(t.v[e]),Xt.release(t.i[e]),Xt.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1,a[s]=t,s+=1}function i(t,i){for(;i--;)e(t[i])}function n(e,i){var n,r=void 0===e._length?e.v.length:e._length,s=t();s.setLength(r),s.c=e.c;var o;for(n=0;n<r;n+=1)i?(o=i.applyToPointArray(e.v[n][0],e.v[n][1],0,2),s.setXYAt(o[0],o[1],"v",n),Xt.release(o),o=i.applyToPointArray(e.o[n][0],e.o[n][1],0,2),s.setXYAt(o[0],o[1],"o",n),Xt.release(o),o=i.applyToPointArray(e.i[n][0],e.i[n][1],0,2),s.setXYAt(o[0],o[1],"i",n),Xt.release(o)):s.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],n);return s}var r={clone:n,newShape:t,release:e,releaseArray:i},s=0,o=4,a=Array.apply(null,{length:o});return r}(),Ht=function(){function t(){var t;return r?(r-=1,t=o[r]):t=new A,t}function e(t){var e,i=t._length;for(e=0;e<i;e+=1)Wt.release(t.shapes[e]);t._length=0,r===s&&(o=Vt.double(o),s*=2),o[r]=t,r+=1}function i(t,i){e(t),r===s&&(o=Vt.double(o),s*=2),o[r]=t,r+=1}var n={newShapeCollection:t,release:e,clone:i},r=0,s=4,o=Array.apply(null,{length:s});return n}();k.prototype.checkLayers=function(t){var e,i,n=this.layers.length;for(this.completeLayers=!0,e=n-1;e>=0;e--)this.elements[e]||(i=this.layers[e],i.ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},k.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 13:return this.createCamera(t);case 99:return null}return this.createBase(t)},k.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},k.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},k.prototype.includeLayers=function(t){this.completeLayers=!1;var e,i,n=t.length,r=this.layers.length;for(e=0;e<n;e+=1)for(i=0;i<r;){if(this.layers[i].id==t[e].id){this.layers[i]=t[e];break}i+=1}},k.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},k.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},k.prototype.buildElementParenting=function(t,e,i){i=i||[];for(var n=this.elements,r=this.layers,s=0,o=r.length;s<o;)r[s].ind==e&&(n[s]&&!0!==n[s]?void 0!==r[s].parent?(i.push(n[s]),n[s]._isParent=!0,this.buildElementParenting(t,r[s].parent,i)):(i.push(n[s]),n[s]._isParent=!0,t.setHierarchy(i)):(this.buildItem(s),this.addPendingElement(t))),s+=1},k.prototype.addPendingElement=function(t){this.pendingElements.push(t)},w(k,R),R.prototype.createBase=function(t){return new F(t,this.layerElement,this.globalData,this)},R.prototype.createShape=function(t){return new N(t,this.layerElement,this.globalData,this)},R.prototype.createText=function(t){return new j(t,this.layerElement,this.globalData,this)},R.prototype.createImage=function(t){return new Z(t,this.layerElement,this.globalData,this)},R.prototype.createComp=function(t){return new Y(t,this.layerElement,this.globalData,this)},R.prototype.createSolid=function(t){return new Q(t,this.layerElement,this.globalData,this)},R.prototype.configAnimation=function(t){this.layerElement=document.createElementNS(bt,"svg"),this.layerElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.layerElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.layerElement.setAttribute("width",t.w),this.layerElement.setAttribute("height",t.h),this.layerElement.style.width="100%",this.layerElement.style.height="100%"),this.renderConfig.className&&this.layerElement.setAttribute("class",this.renderConfig.className),this.layerElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.layerElement);var e=document.createElementNS(bt,"defs");this.globalData.defs=e,this.layerElement.appendChild(e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.frameId=0,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h},this.data=t,this.globalData.frameRate=t.fr;var i=document.createElementNS(bt,"clipPath"),n=document.createElementNS(bt,"rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var r="animationMask_"+f(10);i.setAttribute("id",r),i.appendChild(n);var s=document.createElementNS(bt,"g");s.setAttribute("clip-path","url("+xt+"#"+r+")"),this.layerElement.appendChild(s),e.appendChild(i),this.layerElement=s,this.layers=t.layers,this.globalData.fontManager=new Ft,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.elements=Array.apply(null,{length:t.layers.length})},R.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},R.prototype.updateContainerSize=function(){},R.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);e[t]=i,yt&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?i.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(i)))}},R.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},R.prototype.renderFrame=function(t){if(this.renderedFrame!=t&&!this.destroyed){null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t;var e,i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=i-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},R.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var n,r=0;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(i,n):this.layerElement.appendChild(i)}},R.prototype.hide=function(){this.layerElement.style.display="none"},R.prototype.show=function(){this.layerElement.style.display="block"},R.prototype.searchExtraCompositions=function(t){var e,i=t.length,n=document.createElementNS(bt,"g");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},I.prototype.getMaskProperty=function(t){return this.viewData[t].prop},I.prototype.prepareFrame=function(){var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue()},I.prototype.renderFrame=function(t){var e,i=this.masksProperties.length;for(e=0;e<i;e++)if((this.viewData[e].prop.mdf||this.firstFrame)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op.mdf||this.firstFrame)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp.mdf||this.firstFrame)&&(this.viewData[e].invRect.setAttribute("x",-t.props[12]),this.viewData[e].invRect.setAttribute("y",-t.props[13])),this.storedData[e].x&&(this.storedData[e].x.mdf||this.firstFrame))){var n=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+xt+"#"+this.storedData[e].filterId+")")),n.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}this.firstFrame=!1},I.prototype.getMaskelement=function(){return this.maskElement},I.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},I.prototype.drawPath=function(t,e,i){var n,r,s=" M"+e.v[0][0]+","+e.v[0][1];for(r=e._length,n=1;n<r;n+=1)s+=" C"+_t(e.o[n-1][0])+","+_t(e.o[n-1][1])+" "+_t(e.i[n][0])+","+_t(e.i[n][1])+" "+_t(e.v[n][0])+","+_t(e.v[n][1]);e.c&&r>1&&(s+=" C"+_t(e.o[n-1][0])+","+_t(e.o[n-1][1])+" "+_t(e.i[0][0])+","+_t(e.i[0][1])+" "+_t(e.v[0][0])+","+_t(e.v[0][1])),i.lastPath!==s&&(i.elem&&(e.c?t.inv?i.elem.setAttribute("d",this.solidPath+s):i.elem.setAttribute("d",s):i.elem.setAttribute("d","")),i.lastPath=s)},I.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},D.prototype.checkMasks=function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},D.prototype.checkParenting=function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent)},D.prototype.prepareFrame=function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isVisible&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!0,this.firstFrame=!0,this.data.hasMask&&(this.maskManager.firstFrame=!0)):!1!==this.isVisible&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!1);var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)(this.isVisible||this._isParent&&"transform"===this.dynamicProperties[e].type)&&(this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.elemMdf=!0,this.globalData.mdf=!0))
;return this.data.hasMask&&this.isVisible&&this.maskManager.prepareFrame(t*this.data.sr),this.currentFrameNum=t*this.data.sr,this.isVisible},D.prototype.globalToLocal=function(t){var e=[];e.push(this.finalTransform);for(var i=!0,n=this.comp;i;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):i=!1;var r,s,o=e.length;for(r=0;r<o;r+=1)s=e[r].mat.applyToPointArray(0,0,0),t=[t[0]-s[0],t[1]-s[1],0];return t},D.prototype.initExpressions=function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?this.layerInterface.shapeInterface=ShapeExpressionInterface.createShapeInterface(this.shapesData,this.itemsData,this.layerInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this))},D.prototype.setBlendMode=function(){var t="";switch(this.data.bm){case 1:t="multiply";break;case 2:t="screen";break;case 3:t="overlay";break;case 4:t="darken";break;case 5:t="lighten";break;case 6:t="color-dodge";break;case 7:t="color-burn";break;case 8:t="hard-light";break;case 9:t="soft-light";break;case 10:t="difference";break;case 11:t="exclusion";break;case 12:t="hue";break;case 13:t="saturation";break;case 14:t="color";break;case 15:t="luminosity"}(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},D.prototype.init=function(){this.data.sr||(this.data.sr=1),this.dynamicProperties=this.dynamicProperties||[],this.data.ef&&(this.effects=new EffectsManager(this.data,this,this.dynamicProperties)),this.hidden=!1,this.firstFrame=!0,this.isVisible=!1,this._isParent=!1,this.currentFrameNum=-99999,this.lastNum=-99999,this.data.ks&&(this.finalTransform={mProp:Nt.getProp(this,this.data.ks,2,null,this.dynamicProperties),matMdf:!1,opMdf:!1,mat:new b,opacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.finalTransform.op=this.finalTransform.mProp.o,this.transform=this.finalTransform.mProp,11!==this.data.ty&&this.createElements(),this.data.hasMask&&this.addMasks(this.data)),this.elemMdf=!1},D.prototype.getType=function(){return this.type},D.prototype.resetHierarchy=function(){this.hierarchy?this.hierarchy.length=0:this.hierarchy=[]},D.prototype.getHierarchy=function(){return this.hierarchy||(this.hierarchy=[]),this.hierarchy},D.prototype.setHierarchy=function(t){this.hierarchy=t},D.prototype.getLayerSize=function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}},D.prototype.hide=function(){},D.prototype.sourceRectAtTime=function(){return{top:0,left:0,width:100,height:100}},D.prototype.mHelper=new b,x(D,F),F.prototype.createElements=function(){this.layerElement=document.createElementNS(bt,"g"),this.transformedElement=this.layerElement,this.data.hasMask&&(this.maskedElement=this.layerElement);var t=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var e=document.createElementNS(bt,"mask");if(e.setAttribute("id",this.layerId),e.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e),!zt.maskType&&1==this.data.td){e.setAttribute("mask-type","luminance");var i=f(10),n=Gt.createFilter(i);this.globalData.defs.appendChild(n),n.appendChild(Gt.createAlphaToLuminanceFilter());var r=document.createElementNS(bt,"g");r.appendChild(this.layerElement),t=r,e.appendChild(r),r.setAttribute("filter","url("+xt+"#"+i+")")}}else if(2==this.data.td){var s=document.createElementNS(bt,"mask");s.setAttribute("id",this.layerId),s.setAttribute("mask-type","alpha");var o=document.createElementNS(bt,"g");s.appendChild(o);var i=f(10),n=Gt.createFilter(i),a=document.createElementNS(bt,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1"),n.appendChild(a),this.globalData.defs.appendChild(n);var h=document.createElementNS(bt,"rect");if(h.setAttribute("width",this.comp.data.w),h.setAttribute("height",this.comp.data.h),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("fill","#ffffff"),h.setAttribute("opacity","0"),o.setAttribute("filter","url("+xt+"#"+i+")"),o.appendChild(h),o.appendChild(this.layerElement),t=o,!zt.maskType){s.setAttribute("mask-type","luminance"),n.appendChild(Gt.createAlphaToLuminanceFilter());var r=document.createElementNS(bt,"g");o.appendChild(h),r.appendChild(this.layerElement),t=r,o.appendChild(r)}this.globalData.defs.appendChild(s)}}else(this.data.hasMask||this.data.tt)&&this.data.tt?(this.matteElement=document.createElementNS(bt,"g"),this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(!this.data.ln&&!this.data.cl||4!==this.data.ty&&0!==this.data.ty||(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)),0===this.data.ty){var l=document.createElementNS(bt,"clipPath"),u=document.createElementNS(bt,"path");u.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var c="cp_"+f(8);if(l.setAttribute("id",c),l.appendChild(u),this.globalData.defs.appendChild(l),this.checkMasks()){var p=document.createElementNS(bt,"g");p.setAttribute("clip-path","url("+xt+"#"+c+")"),p.appendChild(this.layerElement),this.transformedElement=p,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+xt+"#"+c+")")}0!==this.data.bm&&this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.data.ef&&(this.effectsManager=new q(this)),this.checkParenting()},F.prototype.setBlendMode=D.prototype.setBlendMode,F.prototype.renderFrame=function(t){if(3===this.data.ty||this.data.hd||!this.isVisible)return!1;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.firstFrame||this.finalTransform.op.mdf,this.finalTransform.matMdf=this.firstFrame||this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var e,i=this.finalTransform.mat;if(this.hierarchy){var n=0,r=this.hierarchy.length;if(!this.finalTransform.matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp.mdf){this.finalTransform.matMdf=!0;break}n+=1}if(this.finalTransform.matMdf)for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else this.isVisible&&(i=this.finalTransform.mProp.v);return this.finalTransform.matMdf&&this.layerElement&&this.transformedElement.setAttribute("transform",i.to2dCSS()),this.finalTransform.opMdf&&this.layerElement&&(this.finalTransform.op.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.hidden&&this.isTransparent&&(this.isTransparent=!1,this.show()),this.transformedElement.setAttribute("opacity",this.finalTransform.op.v)),this.data.hasMask&&this.maskManager.renderFrame(i),this.effectsManager&&this.effectsManager.renderFrame(this.firstFrame),this.isVisible},F.prototype.destroy=function(){this.layerElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&this.maskManager.destroy()},F.prototype.getBaseElement=function(){return this.baseElement},F.prototype.addMasks=function(t){this.maskManager=new I(t,this,this.globalData)},F.prototype.setMatte=function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+xt+"#"+t+")")},F.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},F.prototype.show=function(){this.isVisible&&!this.isTransparent&&(this.hidden=!1,this.layerElement.style.display="block")},x(F,N),N.prototype.identityMatrix=new b,N.prototype.lcEnum={1:"butt",2:"round",3:"square"},N.prototype.ljEnum={1:"miter",2:"round",3:"butt"},N.prototype.searchProcessedElement=function(t){for(var e=this.processedElements.length;e;)if(e-=1,this.processedElements[e].elem===t)return this.processedElements[e].pos;return 0},N.prototype.addProcessedElement=function(t,e){for(var i=this.processedElements.length;i;)if(i-=1,this.processedElements[i].elem===t){this.processedElements[i].pos=e;break}0===i&&this.processedElements.push({elem:t,pos:e})},N.prototype.buildExpressionInterface=function(){},N.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0),this.data.hd&&!this.data.td||r(this.layerElement)},N.prototype.setGradientData=function(t,e,i){var n,r="gr_"+f(10);n=1===e.t?document.createElementNS(bt,"linearGradient"):document.createElementNS(bt,"radialGradient"),n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var s,o,a,h=[];for(a=4*e.g.p,o=0;o<a;o+=4)s=document.createElementNS(bt,"stop"),n.appendChild(s),h.push(s);t.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+r+")"),this.globalData.defs.appendChild(n),i.gf=n,i.cst=h},N.prototype.setGradientOpacity=function(t,e,i){if(t.g.k.k[0].s&&t.g.k.k[0].s.length>4*t.g.p||t.g.k.k.length>4*t.g.p){var n,r,s,o,a=document.createElementNS(bt,"mask"),h=document.createElementNS(bt,"path");a.appendChild(h);var l="op_"+f(10),u="mk_"+f(10);a.setAttribute("id",u),n=1===t.t?document.createElementNS(bt,"linearGradient"):document.createElementNS(bt,"radialGradient"),n.setAttribute("id",l),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse"),o=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var c=[];for(s=4*t.g.p;s<o;s+=2)r=document.createElementNS(bt,"stop"),r.setAttribute("stop-color","rgb(255,255,255)"),n.appendChild(r),c.push(r);return h.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+l+")"),this.globalData.defs.appendChild(n),this.globalData.defs.appendChild(a),e.of=n,e.ost=c,i.msElem=h,u}},N.prototype.createStyleElement=function(t,e,i){var n={},r={data:t,type:t.ty,d:"",ld:"",lvl:e,mdf:!1,closed:!1},s=document.createElementNS(bt,"path");if(n.o=Nt.getProp(this,t.o,0,.01,i),("st"==t.ty||"gs"==t.ty)&&(s.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round"),s.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round"),s.setAttribute("fill-opacity","0"),1==t.lj&&s.setAttribute("stroke-miterlimit",t.ml),n.w=Nt.getProp(this,t.w,0,null,i),t.d)){var o=Nt.getDashProp(this,t.d,"svg",i);o.k||(s.setAttribute("stroke-dasharray",o.dasharray),s.setAttribute("stroke-dashoffset",o.dashoffset)),n.d=o}if("fl"==t.ty||"st"==t.ty)n.c=Nt.getProp(this,t.c,1,255,i);else{n.g=Nt.getGradientProp(this,t.g,i),2==t.t&&(n.h=Nt.getProp(this,t.h,0,.01,i),n.a=Nt.getProp(this,t.a,0,Ot,i)),n.s=Nt.getProp(this,t.s,1,null,i),n.e=Nt.getProp(this,t.e,1,null,i),this.setGradientData(s,t,n,r);var a=this.setGradientOpacity(t,n,r);a&&s.setAttribute("mask","url(#"+a+")")}return n.elem=s,2===t.r&&s.setAttribute("fill-rule","evenodd"),t.ln&&s.setAttribute("id",t.ln),t.cl&&s.setAttribute("class",t.cl),r.pElem=s,this.stylesList.push(r),n.style=r,n},N.prototype.createGroupElement=function(t){var e={it:[],prevViewData:[]},i=document.createElementNS(bt,"g");return e.gr=i,t.ln&&e.gr.setAttribute("id",t.ln),e},N.prototype.createTransformElement=function(t,e){return{transform:{op:Nt.getProp(this,t.o,0,.01,e),mProps:Nt.getProp(this,t,2,null,e)},elements:[]}},N.prototype.createShapeElement=function(t,e,i,n){var r={elements:[],caches:[],styles:[],transformers:e,lStr:""},s=4;return"rc"==t.ty?s=5:"el"==t.ty?s=6:"sr"==t.ty&&(s=7),r.sh=Bt.getShapeProp(this,t,s,n),r.lvl=i,this.shapes.push(r.sh),this.addShapeToModifiers(r),r};N.prototype.setElementStyles=function(){var t,e=this.stylesList.length,i=[];for(t=0;t<e;t+=1)this.stylesList[t].closed||i.push(this.stylesList[t]);return i},N.prototype.reloadShapes=function(){this.firstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0);var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},N.prototype.searchShapes=function(t,e,i,n,r,s,o,a){var h,l,u,c,p,f,d=[].concat(o),m=t.length-1,v=[],g=[];for(h=m;h>=0;h-=1){if(f=this.searchProcessedElement(t[h]),f?e[h]=i[f-1]:t[h]._render=a,"fl"==t[h].ty||"st"==t[h].ty||"gf"==t[h].ty||"gs"==t[h].ty)f?e[h].style.closed=!1:e[h]=this.createStyleElement(t[h],s,r),t[h]._render&&n.appendChild(e[h].elem),v.push(e[h].style);else if("gr"==t[h].ty){if(f)for(u=e[h].it.length,l=0;l<u;l+=1)e[h].prevViewData[l]=e[h].it[l];else e[h]=this.createGroupElement(t[h]);this.searchShapes(t[h].it,e[h].it,e[h].prevViewData,e[h].gr,r,s+1,d,a),t[h]._render&&n.appendChild(e[h].gr)}else"tr"==t[h].ty?(f||(e[h]=this.createTransformElement(t[h],r)),c=e[h].transform,d.push(c)):"sh"==t[h].ty||"rc"==t[h].ty||"el"==t[h].ty||"sr"==t[h].ty?(f||(e[h]=this.createShapeElement(t[h],d,s,r)),e[h].elements=this.setElementStyles()):"tm"==t[h].ty||"rd"==t[h].ty||"ms"==t[h].ty?(f?(p=e[h],p.closed=!1):(p=jt.getModifier(t[h].ty),p.init(this,t[h],r),e[h]=p,this.shapeModifiers.push(p)),g.push(p)):"rp"==t[h].ty&&(f?(p=e[h],p.closed=!0):(p=jt.getModifier(t[h].ty),e[h]=p,p.init(this,t,h,e,r),this.shapeModifiers.push(p),a=!1),g.push(p));this.addProcessedElement(t[h],h+1)}for(m=v.length,h=0;h<m;h+=1)v[h].closed=!0;for(m=g.length,h=0;h<m;h+=1)g[h].closed=!0},N.prototype.addShapeToModifiers=function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},N.prototype.renderModifiers=function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].reset();for(e=this.shapeModifiers.length,t=e-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this.firstFrame)}},N.prototype.renderFrame=function(t){if(!1===this._parent.renderFrame.call(this,t))return void this.hide();this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers();var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].d="",this.stylesList[e].mdf=!1;for(this.renderShape(this.shapesData,this.itemsData,null),e=0;e<i;e+=1)"0"===this.stylesList[e].ld&&(this.stylesList[e].ld="1",this.stylesList[e].pElem.style.display="block"),(this.stylesList[e].mdf||this.firstFrame)&&(this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].msElem&&this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d));this.firstFrame&&(this.firstFrame=!1)},N.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";var t,e=this.stylesList.length;for(t=e-1;t>=0;t-=1)"0"!==this.stylesList[t].ld&&(this.stylesList[t].ld="0",this.stylesList[t].pElem.style.display="none",this.stylesList[t].pElem.parentNode&&(this.stylesList[t].parent=this.stylesList[t].pElem.parentNode));this.hidden=!0}},N.prototype.renderShape=function(t,e,i){var n,r,s=t.length-1;for(n=s;n>=0;n-=1)r=t[n].ty,"tr"==r?((this.firstFrame||e[n].transform.op.mdf&&i)&&i.setAttribute("opacity",e[n].transform.op.v),(this.firstFrame||e[n].transform.mProps.mdf&&i)&&i.setAttribute("transform",e[n].transform.mProps.v.to2dCSS())):"sh"==r||"el"==r||"rc"==r||"sr"==r?this.renderPath(t[n],e[n]):"fl"==r?this.renderFill(t[n],e[n]):"gf"==r?this.renderGradient(t[n],e[n]):"gs"==r?(this.renderGradient(t[n],e[n]),this.renderStroke(t[n],e[n])):"st"==r?this.renderStroke(t[n],e[n]):"gr"==r&&this.renderShape(t[n].it,e[n].it,e[n].gr)},N.prototype.buildShapeString=function(t,e,i,n){var r,s="";for(r=1;r<e;r+=1)1===r&&(s+=" M"+n.applyToPointStringified(t.v[0][0],t.v[0][1])),s+=" C"+n.applyToPointStringified(t.o[r-1][0],t.o[r-1][1])+" "+n.applyToPointStringified(t.i[r][0],t.i[r][1])+" "+n.applyToPointStringified(t.v[r][0],t.v[r][1]);return 1===e&&(s+=" M"+n.applyToPointStringified(t.v[0][0],t.v[0][1])),i&&e&&(s+=" C"+n.applyToPointStringified(t.o[r-1][0],t.o[r-1][1])+" "+n.applyToPointStringified(t.i[0][0],t.i[0][1])+" "+n.applyToPointStringified(t.v[0][0],t.v[0][1]),s+="z"),s},N.prototype.renderPath=function(t,e){var i,n,r,s,o,a,h=e.elements.length,l=e.lvl;if(t._render)for(a=0;a<h;a+=1)if(e.elements[a].data._render){s=e.sh.mdf||this.firstFrame,r="M0 0";var u=e.sh.paths;if(n=u._length,e.elements[a].lvl<l){for(var c,p=this.mHelper.reset(),f=l-e.elements[a].lvl,d=e.transformers.length-1;f>0;)s=e.transformers[d].mProps.mdf||s,c=e.transformers[d].mProps.v.props,p.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]),f--,d--;if(s){for(i=0;i<n;i+=1)(o=u.shapes[i])&&o._length&&(r+=this.buildShapeString(o,o._length,o.c,p));e.caches[a]=r}else r=e.caches[a]}else if(s){for(i=0;i<n;i+=1)(o=u.shapes[i])&&o._length&&(r+=this.buildShapeString(o,o._length,o.c,this.identityMatrix));e.caches[a]=r}else r=e.caches[a];e.elements[a].d+=r,e.elements[a].mdf=s||e.elements[a].mdf}else e.elements[a].mdf=!0},N.prototype.renderFill=function(t,e){var i=e.style;(e.c.mdf||this.firstFrame)&&i.pElem.setAttribute("fill","rgb("+Mt(e.c.v[0])+","+Mt(e.c.v[1])+","+Mt(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&i.pElem.setAttribute("fill-opacity",e.o.v)},N.prototype.renderGradient=function(t,e){var i=e.gf,n=e.of,r=e.s.v,s=e.e.v;if(e.o.mdf||this.firstFrame){var o="gf"===t.ty?"fill-opacity":"stroke-opacity";e.elem.setAttribute(o,e.o.v)}if(e.s.mdf||this.firstFrame){var a=1===t.t?"x1":"cx",h="x1"===a?"y1":"cy";i.setAttribute(a,r[0]),i.setAttribute(h,r[1]),n&&(n.setAttribute(a,r[0]),n.setAttribute(h,r[1]))}var l,u,c,p;if(e.g.cmdf||this.firstFrame){l=e.cst;var f=e.g.c;for(c=l.length,u=0;u<c;u+=1)p=l[u],p.setAttribute("offset",f[4*u]+"%"),p.setAttribute("stop-color","rgb("+f[4*u+1]+","+f[4*u+2]+","+f[4*u+3]+")")}if(n&&(e.g.omdf||this.firstFrame)){l=e.ost;var d=e.g.o;for(c=l.length,u=0;u<c;u+=1)p=l[u],p.setAttribute("offset",d[2*u]+"%"),p.setAttribute("stop-opacity",d[2*u+1])}if(1===t.t)(e.e.mdf||this.firstFrame)&&(i.setAttribute("x2",s[0]),i.setAttribute("y2",s[1]),n&&(n.setAttribute("x2",s[0]),n.setAttribute("y2",s[1])));else{var m;if((e.s.mdf||e.e.mdf||this.firstFrame)&&(m=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2)),i.setAttribute("r",m),n&&n.setAttribute("r",m)),e.e.mdf||e.h.mdf||e.a.mdf||this.firstFrame){m||(m=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2)));var v=Math.atan2(s[1]-r[1],s[0]-r[0]),g=e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v,y=m*g,_=Math.cos(v+e.a.v)*y+r[0],b=Math.sin(v+e.a.v)*y+r[1];i.setAttribute("fx",_),i.setAttribute("fy",b),n&&(n.setAttribute("fx",_),n.setAttribute("fy",b))}}},N.prototype.renderStroke=function(t,e){var i=e.style,n=e.d;n&&n.k&&(n.mdf||this.firstFrame)&&(i.pElem.setAttribute("stroke-dasharray",n.dasharray),i.pElem.setAttribute("stroke-dashoffset",n.dashoffset)),e.c&&(e.c.mdf||this.firstFrame)&&i.pElem.setAttribute("stroke","rgb("+Mt(e.c.v[0])+","+Mt(e.c.v[1])+","+Mt(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&i.pElem.setAttribute("stroke-opacity",e.o.v),(e.w.mdf||this.firstFrame)&&(i.pElem.setAttribute("stroke-width",e.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",e.w.v))},N.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.shapeData=null,this.itemsData=null,this.parentContainer=null,this.placeholder=null},B.prototype.init=function(){this.lettersChangedFlag=!0,this.dynamicProperties=this.dynamicProperties||[],this.textAnimator=new C(this.data.t,this.renderType,this),this.textProperty=new L(this,this.data.t,this.dynamicProperties),this._parent.init.call(this),this.textAnimator.searchProperties(this.dynamicProperties)},B.prototype.prepareFrame=function(t){this._parent.prepareFrame.call(this,t),(this.textProperty.mdf||this.textProperty.firstFrame)&&(this.buildNewText(),this.textProperty.firstFrame=!1)},B.prototype.createPathShape=function(t,e){var i,n,r=e.length,s="";for(i=0;i<r;i+=1)n=e[i].ks.k,s+=this.buildShapeString(n,n.i.length,!0,t);return s},B.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},B.prototype.applyTextPropertiesToMatrix=function(t,e,i,n,r){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i])/2,0,0)}e.translate(n,r,0)},B.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},B.prototype.buildShapeString=N.prototype.buildShapeString,B.prototype.emptyProp=new O,B.prototype.destroy=function(){this._parent.destroy.call(this._parent)},x(F,j),w(B,j),j.prototype.createElements=function(){this._parent.createElements.call(this),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=document.createElementNS(bt,"text"))},j.prototype.buildNewText=function(){var t,e,i=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:i?i.l.length:0}),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.s);var n=this.globalData.fontManager.getFontByName(i.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var r=i.fWeight,s=i.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",r)}var o=i.l||[],a=this.globalData.fontManager.chars;if(e=o.length){var h,l,u=this.mHelper,c="",p=this.data.singleShape,f=0,d=0,m=!0,v=i.tr/1e3*i.s;if(p&&!a){var g=this.textContainer,y="";switch(i.j){case 1:y="end";break;case 2:y="middle";break;case 2:y="start"}g.setAttribute("text-anchor",y),g.setAttribute("letter-spacing",v);var _=i.t.split(String.fromCharCode(13));e=_.length;var d=i.ps?i.ps[1]+i.ascent:0;for(t=0;t<e;t+=1)h=this.textSpans[t]||document.createElementNS(bt,"tspan"),h.textContent=_[t],h.setAttribute("x",0),h.setAttribute("y",d),h.style.display="inherit",g.appendChild(h),this.textSpans[t]=h,d+=i.lh;this.layerElement.appendChild(g)}else{var b,x,w=this.textSpans.length;for(t=0;t<e;t+=1)a&&p&&0!==t||(h=w>t?this.textSpans[t]:document.createElementNS(bt,a?"path":"text"),w<=t&&(h.setAttribute("stroke-linecap","butt"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=h,this.layerElement.appendChild(h)),h.style.display="inherit"),u.reset(),a?(u.scale(i.s/100,i.s/100),p&&(o[t].n&&(f=-v,d+=i.yOffset,d+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(i,u,o[t].line,f,d),f+=o[t].l||0,f+=v),x=this.globalData.fontManager.getCharData(i.t.charAt(t),n.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),b=x&&x.data||{},l=b.shapes?b.shapes[0].it:[],p?c+=this.createPathShape(u,l):h.setAttribute("d",this.createPathShape(u,l))):(h.textContent=o[t].val,h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));p&&h.setAttribute("d",c)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0}},j.prototype.sourceRectAtTime=function(t){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderLetters(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},j.prototype.renderLetters=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,i=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;e=n.length;var r,s;for(t=0;t<e;t+=1)n[t].n||(r=i[t],s=this.textSpans[t],r.mdf.m&&s.setAttribute("transform",r.m),r.mdf.o&&s.setAttribute("opacity",r.o),r.mdf.sw&&s.setAttribute("stroke-width",r.sw),r.mdf.sc&&s.setAttribute("stroke",r.sc),r.mdf.fc&&s.setAttribute("fill",r.fc))}},j.prototype.renderFrame=function(t){if(!1===this._parent.renderFrame.call(this,t))return void this.hide();this.hidden&&this.show(),this.firstFrame&&(this.firstFrame=!1),this.renderLetters()},U.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},z.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},G.prototype.initialize=function(){var t,e,i,n,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(n=this.elem.maskManager.masksProperties.length,i=0):(i=this.filterManager.effectElements[0].p.v-1,n=i+1),e=document.createElementNS(bt,"g"),e.setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1),i;i<n;i+=1)t=document.createElementNS(bt,"path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var s=document.createElementNS(bt,"mask"),o="stms_"+f(10);s.setAttribute("id",o),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var a=document.createElementNS(bt,"g");a.setAttribute("mask","url("+xt+"#"+o+")"),r[0]&&a.appendChild(r[0]),this.elem.layerElement.appendChild(a),this.masker=s,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(var r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},G.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,i,n,r=this.paths.length;for(e=0;e<r;e+=1)if(i=this.elem.maskManager.viewData[this.paths[e].m],n=this.paths[e].p,(t||this.filterManager.mdf||i.prop.mdf)&&n.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p.mdf||this.filterManager.effectElements[4].p.mdf||this.filterManager.effectElements[7].p.mdf||this.filterManager.effectElements[8].p.mdf||i.prop.mdf){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,a=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,h=n.getTotalLength();s="0 0 0 "+h*o+" ";var l,u=h*(a-o),c=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,p=Math.floor(u/c);for(l=0;l<p;l+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";s+="0 "+10*h+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;n.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p.mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p.mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p.mdf)){var f=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+Mt(255*f[0])+","+Mt(255*f[1])+","+Mt(255*f[2])+")")}},V.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,r=n[0]+" "+i[0]+" "+e[0],s=n[1]+" "+i[1]+" "+e[1],o=n[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",o)}},X.prototype.createFeFunc=function(t,e){var i=document.createElementNS(bt,t);return i.setAttribute("type","table"),e.appendChild(i),i},X.prototype.getTableValue=function(t,e,i,n,r){for(var s,o,a=0,h=Math.min(t,e),l=Math.max(t,e),u=Array.call(null,{length:256}),c=0,p=r-n,f=e-t;a<=256;)s=a/256,o=s<=h?f<0?r:n:s>=l?f<0?n:r:n+p*Math.pow((s-t)/f,1/i),u[c++]=o,a+=256/255;return u.join(" ")},X.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[2].p.mdf||i[3].p.mdf||i[4].p.mdf||i[5].p.mdf||i[6].p.mdf)&&(e=this.getTableValue(i[2].p.v,i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[9].p.mdf||i[10].p.mdf||i[11].p.mdf||i[12].p.mdf||i[13].p.mdf)&&(e=this.getTableValue(i[9].p.v,i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[16].p.mdf||i[17].p.mdf||i[18].p.mdf||i[19].p.mdf||i[20].p.mdf)&&(e=this.getTableValue(i[16].p.v,i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[23].p.mdf||i[24].p.mdf||i[25].p.mdf||i[26].p.mdf||i[27].p.mdf)&&(e=this.getTableValue(i[23].p.v,i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[30].p.mdf||i[31].p.mdf||i[32].p.mdf||i[33].p.mdf||i[34].p.mdf)&&(e=this.getTableValue(i[30].p.v,i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v),this.feFuncA.setAttribute("tableValues",e))}},W.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){if((t||this.filterManager.effectElements[4].p.mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p.mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",kt(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p.mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p.mdf||this.filterManager.effectElements[3].p.mdf){var i=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*Ot,r=i*Math.cos(n),s=i*Math.sin(n);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",s)}}},H.prototype.setElementAsMask=function(t,e){var i=document.createElementNS(bt,"mask");i.setAttribute("id",e.layerId),i.setAttribute("mask-type","alpha"),i.appendChild(e.layerElement),t.setMatte(e.layerId),e.data.hd=!1,t.globalData.defs.appendChild(i)},H.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=0,i=this.elem.comp.elements.length;e<i;)this.elem.comp.elements[e].data.ind===t&&this.setElementAsMask(this.elem,this.elem.comp.elements[e]),e+=1;this.initialized=!0},H.prototype.renderFrame=function(){this.initialized||this.initialize()},q.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},x(F,Y),Y.prototype.hide=function(){if(!this.hidden){this._parent.hide.call(this);var t,e=this.elements.length
;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].hide()}},Y.prototype.prepareFrame=function(t){if(this._parent.prepareFrame.call(this,t),!1!==this.isVisible||this.data.xt){if(this.tm){var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}else this.renderedFrame=t/this.data.sr;var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=0;i<n;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st)}},Y.prototype.renderFrame=function(t){var e,i=this._parent.renderFrame.call(this,t),n=this.layers.length;if(!1===i)return void this.hide();for(this.hidden&&this.show(),e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.firstFrame&&(this.firstFrame=!1)},Y.prototype.setElements=function(t){this.elements=t},Y.prototype.getElements=function(){return this.elements},Y.prototype.destroy=function(){this._parent.destroy.call(this._parent);var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},Y.prototype.checkLayers=R.prototype.checkLayers,Y.prototype.buildItem=R.prototype.buildItem,Y.prototype.buildAllItems=R.prototype.buildAllItems,Y.prototype.buildElementParenting=R.prototype.buildElementParenting,Y.prototype.createItem=R.prototype.createItem,Y.prototype.createImage=R.prototype.createImage,Y.prototype.createComp=R.prototype.createComp,Y.prototype.createSolid=R.prototype.createSolid,Y.prototype.createShape=R.prototype.createShape,Y.prototype.createText=R.prototype.createText,Y.prototype.createBase=R.prototype.createBase,Y.prototype.appendElementInPos=R.prototype.appendElementInPos,Y.prototype.checkPendingElements=R.prototype.checkPendingElements,Y.prototype.addPendingElement=R.prototype.addPendingElement,x(F,Z),Z.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData);this._parent.createElements.call(this),this.innerElem=document.createElementNS(bt,"image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio","xMidYMid slice"),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.maskedElement=this.innerElem,this.layerElement.appendChild(this.innerElem),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},Z.prototype.renderFrame=function(t){if(!1===this._parent.renderFrame.call(this,t))return void this.hide();this.hidden&&this.show(),this.firstFrame&&(this.firstFrame=!1)},Z.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.innerElem=null},x(F,Q),Q.prototype.createElements=function(){this._parent.createElements.call(this);var t=document.createElementNS(bt,"rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t),this.innerElem=t,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},Q.prototype.renderFrame=Z.prototype.renderFrame,Q.prototype.destroy=Z.prototype.destroy;var qt=function(){function e(t){for(var e=0,i=t.target;e<E;)T[e].animation===i&&(T.splice(e,1),e-=1,E-=1,i.isPaused||r()),e+=1}function i(t,e){if(!t)return null;for(var i=0;i<E;){if(T[i].elem==t&&null!==T[i].elem)return T[i].animation;i+=1}var n=new Yt;return s(n,t),n.setData(t,e),n}function n(){P+=1,x()}function r(){0===(P-=1)&&(M=!0)}function s(t,i){t.addEventListener("destroy",e),t.addEventListener("_active",n),t.addEventListener("_idle",r),T.push({elem:i,animation:t}),E+=1}function o(t){var e=new Yt;return s(e,null),e.setParams(t),e}function a(t,e){var i;for(i=0;i<E;i+=1)T[i].animation.setSpeed(t,e)}function h(t,e){var i;for(i=0;i<E;i+=1)T[i].animation.setDirection(t,e)}function l(t){var e;for(e=0;e<E;e+=1)T[e].animation.play(t)}function u(t,e){S=Date.now();var i;for(i=0;i<E;i+=1)T[i].animation.moveFrame(t,e)}function c(e){var i,n=e-S;for(i=0;i<E;i+=1)T[i].animation.advanceTime(n);S=e,M||t.requestAnimationFrame(c)}function p(e){S=e,t.requestAnimationFrame(c)}function f(t){var e;for(e=0;e<E;e+=1)T[e].animation.pause(t)}function d(t,e,i){var n;for(n=0;n<E;n+=1)T[n].animation.goToAndStop(t,e,i)}function m(t){var e;for(e=0;e<E;e+=1)T[e].animation.stop(t)}function v(t){var e;for(e=0;e<E;e+=1)T[e].animation.togglePause(t)}function g(t){var e;for(e=E-1;e>=0;e-=1)T[e].animation.destroy(t)}function y(t,e,n){var r,s=document.getElementsByClassName("bodymovin"),o=s.length;for(r=0;r<o;r+=1)n&&s[r].setAttribute("data-bm-type",n),i(s[r],t);if(e&&0===o){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerHTML="";var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.setAttribute("data-bm-type",n),a.appendChild(h),i(h,t)}}function _(){var t;for(t=0;t<E;t+=1)T[t].animation.resize()}function b(){t.requestAnimationFrame(p)}function x(){M&&(M=!1,t.requestAnimationFrame(p))}var w={},T=[],S=0,E=0,M=!0,P=0;return setTimeout(b,0),w.registerAnimation=i,w.loadAnimation=o,w.setSpeed=a,w.setDirection=h,w.play=l,w.moveFrame=u,w.pause=f,w.stop=m,w.togglePause=v,w.searchAnimations=y,w.resize=_,w.start=b,w.goToAndStop=d,w.destroy=g,w}(),Yt=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.pendingElements=0,this.playCount=0,this.prerenderFramesFlag=!0,this.animationData={},this.layers=[],this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=f(10),this.scaleMode="fit",this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=wt,this.segments=[],this.pendingSegment=!1,this._idle=!0,this.projectInterface=e()};Yt.prototype.setParams=function(t){var e=this;t.context&&(this.context=t.context),(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var i=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(i){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new R(this,t.rendererSettings);break;case"hybrid":case"html":default:this.renderer=new HybridRenderer(this,t.rendererSettings)}if(this.renderer.setProjectInterface(this.projectInterface),this.animType=i,""===t.loop||null===t.loop||(!1===t.loop?this.loop=!1:!0===t.loop?this.loop=!0:this.loop=parseInt(t.loop)),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.prerenderFramesFlag=!("prerender"in t)||t.prerender,this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments,t.animationData)e.configAnimation(t.animationData);else if(t.path){"json"!=t.path.substr(-4)&&("/"!=t.path.substr(-1,1)&&(t.path+="/"),t.path+="data.json");var n=new XMLHttpRequest;-1!=t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.assetsPath=t.assetsPath,this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),n.open("GET",t.path,!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status)e.configAnimation(JSON.parse(n.responseText));else try{var t=JSON.parse(n.responseText);e.configAnimation(t)}catch(t){}}}},Yt.prototype.setData=function(t,e){var i={wrapper:t,animationData:e?"object"==typeof e?e:JSON.parse(e):null},n=t.attributes;i.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",i.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var r=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";""===r||(i.loop="false"!==r&&("true"===r||parseInt(r)));var s=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;i.autoplay="false"!==s,i.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"","false"===(n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"")&&(i.prerender=!1),this.setParams(i)},Yt.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip),this.animationData.tf=this.totalFrames);var e,i,n=this.animationData.layers,r=n.length,s=t.layers,o=s.length;for(i=0;i<o;i+=1)for(e=0;e<r;){if(n[e].id==s[i].id){n[e]=s[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,e=0;e<r;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,Dt.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),yt&&yt.initExpressions(this),this.renderer.renderFrame(null),this.loadNextSegment()},Yt.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.animationData.tf);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=new XMLHttpRequest,n=this,r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,i.open("GET",r,!0),i.send(),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)n.includeLayers(JSON.parse(i.responseText));else try{var t=JSON.parse(i.responseText);n.includeLayers(t)}catch(t){}}},Yt.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.animationData.tf),this.loadNextSegment()},Yt.prototype.configAnimation=function(t){var e=this;this.renderer&&this.renderer.destroyed||(this.animationData=t,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.animationData.tf=this.totalFrames,this.renderer.configAnimation(t),t.assets||(t.assets=[]),t.comps&&(t.assets=t.assets.concat(t.comps),t.comps=null),this.renderer.searchExtraCompositions(t.assets),this.layers=this.animationData.layers,this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.imagePreloader=new Ut,this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(t.assets,function(t){t||e.trigger("loaded_images")}),this.loadSegments(),this.updaFrameModifier(),this.renderer.globalData.fontManager?this.waitForFontsLoaded():(Dt.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()))},Yt.prototype.waitForFontsLoaded=function(){function t(){this.renderer.globalData.fontManager.loaded?(Dt.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()):setTimeout(t.bind(this),20)}return function(){t.bind(this)()}}(),Yt.prototype.addPendingElement=function(){this.pendingElements+=1},Yt.prototype.elementLoaded=function(){this.pendingElements--,this.checkLoaded()},Yt.prototype.checkLoaded=function(){0===this.pendingElements&&(yt&&yt.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.isLoaded=!0,this.gotoFrame(),this.autoplay&&this.play())},Yt.prototype.resize=function(){this.renderer.updateContainerSize()},Yt.prototype.setSubframe=function(t){this.subframeEnabled=!!t},Yt.prototype.gotoFrame=function(){this.subframeEnabled?this.currentFrame=this.currentRawFrame:this.currentFrame=Math.floor(this.currentRawFrame),this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},Yt.prototype.renderFrame=function(){!1!==this.isLoaded&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},Yt.prototype.play=function(t){t&&this.name!=t||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},Yt.prototype.pause=function(t){t&&this.name!=t||!1===this.isPaused&&(this.isPaused=!0,this.pendingSegment||(this._idle=!0,this.trigger("_idle")))},Yt.prototype.togglePause=function(t){t&&this.name!=t||(!0===this.isPaused?this.play():this.pause())},Yt.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.currentFrame=this.currentRawFrame=0,this.playCount=0,this.gotoFrame())},Yt.prototype.goToAndStop=function(t,e,i){i&&this.name!=i||(e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},Yt.prototype.goToAndPlay=function(t,e,i){this.goToAndStop(t,e,i),this.play()},Yt.prototype.advanceTime=function(t){if(this.pendingSegment)return this.pendingSegment=!1,this.adjustSegment(this.segments.shift()),void(this.isPaused&&this.play());!0!==this.isPaused&&!1!==this.isLoaded&&this.setCurrentRawFrameValue(this.currentRawFrame+t*this.frameModifier)},Yt.prototype.updateAnimation=function(t){this.setCurrentRawFrameValue(this.totalFrames*t)},Yt.prototype.moveFrame=function(t,e){e&&this.name!=e||this.setCurrentRawFrameValue(this.currentRawFrame+t)},Yt.prototype.adjustSegment=function(t){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.01)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(0)),this.trigger("segmentStart")},Yt.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t-.01)),this.firstFrame=t,this.totalFrames=e-t,-1!==i&&this.goToAndStop(i,!0)},Yt.prototype.playSegments=function(t,e){if("object"==typeof t[0]){var i,n=t.length;for(i=0;i<n;i+=1)this.segments.push(t[i])}else this.segments.push(t);e&&this.adjustSegment(this.segments.shift()),this.isPaused&&this.play()},Yt.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op-this.animationData.ip+this.animationData.ip*this.frameRate)]),t&&this.adjustSegment(this.segments.shift())},Yt.prototype.checkSegments=function(){this.segments.length&&(this.pendingSegment=!0)},Yt.prototype.remove=function(t){t&&this.name!=t||this.renderer.destroy()},Yt.prototype.destroy=function(t){t&&this.name!=t||this.renderer&&this.renderer.destroyed||(this.renderer.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null)},Yt.prototype.setCurrentRawFrameValue=function(t){if(this.currentRawFrame=t,this.currentRawFrame>=this.totalFrames){if(this.checkSegments(),!1===this.loop)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");if(this.trigger("loopComplete"),this.playCount+=1,!0!==this.loop&&this.playCount==this.loop||this.pendingSegment)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");this.currentRawFrame=this.currentRawFrame%this.totalFrames}else if(this.currentRawFrame<0)return this.checkSegments(),this.playCount-=1,this.playCount<0&&(this.playCount=0),!1===this.loop||this.pendingSegment?(this.currentRawFrame=0,this.gotoFrame(),this.pause(),void this.trigger("complete")):(this.trigger("loopComplete"),this.currentRawFrame=(this.totalFrames+this.currentRawFrame)%this.totalFrames,void this.gotoFrame());this.gotoFrame()},Yt.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},Yt.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},Yt.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},Yt.prototype.getPath=function(){return this.path},Yt.prototype.getAssetsPath=function(t){var e="";if(this.assetsPath){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},Yt.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t==this.assets[e].id)return this.assets[e];e+=1}},Yt.prototype.hide=function(){this.renderer.hide()},Yt.prototype.show=function(){this.renderer.show()},Yt.prototype.getAssets=function(){return this.assets},Yt.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new s(t,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(t,new a(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new o(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new h(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new l(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new s(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new a(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new o(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new h(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new l(t,this))},Yt.prototype.addEventListener=u,Yt.prototype.removeEventListener=c,Yt.prototype.triggerEvent=p;var Zt={};Zt.play=J,Zt.pause=$,Zt.setLocationHref=K,Zt.togglePause=tt,Zt.setSpeed=et,Zt.setDirection=it,Zt.stop=nt,Zt.moveFrame=rt,Zt.searchAnimations=st,Zt.registerAnimation=ot,Zt.loadAnimation=ct,Zt.setSubframeRendering=ut,Zt.resize=at,Zt.start=ht,Zt.goToAndStop=lt,Zt.destroy=pt,Zt.setQuality=ft,Zt.inBrowser=dt,Zt.installPlugin=mt,Zt.__getFactory=vt,Zt.version="4.13.0";var Qt="__[STANDALONE]__",Kt="__[ANIMATIONDATA]__",Jt="";if(Qt){var $t=document.getElementsByTagName("script"),te=$t.length-1,ee=$t[te]||{src:""},ie=ee.src.replace(/^[^\?]+\??/,"");Jt=function(t){for(var e=ie.split("&"),i=0;i<e.length;i++){var n=e[i].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}("renderer")}var ne=setInterval(gt,100);return Zt})},{}],12:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof e&&e.exports?e.exports=i():t.ClipRect=i()}(this,function(){var t=function(e,i){if("undefined"!=typeof TweenLite)return this.el=e,this.vars=this.extend({duration:.4,ease:TweenLite.defaultEase,from:t.RIGHT,to:t.LEFT,clearProps:!0,reverse:!1},i),this.isStarted=!1,this.tween()};return t.TOP=1,t.RIGHT=2,t.BOTTOM=3,t.LEFT=4,t.prototype.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.prototype.getSize=function(){return this.bounding?this.bounding:(this.bounding=this.el.getBoundingClientRect(),this.bounding)},t.prototype.getRect=function(e){e=e||!1,this.vars.reverse&&(e=!e);var i={top:0,right:0,bottom:0,left:0},n=this.getSize();return this.vars.from===t.TOP&&this.vars.to===t.BOTTOM&&(i.right=n.width,e&&(i.bottom=n.height)),this.vars.from===t.BOTTOM&&this.vars.to===t.TOP&&(i.top=n.height,i.right=n.width,i.bottom=n.height,e&&(i.top=0)),this.vars.from===t.RIGHT&&this.vars.to===t.LEFT&&(i.right=n.width,i.bottom=n.height,i.left=n.width,e&&(i.left=0)),this.vars.from===t.LEFT&&this.vars.to===t.RIGHT&&(i.bottom=n.height,e&&(i.right=n.width)),"rect("+i.top+"px "+i.right+"px "+i.bottom+"px "+i.left+"px)"},t.prototype.prepare=function(){this.el.style.clip=this.getRect()},t.prototype.tween=function(){var t=this;return TweenLite.to({},this.vars.duration,{onUpdate:function(){this.isStarted||(this.isStarted=!0,this.prepare(),TweenLite.to(this.el,this.vars.duration,{ease:this.vars.ease,clip:this.getRect(!0),immediateRender:!0,onComplete:function(){this.vars.clearProps&&this.clear()},onCompleteScope:this}))},onUpdateScope:t})},t.prototype.clear=function(){this.el.style.clip="auto"},t})},{}],13:[function(t,e,i){!function(t,i){"use strict";"function"==typeof define&&define.amd?define(i):"object"==typeof e&&e.exports?e.exports=i():t.matchesSelector=i()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],r=n+"MatchesSelector";if(t[r])return r}}();return function(e,i){return e[t](i)}})},{}],14:[function(t,e,i){(function(){var t,i,n,r,s,o,a,h,l=[].slice,u={}.hasOwnProperty,c=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};a=function(){},i=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,i,n,r,s;if(n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},i=this._callbacks[n])for(r=0,s=i.length;r<s;r++)e=i[r],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var i,n,r,s;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(i=this._callbacks[t]))return this;if(1===arguments.length)return delete this._callbacks[t],this;for(n=r=0,s=i.length;r<s;n=++r)if(i[n]===e){i.splice(n,1);break}return this},t}(),t=function(t){function e(t,i){var r,s,o;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(e.instances.push(this),this.element.dropzone=this,r=null!=(o=e.optionsForElement(this.element))?o:{},this.options=n({},this.defaultOptions,r,null!=i?i:{}),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=e.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=e.getElements(this.options.clickable,"clickable")),this.init()}var n,r;return c(e,t),e.prototype.Emitter=i,e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],e.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return a},forceFallback:!1,fallback:function(){var t,i,n,r,s,o;for(this.element.className=this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),r=0,s=o.length;r<s;r++)t=o[r],/(^| )dz-message($| )/.test(t.className)&&(i=t,t.className="dz-message");return i||(i=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(i)),n=i.getElementsByTagName("span")[0],n&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},i=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=i*e.optHeight:null==e.optHeight&&(e.optHeight=1/i*e.optWidth),n=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):i>n?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*n):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/n),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var i,n,r,s,o,a,h,l,u,c,p,f,d;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=e.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),c=t.previewElement.querySelectorAll("[data-dz-name]"),s=0,h=c.length;s<h;s++)i=c[s],i.textContent=this._renameFilename(t.name);for(p=t.previewElement.querySelectorAll("[data-dz-size]"),o=0,l=p.length;o<l;o++)i=p[o],i.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=e.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),n=function(i){return function(n){return n.preventDefault(),n.stopPropagation(),t.status===e.UPLOADING?e.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(t)}):i.options.dictRemoveFileConfirmation?e.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(t)}):i.removeFile(t)}}(this),f=t.previewElement.querySelectorAll("[data-dz-remove]"),d=[],a=0,u=f.length;a<u;a++)r=f[a],d.push(r.addEventListener("click",n));return d}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,n,r,s;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),s=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=0,r=s.length;n<r;n++)i=s[n],i.alt=t.name,i.src=e;return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},error:function(t,e){var i,n,r,s,o;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),s=t.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[],n=0,r=s.length;n<r;n++)i=s[n],o.push(i.textContent=e);return o}},errormultiple:a,processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:a,uploadprogress:function(t,e,i){var n,r,s,o,a;if(t.previewElement){for(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],r=0,s=o.length;r<s;r++)n=o[r],"PROGRESS"===n.nodeName?a.push(n.value=e):a.push(n.style.width=e+"%");return a}},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:a,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:a,complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,queuecomplete:a,addedfiles:a,
previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var t,e,i,n,r,s,o;for(n=arguments[0],i=2<=arguments.length?l.call(arguments,1):[],s=0,o=i.length;s<o;s++){e=i[s];for(t in e)r=e[t],n[t]=r}return n},e.prototype.getAcceptedFiles=function(){var t,e,i,n,r;for(n=this.files,r=[],e=0,i=n.length;e<i;e++)t=n[e],t.accepted&&r.push(t);return r},e.prototype.getRejectedFiles=function(){var t,e,i,n,r;for(n=this.files,r=[],e=0,i=n.length;e<i;e++)t=n[e],t.accepted||r.push(t);return r},e.prototype.getFilesWithStatus=function(t){var e,i,n,r,s;for(r=this.files,s=[],i=0,n=r.length;i<n;i++)e=r[i],e.status===t&&s.push(e);return s},e.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(e.QUEUED)},e.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(e.UPLOADING)},e.prototype.getAddedFiles=function(){return this.getFilesWithStatus(e.ADDED)},e.prototype.getActiveFiles=function(){var t,i,n,r,s;for(r=this.files,s=[],i=0,n=r.length;i<n;i++)t=r[i],t.status!==e.UPLOADING&&t.status!==e.QUEUED||s.push(t);return s},e.prototype.init=function(){var t,i,n,r,s,o,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(t){return function(){return t.hiddenFileInput&&t.hiddenFileInput.parentNode.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.querySelector(t.options.hiddenInputContainer).appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,i,r,s;if(i=t.hiddenFileInput.files,i.length)for(r=0,s=i.length;r<s;r++)e=i[r],t.addFile(e);return t.emit("addedfiles",i),n()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,a=this.events,r=0,s=a.length;r<s;r++)t=a[r],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(e){if(0===t.getAddedFiles().length&&0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length)return setTimeout(function(){return t.emit("queuecomplete")},0)}}(this)),i=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(e){return i(e),t.emit("dragenter",e)}}(this),dragover:function(t){return function(e){var n;try{n=e.dataTransfer.effectAllowed}catch(t){}return e.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",i(e),t.emit("dragover",e)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(e){return i(e),t.drop(e)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(i){return t.listeners.push({element:i,events:{click:function(n){return(i!==t.element||n.target===t.element||e.elementInside(n.target,t.element.querySelector(".dz-message")))&&t.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},e.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,e.instances.splice(e.instances.indexOf(this),1)},e.prototype.updateTotalUploadProgress=function(){var t,e,i,n,r,s,o,a;if(n=0,i=0,t=this.getActiveFiles(),t.length){for(a=this.getActiveFiles(),s=0,o=a.length;s<o;s++)e=a[s],n+=e.upload.bytesSent,i+=e.upload.total;r=100*n/i}else r=100;return this.emit("totaluploadprogress",r,i,n)},e.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},e.prototype._renameFilename=function(t){return"function"!=typeof this.options.renameFilename?t:this.options.renameFilename(t)},e.prototype.getFallbackForm=function(){var t,i,n,r;return(t=this.getExistingFallback())?t:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',i=e.createElement(n),"FORM"!==this.element.tagName?(r=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(i)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:i)},e.prototype.getExistingFallback=function(){var t,e,i,n,r,s;for(e=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},s=["div","form"],n=0,r=s.length;n<r;n++)if(i=s[n],t=e(this.element.getElementsByTagName(i)))return t},e.prototype.setupEventListeners=function(){var t,e,i,n,r,s,o;for(s=this.listeners,o=[],n=0,r=s.length;n<r;n++)t=s[n],o.push(function(){var n,r;n=t.events,r=[];for(e in n)i=n[e],r.push(t.element.addEventListener(e,i,!1));return r}());return o},e.prototype.removeEventListeners=function(){var t,e,i,n,r,s,o;for(s=this.listeners,o=[],n=0,r=s.length;n<r;n++)t=s[n],o.push(function(){var n,r;n=t.events,r=[];for(e in n)i=n[e],r.push(t.element.removeEventListener(e,i,!1));return r}());return o},e.prototype.disable=function(){var t,e,i,n,r;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),n=this.files,r=[],e=0,i=n.length;e<i;e++)t=n[e],r.push(this.cancelUpload(t));return r},e.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},e.prototype.filesize=function(t){var e,i,n,r,s,o,a,h;if(n=0,r="b",t>0){for(o=["TB","GB","MB","KB","b"],i=a=0,h=o.length;a<h;i=++a)if(s=o[i],e=Math.pow(this.options.filesizeBase,4-i)/10,t>=e){n=t/Math.pow(this.options.filesizeBase,4-i),r=s;break}n=Math.round(10*n)/10}return"<strong>"+n+"</strong> "+r},e.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},e.prototype.drop=function(t){var e,i;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,this.emit("addedfiles",e),e.length&&(i=t.dataTransfer.items,i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)))},e.prototype.paste=function(t){var e,i;if(null!=(null!=t&&null!=(i=t.clipboardData)?i.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},e.prototype.handleFiles=function(t){var e,i,n,r;for(r=[],i=0,n=t.length;i<n;i++)e=t[i],r.push(this.addFile(e));return r},e.prototype._addFilesFromItems=function(t){var e,i,n,r,s;for(s=[],n=0,r=t.length;n<r;n++)i=t[n],null!=i.webkitGetAsEntry&&(e=i.webkitGetAsEntry())?e.isFile?s.push(this.addFile(i.getAsFile())):e.isDirectory?s.push(this._addFilesFromDirectory(e,e.name)):s.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?s.push(this.addFile(i.getAsFile())):s.push(void 0);return s},e.prototype._addFilesFromDirectory=function(t,e){var i,n,r;return i=t.createReader(),n=function(t){return"undefined"!=typeof console&&null!==console?void console.log:void 0},(r=function(t){return function(){return i.readEntries(function(i){var n,s,o;if(i.length>0){for(s=0,o=i.length;s<o;s++)n=i[s],n.isFile?n.file(function(i){if(!t.options.ignoreHiddenFiles||"."!==i.name.substring(0,1))return i.fullPath=e+"/"+i.name,t.addFile(i)}):n.isDirectory&&t._addFilesFromDirectory(n,e+"/"+n.name);r()}return null},n)}}(this))()},e.prototype.accept=function(t,i){return t.size>1024*this.options.maxFilesize*1024?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,i):i(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=e.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(i){return i?(t.accepted=!1,e._errorProcessing([t],i)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},e.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)e=t[i],this.enqueueFile(e);return null},e.prototype.enqueueFile=function(t){if(t.status!==e.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=e.QUEUED,this.options.autoProcessQueue)return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)},e.prototype._thumbnailQueue=[],e.prototype._processingThumbnail=!1,e.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)},e.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this))},e.prototype.removeFile=function(t){if(t.status===e.UPLOADING&&this.cancelUpload(t),this.files=h(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")},e.prototype.removeAllFiles=function(t){var i,n,r,s;for(null==t&&(t=!1),s=this.files.slice(),n=0,r=s.length;n<r;n++)i=s[n],(i.status!==e.UPLOADING||t)&&this.removeFile(i);return null},e.prototype.createThumbnail=function(t,e){var i;return i=new FileReader,i.onload=function(n){return function(){return"image/svg+xml"===t.type?(n.emit("thumbnail",t,i.result),void(null!=e&&e())):n.createThumbnailFromUrl(t,i.result,e)}}(this),i.readAsDataURL(t)},e.prototype.createThumbnailFromUrl=function(t,e,i,n){var r;return r=document.createElement("img"),n&&(r.crossOrigin=n),r.onload=function(e){return function(){var n,s,a,h,l,u,c,p;if(t.width=r.width,t.height=r.height,a=e.options.resize.call(e,t),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),n=document.createElement("canvas"),s=n.getContext("2d"),n.width=a.trgWidth,n.height=a.trgHeight,o(s,r,null!=(l=a.srcX)?l:0,null!=(u=a.srcY)?u:0,a.srcWidth,a.srcHeight,null!=(c=a.trgX)?c:0,null!=(p=a.trgY)?p:0,a.trgWidth,a.trgHeight),h=n.toDataURL("image/png"),e.emit("thumbnail",t,h),null!=i)return i()}}(this),null!=i&&(r.onerror=i),r.src=e},e.prototype.processQueue=function(){var t,e,i,n;if(e=this.options.parallelUploads,i=this.getUploadingFiles().length,t=i,!(i>=e)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-i));for(;t<e;){if(!n.length)return;this.processFile(n.shift()),t++}}},e.prototype.processFile=function(t){return this.processFiles([t])},e.prototype.processFiles=function(t){var i,n,r;for(n=0,r=t.length;n<r;n++)i=t[n],i.processing=!0,i.status=e.UPLOADING,this.emit("processing",i);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},e.prototype._getFilesWithXhr=function(t){var e;return function(){var i,n,r,s;for(r=this.files,s=[],i=0,n=r.length;i<n;i++)e=r[i],e.xhr===t&&s.push(e);return s}.call(this)},e.prototype.cancelUpload=function(t){var i,n,r,s,o,a,h;if(t.status===e.UPLOADING){for(n=this._getFilesWithXhr(t.xhr),r=0,o=n.length;r<o;r++)i=n[r],i.status=e.CANCELED;for(t.xhr.abort(),s=0,a=n.length;s<a;s++)i=n[s],this.emit("canceled",i);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(h=t.status)!==e.ADDED&&h!==e.QUEUED||(t.status=e.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},r=function(){var t,e;return e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},e.prototype.uploadFile=function(t){return this.uploadFiles([t])},e.prototype.uploadFiles=function(t){var i,s,o,a,h,l,u,c,p,f,d,m,v,g,y,_,b,x,w,T,S,E,M,P,A,C,O,L,k,R,I,D,F,N;for(w=new XMLHttpRequest,T=0,P=t.length;T<P;T++)i=t[T],i.xhr=w;m=r(this.options.method,t),b=r(this.options.url,t),w.open(m,b,!0),w.withCredentials=!!this.options.withCredentials,y=null,o=function(e){return function(){var n,r,s;for(s=[],n=0,r=t.length;n<r;n++)i=t[n],s.push(e._errorProcessing(t,y||e.options.dictResponseError.replace("{{statusCode}}",w.status),w));return s}}(this),_=function(e){return function(n){var r,s,o,a,h,l,u,c,p;if(null!=n)for(s=100*n.loaded/n.total,o=0,l=t.length;o<l;o++)i=t[o],i.upload={progress:s,total:n.total,bytesSent:n.loaded};else{for(r=!0,s=100,a=0,u=t.length;a<u;a++)i=t[a],100===i.upload.progress&&i.upload.bytesSent===i.upload.total||(r=!1),i.upload.progress=s,i.upload.bytesSent=i.upload.total;if(r)return}for(p=[],h=0,c=t.length;h<c;h++)i=t[h],p.push(e.emit("uploadprogress",i,s,i.upload.bytesSent));return p}}(this),w.onload=function(i){return function(n){var r;if(t[0].status!==e.CANCELED&&4===w.readyState){if(y=w.responseText,w.getResponseHeader("content-type")&&~w.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(t){n=t,y="Invalid JSON response from server."}return _(),200<=(r=w.status)&&r<300?i._finished(t,y,n):o()}}}(this),w.onerror=function(i){return function(){if(t[0].status!==e.CANCELED)return o()}}(),g=null!=(k=w.upload)?k:w,g.onprogress=_,l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(l,this.options.headers);for(a in l)(h=l[a])&&w.setRequestHeader(a,h);if(s=new FormData,this.options.params){R=this.options.params;for(d in R)x=R[d],s.append(d,x)}for(S=0,A=t.length;S<A;S++)i=t[S],this.emit("sending",i,w,s);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,w,s),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),E=0,C=I.length;E<C;E++)if(c=I[E],p=c.getAttribute("name"),f=c.getAttribute("type"),"SELECT"===c.tagName&&c.hasAttribute("multiple"))for(D=c.options,M=0,O=D.length;M<O;M++)v=D[M],v.selected&&s.append(p,v.value);else(!f||"checkbox"!==(F=f.toLowerCase())&&"radio"!==F||c.checked)&&s.append(p,c.value);for(u=L=0,N=t.length-1;0<=N?L<=N:L>=N;u=0<=N?++L:--L)s.append(this._getParamName(u),t[u],this._renameFilename(t[u].name));return this.submitRequest(w,s,t)},e.prototype.submitRequest=function(t,e,i){return t.send(e)},e.prototype._finished=function(t,i,n){var r,s,o;for(s=0,o=t.length;s<o;s++)r=t[s],r.status=e.SUCCESS,this.emit("success",r,i,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,i,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},e.prototype._errorProcessing=function(t,i,n){var r,s,o;for(s=0,o=t.length;s<o;s++)r=t[s],r.status=e.ERROR,this.emit("error",r,i,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,i,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},e}(i),t.version="4.3.0",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[n(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,i,n,r,s,o;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],e=function(t){var e,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)e=t[i],/(^| )dropzone($| )/.test(e.className)?s.push(n.push(e)):s.push(void 0);return s},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[],r=0,s=n.length;r<s;r++)i=n[r],!1!==t.optionsForElement(i)?o.push(new t(i)):o.push(void 0);return o},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,i,n,r,s;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(s=t.blacklistedBrowsers,n=0,r=s.length;n<r;n++)i=s[n],i.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},h=function(t,e){var i,n,r,s;for(s=[],n=0,r=t.length;n<r;n++)(i=t[n])!==e&&s.push(i);return s},n=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},t.getElements=function(t,e){var i,n,r,s,o,a,h;if(t instanceof Array){n=[];try{for(r=0,o=t.length;r<o;r++)i=t[r],n.push(this.getElement(i,e))}catch(t){t,n=null}}else if("string"==typeof t)for(n=[],h=document.querySelectorAll(t),s=0,a=h.length;s<a;s++)i=h[s],n.push(i);else null!=t.nodeType&&(n=[t]);if(null==n||!n.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},t.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},t.isValidFile=function(t,e){var i,n,r,s,o;if(!e)return!0;for(e=e.split(","),n=t.type,i=n.replace(/\/.*$/,""),s=0,o=e.length;s<o;s++)if(r=e[s],r=r.trim(),"."===r.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(i===r.replace(/\/.*$/,""))return!0}else if(n===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),void 0!==e&&null!==e?e.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",s=function(t){var e,i,n,r,s,o,a,h,l;for(t.naturalWidth,o=t.naturalHeight,i=document.createElement("canvas"),i.width=1,i.height=o,n=i.getContext("2d"),n.drawImage(t,0,0),r=n.getImageData(0,0,1,o).data,l=0,s=o,a=o;a>l;)e=r[4*(a-1)+3],0===e?s=a:l=a,a=s+l>>1;return h=a/o,0===h?1:h},o=function(t,e,i,n,r,o,a,h,l,u){var c;return c=s(e),t.drawImage(e,i,n,r,o,a,h,l,u/c)},r=function(t,e){var i,n,r,s,o,a,h,l,u;if(r=!1,u=!0,n=t.document,l=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",h=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",s=function(i){if("readystatechange"!==i.type||"complete"===n.readyState)return("load"===i.type?t:n)[h](a+i.type,s,!1),!r&&(r=!0)?e.call(t,i.type||i):void 0},o=function(){try{l.doScroll("left")}catch(t){return t,void setTimeout(o,50)}return s("poll")},"complete"!==n.readyState){if(n.createEventObject&&l.doScroll){try{u=!t.frameElement}catch(t){}u&&o()}return n[i](a+"DOMContentLoaded",s,!1),n[i](a+"readystatechange",s,!1),t[i](a+"load",s,!1)}},t._autoDiscoverFunction=function(){if(t.autoDiscover)return t.discover()},r(window,t._autoDiscoverFunction)}).call(this)},{}],15:[function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n=e&&e.length,s=n?e[0]*i:t.length,a=r(t,0,s,i,!0),h=[];if(!a||a.next===a.prev)return h;var l,u,p,f,d,m,v;if(n&&(a=c(t,e,a,i)),t.length>80*i){l=p=t[0],u=f=t[1];for(var g=i;g<s;g+=i)d=t[g],m=t[g+1],d<l&&(l=d),m<u&&(u=m),d>p&&(p=d),m>f&&(f=m);v=Math.max(p-l,f-u),v=0!==v?1/v:0}return o(a,h,i,l,u,v),h}function r(t,e,i,n,r){var s,o;if(r===I(t,e,i,n)>0)for(s=e;s<i;s+=n)o=L(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=L(s,t[s],t[s+1],o);return o&&T(o,o.next)&&(k(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!T(n,n.next)&&0!==w(n.prev,n,n.next))n=n.next;else{if(k(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,p){if(t){!p&&c&&v(t,n,r,c);for(var f,d,m=t;t.prev!==t.next;)if(f=t.prev,d=t.next,c?h(t,n,r,c):a(t))e.push(f.i/i),e.push(t.i/i),e.push(d.i/i),k(t),t=d.next,m=d.next;else if((t=d)===m){p?1===p?(t=l(s(t),e,i),o(t,e,i,n,r,c,2)):2===p&&u(t,e,i,n,r,c):o(s(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(w(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(b(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&w(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(w(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=y(a,h,e,i,n),p=y(l,u,e,i,n),f=t.prevZ,d=t.nextZ;f&&f.z>=c&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&b(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&b(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&b(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&b(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!T(r,o)&&S(r,n,n.next,o)&&A(r,o)&&A(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),k(n),k(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function u(t,e,i,n,r,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&x(h,l)){var u=O(h,l);return h=s(h,h.next),u=s(u,u.next),o(h,e,i,n,r,a),void o(u,e,i,n,r,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e,i,n){var o,a,h,l,u,c=[];for(o=0,a=e.length;o<a;o++)h=e[o]*n,l=o<a-1?e[o+1]*n:t.length,u=r(t,h,l,n,!1),u===u.next&&(u.steiner=!0),c.push(_(u));for(c.sort(p),o=0;o<c.length;o++)f(c[o],i),i=s(i,i.next);return i}function p(t,e){return t.x-e.x}function f(t,e){if(e=d(t,e)){var i=O(e,t);s(e,e.next),s(i,i.next)}}function d(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i;var h,l=i,u=i.x,c=i.y,p=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&b(s<c?r:o,s,u,c,s<c?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),A(n,t)&&(h<p||h===p&&(n.x>i.x||n.x===i.x&&m(i,n)))&&(i=n,p=h)),n=n.next}while(n!==l);return i}function m(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function v(t,e,i,n){var r=t;do{null===r.z&&(r.z=y(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,g(r)}function g(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1);return t}function y(t,e,i,n,r){return t=32767*(t-i)*r,e=32767*(e-n)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function b(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!P(t,e)&&(A(t,e)&&A(e,t)&&C(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||T(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,i,n){var r=M(w(t,e,i)),s=M(w(t,e,n)),o=M(w(i,n,t)),a=M(w(i,n,e));return r!==s&&o!==a||(!(0!==r||!E(t,i,e))||(!(0!==s||!E(t,n,e))||(!(0!==o||!E(i,t,n))||!(0!==a||!E(i,e,n)))))}function E(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function M(t){return t>0?1:t<0?-1:0}function P(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&S(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function A(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function C(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function O(t,e){var i=new R(t.i,t.x,t.y),n=new R(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function L(t,e,i,n){var r=new R(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}e.exports=n,e.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(I(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(I(t,l,u,i))}var c=0;for(a=0;a<n.length;a+=3){var p=n[a]*i,f=n[a+1]*i,d=n[a+2]*i;c+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},{}],16:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(i):"object"==typeof e&&e.exports?e.exports=i():t.EvEmitter=i()}("undefined"!=typeof window?window:this,function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var s=i[r];n&&n[s]&&(this.off(t,s),delete n[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})},{}],17:[function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(){this._events=new n,this._eventsCount=0}
var o=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)o.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},s.prototype.emit=function(t,e,i,n,r,s){var o=a?a+t:t;if(!this._events[o])return!1;var h,l,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,r),!0;case 6:return u.fn.call(u.context,e,i,n,r,s),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,n);break;default:if(!h)for(p=1,h=new Array(c-1);p<c;p++)h[p-1]=arguments[p];u[l].fn.apply(u[l].context,h)}}return!0},s.prototype.on=function(t,e,i){var n=new r(e,i||this),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.once=function(t,e,i){var n=new r(e,i||this,!0),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.removeListener=function(t,e,i,r){var s=a?a+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[s]);else{for(var h=0,l=[],u=o.length;h<u;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[s]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new n:delete this._events[s]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=a,s.EventEmitter=s,void 0!==e&&(e.exports=s)},{}],18:[function(t,e,i){!function(i,n){"function"==typeof define&&define.amd?define(["desandro-matches-selector/matches-selector"],function(t){return n(i,t)}):"object"==typeof e&&e.exports?e.exports=n(i,t("desandro-matches-selector")):i.fizzyUIUtils=n(i,i.matchesSelector)}(window,function(t,e){"use strict";var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e};var n=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null===t||void 0===t?[]:"object"==typeof t&&"number"==typeof t.length?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void r.push(t);e(t,n)&&r.push(t);for(var i=t.querySelectorAll(n),s=0;s<i.length;s++)r.push(i[s])}}),r},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];clearTimeout(t);var e=arguments,s=this;this[r]=setTimeout(function(){n.apply(s,e),delete s[r]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};t.console;return i.htmlInit=function(e,n){i.docReady(function(){var r=i.toDashed(n),s="data-"+r,o=document.querySelectorAll("["+s+"]"),a=document.querySelectorAll(".js-"+r),h=i.makeArray(o).concat(i.makeArray(a)),l=s+"-options",u=t.jQuery;h.forEach(function(t){var i,r=t.getAttribute(s)||t.getAttribute(l);try{i=r&&JSON.parse(r)}catch(t){return}var o=new e(t,i);u&&u.data(t,n,o)})})},i})},{"desandro-matches-selector":13}],19:[function(t,e,i){function n(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var i=e.hash?{}:"",n=e.serializer||(e.hash?o:a),r=t&&t.elements?t.elements:[],s=Object.create(null),u=0;u<r.length;++u){var c=r[u];if((e.disabled||!c.disabled)&&c.name&&(l.test(c.nodeName)&&!h.test(c.type))){var p=c.name,f=c.value;if("checkbox"!==c.type&&"radio"!==c.type||c.checked||(f=void 0),e.empty){if("checkbox"!==c.type||c.checked||(f=""),"radio"===c.type&&(s[c.name]||c.checked?c.checked&&(s[c.name]=!0):s[c.name]=!1),void 0==f&&"radio"==c.type)continue}else if(!f)continue;if("select-multiple"!==c.type)i=n(i,p,f);else{f=[];for(var d=c.options,m=!1,v=0;v<d.length;++v){var g=d[v],y=e.empty&&!g.value,_=g.value||y;g.selected&&_&&(m=!0,i=e.hash&&"[]"!==p.slice(p.length-2)?n(i,p+"[]",g.value):n(i,p,g.value))}!m&&e.empty&&(i=n(i,p,""))}}}if(e.empty)for(var p in s)s[p]||(i=n(i,p,""));return i}function r(t){var e=[],i=/^([^\[\]]*)/,n=new RegExp(u),r=i.exec(t);for(r[1]&&e.push(r[1]);null!==(r=n.exec(t));)e.push(r[1]);return e}function s(t,e,i){if(0===e.length)return t=i;var n=e.shift(),r=n.match(/^\[(.+?)\]$/);if("[]"===n)return t=t||[],Array.isArray(t)?t.push(s(null,e,i)):(t._values=t._values||[],t._values.push(s(null,e,i))),t;if(r){var o=r[1],a=+o;isNaN(a)?(t=t||{},t[o]=s(t[o],e,i)):(t=t||[],t[a]=s(t[a],e,i))}else t[n]=s(t[n],e,i);return t}function o(t,e,i){if(e.match(u))s(t,r(e),i);else{var n=t[e];n?(Array.isArray(n)||(t[e]=[n]),t[e].push(i)):t[e]=i}return t}function a(t,e,i){return i=i.replace(/(\r)?\n/g,"\r\n"),i=encodeURIComponent(i),i=i.replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+i}var h=/^(?:submit|button|image|reset|file)$/i,l=/^(?:input|select|textarea|keygen)/i,u=/(\[[^\[\]]*\])/g;e.exports=n},{}],20:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(i):"object"==typeof e&&e.exports?e.exports=i():t.getSize=i()}(window,function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<l;e++){t[h[e]]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function r(){if(!u){u=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var r=n(e);o=200==Math.round(t(r.width)),s.isBoxSizeOuter=o,i.removeChild(e)}}function s(e){if(r(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var s=n(e);if("none"==s.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var u=a.isBorderBox="border-box"==s.boxSizing,c=0;c<l;c++){var p=h[c],f=s[p],d=parseFloat(f);a[p]=isNaN(d)?0:d}var m=a.paddingLeft+a.paddingRight,v=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,y=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,b=a.borderTopWidth+a.borderBottomWidth,x=u&&o,w=t(s.width);!1!==w&&(a.width=w+(x?0:m+_));var T=t(s.height);return!1!==T&&(a.height=T+(x?0:v+b)),a.innerWidth=a.width-(m+_),a.innerHeight=a.height-(v+b),a.outerWidth=a.width+g,a.outerHeight=a.height+y,a}}var o,a="undefined"==typeof console?e:function(t){},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],l=h.length,u=!1;return s})},{}],21:[function(t,e,i){(function(t){var i=void 0!==e&&e.exports&&void 0!==t?t:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,i){var n,r,s=t.cycle;for(n in s)r=s[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},s=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},o=i._internals,a=o.isSelector,h=o.isArray,l=s.prototype=i.to({},.1,{}),u=[];s.version="1.19.0",l.constructor=s,l.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.lagSmoothing=i.lagSmoothing,s.ticker=i.ticker,s.render=i.render,l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var n,r=this.ratio,s=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||s)for(var a,h=1/(1-r),l=this._firstPT;l;)a=l.s+l.c,l.c*=h,l.s=a-l.c,l=l._next;return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,s,a,h,l,u,c,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,d=this._totalTime,m=this._cycle,v=this._duration,g=this._rawPrevTime;if(t>=p-1e-7?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(g<0||t<=0&&t>=-1e-7||1e-10===g&&"isPause"!==this.data)&&g!==t&&(i=!0,g>1e-10&&(r="onReverseComplete")),this._rawPrevTime=c=!e||t||g===t?t:1e-10)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==d||0===v&&g>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(g>=0&&(i=!0),this._rawPrevTime=c=!e||t||g===t?t:1e-10)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(a=v+this._repeatDelay,this._cycle=this._totalTime/a>>0,0!==this._cycle&&this._cycle===this._totalTime/a&&d<=t&&this._cycle--,this._time=this._totalTime-this._cycle*a,this._yoyo&&0!=(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType?(h=this._time/v,l=this._easeType,u=this._easePower,(1===l||3===l&&h>=.5)&&(h=1-h),3===l&&(h*=2),1===u?h*=h:2===u?h*=h*h:3===u?h*=h*h*h:4===u&&(h*=h*h*h*h),1===l?this.ratio=1-h:2===l?this.ratio=h:this._time/v<.5?this.ratio=h/2:this.ratio=1-h/2):this.ratio=this._ease.getRatio(this._time/v)),f===this._time&&!i&&m===this._cycle)return void(d!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=d,this._rawPrevTime=g,this._cycle=m,o.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/v):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===d&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==d||r)&&this._callback("onUpdate")),this._cycle!==m&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===v&&1e-10===this._rawPrevTime&&1e-10!==c&&(this._rawPrevTime=0)))},s.to=function(t,e,i){return new s(t,e,i)},s.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(t,e,i)},s.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new s(t,e,n)},s.staggerTo=s.allTo=function(t,e,o,l,c,p,f){l=l||0;var d,m,v,g,y=0,_=[],b=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),c.apply(f||o.callbackScope||this,p||u)},x=o.cycle,w=o.startAt&&o.startAt.cycle;for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t))),t=t||[],l<0&&(t=n(t),t.reverse(),l*=-1),d=t.length-1,v=0;v<=d;v++){m={};for(g in o)m[g]=o[g];if(x&&(r(m,t,v),null!=m.duration&&(e=m.duration,delete m.duration)),w){w=m.startAt={};for(g in o.startAt)w[g]=o.startAt[g];r(m.startAt,t,v)}m.delay=y+(m.delay||0),v===d&&c&&(m.onComplete=b),_[v]=new s(t[v],e,m),y+=l}return _},s.staggerFrom=s.allFrom=function(t,e,i,n,r,o,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(t,e,i,n,r,o,a)},s.staggerFromTo=s.allFromTo=function(t,e,i,n,r,o,a,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,s.staggerTo(t,e,n,r,o,a,h)},s.delayedCall=function(t,e,i,n,r){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var c=function(t,e){for(var n=[],r=0,s=t._first;s;)s instanceof i?n[r++]=s:(e&&(n[r++]=s),n=n.concat(c(s,e)),r=n.length),s=s._next;return n},p=s.getAllTweens=function(e){return c(t._rootTimeline,e).concat(c(t._rootFramesTimeline,e))};s.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var s,o,a,h=p(0!=r),l=h.length,u=i&&n&&r;for(a=0;a<l;a++)o=h[a],(u||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var r,l,u,c,p,f=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t)),h(t))for(c=t.length;--c>-1;)s.killChildTweensOf(t[c],e);else{r=[];for(u in f)for(l=f[u].target.parentNode;l;)l===t&&(r=r.concat(f[u].tweens)),l=l.parentNode;for(p=r.length,c=0;c<p;c++)e&&r[c].totalTime(r[c].totalDuration()),r[c]._enabled(!1,!1)}}};var f=function(t,i,n,r){i=!1!==i,n=!1!==n,r=!1!==r;for(var s,o,a=p(r),h=i&&n&&r,l=a.length;--l>-1;)o=a[l],(h||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&o.paused(t)};return s.pauseAll=function(t,e,i){f(!0,t,e,i)},s.resumeAll=function(t,e,i){f(!1,t,e,i)},s.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||1e-10,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),i._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],h(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));h(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},s=n._internals,o=r._internals={},a=s.isSelector,h=s.isArray,l=s.lazyTweens,u=s.lazyRender,c=i._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=function(t,e,i){var n,r,s=t.cycle;for(n in s)r=s[n],t[n]="function"==typeof r?r.call(e[i],i):r[i%r.length];delete t.cycle},d=o.pauseCallback=function(){},m=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},v=r.prototype=new e;return r.version="1.19.0",v.constructor=r,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(t,e,i,r){var s=i.repeat&&c.TweenMax||n;return e?this.add(new s(t,e,i),r):this.set(t,i,r)},v.from=function(t,e,i,r){return this.add((i.repeat&&c.TweenMax||n).from(t,e,i),r)},v.fromTo=function(t,e,i,r,s){var o=r.repeat&&c.TweenMax||n;return e?this.add(o.fromTo(t,e,i,r),s):this.set(t,r,s)},v.staggerTo=function(t,e,i,s,o,h,l,u){var c,d,v=new r({onComplete:h,onCompleteParams:l,callbackScope:u,smoothChildTiming:this.smoothChildTiming}),g=i.cycle;for("string"==typeof t&&(t=n.selector(t)||t),t=t||[],a(t)&&(t=m(t)),s=s||0,s<0&&(t=m(t),t.reverse(),s*=-1),d=0;d<t.length;d++)c=p(i),c.startAt&&(c.startAt=p(c.startAt),c.startAt.cycle&&f(c.startAt,t,d)),g&&(f(c,t,d),null!=c.duration&&(e=c.duration,delete c.duration)),v.to(t[d],e,c,d*s);return this.add(v,o)},v.staggerFrom=function(t,e,i,n,r,s,o,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,s,o,a)},v.staggerFromTo=function(t,e,i,n,r,s,o,a,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,s,o,a,h)},v.call=function(t,e,i,r){return this.add(n.delayedCall(0,t,e,i),r)},v.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new n(t,0,e),i)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var i,s,o=new r(t),a=o._timeline;for(null==e&&(e=!0),a._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=a._time,i=a._first;i;)s=i._next,e&&i instanceof n&&i.target===i.vars.onComplete||o.add(i,i._startTime-i._delay),i=s;return a.add(o,0),o},v.add=function(i,s,o,a){var l,u,c,p,f,d;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,i)),!(i instanceof t)){if(i instanceof Array||i&&i.push&&h(i)){for(o=o||"normal",a=a||0,l=s,u=i.length,c=0;c<u;c++)h(p=i[c])&&(p=new r({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===o?l=p._startTime+p.totalDuration()/p._timeScale:"start"===o&&(p._startTime-=p.delay())),l+=a;return this._uncache(!0)}if("string"==typeof i)return this.addLabel(i,s);if("function"!=typeof i)throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=n.delayedCall(0,i)}if(e.prototype.add.call(this,i,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,d=f.rawTime()>i._startTime;f._timeline;)d&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},v.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&h(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,i){e.prototype._remove.call(this,t,i);var n=this._last;return n?this._time>n._startTime+n._totalDuration/n._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},v.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,i,r){var s=n.delayedCall(0,d,i,r||this);return s.vars.onComplete=s.vars.onReverseComplete=e,s.data="isPause",this._hasPause=!0,this.add(s,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,i,n,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&h(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(-1===(s=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):this.duration()}return Number(e)+i},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,s,o,a,h,c,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,d=this._startTime,m=this._timeScale,v=this._paused;if(t>=p-1e-7)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(r=!0,o="onComplete",a=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(a=!0,this._rawPrevTime>1e-10&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,t=p+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(o="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(a=r=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(a=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&r)for(n=this._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;t=0,this._initted||(a=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=f)for(n=this._first;n&&n._startTime<=t&&!h;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(h=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!h;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(h=n),n=n._prev;h&&(this._time=t=h._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==f&&this._first||i||a||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(c=this._time)>=f)for(n=this._first;n&&(s=n._next,c===this._time&&(!this._paused||v));)(n._active||n._startTime<=c&&!n._paused&&!n._gc)&&(h===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;else for(n=this._last;n&&(s=n._prev,c===this._time&&(!this._paused||v));){if(n._active||n._startTime<=f&&!n._paused&&!n._gc){if(h===n){for(h=n._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(t-h._startTime)*h._timeScale:(t-h._startTime)*h._timeScale,e,i),h=h._prev;h=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=s}this._onUpdate&&(e||(l.length&&u(),this._callback("onUpdate"))),o&&(this._gc||d!==this._startTime&&m===this._timeScale||(0===this._time||p>=this.totalDuration())&&(r&&(l.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,i,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)o._startTime<r||(o instanceof n?!1!==e&&(s[a++]=o):(!1!==i&&(s[a++]=o),!1!==t&&(s=s.concat(o.getChildren(!0,e,i)),a=s.length))),o=o._next;return s},v.getTweensOf=function(t,e){var i,r,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),i=n.getTweensOf(t),r=i.length;--r>-1;)(i[r].timeline===this||e&&this._contains(i[r]))&&(o[a++]=i[r]);return s&&this._enabled(!1,!0),o},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,s=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},v.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},v.totalTime=function(e,i,n){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},v.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),i._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,n){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},s=e._internals,o=s.lazyTweens,a=s.lazyRender,h=i._gsDefine.globals,l=new n(null,null,1,0),u=r.prototype=new t;return u.constructor=r,u.kill()._gc=!1,r.version="1.19.0",u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},u.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},u.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},u.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},u.tweenTo=function(t,i){i=i||{};var n,r,s,o={ease:l,useFrames:this.usesFrames(),immediateRender:!1},a=i.repeat&&h.TweenMax||e;for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),n=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new a(this,n,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&n===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&s._callback("onStart")},s},u.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},u.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,s,h,l,u,c,p,f=this._dirty?this.totalDuration():this._totalDuration,d=this._duration,m=this._time,v=this._totalTime,g=this._startTime,y=this._timeScale,_=this._rawPrevTime,b=this._paused,x=this._cycle;if(t>=f-1e-7)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,h="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||_<0||1e-10===_)&&_!==t&&this._first&&(l=!0,_>1e-10&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=d,t=d+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===d&&1e-10!==_&&(_>0||t<0&&_>=0)&&!this._locked)&&(h="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=r=!0,
h="onReverseComplete"):_>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=d||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&r)for(n=this._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;t=0,this._initted||(l=!0)}else if(0===d&&_<0&&(l=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=d+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&v<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!=(1&this._cycle)&&(this._time=d-this._time),this._time>d?(this._time=d,t=d+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if((t=this._time)>=m)for(n=this._first;n&&n._startTime<=t&&!c;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(c=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!c;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(c=n),n=n._prev;c&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==x&&!this._locked){var w=this._yoyo&&0!=(1&x),T=w===(this._yoyo&&0!=(1&this._cycle)),S=this._totalTime,E=this._cycle,M=this._rawPrevTime,P=this._time;if(this._totalTime=x*d,this._cycle<x?w=!w:this._totalTime+=d,this._time=m,this._rawPrevTime=0===d?_-1e-4:_,this._cycle=x,this._locked=!0,m=w?0:d,this.render(m,e,0===d),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),m!==this._time)return;if(T&&(m=w?d+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=P,this._totalTime=S,this._cycle=E,this._rawPrevTime=M}if(!(this._time!==m&&this._first||i||l||c))return void(v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&t>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(p=this._time)>=m)for(n=this._first;n&&(s=n._next,p===this._time&&(!this._paused||b));)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(c===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;else for(n=this._last;n&&(s=n._prev,p===this._time&&(!this._paused||b));){if(n._active||n._startTime<=m&&!n._paused&&!n._gc){if(c===n){for(c=n._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,i),c=c._prev;c=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=s}this._onUpdate&&(e||(o.length&&a(),this._callback("onUpdate"))),h&&(this._locked||this._gc||g!==this._startTime&&y===this._timeScale||(0===this._time||f>=this.totalDuration())&&(r&&(o.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this._callback(h)))},u.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,s=[],o=this.getChildren(t,e,i),a=0,h=o.length;for(n=0;n<h;n++)r=o[n],r.isActive()&&(s[a++]=r);return s},u.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},u.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},u.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},u.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},u.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],n=[],r=[],s={},o=i._gsDefine.globals,a=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},h=function(t,e,i,n){var r={a:t},s={},o={},a={c:n},h=(t+e)/2,l=(e+i)/2,u=(i+n)/2,c=(h+l)/2,p=(l+u)/2,f=(p-c)/8;return r.b=h+(t-h)/4,s.b=c+f,r.c=s.a=(r.b+s.b)/2,s.c=o.a=(c+p)/2,o.b=p-f,a.b=u+(n-u)/4,o.c=a.a=(o.b+a.b)/2,[r,s,o,a]},l=function(t,i,s,o,a){var l,u,c,p,f,d,m,v,g,y,_,b,x,w=t.length-1,T=0,S=t[0].a;for(l=0;l<w;l++)f=t[T],u=f.a,c=f.d,p=t[T+1].d,a?(_=e[l],b=n[l],x=(b+_)*i*.25/(o?.5:r[l]||.5),d=c-(c-u)*(o?.5*i:0!==_?x/_:0),m=c+(p-c)*(o?.5*i:0!==b?x/b:0),v=c-(d+((m-d)*(3*_/(_+b)+.5)/4||0))):(d=c-(c-u)*i*.5,m=c+(p-c)*i*.5,v=c-(d+m)/2),d+=v,m+=v,f.c=g=d,f.b=0!==l?S:S=f.a+.6*(f.c-f.a),f.da=c-u,f.ca=g-u,f.ba=S-u,s?(y=h(u,S,g,c),t.splice(T,1,y[0],y[1],y[2],y[3]),T+=4):T++,S=m;f=t[T],f.b=S,f.c=S+.4*(f.d-S),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=S-f.a,s&&(y=h(f.a,S,f.c,f.d),t.splice(T,1,y[0],y[1],y[2],y[3]))},u=function(t,i,r,s){var o,h,l,u,c,p,f=[];if(s)for(t=[s].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][i])&&"="===p.charAt(1)&&(t[h][i]=s[i]+Number(p.charAt(0)+p.substr(2)));if((o=t.length-2)<0)return f[0]=new a(t[0][i],0,0,t[o<-1?0:1][i]),f;for(h=0;h<o;h++)l=t[h][i],u=t[h+1][i],f[h]=new a(l,0,0,u),r&&(c=t[h+2][i],e[h]=(e[h]||0)+(u-l)*(u-l),n[h]=(n[h]||0)+(c-u)*(c-u));return f[h]=new a(t[h][i],0,0,t[h+1][i]),f},c=function(t,i,o,a,h,c){var p,f,d,m,v,g,y,_,b={},x=[],w=c||t[0];h="string"==typeof h?","+h+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==i&&(i=1);for(f in t[0])x.push(f);if(t.length>1){for(_=t[t.length-1],y=!0,p=x.length;--p>-1;)if(f=x[p],Math.abs(w[f]-_[f])>.05){y=!1;break}y&&(t=t.concat(),c&&t.unshift(c),t.push(t[1]),c=t[t.length-3])}for(e.length=n.length=r.length=0,p=x.length;--p>-1;)f=x[p],s[f]=-1!==h.indexOf(","+f+","),b[f]=u(t,f,s[f],c);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),n[p]=Math.sqrt(n[p]);if(!a){for(p=x.length;--p>-1;)if(s[f])for(d=b[x[p]],g=d.length-1,m=0;m<g;m++)v=d[m+1].da/n[m]+d[m].da/e[m]||0,r[m]=(r[m]||0)+v*v;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=x.length,m=o?4:1;--p>-1;)f=x[p],d=b[f],l(d,i,o,a,s[f]),y&&(d.splice(0,m),d.splice(d.length-m,m));return b},p=function(t,e,i){e=e||"soft";var n,r,s,o,h,l,u,c,p,f,d,m={},v="cubic"===e?3:2,g="soft"===e,y=[];if(g&&i&&(t=[i].concat(t)),null==t||t.length<v+1)throw"invalid Bezier data";for(p in t[0])y.push(p);for(l=y.length;--l>-1;){for(p=y[l],m[p]=h=[],f=0,c=t.length,u=0;u<c;u++)n=null==i?t[u][p]:"string"==typeof(d=t[u][p])&&"="===d.charAt(1)?i[p]+Number(d.charAt(0)+d.substr(2)):Number(d),g&&u>1&&u<c-1&&(h[f++]=(n+h[f-2])/2),h[f++]=n;for(c=f-v+1,f=0,u=0;u<c;u+=v)n=h[u],r=h[u+1],s=h[u+2],o=2===v?0:h[u+3],h[f++]=d=3===v?new a(n,r,s,o):new a(n,(2*r+n)/3,(2*r+s)/3,s);h.length=f}return m},f=function(t,e,i){for(var n,r,s,o,a,h,l,u,c,p,f,d=1/i,m=t.length;--m>-1;)for(p=t[m],s=p.a,o=p.d-s,a=p.c-s,h=p.b-s,n=r=0,u=1;u<=i;u++)l=d*u,c=1-l,n=r-(r=(l*l*o+3*c*(l*a+c*h))*l),f=m*i+u-1,e[f]=(e[f]||0)+n*n},d=function(t,e){e=e>>0||6;var i,n,r,s,o=[],a=[],h=0,l=0,u=e-1,c=[],p=[];for(i in t)f(t[i],o,e);for(r=o.length,n=0;n<r;n++)h+=Math.sqrt(o[n]),s=n%e,p[s]=h,s===u&&(l+=h,s=n/e>>0,c[s]=p,a[s]=l,h=0,p=[]);return{length:l,lengths:a,segments:c}},m=i._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,s,o,a,h=e.values||[],l={},u=h[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null;for(n in u)this._props.push(n);for(s=this._props.length;--s>-1;)n=this._props[s],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],l[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||l[n]!==h[0][n]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?c(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):p(h,e.type,l),this._segCount=this._beziers[n].length,this._timeRes){var m=d(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),s=f.length;--s>-1;){for(o=0;o<3;o++)n=f[s][o],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=f[s][2],this._initialRotations[s]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,s,o,a,h,l,u,c,p=this._segCount,f=this._func,d=this._target,m=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<p-1){for(l=p-1;r<l&&(this._l2=u[++r])<=e;);this._l1=u[r-1],this._li=r,this._curSeg=c=this._segments[r],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=u[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=u[r],this._li=r,this._curSeg=c=this._segments[r],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&r<c.length-1){for(l=c.length-1;r<l&&(this._s2=c[++r])<=e;);this._s1=c[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=c[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=c[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else i=e<0?0:e>=1?p-1:p*e>>0,a=(e-i*(1/p))*p;for(n=1-a,r=this._props.length;--r>-1;)s=this._props[r],o=this._beziers[s][i],h=(a*a*o.da+3*n*(a*o.ca+n*o.ba))*a+o.a,this._mod[s]&&(h=this._mod[s](h,d)),f[s]?d[s](h):d[s]=h;if(this._autoRotate){var v,g,y,_,b,x,w,T=this._autoRotate;for(r=T.length;--r>-1;)s=T[r][2],x=T[r][3]||0,w=!0===T[r][4]?1:t,o=this._beziers[T[r][0]],v=this._beziers[T[r][1]],o&&v&&(o=o[i],v=v[i],g=o.a+(o.b-o.a)*a,_=o.b+(o.c-o.b)*a,g+=(_-g)*a,_+=(o.c+(o.d-o.c)*a-_)*a,y=v.a+(v.b-v.a)*a,b=v.b+(v.c-v.b)*a,y+=(b-y)*a,b+=(v.c+(v.d-v.c)*a-b)*a,h=m?Math.atan2(b-y,_-g)*w+x:this._initialRotations[r],this._mod[s]&&(h=this._mod[s](h,d)),f[s]?d[s](h):d[s]=h)}}}),v=m.prototype;m.bezierThrough=c,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=o.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,h){e instanceof Array&&(e={values:e}),h=new m;var l,u,c,p=e.values,f=p.length-1,d=[],v={};if(f<0)return a;for(l=0;l<=f;l++)c=i(t,p[l],o,a,h,f!==l),d[l]=c.end;for(u in e)v[u]=e[u];return v.values=d,a=new r(t,"bezier",0,0,c.pt,2),a.data=c,a.plugin=h,a.setRatio=n,0===v.autoRotate&&(v.autoRotate=!0),!v.autoRotate||v.autoRotate instanceof Array||(l=!0===v.autoRotate?0:Number(v.autoRotate),v.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),v.autoRotate&&(o._transform||o._enableTransforms(!1),c.autoRotate=o._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,o._overwriteProps.push("rotation")),h._onInitTween(c.proxy,v,o._tween),a}})}},v._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)(e=t[i[n]])&&"function"==typeof e&&(this._mod[i[n]]=e)},v._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)}}(),i._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var n,r,s,o,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},h=i._gsDefine.globals,l={},u=a.prototype=new t("css");u.constructor=a,a.version="1.19.0",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,u="px",a.suffixMap={top:u,right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var c,p,f,d,m,v,g,y,_=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,S=/opacity *= *([^)]*)/i,E=/opacity:([^;]*)/i,M=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,A=/([A-Z])/g,C=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,L=function(t,e){return e.toUpperCase()},k=/(?:Left|Right|Width)/i,R=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,I=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,D=/,(?=[^\)]*(?:\(|$))/gi,F=/[\s,\(]/i,N=Math.PI/180,B=180/Math.PI,j={},U=document,z=function(t){return U.createElementNS?U.createElementNS("http://www.w3.org/1999/xhtml",t):U.createElement(t)},G=z("div"),V=z("img"),X=a._internals={_specialProps:l},W=navigator.userAgent,H=function(){var t=W.indexOf("Android"),e=z("a");return f=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===t||Number(W.substr(t+8,1))>3),m=f&&Number(W.substr(W.indexOf("Version/")+8,1))<6,d=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(v=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),q=function(t){return S.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(t){window.console},Z="",Q="",K=function(t,e){e=e||G;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(Q=3===n?"ms":i[n],Z="-"+Q.toLowerCase()+"-",Q+t):null},J=U.defaultView?U.defaultView.getComputedStyle:function(){},$=a.getStyle=function(t,e,i,n,r){var s;return H||"opacity"!==e?(!n&&t.style[e]?s=t.style[e]:(i=i||J(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(A,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):q(t)},tt=X.convertToPixels=function(t,i,n,r,s){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var o,h,l,u=k.test(i),c=t,p=G.style,f=n<0,d=1===n;if(f&&(n=-n),d&&(n*=100),"%"===r&&-1!==i.indexOf("border"))o=n/100*(u?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==r&&c.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)p[u?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(c=t.parentNode||U.body,h=c._gsCache,l=e.ticker.frame,h&&u&&h.time===l)return h.width*n/100;p[u?"width":"height"]=n+r}c.appendChild(G),o=parseFloat(G[u?"offsetWidth":"offsetHeight"]),c.removeChild(G),u&&"%"===r&&!1!==a.cacheWidths&&(h=c._gsCache=c._gsCache||{},h.time=l,h.width=o/n*100),0!==o||s||(o=tt(t,i,n,r,!0))}return d&&(o/=100),f?-o:o},et=X.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=$(t,"margin"+n,i);return t["offset"+n]-(tt(t,e,parseFloat(r),r.replace(T,""))||0)},it=function(t,e){var i,n,r,s={};if(e=e||J(t,null))if(i=e.length)for(;--i>-1;)r=e[i],-1!==r.indexOf("-transform")&&Ct!==r||(s[r.replace(C,L)]=e.getPropertyValue(r));else for(i in e)-1!==i.indexOf("Transform")&&At!==i||(s[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(C,L)]=e[i]);return H||(s.opacity=q(t)),n=Gt(t,e,!1),s.rotation=n.rotation,s.skewX=n.skewX,s.scaleX=n.scaleX,s.scaleY=n.scaleY,s.x=n.x,s.y=n.y,Lt&&(s.z=n.z,s.rotationX=n.rotationX,s.rotationY=n.rotationY,s.scaleZ=n.scaleZ),s.filters&&delete s.filters,s},nt=function(t,e,i,n,r){var s,o,a,h={},l=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=i[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"!=typeof s&&"string"!=typeof s||(h[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(w,"")?s:0:et(t,o),void 0!==l[o]&&(a=new yt(l,o,l[o],a))));if(n)for(o in n)"className"!==o&&(h[o]=n[o]);return{difs:h,firstMPT:a}},rt={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],ot=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||J(t))[e]||0;if(t.getBBox&&jt(t))return t.getBBox()[e]||0;var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=rt[e],s=r.length;for(i=i||J(t,null);--s>-1;)n-=parseFloat($(t,"padding"+r[s],i,!0))||0,n-=parseFloat($(t,"border"+r[s]+"Width",i,!0))||0;return n},at=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,n=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];if(n.length>3&&!e){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(at(n[i]));return t.join(",")}return null==s?s="center"===r?"50%":"0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+s+(n.length>2?" "+n[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==s.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(w,"")),e.oy=parseFloat(s.replace(w,"")),e.v=t),e||t},ht=function(t,e){return"function"==typeof t&&(t=t(y,g)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},lt=function(t,e){return"function"==typeof t&&(t=t(y,g)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ut=function(t,e,i,n){var r,s,o,a,h;return"function"==typeof t&&(t=t(y,g)),null==t?a=e:"number"==typeof t?a=t:(r=360,s=t.split("_"),h="="===t.charAt(1),o=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===t.indexOf("rad")?1:B)-(h?0:e),s.length&&(n&&(n[i]=e+o),-1!==t.indexOf("short")&&(o%=r)!==o%(r/2)&&(o=o<0?o+r:o-r),-1!==t.indexOf("_cw")&&o<0?o=(o+9999999999*r)%r-(o/r|0)*r:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*r)%r-(o/r|0)*r)),a=e+o),a<1e-6&&a>-1e-6&&(a=0),a},ct={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pt=function(t,e,i){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},ft=a.parseColor=function(t,e){var i,n,r,s,o,a,h,l,u,c,p;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ct[t])i=ct[t];else if("#"===t.charAt(0))4===t.length&&(n=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+n+n+r+r+s+s),t=parseInt(t.substr(1),16),i=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=p=t.match(_),e){if(-1!==t.indexOf("="))return t.match(b)}else o=Number(i[0])%360/360,a=Number(i[1])/100,h=Number(i[2])/100,r=h<=.5?h*(a+1):h+a-h*a,n=2*h-r,i.length>3&&(i[3]=Number(t[3])),i[0]=pt(o+1/3,n,r),i[1]=pt(o,n,r),i[2]=pt(o-1/3,n,r);else i=t.match(_)||ct.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ct.black;return e&&!p&&(n=i[0]/255,r=i[1]/255,s=i[2]/255,l=Math.max(n,r,s),u=Math.min(n,r,s),h=(l+u)/2,l===u?o=a=0:(c=l-u,a=h>.5?c/(2-l-u):c/(l+u),o=l===n?(r-s)/c+(r<s?6:0):l===r?(s-n)/c+2:(n-r)/c+4,o*=60),i[0]=o+.5|0,i[1]=100*a+.5|0,i[2]=100*h+.5|0),i},dt=function(t,e){var i,n,r,s=t.match(mt)||[],o=0,a=s.length?"":t;for(i=0;i<s.length;i++)n=s[i],r=t.substr(o,t.indexOf(n,o)-o),o+=r.length+n.length,n=ft(n,e),3===n.length&&n.push(1),a+=r+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return a+t.substr(o)},mt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(u in ct)mt+="|"+u+"\\b";mt=new RegExp(mt+")","gi"),a.colorStringFilter=function(t){var e,i=t[0]+t[1];mt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=dt(t[0],e),t[1]=dt(t[1],e)),mt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var vt=function(t,e,i,n){if(null==t)return function(t){return t};var r,s=e?(t.match(mt)||[""])[0]:"",o=t.split(s).join("").match(x)||[],a=t.substr(0,t.indexOf(o[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",u=o.length,c=u>0?o[0].replace(_,""):"";return u?r=e?function(t){var e,p,f,d;if("number"==typeof t)t+=c;else if(n&&D.test(t)){for(d=t.replace(D,"|").split("|"),f=0;f<d.length;f++)d[f]=r(d[f]);return d.join(",")}if(e=(t.match(mt)||[s])[0],p=t.split(e).join("").match(x)||[],f=p.length,u>f--)for(;++f<u;)p[f]=i?p[(f-1)/2|0]:o[f];return a+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,p;if("number"==typeof t)t+=c;else if(n&&D.test(t)){for(s=t.replace(D,"|").split("|"),p=0;p<s.length;p++)s[p]=r(s[p]);return s.join(",")}if(e=t.match(x)||[],p=e.length,u>p--)for(;++p<u;)e[p]=i?e[(p-1)/2|0]:o[p];return a+e.join(l)+h}:function(t){return t}},gt=function(t){return t=t.split(","),function(e,i,n,r,s,o,a){var h,l=(i+"").split(" ");for(a={},h=0;h<4;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,a,s,o)}},yt=(X._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,s,o=this.data,a=o.proxy,h=o.firstMPT;h;)e=a[h.v],h.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),h.t[h.p]=e,h=h._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod(a.rotation,this.t):a.rotation),1===t||0===t)for(h=o.firstMPT,s=1===t?"e":"b";h;){if(i=h.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[s]=r}}else i[s]=i.s+i.xs0;h=h._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),_t=(X._parseToProxy=function(t,e,i,n,r,s){var o,a,h,l,u,c=n,p={},f={},d=i._transform,m=j;for(i._transform=null,j=e,n=u=i.parse(t,e,n,r),j=m,s&&(i._transform=d,c&&(c._prev=null,c._prev&&(c._prev._next=null)));n&&n!==c;){if(n.type<=1&&(a=n.p,f[a]=n.s+n.c,p[a]=n.s,s||(l=new yt(n,"s",a,l,n.r),n.c=0),1===n.type))for(o=n.l;--o>0;)h="xn"+o,a=n.p+"_"+h,f[a]=n.data[h],p[a]=n[h],s||(l=new yt(n,h,a,l,n.rxp[h]));n=n._next}return{proxy:p,end:f,firstMPT:l,pt:u}},X.CSSPropTween=function(t,e,i,r,s,a,h,l,u,c,p){this.t=t,this.p=e,this.s=i,this.c=r,this.n=h||e,t instanceof _t||o.push(this.n),this.r=l,this.type=a||0,u&&(this.pr=u,n=!0),this.b=void 0===c?i:c,this.e=void 0===p?i+r:p,s&&(this._next=s,s._prev=this)}),bt=function(t,e,i,n,r,s){var o=new _t(t,e,i,n-i,r,-1,s);return o.b=i,o.e=o.xs0=n,o},xt=a.parseComplex=function(t,e,i,n,r,s,o,h,l,u){i=i||s||"","function"==typeof n&&(n=n(y,g)),o=new _t(t,e,0,0,o,u?2:1,null,!1,h,i,n),n+="",r&&mt.test(n+i)&&(n=[i,n],a.colorStringFilter(n),i=n[0],n=n[1]);var p,f,d,m,v,x,w,T,S,E,M,P,A,C=i.split(", ").join(",").split(" "),O=n.split(", ").join(",").split(" "),L=C.length,k=!1!==c;for(-1===n.indexOf(",")&&-1===i.indexOf(",")||(C=C.join(" ").replace(D,", ").split(" "),O=O.join(" ").replace(D,", ").split(" "),L=C.length),L!==O.length&&(C=(s||"").split(" "),L=C.length),o.plugin=l,o.setRatio=u,mt.lastIndex=0,p=0;p<L;p++)if(m=C[p],v=O[p],(T=parseFloat(m))||0===T)o.appendXtra("",T,ht(v,T),v.replace(b,""),k&&-1!==v.indexOf("px"),!0);else if(r&&mt.test(m))P=v.indexOf(")")+1,P=")"+(P?v.substr(P):""),A=-1!==v.indexOf("hsl")&&H,m=ft(m,A),v=ft(v,A),S=m.length+v.length>6,S&&!H&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(O[p]).join("transparent")):(H||(S=!1),A?o.appendXtra(S?"hsla(":"hsl(",m[0],ht(v[0],m[0]),",",!1,!0).appendXtra("",m[1],ht(v[1],m[1]),"%,",!1).appendXtra("",m[2],ht(v[2],m[2]),S?"%,":"%"+P,!1):o.appendXtra(S?"rgba(":"rgb(",m[0],v[0]-m[0],",",!0,!0).appendXtra("",m[1],v[1]-m[1],",",!0).appendXtra("",m[2],v[2]-m[2],S?",":P,!0),S&&(m=m.length<4?1:m[3],o.appendXtra("",m,(v.length<4?1:v[3])-m,P,!1))),mt.lastIndex=0;else if(x=m.match(_)){if(!(w=v.match(b))||w.length!==x.length)return o;for(d=0,f=0;f<x.length;f++)M=x[f],E=m.indexOf(M,d),o.appendXtra(m.substr(d,E-d),Number(M),ht(w[f],M),"",k&&"px"===m.substr(E+M.length,2),0===f),d=E+M.length;o["xs"+o.l]+=m.substr(d)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+v:v;if(-1!==n.indexOf("=")&&o.data){for(P=o.xs0+o.data.s,p=1;p<o.l;p++)P+=o["xs"+p]+o.data["xn"+p];o.e=P+o["xs"+p]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},wt=9;for(u=_t.prototype,u.l=u.pr=0;--wt>0;)u["xn"+wt]=0,u["xs"+wt]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(t,e,i,n,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&(a||o["xs"+a])?" "+t:t||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",a>0?(o.data["xn"+a]=e+i,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new _t(o,"xn"+a,e,i,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=r,o)):(o["xs"+a]+=e+(n||""),o)};var Tt=function(t,e){e=e||{},this.p=e.prefix?K(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},St=X._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r=t.split(","),s=e.defaultValue;for(i=i||[s],n=0;n<r.length;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||s,new Tt(r[n],e)},Et=X._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";St(t,{parser:function(t,i,n,r,s,o,a){var u=h.com.greensock.plugins[e];return u?(u._cssRegister(),l[n].parse(t,i,n,r,s,o,a)):(Y(),s)}})}};u=Tt.prototype,u.parseComplex=function(t,e,i,n,r,s){var o,a,h,l,u,c,p=this.keyword;if(this.multi&&(D.test(i)||D.test(e)?(a=e.replace(D,"|").split("|"),h=i.replace(D,"|").split("|")):p&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,o=0;o<l;o++)e=a[o]=a[o]||this.dflt,i=h[o]=h[o]||this.dflt,p&&(u=e.indexOf(p),c=i.indexOf(p),u!==c&&(-1===c?a[o]=a[o].split(p).join(""):-1===u&&(a[o]+=" "+p)));e=a.join(", "),i=h.join(", ")}return xt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,s)},u.parse=function(t,e,i,n,r,o,a){return this.parseComplex(t.style,this.format($(t,this.p,s,!1,this.dflt)),this.format(e),r,o)},a.registerSpecialProp=function(t,e,i){St(t,{parser:function(t,n,r,s,o,a,h){var l=new _t(t,r,0,0,o,2,r,!1,i);return l.plugin=a,l.setRatio=e(t,n,s._tween,r),l},priority:i})},a.useSVGTransformAttr=f||d;var Mt,Pt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),At=K("transform"),Ct=Z+"transform",Ot=K("transformOrigin"),Lt=null!==K("perspective"),kt=X.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(!1===a.defaultForce3D||!Lt)&&(a.defaultForce3D||"auto")},Rt=window.SVGElement,It=function(t,e,i){var n,r=U.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(s,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},Dt=U.documentElement,Ft=function(){var t,e,i,n=v||/Android/i.test(W)&&!window.chrome;return U.createElementNS&&!n&&(t=It("svg",Dt),e=It("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[Ot]="50% 50%",e.style[At]="scaleX(0.5)",n=i===e.getBoundingClientRect().width&&!(d&&Lt),Dt.removeChild(t)),n}(),Nt=function(t,e,i,n,r,s){var o,h,l,u,c,p,f,d,m,v,g,y,_,b,x=t._gsTransform,w=zt(t,!0);x&&(_=x.xOrigin,b=x.yOrigin),(!n||(o=n.split(" ")).length<2)&&(f=t.getBBox(),e=at(e).split(" "),o=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*f.width:parseFloat(e[0]))+f.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*f.height:parseFloat(e[1]))+f.y]),i.xOrigin=u=parseFloat(o[0]),i.yOrigin=c=parseFloat(o[1]),n&&w!==Ut&&(p=w[0],f=w[1],d=w[2],m=w[3],v=w[4],g=w[5],y=p*m-f*d,h=u*(m/y)+c*(-d/y)+(d*g-m*v)/y,l=u*(-f/y)+c*(p/y)-(p*g-f*v)/y,u=i.xOrigin=o[0]=h,c=i.yOrigin=o[1]=l),x&&(s&&(i.xOffset=x.xOffset,i.yOffset=x.yOffset,x=i),r||!1!==r&&!1!==a.defaultSmoothOrigin?(h=u-_,l=c-b,x.xOffset+=h*w[0]+l*w[2]-h,x.yOffset+=h*w[1]+l*w[3]-l):x.xOffset=x.yOffset=0),s||t.setAttribute("data-svg-origin",o.join(" "))},Bt=function(t){try{return t.getBBox()}catch(t){}},jt=function(t){return!!(Rt&&t.getBBox&&t.getCTM&&Bt(t)&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},Ut=[1,0,0,1,0,0],zt=function(t,e){var i,n,r,s,o,a,h=t._gsTransform||new kt,l=t.style;if(At?n=$(t,Ct,null,!0):t.currentStyle&&(n=t.currentStyle.filter.match(R),n=n&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),h.x||0,h.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,i&&At&&((a="none"===J(t).display)||!t.parentNode)&&(a&&(s=l.display,l.display="block"),t.parentNode||(o=1,Dt.appendChild(t)),n=$(t,Ct,null,!0),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,s?l.display=s:a&&Ht(l,"display"),o&&Dt.removeChild(t)),(h.svg||t.getBBox&&jt(t))&&(i&&-1!==(l[At]+"").indexOf("matrix")&&(n=l[At],i=0),r=t.getAttribute("transform"),i&&r&&(-1!==r.indexOf("matrix")?(n=r,i=0):-1!==r.indexOf("translate")&&(n="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Ut;for(r=(n||"").match(_)||[],wt=r.length;--wt>-1;)s=Number(r[wt]),r[wt]=(o=s-(s|=0))?(1e5*o+(o<0?-.5:.5)|0)/1e5+s:s;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Gt=X.getTransform=function(t,i,n,r){if(t._gsTransform&&n&&!r)return t._gsTransform;var s,o,h,l,u,c,p=n?t._gsTransform||new kt:new kt,f=p.scaleX<0,d=Lt?parseFloat($(t,Ot,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,m=parseFloat(a.defaultTransformPerspective)||0;if(p.svg=!(!t.getBBox||!jt(t)),p.svg&&(Nt(t,$(t,Ot,i,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),Mt=a.useSVGTransformAttr||Ft),(s=zt(t))!==Ut){if(16===s.length){var v,g,y,_,b,x=s[0],w=s[1],T=s[2],S=s[3],E=s[4],M=s[5],P=s[6],A=s[7],C=s[8],O=s[9],L=s[10],k=s[12],R=s[13],I=s[14],D=s[11],F=Math.atan2(P,L);p.zOrigin&&(I=-p.zOrigin,k=C*I-s[12],R=O*I-s[13],I=L*I+p.zOrigin-s[14]),p.rotationX=F*B,F&&(_=Math.cos(-F),b=Math.sin(-F),v=E*_+C*b,g=M*_+O*b,y=P*_+L*b,C=E*-b+C*_,O=M*-b+O*_,L=P*-b+L*_,D=A*-b+D*_,E=v,M=g,P=y),F=Math.atan2(-T,L),p.rotationY=F*B,F&&(_=Math.cos(-F),b=Math.sin(-F),v=x*_-C*b,g=w*_-O*b,y=T*_-L*b,O=w*b+O*_,L=T*b+L*_,D=S*b+D*_,x=v,w=g,T=y),F=Math.atan2(w,x),p.rotation=F*B,F&&(_=Math.cos(-F),b=Math.sin(-F),x=x*_+E*b,g=w*_+M*b,M=w*-b+M*_,P=T*-b+P*_,w=g),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),
p.scaleX=(1e5*Math.sqrt(x*x+w*w)+.5|0)/1e5,p.scaleY=(1e5*Math.sqrt(M*M+O*O)+.5|0)/1e5,p.scaleZ=(1e5*Math.sqrt(P*P+L*L)+.5|0)/1e5,p.rotationX||p.rotationY?p.skewX=0:(p.skewX=E||M?Math.atan2(E,M)*B+p.rotation:p.skewX||0,Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(f?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180))),p.perspective=D?1/(D<0?-D:D):0,p.x=k,p.y=R,p.z=I,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*x-p.yOrigin*E),p.y-=p.yOrigin-(p.yOrigin*w-p.xOrigin*M))}else if(!Lt||r||!s.length||p.x!==s[4]||p.y!==s[5]||!p.rotationX&&!p.rotationY){var N=s.length>=6,j=N?s[0]:1,U=s[1]||0,z=s[2]||0,G=N?s[3]:1;p.x=s[4]||0,p.y=s[5]||0,h=Math.sqrt(j*j+U*U),l=Math.sqrt(G*G+z*z),u=j||U?Math.atan2(U,j)*B:p.rotation||0,c=z||G?Math.atan2(z,G)*B+u:p.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(f?(h*=-1,c+=u<=0?180:-180,u+=u<=0?180:-180):(l*=-1,c+=c<=0?180:-180)),p.scaleX=h,p.scaleY=l,p.rotation=u,p.skewX=c,Lt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=m,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*j+p.yOrigin*z),p.y-=p.yOrigin-(p.xOrigin*U+p.yOrigin*G))}p.zOrigin=d;for(o in p)p[o]<2e-5&&p[o]>-2e-5&&(p[o]=0)}return n&&(t._gsTransform=p,p.svg&&(Mt&&t.style[At]?e.delayedCall(.001,function(){Ht(t.style,At)}):!Mt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Vt=function(t){var e,i,n=this.data,r=-n.rotation*N,s=r+n.skewX*N,o=(Math.cos(r)*n.scaleX*1e5|0)/1e5,a=(Math.sin(r)*n.scaleX*1e5|0)/1e5,h=(Math.sin(s)*-n.scaleY*1e5|0)/1e5,l=(Math.cos(s)*n.scaleY*1e5|0)/1e5,u=this.t.style,c=this.t.currentStyle;if(c){i=a,a=-h,h=-i,e=c.filter,u.filter="";var p,f,d=this.t.offsetWidth,m=this.t.offsetHeight,g="absolute"!==c.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+a+", M21="+h+", M22="+l,_=n.x+d*n.xPercent/100,b=n.y+m*n.yPercent/100;if(null!=n.ox&&(p=(n.oxp?d*n.ox*.01:n.ox)-d/2,f=(n.oyp?m*n.oy*.01:n.oy)-m/2,_+=p-(p*o+f*a),b+=f-(p*h+f*l)),g?(p=d/2,f=m/2,y+=", Dx="+(p-(p*o+f*a)+_)+", Dy="+(f-(p*h+f*l)+b)+")"):y+=", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=e.replace(I,y):u.filter=y+" "+e,0!==t&&1!==t||1===o&&0===a&&0===h&&1===l&&(g&&-1===y.indexOf("Dx=0, Dy=0")||S.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!g){var x,w,E,M=v<8?1:-1;for(p=n.ieOffsetX||0,f=n.ieOffsetY||0,n.ieOffsetX=Math.round((d-((o<0?-o:o)*d+(a<0?-a:a)*m))/2+_),n.ieOffsetY=Math.round((m-((l<0?-l:l)*m+(h<0?-h:h)*d))/2+b),wt=0;wt<4;wt++)w=st[wt],x=c[w],i=-1!==x.indexOf("px")?parseFloat(x):tt(this.t,w,parseFloat(x),x.replace(T,""))||0,E=i!==n[w]?wt<2?-n.ieOffsetX:-n.ieOffsetY:wt<2?p-n.ieOffsetX:f-n.ieOffsetY,u[w]=(n[w]=Math.round(i-E*(0===wt||2===wt?1:M)))+"px"}}},Xt=X.set3DTransformRatio=X.setTransformRatio=function(t){var e,i,n,r,s,o,a,h,l,u,c,p,f,m,v,g,y,_,b,x,w,T,S,E=this.data,M=this.t.style,P=E.rotation,A=E.rotationX,C=E.rotationY,O=E.scaleX,L=E.scaleY,k=E.scaleZ,R=E.x,I=E.y,D=E.z,F=E.svg,B=E.perspective,j=E.force3D;if(((1===t||0===t)&&"auto"===j&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!j)&&!D&&!B&&!C&&!A&&1===k||Mt&&F||!Lt)return void(P||E.skewX||F?(P*=N,T=E.skewX*N,S=1e5,e=Math.cos(P)*O,r=Math.sin(P)*O,i=Math.sin(P-T)*-L,s=Math.cos(P-T)*L,T&&"simple"===E.skewType&&(y=Math.tan(T-E.skewY*N),y=Math.sqrt(1+y*y),i*=y,s*=y,E.skewY&&(y=Math.tan(E.skewY*N),y=Math.sqrt(1+y*y),e*=y,r*=y)),F&&(R+=E.xOrigin-(E.xOrigin*e+E.yOrigin*i)+E.xOffset,I+=E.yOrigin-(E.xOrigin*r+E.yOrigin*s)+E.yOffset,Mt&&(E.xPercent||E.yPercent)&&(m=this.t.getBBox(),R+=.01*E.xPercent*m.width,I+=.01*E.yPercent*m.height),m=1e-6,R<m&&R>-m&&(R=0),I<m&&I>-m&&(I=0)),b=(e*S|0)/S+","+(r*S|0)/S+","+(i*S|0)/S+","+(s*S|0)/S+","+R+","+I+")",F&&Mt?this.t.setAttribute("transform","matrix("+b):M[At]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+b):M[At]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+L+","+R+","+I+")");if(d&&(m=1e-4,O<m&&O>-m&&(O=k=2e-5),L<m&&L>-m&&(L=k=2e-5),!B||E.z||E.rotationX||E.rotationY||(B=0)),P||E.skewX)P*=N,v=e=Math.cos(P),g=r=Math.sin(P),E.skewX&&(P-=E.skewX*N,v=Math.cos(P),g=Math.sin(P),"simple"===E.skewType&&(y=Math.tan((E.skewX-E.skewY)*N),y=Math.sqrt(1+y*y),v*=y,g*=y,E.skewY&&(y=Math.tan(E.skewY*N),y=Math.sqrt(1+y*y),e*=y,r*=y))),i=-g,s=v;else{if(!(C||A||1!==k||B||F))return void(M[At]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) translate3d(":"translate3d(")+R+"px,"+I+"px,"+D+"px)"+(1!==O||1!==L?" scale("+O+","+L+")":""));e=s=1,i=r=0}l=1,n=o=a=h=u=c=0,p=B?-1/B:0,f=E.zOrigin,m=1e-6,x=",",w="0",P=C*N,P&&(v=Math.cos(P),g=Math.sin(P),a=-g,u=p*-g,n=e*g,o=r*g,l=v,p*=v,e*=v,r*=v),P=A*N,P&&(v=Math.cos(P),g=Math.sin(P),y=i*v+n*g,_=s*v+o*g,h=l*g,c=p*g,n=i*-g+n*v,o=s*-g+o*v,l*=v,p*=v,i=y,s=_),1!==k&&(n*=k,o*=k,l*=k,p*=k),1!==L&&(i*=L,s*=L,h*=L,c*=L),1!==O&&(e*=O,r*=O,a*=O,u*=O),(f||F)&&(f&&(R+=n*-f,I+=o*-f,D+=l*-f+f),F&&(R+=E.xOrigin-(E.xOrigin*e+E.yOrigin*i)+E.xOffset,I+=E.yOrigin-(E.xOrigin*r+E.yOrigin*s)+E.yOffset),R<m&&R>-m&&(R=w),I<m&&I>-m&&(I=w),D<m&&D>-m&&(D=0)),b=E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix3d(":"matrix3d(",b+=(e<m&&e>-m?w:e)+x+(r<m&&r>-m?w:r)+x+(a<m&&a>-m?w:a),b+=x+(u<m&&u>-m?w:u)+x+(i<m&&i>-m?w:i)+x+(s<m&&s>-m?w:s),A||C||1!==k?(b+=x+(h<m&&h>-m?w:h)+x+(c<m&&c>-m?w:c)+x+(n<m&&n>-m?w:n),b+=x+(o<m&&o>-m?w:o)+x+(l<m&&l>-m?w:l)+x+(p<m&&p>-m?w:p)+x):b+=",0,0,0,0,1,0,",b+=R+x+I+x+D+x+(B?1+-D/B:1)+")",M[At]=b};u=kt.prototype,u.x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=u.xOffset=u.yOffset=0,u.scaleX=u.scaleY=u.scaleZ=1,St("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,r,o,h){if(n._lastParsedTransform===h)return r;n._lastParsedTransform=h;var l;"function"==typeof h[i]&&(l=h[i],h[i]=e);var u,c,p,f,d,m,v,_,b,x=t._gsTransform,w=t.style,T=Pt.length,S=h,E={},M=Gt(t,s,!0,S.parseTransform),P=S.transform&&("function"==typeof S.transform?S.transform(y,g):S.transform);if(n._transform=M,P&&"string"==typeof P&&At)c=G.style,c[At]=P,c.display="block",c.position="absolute",U.body.appendChild(G),u=Gt(G,null,!1),M.svg&&(m=M.xOrigin,v=M.yOrigin,u.x-=M.xOffset,u.y-=M.yOffset,(S.transformOrigin||S.svgOrigin)&&(P={},Nt(t,at(S.transformOrigin),P,S.svgOrigin,S.smoothOrigin,!0),m=P.xOrigin,v=P.yOrigin,u.x-=P.xOffset-M.xOffset,u.y-=P.yOffset-M.yOffset),(m||v)&&(_=zt(G,!0),u.x-=m-(m*_[0]+v*_[2]),u.y-=v-(m*_[1]+v*_[3]))),U.body.removeChild(G),u.perspective||(u.perspective=M.perspective),null!=S.xPercent&&(u.xPercent=lt(S.xPercent,M.xPercent)),null!=S.yPercent&&(u.yPercent=lt(S.yPercent,M.yPercent));else if("object"==typeof S){if(u={scaleX:lt(null!=S.scaleX?S.scaleX:S.scale,M.scaleX),scaleY:lt(null!=S.scaleY?S.scaleY:S.scale,M.scaleY),scaleZ:lt(S.scaleZ,M.scaleZ),x:lt(S.x,M.x),y:lt(S.y,M.y),z:lt(S.z,M.z),xPercent:lt(S.xPercent,M.xPercent),yPercent:lt(S.yPercent,M.yPercent),perspective:lt(S.transformPerspective,M.perspective)},null!=(d=S.directionalRotation))if("object"==typeof d)for(c in d)S[c]=d[c];else S.rotation=d;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(u.x=0,u.xPercent=lt(S.x,M.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(u.y=0,u.yPercent=lt(S.y,M.yPercent)),u.rotation=ut("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":"rotationZ"in S?S.rotationZ:M.rotation-M.skewY,M.rotation-M.skewY,"rotation",E),Lt&&(u.rotationX=ut("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":M.rotationX||0,M.rotationX,"rotationX",E),u.rotationY=ut("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":M.rotationY||0,M.rotationY,"rotationY",E)),u.skewX=ut(S.skewX,M.skewX-M.skewY),(u.skewY=ut(S.skewY,M.skewY))&&(u.skewX+=u.skewY,u.rotation+=u.skewY)}for(Lt&&null!=S.force3D&&(M.force3D=S.force3D,f=!0),M.skewType=S.skewType||M.skewType||a.defaultSkewType,p=M.force3D||M.z||M.rotationX||M.rotationY||u.z||u.rotationX||u.rotationY||u.perspective,p||null==S.scale||(u.scaleZ=1);--T>-1;)b=Pt[T],((P=u[b]-M[b])>1e-6||P<-1e-6||null!=S[b]||null!=j[b])&&(f=!0,r=new _t(M,b,M[b],P,r),b in E&&(r.e=E[b]),r.xs0=0,r.plugin=o,n._overwriteProps.push(r.n));return P=S.transformOrigin,M.svg&&(P||S.svgOrigin)&&(m=M.xOffset,v=M.yOffset,Nt(t,at(P),u,S.svgOrigin,S.smoothOrigin),r=bt(M,"xOrigin",(x?M:u).xOrigin,u.xOrigin,r,"transformOrigin"),r=bt(M,"yOrigin",(x?M:u).yOrigin,u.yOrigin,r,"transformOrigin"),m===M.xOffset&&v===M.yOffset||(r=bt(M,"xOffset",x?m:M.xOffset,M.xOffset,r,"transformOrigin"),r=bt(M,"yOffset",x?v:M.yOffset,M.yOffset,r,"transformOrigin")),P=Mt?null:"0px 0px"),(P||Lt&&p&&M.zOrigin)&&(At?(f=!0,b=Ot,P=(P||$(t,b,s,!1,"50% 50%"))+"",r=new _t(w,b,0,0,r,-1,"transformOrigin"),r.b=w[b],r.plugin=o,Lt?(c=M.zOrigin,P=P.split(" "),M.zOrigin=(P.length>2&&(0===c||"0px"!==P[2])?parseFloat(P[2]):c)||0,r.xs0=r.e=P[0]+" "+(P[1]||"50%")+" 0px",r=new _t(M,"zOrigin",0,0,r,-1,r.n),r.b=c,r.xs0=r.e=M.zOrigin):r.xs0=r.e=P):at(P+"",M)),f&&(n._transformType=M.svg&&Mt||!p&&3!==this._transformType?2:3),l&&(h[i]=l),r},prefix:!0}),St("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),St("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,o,a){e=this.format(e);var h,l,u,c,p,f,d,m,v,g,y,_,b,x,w,T,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],E=t.style;for(v=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),h=e.split(" "),l=0;l<S.length;l++)this.p.indexOf("border")&&(S[l]=K(S[l])),p=c=$(t,S[l],s,!1,"0px"),-1!==p.indexOf(" ")&&(c=p.split(" "),p=c[0],c=c[1]),f=u=h[l],d=parseFloat(p),_=p.substr((d+"").length),b="="===f.charAt(1),b?(m=parseInt(f.charAt(0)+"1",10),f=f.substr(2),m*=parseFloat(f),y=f.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(f),y=f.substr((m+"").length)),""===y&&(y=r[i]||_),y!==_&&(x=tt(t,"borderLeft",d,_),w=tt(t,"borderTop",d,_),"%"===y?(p=x/v*100+"%",c=w/g*100+"%"):"em"===y?(T=tt(t,"borderLeft",1,"em"),p=x/T+"em",c=w/T+"em"):(p=x+"px",c=w+"px"),b&&(f=parseFloat(p)+m+y,u=parseFloat(c)+m+y)),o=xt(E,S[l],p+" "+c,f+" "+u,!1,"0px",o);return o},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),St("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,r,o){return xt(t.style,i,this.format($(t,i,s,!1,"0px 0px")),this.format(e),!1,"0px",r)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),St("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,r,o){var a,h,l,u,c,p,f="background-position",d=s||J(t,null),m=this.format((d?v?d.getPropertyValue(f+"-x")+" "+d.getPropertyValue(f+"-y"):d.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&g.split(",").length<2&&(p=$(t,"backgroundImage").replace(O,""))&&"none"!==p){for(a=m.split(" "),h=g.split(" "),V.setAttribute("src",p),l=2;--l>-1;)m=a[l],(u=-1!==m.indexOf("%"))!==(-1!==h[l].indexOf("%"))&&(c=0===l?t.offsetWidth-V.width:t.offsetHeight-V.height,a[l]=u?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=a.join(" ")}return this.parseComplex(t.style,m,g,r,o)},formatter:at}),St("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",at(-1===t.indexOf(" ")?t+" "+t:t)}}),St("perspective",{defaultValue:"0px",prefix:!0}),St("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),St("transformStyle",{prefix:!0}),St("backfaceVisibility",{prefix:!0}),St("userSelect",{prefix:!0}),St("margin",{parser:gt("marginTop,marginRight,marginBottom,marginLeft")}),St("padding",{parser:gt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),St("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,r,o){var a,h,l;return v<9?(h=t.currentStyle,l=v<8?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format($(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,r,o)}}),St("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),St("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),St("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,r,o){var a=$(t,"borderTopWidth",s,!1,"0px"),h=this.format(e).split(" "),l=h[0].replace(T,"");return"px"!==l&&(a=parseFloat(a)/tt(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(a+" "+$(t,"borderTopStyle",s,!1,"solid")+" "+$(t,"borderTopColor",s,!1,"#000")),h.join(" "),r,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(mt)||["#000"])[0]}}),St("borderWidth",{parser:gt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),St("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r,s){var o=t.style,a="cssFloat"in o?"cssFloat":"styleFloat";return new _t(o,a,0,0,r,-1,i,!1,0,o[a],e)}});var Wt=function(t){var e,i=this.t,n=i.filter||$(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=n.replace(M,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(S,"opacity="+r))};St("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,r,o){var a=parseFloat($(t,"opacity",s,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===$(t,"visibility",s)&&0!==e&&(a=0),H?r=new _t(h,"opacity",a,e-a,r):(r=new _t(h,"opacity",100*a,100*(e-a),r),r.xn1=l?1:0,h.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=o,r.setRatio=Wt),l&&(r=new _t(h,"visibility",0,0,r,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),r.xs0="inherit",n._overwriteProps.push(r.n),n._overwriteProps.push(i)),r}});var Ht=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(A,"-$1").toLowerCase())):t.removeAttribute(e))},qt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ht(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};St("className",{parser:function(t,e,i,r,o,a,h){var l,u,c,p,f,d=t.getAttribute("class")||"",m=t.style.cssText;if(o=r._classNamePT=new _t(t,i,0,0,o,2),o.setRatio=qt,o.pr=-11,n=!0,o.b=d,u=it(t,s),c=t._gsClassPT){for(p={},f=c.data;f;)p[f.p]=1,f=f._next;c.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),l=nt(t,u,it(t),h,p),t.setAttribute("class",d),o.data=l.firstMPT,t.style.cssText=m,o=o.xfirst=r.parse(t,l.difs,o,a)}});var Yt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,s,o=this.t.style,a=l.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),n=e.length;--n>-1;)i=e[n],l[i]&&(l[i].parse===a?r=!0:i="transformOrigin"===i?Ot:l[i].p),Ht(o,i);r&&(Ht(o,At),(s=this.t._gsTransform)&&(s.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(St("clearProps",{parser:function(t,e,i,r,s){return s=new _t(t,i,0,0,s,2),s.setRatio=Yt,s.e=e,s.pr=-10,s.data=r._tween,n=!0,s}}),u="bezier,throwProps,physicsProps,physics2D".split(","),wt=u.length;wt--;)Et(u[wt]);u=a.prototype,u._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(t,e,i,h){if(!t.nodeType)return!1;this._target=g=t,this._tween=i,this._vars=e,y=h,c=e.autoRound,n=!1,r=e.suffixMap||a.suffixMap,s=J(t,""),o=this._overwriteProps;var u,d,v,_,b,x,w,T,S,M=t.style;if(p&&""===M.zIndex&&("auto"!==(u=$(t,"zIndex",s))&&""!==u||this._addLazySet(M,"zIndex",0)),"string"==typeof e&&(_=M.cssText,u=it(t,s),M.cssText=_+";"+e,u=nt(t,u,it(t)).difs,!H&&E.test(e)&&(u.opacity=parseFloat(RegExp.$1)),e=u,M.cssText=_),e.className?this._firstPT=d=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=d=this.parse(t,e,null),this._transformType){for(S=3===this._transformType,At?f&&(p=!0,""===M.zIndex&&("auto"!==(w=$(t,"zIndex",s))&&""!==w||this._addLazySet(M,"zIndex",0)),m&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(S?"visible":"hidden"))):M.zoom=1,v=d;v&&v._next;)v=v._next;T=new _t(t,"transform",0,0,null,2),this._linkCSSP(T,null,v),T.setRatio=At?Xt:Vt,T.data=this._transform||Gt(t,s,!0),T.tween=i,T.pr=-1,o.pop()}if(n){for(;d;){for(x=d._next,v=_;v&&v.pr>d.pr;)v=v._next;(d._prev=v?v._prev:b)?d._prev._next=d:_=d,(d._next=v)?v._prev=d:b=d,d=x}this._firstPT=_}return!0},u.parse=function(t,e,i,n){var o,a,h,u,p,f,d,m,v,_,b=t.style;for(o in e)f=e[o],"function"==typeof f&&(f=f(y,g)),a=l[o],a?i=a.parse(t,f,o,this,i,n,e):(p=$(t,o,s)+"",v="string"==typeof f,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||v&&P.test(f)?(v||(f=ft(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),i=xt(b,o,p,f,!0,"transparent",i,0,n)):v&&F.test(f)?i=xt(b,o,p,f,!0,null,i,0,n):(h=parseFloat(p),d=h||0===h?p.substr((h+"").length):"",""!==p&&"auto"!==p||("width"===o||"height"===o?(h=ot(t,o,s),d="px"):"left"===o||"top"===o?(h=et(t,o,s),d="px"):(h="opacity"!==o?0:1,d="")),_=v&&"="===f.charAt(1),_?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),m=f.replace(T,"")):(u=parseFloat(f),m=v?f.replace(T,""):""),""===m&&(m=o in r?r[o]:d),f=u||0===u?(_?u+h:u)+m:e[o],d!==m&&""!==m&&(u||0===u)&&h&&(h=tt(t,o,h,d),"%"===m?(h/=tt(t,o,100,"%")/100,!0!==e.strictUnits&&(p=h+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?h/=tt(t,o,1,m):"px"!==m&&(u=tt(t,o,u,m),m="px"),_&&(u||0===u)&&(f=u+h+m)),_&&(u+=h),!h&&0!==h||!u&&0!==u?void 0!==b[o]&&(f||f+""!="NaN"&&null!=f)?(i=new _t(b,o,u||h||0,0,i,-1,o,!1,0,p,f),i.xs0="none"!==f||"display"!==o&&-1===o.indexOf("Style")?f:p):Y(e[o]):(i=new _t(b,o,h,u-h,i,0,o,!1!==c&&("px"===m||"zIndex"===o),0,p,f),i.xs0=m))),n&&i&&!i.plugin&&(i.plugin=n);return i},u.setRatio=function(t){var e,i,n,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},u._enableTransforms=function(t){this._transform=this._transform||Gt(this._target,s,!0),this._transformType=this._transform.svg&&Mt||!t&&3!==this._transformType?2:3};var Zt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(t,e,i){var n=this._firstPT=new _t(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Zt,n.data=this},u._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},u._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},u._kill=function(e){var i,n,r,s=e;if(e.autoAlpha||e.alpha){s={};for(n in e)s[n]=e[n];s.opacity=1,s.autoAlpha&&(s.visibility=1)}for(e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(e),n=i.plugin),i=i._next;return t.prototype._kill.call(this,s)};var Qt=function(t,e,i){var n,r,s,o;if(t.slice)for(r=t.length;--r>-1;)Qt(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)s=n[r],o=s.type,s.style&&(e.push(it(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Qt(s,e,i)};return a.cascadeTo=function(t,i,n){var r,s,o,a,h=e.to(t,i,n),l=[h],u=[],c=[],p=[],f=e._internals.reservedProps;for(t=h._targets||h.target,Qt(t,u,p),h.render(i,!0,!0),Qt(t,c),h.render(0,!0,!0),h._enabled(!0),r=p.length;--r>-1;)if(s=nt(p[r],u[r],c[r]),s.firstMPT){s=s.difs;for(o in n)f[o]&&(s[o]=n[o]);a={};for(o in s)a[o]=u[r][o];l.push(e.fromTo(p[r],i,a,s))}return l},t.activate([a]),a},!0),function(){var t=i._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},n=t.prototype;n._onInitAllProps=function(){for(var t,i,n,r=this._tween,s=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),o=s.length,a={},h=r._propLookup.roundProps;--o>-1;)a[s[o]]=Math.round;for(o=s.length;--o>-1;)for(t=s[o],i=r._firstPT;i;)n=i._next,i.pg?i.t._mod(a):i.n===t&&(2===i.f&&i.t?e(i.t._firstPT):(this._add(i.t,t,i.s,i.c),n&&(n._prev=i._prev),i._prev?i._prev._next=n:r._firstPT===i&&(r._firstPT=n),i._next=i._prev=null,r._propLookup[t]=h)),i=n;return!1},n._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,Math.round),this._overwriteProps.push(e)}}(),function(){i._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,i,n){var r,s;if("function"!=typeof t.setAttribute)return!1;for(r in e)s=e[r],"function"==typeof s&&(s=s(n,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",s+"",r,!1,r),this._overwriteProps.push(r);return!0}})}(),i._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,i,n){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,s,o,a,h,l,u=!0===e.useRadians?2*Math.PI:360;for(r in e)"useRadians"!==r&&(a=e[r],"function"==typeof a&&(a=a(n,t)),l=(a+"").split("_"),s=l[0],o=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),a=this.finals[r]="string"==typeof s&&"="===s.charAt(1)?o+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,h=a-o,l.length&&(s=l.join("_"),-1!==s.indexOf("short")&&(h%=u)!==h%(u/2)&&(h=h<0?h+u:h-u),-1!==s.indexOf("_cw")&&h<0?h=(h+9999999999*u)%u-(h/u|0)*u:-1!==s.indexOf("ccw")&&h>0&&(h=(h-9999999999*u)%u-(h/u|0)*u)),(h>1e-6||h<-1e-6)&&(this._addTween(t,r,o,o+h,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,i._gsDefine("easing.Back",["easing.Ease"],function(t){var e,n,r,s=i.GreenSockGlobals||i,o=s.com.greensock,a=2*Math.PI,h=Math.PI/2,l=o._class,u=function(e,i){var n=l("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},c=t.register||function(){},p=function(t,e,i,n,r){var s=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return c(s,t),s},f=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},d=function(e,i){var n=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},m=p("Back",d("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),d("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),d("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),v=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),g=v.prototype=new t;return g.constructor=v,g.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},v.ease=new v(.7,.7),g.config=v.config=function(t,e,i){return new v(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},n=l("easing.RoughEase",function(e){e=e||{};for(var i,n,r,s,o,a,h=e.taper||"none",l=[],u=0,c=0|(e.points||20),p=c,d=!1!==e.randomize,m=!0===e.clamp,v=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=d?Math.random():1/c*p,n=v?v.getRatio(i):i,"none"===h?r=g:"out"===h?(s=1-i,r=s*s*g):"in"===h?r=i*i*g:i<.5?(s=2*i,r=s*s*.5*g):(s=2*(1-i),r=s*s*.5*g),d?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:n<0&&(n=0)),l[u++]={x:i,y:n};for(l.sort(function(t,e){return t.x-e.x}),a=new f(1,1,null),p=c;--p>-1;)o=l[p],a=new f(o.x,o.y,a);this._prev=new f(0,0,0!==a.t?a:a.next)},!0),g=n.prototype=new t,g.constructor=n,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new n(t)},n.ease=new n,p("Bounce",u("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),u("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),u("BounceInOut",function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),p("Circ",u("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),u("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),u("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,n){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t,e){return new r(t,e)},r},p("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),r("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)},.3),r("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),p("Expo",u("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),u("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),u("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),p("Sine",u("SineOut",function(t){return Math.sin(t*h)}),u("SineIn",function(t){return 1-Math.cos(t*h)}),u("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(s.SlowMo,"SlowMo","ease,"),c(n,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),m},!0)}),i._gsDefine&&i._gsQueue.pop()(),function(t,i){"use strict";var n={},r=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!r.TweenLite){var s,o,a,h,l,u=function(t){var e,i=t.split("."),n=r;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},c=u("com.greensock"),p=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},f=function(){},d=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),m={},v=function(i,s,o,a){this.sc=m[i]?m[i].sc:[],m[i]=this,this.gsClass=null,this.func=o;var h=[];this.check=function(l){for(var c,p,f,d,g,y=s.length,_=y;--y>-1;)(c=m[s[y]]||new v(s[y],[])).gsClass?(h[y]=c.gsClass,_--):l&&c.sc.push(this);if(0===_&&o){if(p=("com.greensock."+i).split("."),f=p.pop(),d=u(p.join("."))[f]=this.gsClass=o.apply(o,h),a)if(r[f]=n[f]=d,!(g=void 0!==e&&e.exports)&&"function"==typeof define&&define.amd)define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+i.split(".").pop(),[],function(){return d});else if(g)if("TweenMax"===i){e.exports=n.TweenMax=d;for(y in n)d[y]=n[y]}else n.TweenMax&&(n.TweenMax[f]=d);for(y=0;y<this.sc.length;y++)this.sc[y].check()}},this.check(!0)},g=t._gsDefine=function(t,e,i,n){return new v(t,e,i,n)},y=c._class=function(t,e,i){return e=e||function(){},g(t,[],function(){return e},i),e};g.globals=r;var _=[0,0,1,1],b=y("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?_.concat(e):_},!0),x=b.map={},w=b.register=function(t,e,i,n){for(var r,s,o,a,h=e.split(","),l=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(s=h[l],r=n?y("easing."+s,null,!0):c.easing[s]||{},o=u.length;--o>-1;)a=u[o],x[s+"."+a]=x[a+s]=r[a]=t.getRatio?t:t[a]||new t};for(a=b.prototype,a._calcEnd=!1,a.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],o=s.length;--o>-1;)a=s[o]+",Power"+o,w(new b(null,null,1,o),a,"easeOut",!0),w(new b(null,null,2,o),a,"easeIn"+(0===o?",easeNone":"")),w(new b(null,null,3,o),a,"easeInOut");x.linear=c.easing.Linear.easeIn,x.swing=c.easing.Quad.easeInOut;var T=y("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});a=T.prototype,a.addEventListener=function(t,e,i,n,r){r=r||0;var s,o,a=this._listeners[t],u=0;for(this!==h||l||h.wake(),null==a&&(this._listeners[t]=a=[]),o=a.length;--o>-1;)s=a[o],s.c===e&&s.s===i?a.splice(o,1):0===u&&s.pr<r&&(u=o+1);a.splice(u,0,{c:e,s:i,up:n,pr:r})},a.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},a.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,e>1&&(r=r.slice(0)),i=this._eventTarget;--e>-1;)(n=r[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var S=t.requestAnimationFrame,E=t.cancelAnimationFrame,M=Date.now||function(){return(new Date).getTime()},P=M();for(s=["ms","moz","webkit","o"],o=s.length;--o>-1&&!S;)S=t[s[o]+"RequestAnimationFrame"],E=t[s[o]+"CancelAnimationFrame"]||t[s[o]+"CancelRequestAnimationFrame"];y("Ticker",function(t,e){var i,n,r,s,o,a=this,u=M(),c=!(!1===e||!S)&&"auto",p=500,d=33,m=function(t){var e,h,l=M()-P;l>p&&(u+=l-d),P+=l,a.time=(P-u)/1e3,e=a.time-o,(!i||e>0||!0===t)&&(a.frame++,o+=e+(e>=s?.004:s-e),h=!0),!0!==t&&(r=n(m)),h&&a.dispatchEvent("tick")};T.call(a),a.time=a.frame=0,a.tick=function(){m(!0)},a.lagSmoothing=function(t,e){p=t||1e10,d=Math.min(e,p,0)},a.sleep=function(){null!=r&&(c&&E?E(r):clearTimeout(r),n=f,r=null,a===h&&(l=!1))},a.wake=function(t){
null!==r?a.sleep():t?u+=-P+(P=M()):a.frame>10&&(P=M()-p+5),n=0===i?f:c&&S?S:function(t){return setTimeout(t,1e3*(o-a.time)+1|0)},a===h&&(l=!0),m(2)},a.fps=function(t){if(!arguments.length)return i;i=t,s=1/(i||60),o=this.time+s,a.wake()},a.useRAF=function(t){if(!arguments.length)return c;a.sleep(),c=t,a.fps(i)},a.fps(t),setTimeout(function(){"auto"===c&&a.frame<5&&"hidden"!==document.visibilityState&&a.useRAF(!1)},1500)}),a=c.Ticker.prototype=new c.events.EventDispatcher,a.constructor=c.Ticker;var A=y("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,q){l||h.wake();var i=this.vars.useFrames?H:q;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});h=A.ticker=new c.Ticker,a=A.prototype,a._dirty=a._gc=a._initted=a._paused=!1,a._totalTime=a._time=0,a._rawPrevTime=-1,a._next=a._last=a._onUpdate=a._timeline=a.timeline=null,a._paused=!1;var C=function(){l&&M()-P>2e3&&h.wake(),setTimeout(C,2e3)};C(),a.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},a.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},a.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},a.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},a.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},a.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},a.render=function(t,e,i){},a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},a.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&t<i+this.totalDuration()/this._timeScale},a._enabled=function(t,e){return l||h.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},a._kill=function(t,e){return this._enabled(!1,!1)},a.kill=function(t,e){return this._kill(t,e),this},a._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},a._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},a._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},a.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=d(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},a.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},a.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},a.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},a.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},a.totalTime=function(t,e,i){if(l||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(I.length&&Z(),this.render(t,e,!1),I.length&&Z())}return this},a.progress=a.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},a.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},a.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},a.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||1e-10,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},a.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},a.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(l||t||h.wake(),e=n.rawTime(),i=e-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var O=y("core.SimpleTimeline",function(t){A.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});a=O.prototype=new A,a.constructor=O,a.kill()._gc=!1,a._first=a._last=a._recent=null,a._sortChildren=!1,a.add=a.insert=function(t,e,i,n){var r,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(s=t._startTime;r&&r._startTime>s;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},a._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},a.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},a.rawTime=function(){return l||h.wake(),this._totalTime};var L=y("TweenLite",function(e,i,n){if(A.call(this,i,n),this.render=L.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:L.selector(e)||e;var r,s,o,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?W[L.defaultOverwrite]:"number"==typeof h?h>>0:W[h],(a||e instanceof Array||e.push&&d(e))&&"number"!=typeof e[0])for(this._targets=o=p(e),this._propLookup=[],this._siblings=[],r=0;r<o.length;r++)s=o[r],s?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(p(s))):(this._siblings[r]=Q(s,this,!1),1===h&&this._siblings[r].length>1&&J(s,this,null,1,this._siblings[r])):"string"==typeof(s=o[r--]=L.selector(s))&&o.splice(r+1,1):o.splice(r--,1);else this._propLookup={},this._siblings=Q(e,this,!1),1===h&&this._siblings.length>1&&J(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))},!0),k=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},R=function(t,e){var i,n={};for(i in t)X[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!z[i]||z[i]&&z[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};a=L.prototype=new A,a.constructor=L,a.kill()._gc=!1,a.ratio=0,a._firstPT=a._targets=a._overwrittenProps=a._startAt=null,a._notifyPluginsOfEnabled=a._lazy=!1,L.version="1.19.0",L.defaultEase=a._ease=new b(null,null,1,1),L.defaultOverwrite="auto",L.ticker=h,L.autoSleep=120,L.lagSmoothing=function(t,e){h.lagSmoothing(t,e)},L.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(L.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var I=[],D={},F=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,N=function(t){for(var e,i=this._firstPT;i;)e=i.blob?t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<1e-6&&e>-1e-6&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},B=function(t,e,i,n){var r,s,o,a,h,l,u,c=[t,e],p=0,f="",d=0;for(c.start=t,i&&(i(c),t=c[0],e=c[1]),c.length=0,r=t.match(F)||[],s=e.match(F)||[],n&&(n._next=null,n.blob=1,c._firstPT=c._applyPT=n),h=s.length,a=0;a<h;a++)u=s[a],l=e.substr(p,e.indexOf(u,p)-p),f+=l||!a?l:",",p+=l.length,d?d=(d+1)%5:"rgba("===l.substr(-5)&&(d=1),u===r[a]||r.length<=a?f+=u:(f&&(c.push(f),f=""),o=parseFloat(r[a]),c.push(o),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:o,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-o)||0,f:0,m:d&&d<4?Math.round:0}),p+=u.length;return f+=e.substr(p),f&&c.push(f),c.setRatio=N,c},j=function(t,e,i,n,r,s,o,a,h){"function"==typeof n&&(n=n(h||0,t));var l,u,c="get"===i?t[e]:i,p=typeof t[e],f="string"==typeof n&&"="===n.charAt(1),d={t:t,p:e,s:c,f:"function"===p,pg:0,n:r||e,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:f?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-c||0};if("number"!==p&&("function"===p&&"get"===i&&(u=e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),d.s=c=o?t[u](o):t[u]()),"string"==typeof c&&(o||isNaN(c))?(d.fp=o,l=B(c,n,a||L.defaultStringFilter,d),d={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):f||(d.s=parseFloat(c),d.c=parseFloat(n)-d.s||0)),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d},U=L._internals={isArray:d,isSelector:k,lazyTweens:I,blobDif:B},z=L._plugins={},G=U.tweenLookup={},V=0,X=U.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},H=A._rootFramesTimeline=new O,q=A._rootTimeline=new O,Y=30,Z=U.lazyRender=function(){var t,e=I.length;for(D={};--e>-1;)(t=I[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);I.length=0};q._startTime=h.time,H._startTime=h.frame,q._active=H._active=!0,setTimeout(Z,1),A._updateRoot=L.render=function(){var t,e,i;if(I.length&&Z(),q.render((h.time-q._startTime)*q._timeScale,!1,!1),H.render((h.frame-H._startTime)*H._timeScale,!1,!1),I.length&&Z(),h.frame>=Y){Y=h.frame+(parseInt(L.autoSleep,10)||120);for(i in G){for(e=G[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete G[i]}if((!(i=q._first)||i._paused)&&L.autoSleep&&!H._first&&1===h._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||h.sleep()}}},h.addEventListener("tick",A._updateRoot);var Q=function(t,e,i){var n,r,s=t._gsTweenID;if(G[s||(t._gsTweenID=s="t"+V++)]||(G[s]={target:t,tweens:[]}),e&&(n=G[s].tweens,n[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return G[s].tweens},K=function(t,e,i,n){var r,s,o=t.vars.onOverwrite;return o&&(r=o(t,e,i,n)),o=L.onOverwrite,o&&(s=o(t,e,i,n)),!1!==r&&!1!==s},J=function(t,e,i,n,r){var s,o,a,h;if(1===n||n>=4){for(h=r.length,s=0;s<h;s++)if((a=r[s])!==e)a._gc||a._kill(null,t,e)&&(o=!0);else if(5===n)break;return o}var l,u=e._startTime+1e-10,c=[],p=0,f=0===e._duration;for(s=r.length;--s>-1;)(a=r[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||$(e,0,f),0===$(a,l,f)&&(c[p++]=a)):a._startTime<=u&&a._startTime+a.totalDuration()/a._timeScale>u&&((f||!a._initted)&&u-a._startTime<=2e-10||(c[p++]=a)));for(s=p;--s>-1;)if(a=c[s],2===n&&a._kill(i,t,e)&&(o=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!K(a,e))continue;a._enabled(!1,!1)&&(o=!0)}return o},$=function(t,e,i){for(var n=t._timeline,r=n._timeScale,s=t._startTime;n._timeline;){if(s+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return s/=r,s>e?s-e:i&&s===e||!t._initted&&s-e<2e-10?1e-10:(s+=t.totalDuration()/t._timeScale/r)>e+1e-10?0:s-e-1e-10};a._init=function(){var t,e,i,n,r,s,o=this.vars,a=this._overwrittenProps,h=this._duration,l=!!o.immediateRender,u=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in o.startAt)r[n]=o.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&!1!==o.lazy,r.startAt=r.delay=null,this._startAt=L.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(o.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(n in o)X[n]&&"autoCSS"!==n||(i[n]=o[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==o.lazy,i.immediateRender=l,this._startAt=L.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof b?u:"function"==typeof u?new b(u,o.easeParams):x[u]||L.defaultEase:L.defaultEase,o.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(s=this._targets.length,t=0;t<s;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&L._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onUpdate,this._initted=!0},a._initProps=function(e,i,n,r,s){var o,a,h,l,u,c;if(null==e)return!1;D[e._gsTweenID]&&Z(),this.vars.css||e.style&&e!==t&&e.nodeType&&z.css&&!1!==this.vars.autoCSS&&R(this.vars,e);for(o in this.vars)if(c=this.vars[o],X[o])c&&(c instanceof Array||c.push&&d(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[o]=c=this._swapSelfInParams(c,this));else if(z[o]&&(l=new z[o])._onInitTween(e,this.vars[o],this,s)){for(this._firstPT=u={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority,m:0},a=l._overwriteProps.length;--a>-1;)i[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(h=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else i[o]=j.call(this,e,o,"get",c,o,0,null,this.vars.stringFilter,s);return r&&this._kill(r,e)?this._initProps(e,i,n,r,s):this._overwrite>1&&this._firstPT&&n.length>1&&J(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,r,s)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(D[e._gsTweenID]=!0),h)},a.render=function(t,e,i){var n,r,s,o,a=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h-1e-7)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(l<0||t<=0&&t>=-1e-7||1e-10===l&&"isPause"!==this.data)&&l!==t&&(i=!0,l>1e-10&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||l===t?t:1e-10);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===h&&l>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(1e-10!==l||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=o=!e||t||l===t?t:1e-10)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,c=this._easeType,p=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:t/h<.5?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,I.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/h):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==h||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,e,i),e||(this._time!==a||n||i)&&this._callback("onUpdate")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===h&&1e-10===this._rawPrevTime&&1e-10!==o&&(this._rawPrevTime=0)))}},a._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:L.selector(e)||e;var n,r,s,o,a,h,l,u,c,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((d(e)||k(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(h=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,u=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(L.onOverwrite||this.vars.onOverwrite)){for(s in l)a[s]&&(c||(c=[]),c.push(s));if((c||!t)&&!K(this,i,e,c))return!1}for(s in l)(o=a[s])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,h=!0),o.pg&&o.t._kill(l)&&(h=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[s]),u&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},a.invalidate=function(){return this._notifyPluginsOfEnabled&&L._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],A.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},a._enabled=function(t,e){if(l||h.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=Q(n[i],this,!0);else this._siblings=Q(this.target,this,!0)}return A.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&L._onPluginEvent(t?"_onEnable":"_onDisable",this)},L.to=function(t,e,i){return new L(t,e,i)},L.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new L(t,e,i)},L.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new L(t,e,n)},L.delayedCall=function(t,e,i,n,r){return new L(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},L.set=function(t,e){return new L(t,0,e)},L.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:L.selector(t)||t;var i,n,r,s;if((d(t)||k(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(L.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(s=n[i],r=i;--r>-1;)s===n[r]&&n.splice(i,1)}else for(n=Q(t).concat(),i=n.length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},L.killTweensOf=L.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=L.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var tt=y("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=tt.prototype},!0);if(a=tt.prototype,tt.version="1.19.0",tt.API=2,a._firstPT=null,a._addTween=j,a.setRatio=N,a._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},a._mod=a._roundProps=function(t){for(var e,i=this._firstPT;i;)e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")],e&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},L._onPluginEvent=function(t,e){var i,n,r,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:s)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:s=a,a=o}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},tt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===tt.API&&(z[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=y("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){tt.call(this,i,n),this._overwriteProps=r||[]},!0===t.global),a=o.prototype=new tt(i);a.constructor=o,o.API=t.API;for(e in s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,tt.activate([o]),o},s=t._gsQueue){for(o=0;o<s.length;o++)s[o]();for(a in m)m[a].func}l=!1}}(void 0!==e&&e.exports&&void 0!==t?t:this||window)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(t,e,i){!function(t,i,n,r){"use strict";function s(t,e,i){return setTimeout(u(t,i),e)}function o(t,e,i){return!!Array.isArray(t)&&(a(t,i[e],i),!0)}function a(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function h(e,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,r,n),e.apply(this,arguments)}}function l(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&ct(n,i)}function u(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==dt?t.apply(e?e[0]||r:r,e):t}function p(t,e){return t===r?e:t}function f(t,e,i){a(g(e),function(e){t.addEventListener(e,i,!1)})}function d(t,e,i){a(g(e),function(e){t.removeEventListener(e,i,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function b(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];y(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function x(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),o=0;o<pt.length;){if(i=pt[o],(n=i?i+s:e)in t)return n;o++}return r}function w(){return bt++}function T(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function S(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&i.handler(e)},this.init()}function E(t){var e=t.options.inputClass;return new(e||(Tt?j:St?G:wt?X:B))(t,M)}function M(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&Mt&&n-r==0,o=e&(At|Ct)&&n-r==0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,P(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function P(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=O(e)),r>1&&!i.firstMultiple?i.firstMultiple=O(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,h=e.center=L(n);e.timeStamp=gt(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=D(a,h),e.distance=I(a,h),A(i,e),e.offsetDirection=R(e.deltaX,e.deltaY);var l=k(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=vt(l.x)>vt(l.y)?l.x:l.y,e.scale=o?N(o.pointers,n):1,e.rotation=o?F(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,C(i,e);var u=t.element;m(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function A(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Mt&&s.eventType!==At||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function C(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=Ct&&(h>Et||a.velocity===r)){var l=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,c=k(h,l,u);n=c.x,s=c.y,i=vt(c.x)>vt(c.y)?c.x:c.y,o=R(l,u),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}function O(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:mt(t.pointers[i].clientX),clientY:mt(t.pointers[i].clientY)},i++;return{timeStamp:gt(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:mt(t[0].clientX),y:mt(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:mt(i/e),y:mt(n/e)}}function k(t,e,i){return{x:e/t||0,y:i/t||0}}function R(t,e){return t===e?Ot:vt(t)>=vt(e)?t<0?Lt:kt:e<0?Rt:It}function I(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function D(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function F(t,e){return D(e[1],e[0],jt)+D(t[1],t[0],jt)}function N(t,e){return I(e[0],e[1],jt)/I(t[0],t[1],jt)}function B(){this.evEl=zt,this.evWin=Gt,this.pressed=!1,S.apply(this,arguments)}function j(){this.evEl=Wt,this.evWin=Ht,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Yt,this.evWin=Zt,this.started=!1,S.apply(this,arguments)}function z(t,e){var i=_(t.touches),n=_(t.changedTouches);return e&(At|Ct)&&(i=b(i.concat(n),"identifier",!0)),[i,n]}function G(){this.evTarget=Kt,this.targetIds={},S.apply(this,arguments)}function V(t,e){var i=_(t.touches),n=this.targetIds;if(e&(Mt|Pt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=_(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return m(t.target,h)}),e===Mt)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(At|Ct)&&delete n[o[r].identifier],r++;return a.length?[b(s.concat(a),"identifier",!0),a]:void 0}function X(){S.apply(this,arguments);var t=u(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new B(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function W(t,e){t&Mt?(this.primaryTouch=e.changedPointers[0].identifier,H.call(this,e)):t&(At|Ct)&&H.call(this,e)}function H(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,r=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(r,Jt)}}function q(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=$t&&o<=$t)return!0}return!1}function Y(t,e){this.manager=t,this.set(e)}function Z(t){if(v(t,re))return re;var e=v(t,se),i=v(t,oe);return e&&i?re:e||i?e?se:oe:v(t,ne)?ne:ie}function Q(t){this.options=ct({},this.defaults,t||{}),this.id=w(),this.manager=null,this.options.enable=p(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function K(t){return t&fe?"cancel":t&ce?"end":t&ue?"move":t&le?"start":""}function J(t){return t==It?"down":t==Rt?"up":t==Lt?"left":t==kt?"right":""}function $(t,e){var i=e.manager;return i?i.get(t):t}function tt(){Q.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function nt(){Q.apply(this,arguments),this._timer=null,this._input=null}function rt(){tt.apply(this,arguments)}function st(){tt.apply(this,arguments)}function ot(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(t,e){return e=e||{},e.recognizers=p(e.recognizers,at.defaults.preset),new ht(t,e)}function ht(t,e){this.options=ct({},at.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=E(this),this.touchAction=new Y(this,this.options.touchAction),lt(this,!0),a(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function lt(t,e){var i=t.element;if(i.style){var n;a(t.options.cssProps,function(r,s){n=x(i.style,s),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function ut(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var ct,pt=["","webkit","Moz","MS","ms","o"],ft=i.createElement("div"),dt="function",mt=Math.round,vt=Math.abs,gt=Date.now;ct="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var yt=h(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),_t=h(function(t,e){return yt(t,e,!0)
},"merge","Use `assign`."),bt=1,xt=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in t,Tt=x(t,"PointerEvent")!==r,St=wt&&xt.test(navigator.userAgent),Et=25,Mt=1,Pt=2,At=4,Ct=8,Ot=1,Lt=2,kt=4,Rt=8,It=16,Dt=Lt|kt,Ft=Rt|It,Nt=Dt|Ft,Bt=["x","y"],jt=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(T(this.element),this.evWin,this.domHandler)}};var Ut={mousedown:Mt,mousemove:Pt,mouseup:At},zt="mousedown",Gt="mousemove mouseup";l(B,S,{handler:function(t){var e=Ut[t.type];e&Mt&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=At),this.pressed&&(e&At&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Vt={pointerdown:Mt,pointermove:Pt,pointerup:At,pointercancel:Ct,pointerout:Ct},Xt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Wt="pointerdown",Ht="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Wt="MSPointerDown",Ht="MSPointerMove MSPointerUp MSPointerCancel"),l(j,S,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Vt[n],s=Xt[t.pointerType]||t.pointerType,o="touch"==s,a=y(e,t.pointerId,"pointerId");r&Mt&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(At|Ct)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var qt={touchstart:Mt,touchmove:Pt,touchend:At,touchcancel:Ct},Yt="touchstart",Zt="touchstart touchmove touchend touchcancel";l(U,S,{handler:function(t){var e=qt[t.type];if(e===Mt&&(this.started=!0),this.started){var i=z.call(this,t,e);e&(At|Ct)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:Mt,touchmove:Pt,touchend:At,touchcancel:Ct},Kt="touchstart touchmove touchend touchcancel";l(G,S,{handler:function(t){var e=Qt[t.type],i=V.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var Jt=2500,$t=25;l(X,S,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)W.call(this,e,i);else if(r&&q.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var te=x(ft.style,"touchAction"),ee=te!==r,ie="auto",ne="manipulation",re="none",se="pan-x",oe="pan-y",ae=function(){if(!ee)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}();Y.prototype={set:function(t){"compute"==t&&(t=this.compute()),ee&&this.manager.element.style&&ae[t]&&(this.manager.element.style[te]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=v(n,re)&&!ae[re],s=v(n,oe)&&!ae[oe],o=v(n,se)&&!ae[se];if(r){var a=1===t.pointers.length,h=t.distance<2,l=t.deltaTime<250;if(a&&h&&l)return}return o&&s?void 0:r||s&&i&Dt||o&&i&Ft?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var he=1,le=2,ue=4,ce=8,pe=ce,fe=16;Q.prototype={defaults:{},set:function(t){return ct(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=$(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=$(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=$(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=$(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<ce&&e(i.options.event+K(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=ce&&e(i.options.event+K(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|he)))return!1;t++}return!0},recognize:function(t){var e=ct({},t);if(!c(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(pe|fe|32)&&(this.state=he),this.state=this.process(e),this.state&(le|ue|ce|fe)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},l(tt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(le|ue),r=this.attrTest(t);return n&&(i&Ct||!r)?e|fe:n||r?i&At?e|ce:e&le?e|ue:le:32}}),l(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Nt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Dt&&e.push(oe),t&Ft&&e.push(se),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Dt?(r=0===s?Ot:s<0?Lt:kt,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?Ot:o<0?Rt:It,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&le||!(this.state&le)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=J(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&le)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(nt,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ie]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(At|Ct)&&!r)this.reset();else if(t.eventType&Mt)this.reset(),this._timer=s(function(){this.state=pe,this.tryEmit()},e.time,this);else if(t.eventType&At)return pe;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===pe&&(t&&t.eventType&At?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=gt(),this.manager.emit(this.options.event,this._input)))}}),l(rt,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&le)}}),l(st,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Dt|Ft,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Dt|Ft)?e=t.overallVelocity:i&Dt?e=t.overallVelocityX:i&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&vt(e)>this.options.velocity&&t.eventType&At},emit:function(t){var e=J(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(ot,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ne]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Mt&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=At)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||I(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=pe,this.tryEmit()},e.interval,this),le):pe}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==pe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.7",at.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[it,{enable:!1},["rotate"]],[st,{direction:Dt}],[et,{direction:Dt},["swipe"]],[ot],[ot,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ht.prototype={set:function(t){return ct(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&pe)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(le|ue|ce)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=y(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return a(g(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return a(g(t),function(t){e?i[t]&&i[t].splice(y(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ut(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ct(at,{INPUT_START:Mt,INPUT_MOVE:Pt,INPUT_END:At,INPUT_CANCEL:Ct,STATE_POSSIBLE:he,STATE_BEGAN:le,STATE_CHANGED:ue,STATE_ENDED:ce,STATE_RECOGNIZED:pe,STATE_CANCELLED:fe,STATE_FAILED:32,DIRECTION_NONE:Ot,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:kt,DIRECTION_UP:Rt,DIRECTION_DOWN:It,DIRECTION_HORIZONTAL:Dt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:Nt,Manager:ht,Input:S,TouchAction:Y,TouchInput:G,MouseInput:B,PointerEventInput:j,TouchMouseInput:X,SingleTouchInput:U,Recognizer:Q,AttrRecognizer:tt,Tap:ot,Pan:et,Swipe:st,Pinch:it,Rotate:rt,Press:nt,on:f,off:d,each:a,merge:_t,extend:yt,assign:ct,inherit:l,bindFn:u,prefixed:x}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=at,"function"==typeof define&&define.amd?define(function(){return at}):void 0!==e&&e.exports?e.exports=at:t.Hammer=at}(window,document)},{}],23:[function(t,e,i){!function(t){function i(t,e){return t.test(e)}function n(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),n=e.split("[FBAN");void 0!==n[1]&&(e=n[0]),void 0!==(n=e.split("Twitter"))[1]&&(e=n[0]);var y={apple:{phone:i(r,e)&&!i(c,e),ipod:i(s,e),tablet:!i(r,e)&&i(o,e)&&!i(c,e),device:(i(r,e)||i(s,e)||i(o,e))&&!i(c,e)},amazon:{phone:i(l,e),tablet:!i(l,e)&&i(u,e),device:i(l,e)||i(u,e)},android:{phone:!i(c,e)&&i(l,e)||!i(c,e)&&i(a,e),tablet:!i(c,e)&&!i(l,e)&&!i(a,e)&&(i(u,e)||i(h,e)),device:!i(c,e)&&(i(l,e)||i(u,e)||i(a,e)||i(h,e))||i(/\bokhttp\b/i,e)},windows:{phone:i(c,e),tablet:i(p,e),device:i(c,e)||i(p,e)},other:{blackberry:i(f,e),blackberry10:i(d,e),opera:i(m,e),firefox:i(g,e),chrome:i(v,e),device:i(f,e)||i(d,e)||i(m,e)||i(g,e)||i(v,e)}};return y.any=y.apple.device||y.android.device||y.windows.device||y.other.device,y.phone=y.apple.phone||y.android.phone||y.windows.phone,y.tablet=y.apple.tablet||y.android.tablet||y.windows.tablet,y}var r=/iPhone/i,s=/iPod/i,o=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/\bAndroid(?:.+)SD4930UR\b/i,u=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,c=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,f=/BlackBerry/i,d=/BB10/i,m=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i;void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=n:void 0!==e&&e.exports&&"undefined"!=typeof window?(e.exports=n(),e.exports.isMobile=n):"function"==typeof define&&define.amd?define([],t.isMobile=n()):t.isMobile=n()}(this)},{}],24:[function(t,e,i){(function(){var t;t=void 0!==i&&null!==i?i:this,t.Lethargy=function(){function t(t,e,i,n){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=n?n:150,this.lastUpDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.lastDownDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.deltasTimestamp=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this)}return t.prototype.check=function(t){var e;return t=t.originalEvent||t,null!=t.wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,i,n,r,s,o,a;return e=-1===t?this.lastDownDeltas:this.lastUpDeltas,null===e[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(n=e.slice(0,this.stability),i=e.slice(this.stability,2*this.stability),a=n.reduce(function(t,e){return t+e}),s=i.reduce(function(t,e){return t+e}),o=a/n.length,r=s/i.length,Math.abs(o)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(this)},{}],25:[function(t,e,i){var n=t("./_root"),r=n.Symbol;e.exports=r},{"./_root":69}],26:[function(t,e,i){function n(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}e.exports=n},{}],27:[function(t,e,i){function n(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}e.exports=n},{}],28:[function(t,e,i){function n(t,e){var i=o(t),n=!i&&s(t),u=!i&&!n&&a(t),p=!i&&!n&&!u&&l(t),f=i||n||u||p,d=f?r(t.length,String):[],m=d.length;for(var v in t)!e&&!c.call(t,v)||f&&("length"==v||u&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||h(v,m))||d.push(v);return d}var r=t("./_baseTimes"),s=t("./isArguments"),o=t("./isArray"),a=t("./isBuffer"),h=t("./_isIndex"),l=t("./isTypedArray"),u=Object.prototype,c=u.hasOwnProperty;e.exports=n},{"./_baseTimes":45,"./_isIndex":60,"./isArguments":81,"./isArray":82,"./isBuffer":84,"./isTypedArray":92}],29:[function(t,e,i){function n(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}e.exports=n},{}],30:[function(t,e,i){function n(t,e,i){var n=t[e];a.call(t,e)&&s(n,i)&&(void 0!==i||e in t)||r(t,e,i)}var r=t("./_baseAssignValue"),s=t("./eq"),o=Object.prototype,a=o.hasOwnProperty;e.exports=n},{"./_baseAssignValue":31,"./eq":77}],31:[function(t,e,i){function n(t,e,i){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var r=t("./_defineProperty");e.exports=n},{"./_defineProperty":55}],32:[function(t,e,i){var n=t("./_baseForOwn"),r=t("./_createBaseEach"),s=r(n);e.exports=s},{"./_baseForOwn":35,"./_createBaseEach":53}],33:[function(t,e,i){function n(t,e,i,n){for(var r=t.length,s=i+(n?1:-1);n?s--:++s<r;)if(e(t[s],s,t))return s;return-1}e.exports=n},{}],34:[function(t,e,i){var n=t("./_createBaseFor"),r=n();e.exports=r},{"./_createBaseFor":54}],35:[function(t,e,i){function n(t,e){return t&&r(t,e,s)}var r=t("./_baseFor"),s=t("./keys");e.exports=n},{"./_baseFor":34,"./keys":93}],36:[function(t,e,i){function n(t){return null==t?void 0===t?h:a:l&&l in Object(t)?s(t):o(t)}var r=t("./_Symbol"),s=t("./_getRawTag"),o=t("./_objectToString"),a="[object Null]",h="[object Undefined]",l=r?r.toStringTag:void 0;e.exports=n},{"./_Symbol":25,"./_getRawTag":58,"./_objectToString":66}],37:[function(t,e,i){function n(t,e,i){return e===e?o(t,e,i):r(t,s,i)}var r=t("./_baseFindIndex"),s=t("./_baseIsNaN"),o=t("./_strictIndexOf");e.exports=n},{"./_baseFindIndex":33,"./_baseIsNaN":39,"./_strictIndexOf":72}],38:[function(t,e,i){function n(t){return s(t)&&r(t)==o}var r=t("./_baseGetTag"),s=t("./isObjectLike"),o="[object Arguments]";e.exports=n},{"./_baseGetTag":36,"./isObjectLike":89}],39:[function(t,e,i){function n(t){return t!==t}e.exports=n},{}],40:[function(t,e,i){function n(t){return!(!o(t)||s(t))&&(r(t)?d:l).test(a(t))}var r=t("./isFunction"),s=t("./_isMasked"),o=t("./isObject"),a=t("./_toSource"),h=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,f=c.hasOwnProperty,d=RegExp("^"+p.call(f).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},{"./_isMasked":62,"./_toSource":73,"./isFunction":85,"./isObject":88}],41:[function(t,e,i){function n(t){return o(t)&&s(t.length)&&!!a[r(t)]}var r=t("./_baseGetTag"),s=t("./isLength"),o=t("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=n},{"./_baseGetTag":36,"./isLength":86,"./isObjectLike":89}],42:[function(t,e,i){function n(t){if(!r(t))return s(t);var e=[];for(var i in Object(t))a.call(t,i)&&"constructor"!=i&&e.push(i);return e}var r=t("./_isPrototype"),s=t("./_nativeKeys"),o=Object.prototype,a=o.hasOwnProperty;e.exports=n},{"./_isPrototype":63,"./_nativeKeys":64}],43:[function(t,e,i){function n(t,e){return o(s(t,e,r),t+"")}var r=t("./identity"),s=t("./_overRest"),o=t("./_setToString");e.exports=n},{"./_overRest":68,"./_setToString":70,"./identity":79}],44:[function(t,e,i){var n=t("./constant"),r=t("./_defineProperty"),s=t("./identity"),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:s;e.exports=o},{"./_defineProperty":55,"./constant":75,"./identity":79}],45:[function(t,e,i){function n(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}e.exports=n},{}],46:[function(t,e,i){function n(t){if("string"==typeof t)return t;if(o(t))return s(t,n)+"";if(a(t))return u?u.call(t):"";var e=t+"";return"0"==e&&1/t==-h?"-0":e}var r=t("./_Symbol"),s=t("./_arrayMap"),o=t("./isArray"),a=t("./isSymbol"),h=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=n},{"./_Symbol":25,"./_arrayMap":29,"./isArray":82,"./isSymbol":91}],47:[function(t,e,i){function n(t){return function(e){return t(e)}}e.exports=n},{}],48:[function(t,e,i){function n(t,e){return r(e,function(e){return t[e]})}var r=t("./_arrayMap");e.exports=n},{"./_arrayMap":29}],49:[function(t,e,i){function n(t){return"function"==typeof t?t:r}var r=t("./identity");e.exports=n},{"./identity":79}],50:[function(t,e,i){function n(t,e,i,n){var o=!i;i||(i={});for(var a=-1,h=e.length;++a<h;){var l=e[a],u=n?n(i[l],t[l],l,i,t):void 0;void 0===u&&(u=t[l]),o?s(i,l,u):r(i,l,u)}return i}var r=t("./_assignValue"),s=t("./_baseAssignValue");e.exports=n},{"./_assignValue":30,"./_baseAssignValue":31}],51:[function(t,e,i){var n=t("./_root"),r=n["__core-js_shared__"];e.exports=r},{"./_root":69}],52:[function(t,e,i){function n(t){return r(function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&s(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var h=i[n];h&&t(e,h,n,o)}return e})}var r=t("./_baseRest"),s=t("./_isIterateeCall");e.exports=n},{"./_baseRest":43,"./_isIterateeCall":61}],53:[function(t,e,i){function n(t,e){return function(i,n){if(null==i)return i;if(!r(i))return t(i,n);for(var s=i.length,o=e?s:-1,a=Object(i);(e?o--:++o<s)&&!1!==n(a[o],o,a););return i}}var r=t("./isArrayLike");e.exports=n},{"./isArrayLike":83}],54:[function(t,e,i){function n(t){return function(e,i,n){for(var r=-1,s=Object(e),o=n(e),a=o.length;a--;){var h=o[t?a:++r];if(!1===i(s[h],h,s))break}return e}}e.exports=n},{}],55:[function(t,e,i){var n=t("./_getNative"),r=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=r},{"./_getNative":57}],56:[function(t,e,i){(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(t,e,i){function n(t,e){var i=s(t,e);return r(i)?i:void 0}var r=t("./_baseIsNative"),s=t("./_getValue");e.exports=n},{"./_baseIsNative":40,"./_getValue":59}],58:[function(t,e,i){function n(t){var e=o.call(t,h),i=t[h];try{t[h]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[h]=i:delete t[h]),r}var r=t("./_Symbol"),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,h=r?r.toStringTag:void 0;e.exports=n},{"./_Symbol":25}],59:[function(t,e,i){function n(t,e){return null==t?void 0:t[e]}e.exports=n},{}],60:[function(t,e,i){function n(t,e){var i=typeof t;return!!(e=null==e?r:e)&&("number"==i||"symbol"!=i&&s.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,s=/^(?:0|[1-9]\d*)$/;e.exports=n},{}],61:[function(t,e,i){function n(t,e,i){if(!a(i))return!1;var n=typeof e;return!!("number"==n?s(i)&&o(e,i.length):"string"==n&&e in i)&&r(i[e],t)}var r=t("./eq"),s=t("./isArrayLike"),o=t("./_isIndex"),a=t("./isObject");e.exports=n},{"./_isIndex":60,"./eq":77,"./isArrayLike":83,"./isObject":88}],62:[function(t,e,i){function n(t){return!!s&&s in t}var r=t("./_coreJsData"),s=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=n},{"./_coreJsData":51}],63:[function(t,e,i){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;e.exports=n},{}],64:[function(t,e,i){var n=t("./_overArg"),r=n(Object.keys,Object);e.exports=r},{"./_overArg":67}],65:[function(t,e,i){var n=t("./_freeGlobal"),r="object"==typeof i&&i&&!i.nodeType&&i,s=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=s&&s.exports===r,a=o&&n.process,h=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=h},{"./_freeGlobal":56}],66:[function(t,e,i){function n(t){return s.call(t)}var r=Object.prototype,s=r.toString;e.exports=n},{}],67:[function(t,e,i){function n(t,e){return function(i){return t(e(i))}}e.exports=n},{}],68:[function(t,e,i){function n(t,e,i){return e=s(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=s(n.length-e,0),h=Array(a);++o<a;)h[o]=n[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=n[o];return l[e]=i(h),r(t,this,l)}}var r=t("./_apply"),s=Math.max;e.exports=n},{"./_apply":26}],69:[function(t,e,i){var n=t("./_freeGlobal"),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();e.exports=s},{"./_freeGlobal":56}],70:[function(t,e,i){var n=t("./_baseSetToString"),r=t("./_shortOut"),s=r(n);e.exports=s},{"./_baseSetToString":44,"./_shortOut":71}],71:[function(t,e,i){function n(t){var e=0,i=0;return function(){var n=o(),a=s-(n-i);if(i=n,a>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,s=16,o=Date.now;e.exports=n},{}],72:[function(t,e,i){function n(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}e.exports=n},{}],73:[function(t,e,i){function n(t){if(null!=t){try{return s.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,s=r.toString;e.exports=n},{}],74:[function(t,e,i){var n=t("./_assignValue"),r=t("./_copyObject"),s=t("./_createAssigner"),o=t("./isArrayLike"),a=t("./_isPrototype"),h=t("./keys"),l=Object.prototype,u=l.hasOwnProperty,c=s(function(t,e){if(a(e)||o(e))return void r(e,h(e),t);for(var i in e)u.call(e,i)&&n(t,i,e[i])});e.exports=c},{"./_assignValue":30,"./_copyObject":50,"./_createAssigner":52,"./_isPrototype":63,"./isArrayLike":83,"./keys":93}],75:[function(t,e,i){function n(t){return function(){return t}}e.exports=n},{}],76:[function(t,e,i){function n(t,e,i){function n(e){var i=y,n=_;return y=_=void 0,S=e,x=t.apply(n,i)}function u(t){return S=t,w=setTimeout(f,e),E?n(t):x}function c(t){var i=t-T,n=t-S,r=e-i;return M?l(r,b-n):r}function p(t){var i=t-T,n=t-S;return void 0===T||i>=e||i<0||M&&n>=b}function f(){var t=s();if(p(t))return d(t);w=setTimeout(f,c(t))}function d(t){return w=void 0,P&&y?n(t):(y=_=void 0,x)}function m(){void 0!==w&&clearTimeout(w),S=0,y=T=_=w=void 0}function v(){return void 0===w?x:d(s())}function g(){var t=s(),i=p(t);if(y=arguments,_=this,T=t,i){if(void 0===w)return u(T);if(M)return clearTimeout(w),w=setTimeout(f,e),n(T)}return void 0===w&&(w=setTimeout(f,e)),x}var y,_,b,x,w,T,S=0,E=!1,M=!1,P=!0;if("function"!=typeof t)throw new TypeError(a);return e=o(e)||0,r(i)&&(E=!!i.leading,M="maxWait"in i,b=M?h(o(i.maxWait)||0,e):b,P="trailing"in i?!!i.trailing:P),g.cancel=m,g.flush=v,g}var r=t("./isObject"),s=t("./now"),o=t("./toNumber"),a="Expected a function",h=Math.max,l=Math.min;e.exports=n},{"./isObject":88,"./now":94,"./toNumber":98}],77:[function(t,e,i){function n(t,e){return t===e||t!==t&&e!==e}e.exports=n},{}],78:[function(t,e,i){function n(t,e){return(a(t)?r:s)(t,o(e))}var r=t("./_arrayEach"),s=t("./_baseEach"),o=t("./_castFunction"),a=t("./isArray");e.exports=n},{"./_arrayEach":27,"./_baseEach":32,"./_castFunction":49,"./isArray":82}],79:[function(t,e,i){function n(t){return t}e.exports=n},{}],80:[function(t,e,i){function n(t,e,i,n){t=s(t)?t:h(t),i=i&&!n?a(i):0;var u=t.length;return i<0&&(i=l(u+i,0)),o(t)?i<=u&&t.indexOf(e,i)>-1:!!u&&r(t,e,i)>-1}var r=t("./_baseIndexOf"),s=t("./isArrayLike"),o=t("./isString"),a=t("./toInteger"),h=t("./values"),l=Math.max;e.exports=n},{"./_baseIndexOf":37,"./isArrayLike":83,"./isString":90,"./toInteger":97,"./values":101}],81:[function(t,e,i){var n=t("./_baseIsArguments"),r=t("./isObjectLike"),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,h=n(function(){return arguments}())?n:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};e.exports=h},{"./_baseIsArguments":38,"./isObjectLike":89}],82:[function(t,e,i){var n=Array.isArray;e.exports=n},{}],83:[function(t,e,i){function n(t){return null!=t&&s(t.length)&&!r(t)}var r=t("./isFunction"),s=t("./isLength");e.exports=n},{"./isFunction":85,"./isLength":86}],84:[function(t,e,i){var n=t("./_root"),r=t("./stubFalse"),s="object"==typeof i&&i&&!i.nodeType&&i,o=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===s,h=a?n.Buffer:void 0,l=h?h.isBuffer:void 0,u=l||r;e.exports=u},{"./_root":69,"./stubFalse":95}],85:[function(t,e,i){function n(t){if(!s(t))return!1;var e=r(t);return e==a||e==h||e==o||e==l}var r=t("./_baseGetTag"),s=t("./isObject"),o="[object AsyncFunction]",a="[object Function]",h="[object GeneratorFunction]",l="[object Proxy]";e.exports=n},{"./_baseGetTag":36,"./isObject":88}],86:[function(t,e,i){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;e.exports=n},{}],87:[function(t,e,i){function n(t){return"number"==typeof t||s(t)&&r(t)==o}var r=t("./_baseGetTag"),s=t("./isObjectLike"),o="[object Number]";e.exports=n},{"./_baseGetTag":36,"./isObjectLike":89}],88:[function(t,e,i){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}e.exports=n},{}],89:[function(t,e,i){function n(t){return null!=t&&"object"==typeof t}e.exports=n},{}],90:[function(t,e,i){function n(t){return"string"==typeof t||!s(t)&&o(t)&&r(t)==a}var r=t("./_baseGetTag"),s=t("./isArray"),o=t("./isObjectLike"),a="[object String]";e.exports=n},{"./_baseGetTag":36,"./isArray":82,"./isObjectLike":89}],91:[function(t,e,i){function n(t){return"symbol"==typeof t||s(t)&&r(t)==o}var r=t("./_baseGetTag"),s=t("./isObjectLike"),o="[object Symbol]";e.exports=n},{"./_baseGetTag":36,"./isObjectLike":89}],92:[function(t,e,i){var n=t("./_baseIsTypedArray"),r=t("./_baseUnary"),s=t("./_nodeUtil"),o=s&&s.isTypedArray,a=o?r(o):n;e.exports=a},{"./_baseIsTypedArray":41,"./_baseUnary":47,"./_nodeUtil":65}],93:[function(t,e,i){function n(t){return o(t)?r(t):s(t)}var r=t("./_arrayLikeKeys"),s=t("./_baseKeys"),o=t("./isArrayLike");e.exports=n},{"./_arrayLikeKeys":28,"./_baseKeys":42,"./isArrayLike":83}],94:[function(t,e,i){var n=t("./_root"),r=function(){return n.Date.now()};e.exports=r},{"./_root":69}],95:[function(t,e,i){function n(){return!1}e.exports=n},{}],96:[function(t,e,i){function n(t){if(!t)return 0===t?t:0;if((t=r(t))===s||t===-s){return(t<0?-1:1)*o}return t===t?t:0}var r=t("./toNumber"),s=1/0,o=1.7976931348623157e308;e.exports=n},{"./toNumber":98}],97:[function(t,e,i){function n(t){var e=r(t),i=e%1;return e===e?i?e-i:e:0}var r=t("./toFinite");e.exports=n},{"./toFinite":96}],98:[function(t,e,i){function n(t){if("number"==typeof t)return t;if(s(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var i=l.test(t);return i||u.test(t)?c(t.slice(2),i?2:8):h.test(t)?o:+t}var r=t("./isObject"),s=t("./isSymbol"),o=NaN,a=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=n},{"./isObject":88,"./isSymbol":91}],99:[function(t,e,i){function n(t){return null==t?"":r(t)}var r=t("./_baseToString");e.exports=n},{"./_baseToString":46}],100:[function(t,e,i){function n(t){var e=++s;return r(t)+e}var r=t("./toString"),s=0;e.exports=n},{"./toString":99}],101:[function(t,e,i){function n(t){return null==t?[]:r(t,s(t))}var r=t("./_baseValues"),s=t("./keys");e.exports=n},{"./_baseValues":48,"./keys":93}],102:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){
return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return s(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return s(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,i.default=a,e.exports=i.default},{}],103:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var u in i)s.call(i,u)&&(h[u]=i[u]);if(r){a=r(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(h[a[c]]=i[a[c]])}}return h}},{}],104:[function(t,e,i){"use strict";function n(t){for(var e,i=getComputedStyle(t).fontFamily,n={};null!==(e=h.exec(i));)n[e[1]]=e[2];return n}function r(t,e){if(!t[a].parsingSrcset){var i=n(t);if(i["object-fit"]=i["object-fit"]||"fill",!t[a].s){if("fill"===i["object-fit"])return;if(!t[a].skipTest&&u&&!i["object-position"])return}var r=t[a].ios7src||t.currentSrc||t.src;if(e)r=e;else if(t.srcset&&!p&&window.picturefill){var o=window.picturefill._;t[a].parsingSrcset=!0,t[o.ns]&&t[o.ns].evaled||o.fillImg(t,{reselect:!0}),t[o.ns].curSrc||(t[o.ns].supported=!1,o.fillImg(t,{reselect:!0})),delete t[a].parsingSrcset,r=t[o.ns].curSrc||r}if(t[a].s)t[a].s=r,e&&(t[a].srcAttr=e);else{t[a]={s:r,srcAttr:e||f.call(t,"src"),srcsetAttr:t.srcset},t.src=a;try{t.srcset&&(t.srcset="",Object.defineProperty(t,"srcset",{value:t[a].srcsetAttr})),s(t)}catch(e){t[a].ios7src=r}}t.style.backgroundImage='url("'+r+'")',t.style.backgroundPosition=i["object-position"]||"center",t.style.backgroundRepeat="no-repeat",/scale-down/.test(i["object-fit"])?(t[a].i||(t[a].i=new Image,t[a].i.src=r),function e(){if(t[a].i.naturalWidth)return void(t[a].i.naturalWidth>t.width||t[a].i.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto");setTimeout(e,100)}()):t.style.backgroundSize=i["object-fit"].replace("none","auto").replace("fill","100% 100%")}}function s(t){var e={get:function(){return t[a].s},set:function(e){return delete t[a].i,r(t,e),e}};Object.defineProperty(t,"src",e),Object.defineProperty(t,"currentSrc",{get:e.get})}function o(t,e){var i=!m&&!t;if(e=e||{},t=t||"img",c&&!e.skipTest)return!1;"string"==typeof t?t=document.querySelectorAll("img"):"length"in t||(t=[t]);for(var n=0;n<t.length;n++)t[n][a]=t[n][a]||e,r(t[n]);i&&(document.body.addEventListener("load",function(t){"IMG"===t.target.tagName&&o(t.target,{skipTest:e.skipTest})},!0),m=!0,t="img"),e.watchMQ&&window.addEventListener("resize",o.bind(null,t,{skipTest:e.skipTest}))}var a="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",h=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,l=new Image,u="object-fit"in l.style,c="object-position"in l.style,p="string"==typeof l.currentSrc,f=l.getAttribute,d=l.setAttribute,m=!1;o.supportsObjectFit=u,o.supportsObjectPosition=c,function(){c||(HTMLImageElement.prototype.getAttribute=function(t){return!this[a]||"src"!==t&&"srcset"!==t?f.call(this,t):this[a][t+"Attr"]},HTMLImageElement.prototype.setAttribute=function(t,e){!this[a]||"src"!==t&&"srcset"!==t?d.call(this,t,e):this["src"===t?"src":t+"Attr"]=String(e)})}(),e.exports=o},{}],105:[function(t,e,i){!function(i,n){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size"],n):"object"==typeof e&&e.exports?e.exports=n(t("ev-emitter"),t("get-size")):(i.Outlayer={},i.Outlayer.Item=n(i.EvEmitter,i.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var r=document.documentElement.style,s="string"==typeof r.transition?"transition":"WebkitTransition",o="string"==typeof r.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[s],h={transform:o,transition:s,transitionDuration:s+"Duration",transitionProperty:s+"Property",transitionDelay:s+"Delay"},l=n.prototype=Object.create(t.prototype);l.constructor=n,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.getSize=function(){this.size=e(this.element)},l.css=function(t){var e=this.element.style;for(var i in t){e[h[i]||i]=t[i]}},l.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],r=t[i?"top":"bottom"],s=parseFloat(n),o=parseFloat(r),a=this.layout.size;-1!=n.indexOf("%")&&(s=s/100*a.width),-1!=r.indexOf("%")&&(o=o/100*a.height),s=isNaN(s)?0:s,o=isNaN(o)?0:o,s-=e?a.paddingLeft:a.paddingRight,o-=i?a.paddingTop:a.paddingBottom,this.position.x=s,this.position.y=o},l.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=i?"paddingLeft":"paddingRight",s=i?"left":"right",o=i?"right":"left",a=this.position.x+t[r];e[s]=this.getXValue(a),e[o]="";var h=n?"paddingTop":"paddingBottom",l=n?"top":"bottom",u=n?"bottom":"top",c=this.position.y+t[h];e[l]=this.getYValue(c),e[u]="",this.css(e),this.emitEvent("layout",[this])},l.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},l.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},l._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,r=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var s=t-i,o=e-n,a={};a.transform=this.getTranslate(s,o),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},l.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},l.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},l._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},l.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var u="opacity,"+function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}(o);l.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:u,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1)}},l.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},l.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};l.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=c[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){e.onEnd[n].call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},l._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var p={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(p)},l.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){if(!s||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();this.once("transitionEnd",function(){this.removeElem()}),this.hide()},l.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},l.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n})},{"ev-emitter":16,"get-size":20}],106:[function(t,e,i){!function(i,n){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,r,s){return n(i,t,e,r,s)}):"object"==typeof e&&e.exports?e.exports=n(i,t("ev-emitter"),t("get-size"),t("fizzy-ui-utils"),t("./item")):i.Outlayer=n(i,i.EvEmitter,i.getSize,i.fizzyUIUtils,i.Outlayer.Item)}(window,function(t,e,i,n,r){"use strict";function s(t,e){var i=n.getQueryElement(t);if(i){this.element=i,h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var r=++u;this.element.outlayerGUID=r,c[r]=this,this._create();this._getOption("initLayout")&&this.layout()}}function o(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];return i.length?(i=parseFloat(i))*(f[n]||1):0}var h=(t.console,t.jQuery),l=function(){},u=0,c={};s.namespace="outlayer",s.Item=r,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=s.prototype;n.extend(p,e.prototype),p.option=function(t){n.extend(this.options,t)},p._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},p._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},p.reloadItems=function(){this.items=this._itemize(this.element.children)},p._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],r=0;r<e.length;r++){var s=e[r],o=new i(s,this);n.push(o)}return n},p._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},p.getItemElements=function(){return this.items.map(function(t){return t.element})},p.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},p._init=p.layout,p._resetLayout=function(){this.getSize()},p.getSize=function(){this.size=i(this.element)},p._getMeasurement=function(t,e){var n,r=this.options[t];r?("string"==typeof r?n=this.element.querySelector(r):r instanceof HTMLElement&&(n=r),this[t]=n?i(n)[e]:r):this[t]=0},p.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},p._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},p._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},p._getItemLayoutPosition=function(){return{x:0,y:0}},p._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},p.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},p._positionItem=function(t,e,i,n,r){n?t.goTo(e,i):(t.stagger(r*this.stagger),t.moveTo(e,i))},p._postLayout=function(){this.resizeContainer()},p.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},p._getContainerSize=l,p._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},p._emitCompleteOnItems=function(t,e){function i(){r.dispatchEvent(t+"Complete",null,[e])}function n(){++o==s&&i()}var r=this,s=e.length;if(!e||!s)return void i();var o=0;e.forEach(function(e){e.once(t,n)})},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h)if(this.$element=this.$element||h(this.element),e){var r=h.Event(e);r.type=t,this.$element.trigger(r,i)}else this.$element.trigger(t,i)},p.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},p.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},p.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},p.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},p._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)},p._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},p._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},p._manageStamp=l,p._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,r=i(t);return{left:e.left-n.left-r.marginLeft,top:e.top-n.top-r.marginTop,right:n.right-e.right-r.marginRight,bottom:n.bottom-e.bottom-r.marginBottom}},p.handleEvent=n.handleEvent,p.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},p.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},p.onresize=function(){this.resize()},n.debounceMethod(s,"onresize",100),p.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},p.needsResizeLayout=function(){var t=i(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},p.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},p.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},p.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},p.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},p.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},p.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},p.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},p.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},p.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},p.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},p.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete c[e],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){t=n.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&c[e]},s.create=function(t,e){var i=o(s);return i.defaults=n.extend({},s.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},s.compatOptions),i.namespace=t,i.data=s.data,i.Item=o(r),n.htmlInit(i,t),h&&h.bridget&&h.bridget(t,i),i};var f={ms:1,s:1e3};return s.Item=r,s})},{"./item":105,"ev-emitter":16,"fizzy-ui-utils":18,"get-size":20}],107:[function(t,e,i){!function(i,n){"function"==typeof define&&define.amd?define(["outlayer/outlayer","./rect"],n):"object"==typeof e&&e.exports?e.exports=n(t("outlayer"),t("./rect")):i.Packery.Item=n(i.Outlayer,i.Packery.Rect)}(window,function(t,e){"use strict";var i=document.documentElement.style,n="string"==typeof i.transform?"transform":"WebkitTransform",r=function(){t.Item.apply(this,arguments)},s=r.prototype=Object.create(t.Item.prototype),o=s._create;s._create=function(){o.call(this),this.rect=new e};var a=s.moveTo;return s.moveTo=function(t,e){var i=Math.abs(this.position.x-t),n=Math.abs(this.position.y-e);if(this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&i<1&&n<1)return void this.goTo(t,e);a.apply(this,arguments)},s.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&n&&(this.element.style[n]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},s.disablePlacing=function(){this.isPlacing=!1},s.removeElem=function(){var t=this.element.parentNode;t&&t.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},s.showDropPlaceholder=function(){var t=this.dropPlaceholder;t||(t=this.dropPlaceholder=document.createElement("div"),t.className="packery-drop-placeholder",t.style.position="absolute"),t.style.width=this.size.width+"px",t.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(t)},s.positionDropPlaceholder=function(){this.dropPlaceholder.style[n]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},s.hideDropPlaceholder=function(){var t=this.dropPlaceholder.parentNode;t&&t.removeChild(this.dropPlaceholder)},r})},{"./rect":110,outlayer:106}],108:[function(t,e,i){!function(i,n){if("function"==typeof define&&define.amd)define(["./rect"],n);else if("object"==typeof e&&e.exports)e.exports=n(t("./rect"));else{var r=i.Packery=i.Packery||{};r.Packer=n(r.Rect)}}(window,function(t){"use strict";function e(t,e,i){this.width=t||0,this.height=e||0,this.sortDirection=i||"downwardLeftToRight",this.reset()}var i=e.prototype;i.reset=function(){this.spaces=[];var e=new t({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e),this.sorter=n[this.sortDirection]||n.downwardLeftToRight},i.pack=function(t){for(var e=0;e<this.spaces.length;e++){var i=this.spaces[e];if(i.canFit(t)){this.placeInSpace(t,i);break}}},i.columnPack=function(t){for(var e=0;e<this.spaces.length;e++){var i=this.spaces[e];if(i.x<=t.x&&i.x+i.width>=t.x+t.width&&i.height>=t.height-.01){t.y=i.y,this.placed(t);break}}},i.rowPack=function(t){for(var e=0;e<this.spaces.length;e++){var i=this.spaces[e];if(i.y<=t.y&&i.y+i.height>=t.y+t.height&&i.width>=t.width-.01){t.x=i.x,this.placed(t);break}}},i.placeInSpace=function(t,e){t.x=e.x,t.y=e.y,this.placed(t)},i.placed=function(t){for(var e=[],i=0;i<this.spaces.length;i++){var n=this.spaces[i],r=n.getMaximalFreeRects(t);r?e.push.apply(e,r):e.push(n)}this.spaces=e,this.mergeSortSpaces()},i.mergeSortSpaces=function(){e.mergeRects(this.spaces),this.spaces.sort(this.sorter)},i.addSpace=function(t){this.spaces.push(t),this.mergeSortSpaces()},e.mergeRects=function(t){var e=0,i=t[e];t:for(;i;){for(var n=0,r=t[e+n];r;){if(r==i)n++;else{if(r.contains(i)){t.splice(e,1),i=t[e];continue t}i.contains(r)?t.splice(e+n,1):n++}r=t[e+n]}e++,i=t[e]}return t};var n={downwardLeftToRight:function(t,e){return t.y-e.y||t.x-e.x},rightwardTopToBottom:function(t,e){return t.x-e.x||t.y-e.y}};return e})},{"./rect":110}],109:[function(t,e,i){!function(i,n){"function"==typeof define&&define.amd?define(["get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],n):"object"==typeof e&&e.exports?e.exports=n(t("get-size"),t("outlayer"),t("./rect"),t("./packer"),t("./item")):i.Packery=n(i.getSize,i.Outlayer,i.Packery.Rect,i.Packery.Packer,i.Packery.Item)}(window,function(t,e,i,n,r){"use strict";function s(t,e){return t.position.y-e.position.y||t.position.x-e.position.x}function o(t,e){return t.position.x-e.position.x||t.position.y-e.position.y}function a(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}i.prototype.canFit=function(t){return this.width>=t.width-1&&this.height>=t.height-1};var h=e.create("packery");h.Item=r;var l=h.prototype;l._create=function(){e.prototype._create.call(this),this.packer=new n,this.shiftPacker=new n,this.isEnabled=!0,this.dragItemCount=0;var t=this;this.handleDraggabilly={dragStart:function(){t.itemDragStart(this.element)},dragMove:function(){t.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){t.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(e,i){i&&t.itemDragStart(e.currentTarget)},drag:function(e,i){i&&t.itemDragMove(e.currentTarget,i.position.left,i.position.top)},stop:function(e,i){i&&t.itemDragEnd(e.currentTarget)}}},l._resetLayout=function(){this.getSize(),this._getMeasurements();var t,e,i;this._getOption("horizontal")?(t=1/0,e=this.size.innerHeight+this.gutter,i="rightwardTopToBottom"):(t=this.size.innerWidth+this.gutter,e=1/0,i="downwardLeftToRight"),this.packer.width=this.shiftPacker.width=t,this.packer.height=this.shiftPacker.height=e,this.packer.sortDirection=this.shiftPacker.sortDirection=i,this.packer.reset(),this.maxY=0,this.maxX=0},l._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},l._getItemLayoutPosition=function(t){if(this._setRectSize(t.element,t.rect),this.isShifting||this.dragItemCount>0){var e=this._getPackMethod();this.packer[e](t.rect)}else this.packer.pack(t.rect);return this._setMaxXY(t.rect),t.rect},l.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},l._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},l._setMaxXY=function(t){this.maxX=Math.max(t.x+t.width,this.maxX),this.maxY=Math.max(t.y+t.height,this.maxY)},l._setRectSize=function(e,i){var n=t(e),r=n.outerWidth,s=n.outerHeight;(r||s)&&(r=this._applyGridGutter(r,this.columnWidth),s=this._applyGridGutter(s,this.rowHeight)),i.width=Math.min(r,this.packer.width),i.height=Math.min(s,this.packer.height)},l._applyGridGutter=function(t,e){if(!e)return t+this.gutter;e+=this.gutter;var i=t%e,n=i&&i<1?"round":"ceil";return t=Math[n](t/e)*e},l._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},l._manageStamp=function(t){var e,n=this.getItem(t);if(n&&n.isPlacing)e=n.rect;else{var r=this._getElementOffset(t);e=new i({x:this._getOption("originLeft")?r.left:r.right,y:this._getOption("originTop")?r.top:r.bottom})}this._setRectSize(t,e),this.packer.placed(e),this._setMaxXY(e)},l.sortItemsByPosition=function(){var t=this._getOption("horizontal")?o:s;this.items.sort(t)},l.fit=function(t,e,i){var n=this.getItem(t);n&&(this.stamp(n.element),n.enablePlacing(),this.updateShiftTargets(n),e=void 0===e?n.rect.x:e,i=void 0===i?n.rect.y:i,this.shift(n,e,i),this._bindFitEvents(n),n.moveTo(n.rect.x,n.rect.y),this.shiftLayout(),this.unstamp(n.element),this.sortItemsByPosition(),n.disablePlacing())},l._bindFitEvents=function(t){function e(){2==++n&&i.dispatchEvent("fitComplete",null,[t])}var i=this,n=0;t.once("layout",e),this.once("layoutComplete",e)},l.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},l.needsResizeLayout=function(){var e=t(this.element),i=this._getOption("horizontal")?"innerHeight":"innerWidth";return e[i]!=this.size[i]},l.resizeShiftPercentLayout=function(){var e=this._getItemsForLayout(this.items),i=this._getOption("horizontal"),n=i?"y":"x",r=i?"height":"width",s=i?"rowHeight":"columnWidth",o=i?"innerHeight":"innerWidth",a=this[s];if(a=a&&a+this.gutter){this._getMeasurements();var h=this[s]+this.gutter;e.forEach(function(t){var e=Math.round(t.rect[n]/a);t.rect[n]=e*h})}else{var l=t(this.element)[o]+this.gutter,u=this.packer[r];e.forEach(function(t){t.rect[n]=t.rect[n]/u*l})}this.shiftLayout()},l.itemDragStart=function(t){if(this.isEnabled){this.stamp(t);var e=this.getItem(t);e&&(e.enablePlacing(),e.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(e))}},l.updateShiftTargets=function(t){this.shiftPacker.reset(),this._getBoundingRect();var e=this._getOption("originLeft"),n=this._getOption("originTop");this.stamps.forEach(function(t){var r=this.getItem(t);if(!r||!r.isPlacing){var s=this._getElementOffset(t),o=new i({x:e?s.left:s.right,y:n?s.top:s.bottom});this._setRectSize(t,o),this.shiftPacker.placed(o)}},this);var r=this._getOption("horizontal"),s=r?"rowHeight":"columnWidth",o=r?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var a,h=this[s];if(h=h&&h+this.gutter){var l=Math.ceil(t.rect[o]/h),u=Math.floor((this.shiftPacker[o]+this.gutter)/h);a=(u-l)*h;for(var c=0;c<u;c++){var p=r?0:c*h,f=r?c*h:0;this._addShiftTarget(p,f,a)}}else a=this.shiftPacker[o]+this.gutter-t.rect[o],this._addShiftTarget(0,0,a);var d=this._getItemsForLayout(this.items),m=this._getPackMethod();d.forEach(function(t){var e=t.rect;this._setRectSize(t.element,e),this.shiftPacker[m](e),this._addShiftTarget(e.x,e.y,a);var i=r?e.x+e.width:e.x,n=r?e.y:e.y+e.height;if(this._addShiftTarget(i,n,a),h)for(var s=Math.round(e[o]/h),l=1;l<s;l++){var u=r?i:e.x+h*l,c=r?e.y+h*l:n;this._addShiftTarget(u,c,a)}},this)},l._addShiftTarget=function(t,e,i){var n=this._getOption("horizontal")?e:t;if(!(0!==n&&n>i)){var r=t+","+e;-1!=this.shiftTargetKeys.indexOf(r)||(this.shiftTargetKeys.push(r),this.shiftTargets.push({x:t,y:e}))}},l.shift=function(t,e,i){var n,r=1/0,s={x:e,y:i};this.shiftTargets.forEach(function(t){var e=a(t,s);e<r&&(n=t,r=e)}),t.rect.x=n.x,t.rect.y=n.y};l.itemDragMove=function(t,e,i){function n(){s.shift(r,e,i),r.positionDropPlaceholder(),s.layout()}var r=this.isEnabled&&this.getItem(t);if(r){e-=this.size.paddingLeft,i-=this.size.paddingTop;var s=this,o=new Date;this._itemDragTime&&o-this._itemDragTime<120?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(n,120)):(n(),this._itemDragTime=o)}},l.itemDragEnd=function(t){function e(){2==++n&&(i.element.classList.remove("is-positioning-post-drag"),i.hideDropPlaceholder(),r.dispatchEvent("dragItemPositioned",null,[i]))}var i=this.isEnabled&&this.getItem(t);if(i){clearTimeout(this.dragTimeout),i.element.classList.add("is-positioning-post-drag");var n=0,r=this;i.once("layout",e),this.once("layoutComplete",e),i.moveTo(i.rect.x,i.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),i.disablePlacing(),this.unstamp(i.element)}},l.bindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"on")},l.unbindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"off")},l._bindDraggabillyEvents=function(t,e){var i=this.handleDraggabilly;t[e]("dragStart",i.dragStart),t[e]("dragMove",i.dragMove),t[e]("dragEnd",i.dragEnd)},l.bindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"on")},l.unbindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"off")},l._bindUIDraggableEvents=function(t,e){var i=this.handleUIDraggable;t[e]("dragstart",i.start)[e]("drag",i.drag)[e]("dragstop",i.stop)};var u=l.destroy;return l.destroy=function(){u.apply(this,arguments),this.isEnabled=!1},h.Rect=i,h.Packer=n,h})},{"./item":107,"./packer":108,"./rect":110,"get-size":20,outlayer:106}],110:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(i):"object"==typeof e&&e.exports?e.exports=i():(t.Packery=t.Packery||{},t.Packery.Rect=i())}(window,function(){"use strict";function t(e){for(var i in t.defaults)this[i]=t.defaults[i];for(i in e)this[i]=e[i]}t.defaults={x:0,y:0,width:0,height:0};var e=t.prototype;return e.contains=function(t){var e=t.width||0,i=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+e&&this.y+this.height>=t.y+i},e.overlaps=function(t){var e=this.x+this.width,i=this.y+this.height,n=t.x+t.width,r=t.y+t.height;return this.x<n&&e>t.x&&this.y<r&&i>t.y},e.getMaximalFreeRects=function(e){if(!this.overlaps(e))return!1;var i,n=[],r=this.x+this.width,s=this.y+this.height,o=e.x+e.width,a=e.y+e.height;return this.y<e.y&&(i=new t({x:this.x,
y:this.y,width:this.width,height:e.y-this.y}),n.push(i)),r>o&&(i=new t({x:o,y:this.y,width:r-o,height:this.height}),n.push(i)),s>a&&(i=new t({x:this.x,y:a,width:this.width,height:s-a}),n.push(i)),this.x<e.x&&(i=new t({x:this.x,y:this.y,width:e.x-this.x,height:this.height}),n.push(i)),n},e.canFit=function(t){return this.width>=t.width&&this.height>=t.height},t})},{}],111:[function(t,e,i){"use strict";function n(t,e){if(t){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}}e.exports=n},{}],112:[function(t,e,i){var n=new ArrayBuffer(0),r=function(t,e,i,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=n,i&&this.upload(i),this._updateID=0};r.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},{}],113:[function(t,e,i){var n=t("./GLTexture"),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,s){var o=n.fromData(t,null,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},r.createFloat32=function(t,e,i,s){var o=new n.fromData(t,s,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},e.exports=r},{"./GLTexture":115}],114:[function(t,e,i){var n=t("./shader/compileProgram"),r=t("./shader/extractAttributes"),s=t("./shader/extractUniforms"),o=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),h=function(t,e,i,h,l){this.gl=t,h&&(e=o(e,h),i=o(i,h)),this.program=n(t,e,i,l),this.attributes=r(t,this.program),this.uniformData=s(t,this.program),this.uniforms=a(t,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=h},{"./shader/compileProgram":120,"./shader/extractAttributes":122,"./shader/extractUniforms":123,"./shader/generateUniformAccessObject":124,"./shader/setPrecision":128}],115:[function(t,e,i){var n=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var r=!1;n.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(t,e,i){var r=new n(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},n.fromData=function(t,e,i,r){var s=new n(t);return s.uploadData(e,i,r),s},e.exports=n},{}],116:[function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=t("./setVertexAttribArrays");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:s||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":119}],117:[function(t,e,i){var n=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};e.exports=n},{}],118:[function(t,e,i){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":112,"./GLFramebuffer":113,"./GLShader":114,"./GLTexture":115,"./VertexArrayObject":116,"./createContext":117,"./setVertexAttribArrays":119,"./shader":125}],119:[function(t,e,i){var n=function(t,e,i){var n;if(i){var r=i.tempAttribState,s=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<s.length;n++)s[n]!==r[n]&&(s[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var o=e[n];t.enableVertexAttribArray(o.attribute.location)}};e.exports=n},{}],120:[function(t,e,i){var n=function(t,e,i,n){var s=r(t,t.VERTEX_SHADER,e),o=r(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,s),t.attachShader(a,o),n)for(var h in n)t.bindAttribLocation(a,n[h],h);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(t.getProgramInfoLog(a),t.deleteProgram(a),a=null),t.deleteShader(s),t.deleteShader(o),a},r=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:null};e.exports=n},{}],121:[function(t,e,i){var n=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},r=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};e.exports=n},{}],122:[function(t,e,i){var n=t("./mapType"),r=t("./mapSize"),s=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var h=t.getActiveAttrib(e,a),l=n(t,h.type);i[h.name]={type:l,size:r(l),location:t.getAttribLocation(e,h.name),pointer:o}}return i},o=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};e.exports=s},{"./mapSize":126,"./mapType":127}],123:[function(t,e,i){var n=t("./mapType"),r=t("./defaultValue"),s=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<s;o++){var a=t.getActiveUniform(e,o),h=a.name.replace(/\[.*?\]/,""),l=n(t,a.type);i[h]={type:l,size:a.size,location:t.getUniformLocation(e,h),value:r(l,a.size)}}return i};e.exports=s},{"./defaultValue":121,"./mapType":127}],124:[function(t,e,i){function n(t,e){return function(i){this.data[t].value=i;var n=this.data[t].location;1===e.size?a[e.type](this.gl,n,i):h[e.type](this.gl,n,i)}}function r(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i}var s=function(t,e){var i={data:{}};i.gl=t;for(var s=Object.keys(e),a=0;a<s.length;a++){var h=s[a],l=h.split("."),u=l[l.length-1],c=r(l,i),p=e[h];c.data[u]=p,c.gl=t,Object.defineProperty(c,u,{get:o(u),set:n(u,p)})}return i},o=function(t){return function(){return this.data[t].value}},a={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},h={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};e.exports=s},{}],125:[function(t,e,i){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":120,"./defaultValue":121,"./extractAttributes":122,"./extractUniforms":123,"./generateUniformAccessObject":124,"./mapSize":126,"./mapType":127,"./setPrecision":128}],126:[function(t,e,i){var n=function(t){return r[t]},r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=n},{}],127:[function(t,e,i){var n=function(t,e){if(!r){var i=Object.keys(s);r={};for(var n=0;n<i.length;++n){var o=i[n];r[t[o]]=s[o]}}return r[e]},r=null,s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=n},{}],128:[function(t,e,i){var n=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};e.exports=n},{}],129:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),a=t("ismobilejs"),h=n(a),l=t("./accessibleTarget"),u=n(l);o.utils.mixins.delayMixin(o.DisplayObject.prototype,u.default);var c=100,p=0,f=0,d=2,m=function(){function t(e){r(this,t),!h.default.tablet&&!h.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=c+"px",i.style.height=c+"px",i.style.position="absolute",i.style.top=p+"px",i.style.left=f+"px",i.style.zIndex=d,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var s=this.children[r];if(s.renderId!==this.renderId)s._accessibleActive=!1,o.utils.removeItems(this.children,r,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,h=s.worldTransform;s.hitArea?(n.style.left=(h.tx+a.x*h.a)*e+"px",n.style.top=(h.ty+a.y*h.d)*i+"px",n.style.width=a.width*h.a*e+"px",n.style.height=a.height*h.d*i+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px",n.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(n.title=s.accessibleTitle),n.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&n.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=c+"px",e.style.height=c+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=d,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();i.default=m,o.WebGLRenderer.registerPlugin("accessibility",m),o.CanvasRenderer.registerPlugin("accessibility",m)},{"../core":154,"./accessibleTarget":130,ismobilejs:23}],130:[function(t,e,i){"use strict";i.__esModule=!0,i.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],131:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./accessibleTarget");Object.defineProperty(i,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var s=t("./AccessibilityManager");Object.defineProperty(i,"AccessibilityManager",{enumerable:!0,get:function(){return n(s).default}})},{"./AccessibilityManager":129,"./accessibleTarget":130}],132:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("./autoDetectRenderer"),a=t("./display/Container"),h=n(a),l=t("./ticker"),u=t("./settings"),c=n(u),p=t("./const"),f=function(){function t(e,i,n,s,a){r(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||c.default.RENDER_OPTIONS.height,forceCanvas:!!s,sharedTicker:!!a},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,o.autoDetectRenderer)(e),this.stage=new h.default,this._ticker=null,this.ticker=e.sharedTicker?l.shared:new l.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},s(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,p.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();i.default=f},{"./autoDetectRenderer":134,"./const":135,"./display/Container":137,"./settings":190,"./ticker":210}],133:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}i.__esModule=!0;var a=t("pixi-gl-core"),h=t("./settings"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),u=function(t){function e(i,s,a,h,u){return n(this,e),r(this,t.call(this,i,o(s,u||l.default.PRECISION_VERTEX),o(a,u||l.default.PRECISION_FRAGMENT),void 0,h))}return s(e,t),e}(a.GLShader);i.default=u},{"./settings":190,"pixi-gl-core":118}],134:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n){var r=t&&t.forceCanvas;return void 0!==n&&(r=n),!r&&o.isWebGLSupported()?new u.default(t,e,i):new h.default(t,e,i)}i.__esModule=!0,i.autoDetectRenderer=r;var s=t("./utils"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),a=t("./renderers/canvas/CanvasRenderer"),h=n(a),l=t("./renderers/webgl/WebGLRenderer"),u=n(l)},{"./renderers/canvas/CanvasRenderer":166,"./renderers/webgl/WebGLRenderer":173,"./utils":214}],135:[function(t,e,i){"use strict";i.__esModule=!0;i.VERSION="4.8.9",i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},i.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},i.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},i.SCALE_MODES={LINEAR:0,NEAREST:1},i.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},i.GC_MODES={AUTO:0,MANUAL:1},i.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,i.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},i.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},i.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},i.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},i.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],136:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../math"),s=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(t=t||new r.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[2],o=t[3],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[4],o=t[5],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[6],o=t[7],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var s=t.worldTransform,o=s.a,a=s.b,h=s.c,l=s.d,u=s.tx,c=s.ty,p=this.minX,f=this.minY,d=this.maxX,m=this.maxY,v=o*e+h*i+u,g=a*e+l*i+c;p=v<p?v:p,f=g<f?g:f,d=v>d?v:d,m=g>m?g:m,v=o*n+h*i+u,g=a*n+l*i+c,p=v<p?v:p,f=g<f?g:f,d=v>d?v:d,m=g>m?g:m,v=o*e+h*r+u,g=a*e+l*r+c,p=v<p?v:p,f=g<f?g:f,d=v>d?v:d,m=g>m?g:m,v=o*n+h*r+u,g=a*n+l*r+c,p=v<p?v:p,f=g<f?g:f,d=v>d?v:d,m=g>m?g:m,this.minX=p,this.minY=f,this.maxX=d,this.maxY=m},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,u=r.ty,c=this.minX,p=this.minY,f=this.maxX,d=this.maxY,m=i;m<n;m+=2){var v=e[m],g=e[m+1],y=s*v+a*g+l,_=h*g+o*v+u;c=y<c?y:c,p=_<p?_:p,f=y>f?y:f,d=_>d?_:d}this.minX=c,this.minY=p,this.maxX=f,this.maxY=d},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t}();i.default=s},{"../math":159}],137:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../utils"),h=t("./DisplayObject"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),u=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.children=[],i}return s(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){
if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,a.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,a.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,a.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,s=void 0;if(r>0&&r<=n){s=this.children.splice(i,r);for(var o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<s.length;++a)s[a].emit("removed",this);return s}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,s=this.children.length;r<s;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},o(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(l.default);i.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},{"../utils":214,"./DisplayObject":138}],138:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("eventemitter3"),l=n(h),u=t("../const"),c=t("../settings"),p=n(c),f=t("./TransformStatic"),d=n(f),m=t("./Transform"),v=n(m),g=t("./Bounds"),y=n(g),_=t("../math"),b=function(t){function e(){r(this,e);var i=s(this,t.call(this)),n=p.default.TRANSFORM_MODE===u.TRANSFORM_MODE.STATIC?d.default:v.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new y.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return o(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},a(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(l.default);i.default=b,b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},{"../const":135,"../math":159,"../settings":190,"./Bounds":136,"./Transform":139,"./TransformStatic":141,eventemitter3:17}],139:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../math"),h=t("./TransformBase"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),u=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new a.Point(0,0),i.scale=new a.Point(1,1),i.skew=new a.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new a.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return s(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},o(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(l.default);i.default=u},{"../math":159,"./TransformBase":140}],140:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../math"),s=function(){function t(){n(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();i.default=s,s.prototype.updateWorldTransform=s.prototype.updateTransform,s.IDENTITY=new s},{"../math":159}],141:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../math"),h=t("./TransformBase"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),u=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new a.ObservablePoint(i.onChange,i,0,0),i.scale=new a.ObservablePoint(i.onChange,i,1,1),i.pivot=new a.ObservablePoint(i.onChange,i,0,0),i.skew=new a.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return s(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},o(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(l.default);i.default=u},{"../math":159,"./TransformBase":140}],142:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../display/Container"),h=n(a),l=t("../textures/RenderTexture"),u=n(l),c=t("../textures/Texture"),p=n(c),f=t("./GraphicsData"),d=n(f),m=t("../sprites/Sprite"),v=n(m),g=t("../math"),y=t("../utils"),_=t("../const"),b=t("../display/Bounds"),x=n(b),w=t("./utils/bezierCurveTo"),T=n(w),S=t("../renderers/canvas/CanvasRenderer"),E=n(S),M=void 0,P=new g.Matrix,A=new g.Point,C=new Float32Array(4),O=new Float32Array(4),L=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,e);var n=s(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=_.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new x.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return o(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,i,n,r,s){var o=t-2*i+r,a=e-2*n+s,h=2*i-2*t,l=2*n-2*e,u=4*(o*o+a*a),c=4*(o*h+a*l),p=h*h+l*l,f=2*Math.sqrt(u+c+p),d=Math.sqrt(u),m=2*u*d,v=2*Math.sqrt(p),g=c/d;return(m*f+d*c*(f-v)+(4*p*u-c*c)*Math.log((2*d+g+f)/(g+v)))/(4*m)},e.prototype._bezierCurveLength=function(t,e,i,n,r,s,o,a){for(var h=0,l=0,u=0,c=0,p=0,f=0,d=0,m=0,v=0,g=0,y=0,_=t,b=e,x=1;x<=10;++x)l=x/10,u=l*l,c=u*l,p=1-l,f=p*p,d=f*p,m=d*t+3*f*l*i+3*p*u*r+c*o,v=d*e+3*f*l*n+3*p*u*s+c*a,g=_-m,y=b-v,_=m,b=v,h+=Math.sqrt(g*g+y*y);return h},e.prototype._segmentsCount=function(t){var i=Math.ceil(t/e.CURVES.maxLength);return i<e.CURVES.minSegments?i=e.CURVES.minSegments:i>e.CURVES.maxSegments&&(i=e.CURVES.maxSegments),i},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new g.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var i=new g.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){var i=this.currentPath.shape.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||(i.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,o=0,a=0;0===s.length&&this.moveTo(0,0);for(var h=s[s.length-2],l=s[s.length-1],u=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,l,t,i,n,r)):20,c=1;c<=u;++c){var p=c/u;o=h+(t-h)*p,a=l+(i-l)*p,s.push(o+(t+(n-t)*p-o)*p,a+(i+(r-i)*p-a)*p)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,i,n,r,s,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,h=a[a.length-2],l=a[a.length-1];a.length-=2;var u=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,l,t,i,n,r,s,o)):20;return(0,T.default)(h,l,t,i,n,r,s,o,u,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1],h=a-e,l=o-t,u=n-e,c=i-t,p=Math.abs(h*c-l*u);if(p<1e-8||0===r)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var f=h*h+l*l,d=u*u+c*c,m=h*u+l*c,v=r*Math.sqrt(f)/p,g=r*Math.sqrt(d)/p,y=v*m/f,_=g*m/d,b=v*c+g*l,x=v*u+g*h,w=l*(g+y),T=h*(g+y),S=c*(v+_),E=u*(v+_),M=Math.atan2(T-x,w-b),P=Math.atan2(E-x,S-b);this.arc(b+t,x+e,r,M,P,l*u>c*h)}return this.dirty++,this},e.prototype.arc=function(t,i,n,r,s){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===s)return this;!o&&s<=r?s+=_.PI_2:o&&r<=s&&(r+=_.PI_2);var a=s-r,h=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*n):40*Math.ceil(Math.abs(a)/_.PI_2);if(0===a)return this;var l=t+Math.cos(r)*n,u=i+Math.sin(r)*n,c=this.currentPath?this.currentPath.shape.points:null;if(c){var p=Math.abs(c[c.length-2]-l),f=Math.abs(c[c.length-1]-u);p<.001&&f<.001||c.push(l,u)}else this.moveTo(l,u),c=this.currentPath.shape.points;for(var d=a/(2*h),m=2*d,v=Math.cos(d),g=Math.sin(d),y=h-1,b=y%1/y,x=0;x<=y;++x){var w=x+b*x,T=d+r+m*w,S=Math.cos(T),E=-Math.sin(T);c.push((v*S+g*E)*n+t,(v*-E+g*S)*n+i)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new g.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new g.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new g.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new g.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof g.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new g.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.drawStar=function(t,e,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r=r||n/2;for(var o=-1*Math.PI/2+s,a=2*i,h=_.PI_2/a,l=[],u=0;u<a;u++){var c=u%2?r:n,p=u*h+o;l.push(t+c*Math.cos(p),e+c*Math.sin(p))}return this.drawPolygon(l)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new v.default(new p.default(p.default.WHITE)));var i=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var r=C,s=O;(0,y.hex2rgb)(n,r),(0,y.hex2rgb)(this.tint,s),r[0]*=s[0],r[1]*=s[1],r[2]*=s[2],i.tint=(0,y.rgb2hex)(r),this._prevRectTint=this.tint,this._prevRectFillColor=n}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,A);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&(n.shape&&n.shape.contains(A.x,A.y))){var r=!1;if(n.holes)for(var s=0;s<n.holes.length;s++){var o=n.holes[s];if(o.contains(A.x,A.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,s=0,o=0,a=0,h=0,l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],c=u.type,p=u.lineWidth,f=u.lineAlignment,d=p*f;if(r=u.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)s=r.x-d,o=r.y-d,a=r.width+2*d,h=r.height+2*d,t=s<t?s:t,e=s+a>e?s+a:e,i=o<i?o:i,n=o+h>n?o+h:n;else if(c===_.SHAPES.CIRC)s=r.x,o=r.y,a=r.radius+d,h=r.radius+d,t=s-a<t?s-a:t,e=s+a>e?s+a:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else if(c===_.SHAPES.ELIP)s=r.x,o=r.y,a=r.width+d,h=r.height+d,t=s-a<t?s-a:t,e=s+a>e?s+a:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else for(var m=r.points,v=0,g=0,y=0,b=0,x=0,w=0,T=0,S=0,E=0;E+2<m.length;E+=2)s=m[E],o=m[E+1],v=m[E+2],g=m[E+3],y=Math.abs(v-s),b=Math.abs(g-o),h=2*d,(a=Math.sqrt(y*y+b*b))<1e-9||(x=(h/a*b+y)/2,w=(h/a*y+b)/2,T=(v+s)/2,S=(g+o)/2,t=T-x<t?T-x:t,e=T+x>e?T+x:e,i=S-w<i?S-w:i,n=S+w>n?S+w:n)}else t=0,e=0,i=0,n=0;var M=this.boundsPadding;this._localBounds.minX=t-M,this._localBounds.maxX=e+M,this._localBounds.minY=i-M,this._localBounds.maxY=n+M},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new d.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=u.default.create(i.width,i.height,t,e);M||(M=new E.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(P),P.invert(),P.tx-=i.x,P.ty-=i.y,M.render(this,n,!0,P);var r=p.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webGL)for(var r=0;r<this._webGL[n].data.length;++r)this._webGL[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(h.default);i.default=L,L._SPRITE_TEXTURE=null,L.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":135,"../display/Bounds":136,"../display/Container":137,"../math":159,"../renderers/canvas/CanvasRenderer":166,"../sprites/Sprite":191,"../textures/RenderTexture":202,"../textures/Texture":204,"../utils":214,"./GraphicsData":143,"./utils/bezierCurveTo":145}],143:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e,i,r,s,o,a,h,l,u){n(this,t),this.lineWidth=e,this.lineAlignment=u,this.nativeLines=h,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=s,this.fillAlpha=o,this._fillTint=s,this.fill=a,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();i.default=r},{}],144:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../renderers/canvas/CanvasRenderer"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("../../const"),a=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,s=e.resolution;i.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var h=t.graphicsData[a],l=h.shape,u=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===o.SHAPES.POLY){i.beginPath();var p=l.points,f=h.holes,d=void 0,m=void 0,v=void 0,g=void 0;i.moveTo(p[0],p[1]);for(var y=2;y<p.length;y+=2)i.lineTo(p[y],p[y+1]);if(l.closed&&i.closePath(),f.length>0){d=0,v=p[0],g=p[1];for(var _=2;_+2<p.length;_+=2)d+=(p[_]-v)*(p[_+3]-g)-(p[_+2]-v)*(p[_+1]-g);for(var b=0;b<f.length;b++)if(p=f[b].points){m=0,v=p[0],g=p[1];for(var x=2;x+2<p.length;x+=2)m+=(p[x]-v)*(p[x+3]-g)-(p[x+2]-v)*(p[x+1]-g);if(m*d<0){i.moveTo(p[0],p[1]);for(var w=2;w<p.length;w+=2)i.lineTo(p[w],p[w+1])}else{i.moveTo(p[p.length-2],p[p.length-1]);for(var T=p.length-4;T>=0;T-=2)i.lineTo(p[T],p[T+1])}f[b].close&&i.closePath()}}h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())
}else if(h.type===o.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(l.x,l.y,l.width,l.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(l.x,l.y,l.width,l.height));else if(h.type===o.SHAPES.CIRC)i.beginPath(),i.arc(l.x,l.y,l.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===o.SHAPES.ELIP){var S=2*l.width,E=2*l.height,M=l.x-S/2,P=l.y-E/2;i.beginPath();var A=S/2*.5522848,C=E/2*.5522848,O=M+S,L=P+E,k=M+S/2,R=P+E/2;i.moveTo(M,R),i.bezierCurveTo(M,R-C,k-A,P,k,P),i.bezierCurveTo(k+A,P,O,R-C,O,R),i.bezierCurveTo(O,R+C,k+A,L,k,L),i.bezierCurveTo(k-A,L,M,R+C,M,R),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===o.SHAPES.RREC){var I=l.x,D=l.y,F=l.width,N=l.height,B=l.radius,j=Math.min(F,N)/2|0;B=B>j?j:B,i.beginPath(),i.moveTo(I,D+B),i.lineTo(I,D+N-B),i.quadraticCurveTo(I,D+N,I+B,D+N),i.lineTo(I+F-B,D+N),i.quadraticCurveTo(I+F,D+N,I+F,D+N-B),i.lineTo(I+F,D+B),i.quadraticCurveTo(I+F,D,I+F-B,D),i.lineTo(I+B,D),i.quadraticCurveTo(I,D,I,D+B),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var s=t.graphicsData[r],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=a,s.default.registerPlugin("graphics",a)},{"../../const":135,"../../renderers/canvas/CanvasRenderer":166}],145:[function(t,e,i){"use strict";function n(t,e,i,n,r,s,o,a,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],u=0,c=0,p=0,f=0,d=0;l.push(t,e);for(var m=1,v=0;m<=h;++m)v=m/h,u=1-v,c=u*u,p=c*u,f=v*v,d=f*v,l.push(p*t+3*c*v*i+3*u*f*r+d*o,p*e+3*c*v*n+3*u*f*s+d*a);return l}i.__esModule=!0,i.default=n},{}],146:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../../utils"),h=t("../../const"),l=t("../../renderers/webgl/utils/ObjectRenderer"),u=n(l),c=t("../../renderers/webgl/WebGLRenderer"),p=n(c),f=t("./WebGLGraphicsData"),d=n(f),m=t("./shaders/PrimitiveShader"),v=n(m),g=t("./utils/buildPoly"),y=n(g),_=t("./utils/buildRectangle"),b=n(_),x=t("./utils/buildRoundedRectangle"),w=n(x),T=t("./utils/buildCircle"),S=n(T),E=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return o(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new v.default(this.gl)},e.prototype.destroy=function(){u.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,r=t._webGL[this.CONTEXT_UID];r&&t.dirty===r.dirty||(this.updateGraphics(t),r=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var o=0,h=r.data.length;o<h;o++){n=r.data[o];var l=n.shader;e.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,a.hex2rgb)(t.tint),l.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,s=void 0,o=i.lastIndex;o<t.graphicsData.length;o++){var a=t.graphicsData[o];r=this.getWebGLData(i,0),a.nativeLines&&a.lineWidth&&(s=this.getWebGLData(i,0,!0),i.lastIndex++),a.type===h.SHAPES.POLY&&(0,y.default)(a,r,s),a.type===h.SHAPES.RECT?(0,b.default)(a,r,s):a.type===h.SHAPES.CIRC||a.type===h.SHAPES.ELIP?(0,S.default)(a,r,s):a.type===h.SHAPES.RREC&&(0,w.default)(a,r,s),i.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<i.data.length;l++)r=i.data[l],r.dirty&&r.upload()},e.prototype.getWebGLData=function(t,e,i){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new d.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=i,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(u.default);i.default=E,p.default.registerPlugin("graphics",E)},{"../../const":135,"../../renderers/webgl/WebGLRenderer":173,"../../renderers/webgl/utils/ObjectRenderer":183,"../../utils":214,"./WebGLGraphicsData":147,"./shaders/PrimitiveShader":148,"./utils/buildCircle":149,"./utils/buildPoly":151,"./utils/buildRectangle":152,"./utils/buildRoundedRectangle":153}],147:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("pixi-gl-core"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(e,i,r){n(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=s.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new s.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();i.default=o},{"pixi-gl-core":118}],148:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("../../../Shader"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return s(e,t),e}(a.default);i.default=h},{"../../../Shader":133}],149:[function(t,e,i){"use strict";function n(t,e,i){var n=t.shape,r=n.x,h=n.y,l=void 0,u=void 0;if(t.type===o.SHAPES.CIRC?(l=n.radius,u=n.radius):(l=n.width,u=n.height),0!==l&&0!==u){var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),p=2*Math.PI/c;if(t.fill){var f=(0,a.hex2rgb)(t.fillColor),d=t.fillAlpha,m=f[0]*d,v=f[1]*d,g=f[2]*d,y=e.points,_=e.indices,b=y.length/6;_.push(b);for(var x=0;x<c+1;x++)y.push(r,h,m,v,g,d),y.push(r+Math.sin(p*x)*l,h+Math.cos(p*x)*u,m,v,g,d),_.push(b++,b++);_.push(b-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;T<c;T++)t.points.push(r+Math.sin(p*-T)*l,h+Math.cos(p*-T)*u);t.points.push(t.points[0],t.points[1]),(0,s.default)(t,e,i),t.points=w}}}i.__esModule=!0,i.default=n;var r=t("./buildLine"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("../../../const"),a=t("../../../utils")},{"../../../const":135,"../../../utils":214,"./buildLine":150}],150:[function(t,e,i){"use strict";function n(t,e){var i=t.points;if(0!==i.length){var n=new s.Point(i[0],i[1]),r=new s.Point(i[i.length-2],i[i.length-1]);if(n.x===r.x&&n.y===r.y){i=i.slice(),i.pop(),i.pop(),r=new s.Point(i[i.length-2],i[i.length-1]);var a=r.x+.5*(n.x-r.x),h=r.y+.5*(n.y-r.y);i.unshift(a,h),i.push(a,h)}var l=e.points,u=e.indices,c=i.length/2,p=i.length,f=l.length/6,d=t.lineWidth/2,m=(0,o.hex2rgb)(t.lineColor),v=t.lineAlpha,g=m[0]*v,y=m[1]*v,_=m[2]*v,b=i[0],x=i[1],w=i[2],T=i[3],S=0,E=0,M=-(x-T),P=b-w,A=0,C=0,O=0,L=0,k=Math.sqrt(M*M+P*P);M/=k,P/=k,M*=d,P*=d;var R=t.lineAlignment,I=2*(1-R),D=2*R;l.push(b-M*I,x-P*I,g,y,_,v),l.push(b+M*D,x+P*D,g,y,_,v);for(var F=1;F<c-1;++F){b=i[2*(F-1)],x=i[2*(F-1)+1],w=i[2*F],T=i[2*F+1],S=i[2*(F+1)],E=i[2*(F+1)+1],M=-(x-T),P=b-w,k=Math.sqrt(M*M+P*P),M/=k,P/=k,M*=d,P*=d,A=-(T-E),C=w-S,k=Math.sqrt(A*A+C*C),A/=k,C/=k,A*=d,C*=d;var N=-P+x-(-P+T),B=-M+w-(-M+b),j=(-M+b)*(-P+T)-(-M+w)*(-P+x),U=-C+E-(-C+T),z=-A+w-(-A+S),G=(-A+S)*(-C+T)-(-A+w)*(-C+E),V=N*z-U*B;if(Math.abs(V)<.1)V+=10.1,l.push(w-M*I,T-P*I,g,y,_,v),l.push(w+M*D,T+P*D,g,y,_,v);else{var X=(B*G-z*j)/V,W=(U*j-N*G)/V;(X-w)*(X-w)+(W-T)*(W-T)>196*d*d?(O=M-A,L=P-C,k=Math.sqrt(O*O+L*L),O/=k,L/=k,O*=d,L*=d,l.push(w-O*I,T-L*I),l.push(g,y,_,v),l.push(w+O*D,T+L*D),l.push(g,y,_,v),l.push(w-O*D*I,T-L*I),l.push(g,y,_,v),p++):(l.push(w+(X-w)*I,T+(W-T)*I),l.push(g,y,_,v),l.push(w-(X-w)*D,T-(W-T)*D),l.push(g,y,_,v))}}b=i[2*(c-2)],x=i[2*(c-2)+1],w=i[2*(c-1)],T=i[2*(c-1)+1],M=-(x-T),P=b-w,k=Math.sqrt(M*M+P*P),M/=k,P/=k,M*=d,P*=d,l.push(w-M*I,T-P*I),l.push(g,y,_,v),l.push(w+M*D,T+P*D),l.push(g,y,_,v),u.push(f);for(var H=0;H<p;++H)u.push(f++);u.push(f-1)}}function r(t,e){var i=0,n=t.points;if(0!==n.length){var r=e.points,s=n.length/2,a=(0,o.hex2rgb)(t.lineColor),h=t.lineAlpha,l=a[0]*h,u=a[1]*h,c=a[2]*h;for(i=1;i<s;i++){var p=n[2*(i-1)],f=n[2*(i-1)+1],d=n[2*i],m=n[2*i+1];r.push(p,f),r.push(l,u,c,h),r.push(d,m),r.push(l,u,c,h)}}}i.__esModule=!0,i.default=function(t,e,i){t.nativeLines?r(t,i):n(t,e)};var s=t("../../../math"),o=t("../../../utils")},{"../../../math":159,"../../../utils":214}],151:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var r=[],s=t.holes,h=0;h<s.length;h++){var u=s[h];r.push(n.length/2),n=n.concat(u.points)}var c=e.points,p=e.indices,f=n.length/2,d=(0,a.hex2rgb)(t.fillColor),m=t.fillAlpha,v=d[0]*m,g=d[1]*m,y=d[2]*m,_=(0,l.default)(n,r,2);if(!_)return;for(var b=c.length/6,x=0;x<_.length;x+=3)p.push(_[x]+b),p.push(_[x]+b),p.push(_[x+1]+b),p.push(_[x+2]+b),p.push(_[x+2]+b);for(var w=0;w<f;w++)c.push(n[2*w],n[2*w+1],v,g,y,m)}t.lineWidth>0&&(0,o.default)(t,e,i)}i.__esModule=!0,i.default=r;var s=t("./buildLine"),o=n(s),a=t("../../../utils"),h=t("earcut"),l=n(h)},{"../../../utils":214,"./buildLine":150,earcut:15}],152:[function(t,e,i){"use strict";function n(t,e,i){var n=t.shape,r=n.x,a=n.y,h=n.width,l=n.height;if(t.fill){var u=(0,o.hex2rgb)(t.fillColor),c=t.fillAlpha,p=u[0]*c,f=u[1]*c,d=u[2]*c,m=e.points,v=e.indices,g=m.length/6;m.push(r,a),m.push(p,f,d,c),m.push(r+h,a),m.push(p,f,d,c),m.push(r,a+l),m.push(p,f,d,c),m.push(r+h,a+l),m.push(p,f,d,c),v.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var y=t.points;t.points=[r,a,r+h,a,r+h,a+l,r,a+l,r,a],(0,s.default)(t,e,i),t.points=y}}i.__esModule=!0,i.default=n;var r=t("./buildLine"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("../../../utils")},{"../../../utils":214,"./buildLine":150}],153:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=t.shape,r=n.x,s=n.y,a=n.width,l=n.height,p=n.radius,f=[];if(f.push(r+p,s),o(r+a-p,s,r+a,s,r+a,s+p,f),o(r+a,s+l-p,r+a,s+l,r+a-p,s+l,f),o(r+p,s+l,r,s+l,r,s+l-p,f),o(r,s+p,r,s,r+p+1e-10,s,f),t.fill){for(var d=(0,c.hex2rgb)(t.fillColor),m=t.fillAlpha,v=d[0]*m,g=d[1]*m,y=d[2]*m,_=e.points,b=e.indices,x=_.length/6,w=(0,h.default)(f,null,2),T=0,S=w.length;T<S;T+=3)b.push(w[T]+x),b.push(w[T]+x),b.push(w[T+1]+x),b.push(w[T+2]+x),b.push(w[T+2]+x);for(var E=0,M=f.length;E<M;E++)_.push(f[E],f[++E],v,g,y,m)}if(t.lineWidth){var P=t.points;t.points=f,(0,u.default)(t,e,i),t.points=P}}function s(t,e,i){return t+(e-t)*i}function o(t,e,i,n,r,o){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=a,l=0,u=0,c=0,p=0,f=0,d=0,m=0,v=0;m<=20;++m)v=m/20,l=s(t,i,v),u=s(e,n,v),c=s(i,r,v),p=s(n,o,v),f=s(l,c,v),d=s(u,p,v),h.push(f,d);return h}i.__esModule=!0,i.default=r;var a=t("earcut"),h=n(a),l=t("./buildLine"),u=n(l),c=t("../../../utils")},{"../../../utils":214,"./buildLine":150,earcut:15}],154:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.autoDetectRenderer=i.Application=i.Filter=i.SpriteMaskFilter=i.Quad=i.RenderTarget=i.ObjectRenderer=i.WebGLManager=i.Shader=i.CanvasRenderTarget=i.TextureUvs=i.VideoBaseTexture=i.BaseRenderTexture=i.RenderTexture=i.BaseTexture=i.TextureMatrix=i.Texture=i.Spritesheet=i.CanvasGraphicsRenderer=i.GraphicsRenderer=i.GraphicsData=i.Graphics=i.TextMetrics=i.TextStyle=i.Text=i.SpriteRenderer=i.CanvasTinter=i.CanvasSpriteRenderer=i.Sprite=i.TransformBase=i.TransformStatic=i.Transform=i.Container=i.DisplayObject=i.Bounds=i.glCore=i.WebGLRenderer=i.CanvasRenderer=i.ticker=i.utils=i.settings=void 0;var s=t("./const");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return s[t]}})});var o=t("./math");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("pixi-gl-core");Object.defineProperty(i,"glCore",{enumerable:!0,get:function(){return r(a).default}});var h=t("./display/Bounds");Object.defineProperty(i,"Bounds",{enumerable:!0,get:function(){return r(h).default}});var l=t("./display/DisplayObject");Object.defineProperty(i,"DisplayObject",{enumerable:!0,get:function(){return r(l).default}});var u=t("./display/Container");Object.defineProperty(i,"Container",{enumerable:!0,get:function(){return r(u).default}});var c=t("./display/Transform");Object.defineProperty(i,"Transform",{enumerable:!0,get:function(){return r(c).default}});var p=t("./display/TransformStatic");Object.defineProperty(i,"TransformStatic",{enumerable:!0,get:function(){return r(p).default}});var f=t("./display/TransformBase");Object.defineProperty(i,"TransformBase",{enumerable:!0,get:function(){return r(f).default}});var d=t("./sprites/Sprite");Object.defineProperty(i,"Sprite",{enumerable:!0,get:function(){return r(d).default}});var m=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(i,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(m).default}});var v=t("./sprites/canvas/CanvasTinter");Object.defineProperty(i,"CanvasTinter",{enumerable:!0,get:function(){return r(v).default}});var g=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(i,"SpriteRenderer",{enumerable:!0,get:function(){return r(g).default}});var y=t("./text/Text");Object.defineProperty(i,"Text",{enumerable:!0,get:function(){return r(y).default}});var _=t("./text/TextStyle");Object.defineProperty(i,"TextStyle",{enumerable:!0,get:function(){return r(_).default}});var b=t("./text/TextMetrics");Object.defineProperty(i,"TextMetrics",{enumerable:!0,get:function(){return r(b).default}});var x=t("./graphics/Graphics");Object.defineProperty(i,"Graphics",{enumerable:!0,get:function(){return r(x).default}});var w=t("./graphics/GraphicsData");Object.defineProperty(i,"GraphicsData",{enumerable:!0,get:function(){return r(w).default}});var T=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(i,"GraphicsRenderer",{enumerable:!0,get:function(){return r(T).default}});var S=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(i,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(S).default}});var E=t("./textures/Spritesheet");Object.defineProperty(i,"Spritesheet",{enumerable:!0,get:function(){return r(E).default}});var M=t("./textures/Texture");Object.defineProperty(i,"Texture",{enumerable:!0,get:function(){return r(M).default}});var P=t("./textures/TextureMatrix");Object.defineProperty(i,"TextureMatrix",{enumerable:!0,get:function(){return r(P).default}});var A=t("./textures/BaseTexture");Object.defineProperty(i,"BaseTexture",{enumerable:!0,get:function(){return r(A).default}});var C=t("./textures/RenderTexture");Object.defineProperty(i,"RenderTexture",{enumerable:!0,get:function(){return r(C).default}});var O=t("./textures/BaseRenderTexture");Object.defineProperty(i,"BaseRenderTexture",{enumerable:!0,get:function(){return r(O).default}});var L=t("./textures/VideoBaseTexture");Object.defineProperty(i,"VideoBaseTexture",{enumerable:!0,get:function(){return r(L).default}});var k=t("./textures/TextureUvs");Object.defineProperty(i,"TextureUvs",{enumerable:!0,get:function(){return r(k).default}});var R=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(i,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(R).default}});var I=t("./Shader");Object.defineProperty(i,"Shader",{enumerable:!0,get:function(){return r(I).default}});var D=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(i,"WebGLManager",{enumerable:!0,get:function(){return r(D).default}});var F=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(i,"ObjectRenderer",{enumerable:!0,get:function(){return r(F).default}});var N=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(i,"RenderTarget",{enumerable:!0,get:function(){return r(N).default}});var B=t("./renderers/webgl/utils/Quad");Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return r(B).default}});var j=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(i,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(j).default}});var U=t("./renderers/webgl/filters/Filter");Object.defineProperty(i,"Filter",{enumerable:!0,get:function(){return r(U).default}});var z=t("./Application");Object.defineProperty(i,"Application",{enumerable:!0,get:function(){return r(z).default}});var G=t("./autoDetectRenderer");Object.defineProperty(i,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var V=t("./utils"),X=n(V),W=t("./ticker"),H=n(W),q=t("./settings"),Y=r(q),Z=t("./renderers/canvas/CanvasRenderer"),Q=r(Z),K=t("./renderers/webgl/WebGLRenderer"),J=r(K);i.settings=Y.default,i.utils=X,i.ticker=H,i.CanvasRenderer=Q.default,i.WebGLRenderer=J.default},{"./Application":132,"./Shader":133,"./autoDetectRenderer":134,"./const":135,"./display/Bounds":136,"./display/Container":137,"./display/DisplayObject":138,"./display/Transform":139,"./display/TransformBase":140,"./display/TransformStatic":141,"./graphics/Graphics":142,"./graphics/GraphicsData":143,"./graphics/canvas/CanvasGraphicsRenderer":144,"./graphics/webgl/GraphicsRenderer":146,"./math":159,"./renderers/canvas/CanvasRenderer":166,"./renderers/canvas/utils/CanvasRenderTarget":168,"./renderers/webgl/WebGLRenderer":173,"./renderers/webgl/filters/Filter":175,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":178,"./renderers/webgl/managers/WebGLManager":182,"./renderers/webgl/utils/ObjectRenderer":183,"./renderers/webgl/utils/Quad":184,"./renderers/webgl/utils/RenderTarget":185,"./settings":190,"./sprites/Sprite":191,"./sprites/canvas/CanvasSpriteRenderer":192,"./sprites/canvas/CanvasTinter":193,"./sprites/webgl/SpriteRenderer":195,"./text/Text":197,"./text/TextMetrics":198,"./text/TextStyle":199,"./textures/BaseRenderTexture":200,"./textures/BaseTexture":201,"./textures/RenderTexture":202,"./textures/Spritesheet":203,"./textures/Texture":204,"./textures/TextureMatrix":205,"./textures/TextureUvs":206,"./textures/VideoBaseTexture":207,"./ticker":210,"./utils":214,"pixi-gl-core":118}],155:[function(t,e,i){"use strict";function n(t){return t<0?-1:t>0?1:0}i.__esModule=!0;var r=t("./Matrix"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=[];!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var r=n(o[t]*o[i]+h[t]*a[i]),p=n(a[t]*o[i]+l[t]*a[i]),f=n(o[t]*h[i]+h[t]*l[i]),d=n(a[t]*h[i]+l[t]*l[i]),m=0;m<16;m++)if(o[m]===r&&a[m]===p&&h[m]===f&&l[m]===d){e.push(m);break}}for(var v=0;v<16;v++){var g=new s.default;g.set(o[v],a[v],h[v],l[v],0,0),u.push(g)}}();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return o[t]},uY:function(t){return a[t]},vX:function(t){return h[t]},vY:function(t){return l[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][p.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=u[p.inv(e)];r.tx=i,r.ty=n,t.append(r)}};i.default=p},{"./Matrix":156}],156:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./Point"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=t("../const"),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=i,this.c=r,this.d=s,this.tx=o,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new o.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new o.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=-Math.atan2(-n,r),o=Math.atan2(i,e),h=Math.abs(s+o);return h<1e-5||Math.abs(a.PI_2-h)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();i.default=h},{"../const":135,"./Point":158}],157:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=r,this._y=s,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,i||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();i.default=s},{}],158:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();i.default=r},{}],159:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./Point");Object.defineProperty(i,"Point",{enumerable:!0,get:function(){return n(r).default}});var s=t("./ObservablePoint");Object.defineProperty(i,"ObservablePoint",{enumerable:!0,get:function(){return n(s).default}});var o=t("./Matrix");Object.defineProperty(i,"Matrix",{enumerable:!0,get:function(){return n(o).default}});var a=t("./GroupD8");Object.defineProperty(i,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var h=t("./shapes/Circle");Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return n(h).default}});var l=t("./shapes/Ellipse");Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return n(l).default}});var u=t("./shapes/Polygon");Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return n(u).default}});var c=t("./shapes/Rectangle");Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var p=t("./shapes/RoundedRectangle");Object.defineProperty(i,"RoundedRectangle",{enumerable:!0,get:function(){return n(p).default}})},{"./GroupD8":155,"./Matrix":156,"./ObservablePoint":157,"./Point":158,"./shapes/Circle":160,"./shapes/Ellipse":161,"./shapes/Polygon":162,"./shapes/Rectangle":163,"./shapes/RoundedRectangle":164}],160:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("./Rectangle"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("../../const"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=i,this.radius=r,this.type=o.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return n*=n,r*=r,n+r<=i},t.prototype.getBounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();i.default=a},{"../../const":135,"./Rectangle":163}],161:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("./Rectangle"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("../../const"),a=function(){function t(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=s,this.type=o.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();i.default=a},{"../../const":135,"./Rectangle":163}],162:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../Point"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("../../const"),a=function(){function t(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];if(n(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof s.default){for(var a=[],h=0,l=i.length;h<l;h++)a.push(i[h].x,i[h].y);i=a}this.closed=!0,this.points=i,this.type=o.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},t}();i.default=a},{"../../const":135,"../Point":158}],163:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(o),this.type=s.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();i.default=o},{"../../const":135}],164:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=i,this.width=s,this.height=o,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(n=e-(this.y+this.height-this.radius),i*i+n*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();i.default=s},{"../../const":135}],165:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../utils"),l=t("../math"),u=t("../const"),c=t("../settings"),p=n(c),f=t("../display/Container"),d=n(f),m=t("../textures/RenderTexture"),v=n(m),g=t("eventemitter3"),y=n(g),_=new l.Matrix,b=function(t){function e(i,n,o,a){r(this,e);var c=s(this,t.call(this));return(0,h.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:o||p.default.RENDER_OPTIONS.height},a)),n=Object.assign({},p.default.RENDER_OPTIONS,n),c.options=n,c.type=u.RENDERER_TYPE.UNKNOWN,c.screen=new l.Rectangle(0,0,n.width,n.height),c.view=n.view||document.createElement("canvas"),c.resolution=n.resolution||p.default.RESOLUTION,c.transparent=n.transparent,c.autoResize=n.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=n.preserveDrawingBuffer,c.clearBeforeRender=n.clearBeforeRender,c.roundPixels=n.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=n.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new d.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return o(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){n=n||t.getLocalBounds();var r=v.default.create(0|n.width,0|n.height,e,i);return _.tx=-n.x,_.ty=-n.y,this.render(t,r,!1,_,!!t.parent),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=u.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,h.hex2string)(t),(0,h.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(y.default);i.default=b},{"../const":135,"../display/Container":137,"../math":159,"../settings":190,"../textures/RenderTexture":202,"../utils":214,eventemitter3:17}],166:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../SystemRenderer"),h=n(a),l=t("./utils/CanvasMaskManager"),u=n(l),c=t("./utils/CanvasRenderTarget"),p=n(c),f=t("./utils/mapCanvasBlendModesToPixi"),d=n(f),m=t("../../utils"),v=t("../../const"),g=t("../../settings"),y=n(g),_=function(t){function e(i,n,o){r(this,e);var a=s(this,t.call(this,"Canvas",i,n,o));return a.type=v.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new u.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,d.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return o(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new p.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=t),!r){var a=t.parent,h=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(h),this._tempDisplayObjectParent.transform._worldID=-1):h.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}o.save(),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this._activeBlendMode=v.BLEND_MODES.NORMAL,o.globalCompositeOperation=this.blendModes[v.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=o,t.renderCanvas(this),this.context=l,o.restore(),this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=y.default.SCALE_MODE===v.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(h.default);i.default=_,m.pluginTarget.mixin(_)},{"../../const":135,"../../settings":190,"../../utils":214,"../SystemRenderer":165,"./utils/CanvasMaskManager":167,"./utils/CanvasRenderTarget":168,"./utils/mapCanvasBlendModesToPixi":170}],167:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../../const"),s=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var s=t.graphicsData[n],o=s.shape;if(s.type===r.SHAPES.POLY){var a=o.points,h=s.holes,l=void 0,u=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),h.length>0){l=0;for(var p=0;p<a.length;p+=2)l+=a[p]*a[p+3]-a[p+1]*a[p+2];for(var f=0;f<h.length;f++){a=h[f].points,u=0;for(var d=0;d<a.length;d+=2)u+=a[d]*a[d+3]-a[d+1]*a[d+2];if(e.moveTo(a[0],a[1]),u*l<0)for(var m=2;m<a.length;m+=2)e.lineTo(a[m],a[m+1]);else for(var v=a.length-2;v>=2;v-=2)e.lineTo(a[v],a[v+1])}}}else if(s.type===r.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(s.type===r.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===r.SHAPES.ELIP){var g=2*o.width,y=2*o.height,_=o.x-g/2,b=o.y-y/2,x=g/2*.5522848,w=y/2*.5522848,T=_+g,S=b+y,E=_+g/2,M=b+y/2;e.moveTo(_,M),e.bezierCurveTo(_,M-w,E-x,b,E,b),e.bezierCurveTo(E+x,b,T,M-w,T,M),e.bezierCurveTo(T,M+w,E+x,S,E,S),e.bezierCurveTo(E-x,S,_,M+w,_,M),e.closePath()}else if(s.type===r.SHAPES.RREC){var P=o.x,A=o.y,C=o.width,O=o.height,L=o.radius,k=Math.min(C,O)/2|0;L=L>k?k:L,e.moveTo(P,A+L),e.lineTo(P,A+O-L),e.quadraticCurveTo(P,A+O,P+L,A+O),e.lineTo(P+C-L,A+O),e.quadraticCurveTo(P+C,A+O,P+C,A+O-L),e.lineTo(P+C,A+L),e.quadraticCurveTo(P+C,A,P+C-L,A),e.lineTo(P+L,A),e.quadraticCurveTo(P,A,P,A+L),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();i.default=s},{"../../../const":135}],168:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../../../settings"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=function(){function t(e,i,r){n(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();i.default=a},{"../../../settings":190}],169:[function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}function r(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var s=r.getImageData(2,0,1,1);if(!s)return!1;var o=s.data;return 255===o[0]&&0===o[1]&&0===o[2]}i.__esModule=!0,i.default=r},{}],170:[function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over"),t[r.BLEND_MODES.NORMAL_NPM]=t[r.BLEND_MODES.NORMAL],t[r.BLEND_MODES.ADD_NPM]=t[r.BLEND_MODES.ADD],t[r.BLEND_MODES.SCREEN_NPM]=t[r.BLEND_MODES.SCREEN],t}i.__esModule=!0,i.default=n;var r=t("../../../const"),s=t("./canUseNewCanvasBlendModes"),o=function(t){return t&&t.__esModule?t:{default:t}}(s)},{"../../../const":135,"./canUseNewCanvasBlendModes":169}],171:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../const"),s=t("../../settings"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=function(){function t(e){n(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var s=0,o=0;o<e.length;o++)null!==e[o]&&(e[s++]=e[o]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();i.default=a},{"../../const":135,"../../settings":190}],172:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("pixi-gl-core"),s=t("../../const"),o=t("./utils/RenderTarget"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=t("../../utils"),l=function(){function t(e){n(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var o=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<o.length;++h)if(o[h]===t){e=h;break}}o[e]=t,i.activeTexture(i.TEXTURE0+e);var l=t._glTextures[this.renderer.CONTEXT_UID];if(l)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):l.upload(t.source);else{if(n){var u=new a.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=u,l=u.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else l=new r.GLTexture(this.gl,null,null,null,null),l.bind(e),l.premultiplyAlpha=!0,l.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=l,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&l.enableMipmap(),t.wrapMode===s.WRAP_MODES.CLAMP?l.enableWrapClamp():t.wrapMode===s.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),t.scaleMode===s.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded){var i=this.renderer,n=i.CONTEXT_UID,r=t._glTextures,s=t._glRenderTargets;if(r[n]&&(i.unbindTexture(t),r[n].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete r[n],!e)){var o=this._managedTextures.indexOf(t);-1!==o&&(0,h.removeItems)(this._managedTextures,o,1)}s&&s[n]&&(i._activeRenderTarget===s[n]&&i.bindRenderTarget(i.rootRenderTarget),s[n].destroy(),delete s[n])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();i.default=l},{"../../const":135,"../../utils":214,"./utils/RenderTarget":185,"pixi-gl-core":118}],173:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../SystemRenderer"),h=n(a),l=t("./managers/MaskManager"),u=n(l),c=t("./managers/StencilManager"),p=n(c),f=t("./managers/FilterManager"),d=n(f),m=t("./utils/RenderTarget"),v=n(m),g=t("./utils/ObjectRenderer"),y=n(g),_=t("./TextureManager"),b=n(_),x=t("../../textures/BaseTexture"),w=n(x),T=t("./TextureGarbageCollector"),S=n(T),E=t("./WebGLState"),M=n(E),P=t("./utils/mapWebGLDrawModesToPixi"),A=n(P),C=t("./utils/validateContext"),O=n(C),L=t("../../utils"),k=t("pixi-gl-core"),R=n(k),I=t("../../const"),D=0,F=function(t){function e(i,n,o){r(this,e);var a=s(this,t.call(this,"WebGL",i,n,o));return a.legacy=a.options.legacy,a.legacy&&(R.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=I.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new u.default(a),a.stencilManager=new p.default(a),a.emptyRenderer=new y.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,O.default)(a.options.context),a.gl=a.options.context||R.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=D++,a.state=new M.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,A.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return o(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new b.default(this),this.filterManager=new d.default(this),this.textureGC=new S.default(this),this.state.resetToDefault(),this.rootRenderTarget=new v.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new R.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var s=new w.default;s._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=s,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){h.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture,n=i._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),i=n._glRenderTargets[this.CONTEXT_UID],i.setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,s=t._glTextures[this.CONTEXT_UID];return s?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,s.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===this.emptyTextures[i]&&(e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture))}for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.boundTextures[n]=this.emptyTextures[n],e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new R.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(h.default);i.default=F,L.pluginTarget.mixin(F)},{"../../const":135,"../../textures/BaseTexture":201,"../../utils":214,"../SystemRenderer":165,"./TextureGarbageCollector":171,"./TextureManager":172,"./WebGLState":174,"./managers/FilterManager":179,"./managers/MaskManager":180,"./managers/StencilManager":181,"./utils/ObjectRenderer":183,"./utils/RenderTarget":185,"./utils/mapWebGLDrawModesToPixi":188,"./utils/validateContext":189,"pixi-gl-core":118}],174:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("./utils/mapWebGLBlendModesToPixi"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(e){n(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,s.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex
;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();i.default=o},{"./utils/mapWebGLBlendModesToPixi":187}],175:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("./extractUniformsFromSrc"),a=n(o),h=t("../../../utils"),l=t("../../../const"),u=t("../../../settings"),c=n(u),p={},f=function(){function t(e,i,n){r(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=l.BLEND_MODES.NORMAL,this.uniformData=n||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var s in this.uniformData)this.uniforms[s]=this.uniformData[s].value,this.uniformData[s].type&&(this.uniformData[s].type=this.uniformData[s].type.toLowerCase());this.glShaders={},p[this.vertexSrc+this.fragmentSrc]||(p[this.vertexSrc+this.fragmentSrc]=(0,h.uid)()),this.glShaderKey=p[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},s(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();i.default=f},{"../../../const":135,"../../../settings":190,"../../../utils":214,"./extractUniformsFromSrc":176}],176:[function(t,e,i){"use strict";function n(t,e,i){var n=r(t),s=r(e);return Object.assign(n,s)}function r(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<r.length;s++){var o=r[s].trim();if(o.indexOf("uniform")>-1){var h=o.split(" "),l=h[1],u=h[2],c=1;u.indexOf("[")>-1&&(n=u.split(/\[|]/),u=n[0],c*=Number(n[1])),u.match(e)||(i[u]={value:a(l,c),name:u,type:l})}}return i}i.__esModule=!0,i.default=n;var s=t("pixi-gl-core"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=o.default.shader.defaultValue},{"pixi-gl-core":118}],177:[function(t,e,i){"use strict";function n(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n}function r(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,s=i.height/e.height;return n.scale(r,s),n}function s(t,e,i,n){var r=n._texture.orig,s=t.set(i.width,0,0,i.height,e.x,e.y),a=n.worldTransform.copy(o.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/r.width,1/r.height),s.translate(n.anchor.x,n.anchor.y),s}i.__esModule=!0,i.calculateScreenSpaceMatrix=n,i.calculateNormalizedScreenSpaceMatrix=r,i.calculateSpriteMatrix=s;var o=t("../../../math")},{"../../../math":159}],178:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../Filter"),h=n(a),l=t("../../../../math"),u=(t("path"),t("../../../../textures/TextureMatrix")),c=n(u),p=function(t){function e(i){r(this,e);var n=new l.Matrix,o=s(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,o.maskSprite=i,o.maskMatrix=n,o}return o(e,t),e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new c.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,n))},e}(h.default);i.default=p},{"../../../../math":159,"../../../../textures/TextureMatrix":205,"../Filter":175,path:1}],179:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=t("./WebGLManager"),h=n(a),l=t("../utils/RenderTarget"),u=n(l),c=t("../utils/Quad"),p=n(c),f=t("../../../math"),d=t("../../../Shader"),m=n(d),v=t("../filters/filterTransforms"),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(v),y=t("bit-twiddle"),_=n(y),b=function(){function t(){o(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new f.Rectangle,this.destinationFrame=new f.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),x=function(t){function e(i){o(this,e);var n=r(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new p.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=i.view.width,n._screenHeight=i.view.height,n}return s(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new b;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var s=n.stack[++n.index],o=n.stack[0].destinationFrame;s||(s=n.stack[n.index]=new b);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,h=e[0].resolution,l=0|e[0].padding,u=a?i.screen:t.filterArea||t.getBounds(!0),c=s.sourceFrame,p=s.destinationFrame;c.x=(u.x*h|0)/h,c.y=(u.y*h|0)/h,c.width=(u.width*h|0)/h,c.height=(u.height*h|0)/h,a||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(o),c.pad(l)),p.width=c.width,p.height=c.height;var f=this.getPotRenderTarget(i.gl,c.width,c.height,h);s.target=t,s.filters=e,s.resolution=h,s.renderTarget=f,f.setFrame(p,c),i.bindRenderTarget(f),f.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);s.setFrame(i.destinationFrame,i.sourceFrame),s.clear();var o=0;for(o=0;o<n.length-1;++o){n[o].apply(this,r,s,!0,i);var a=r;r=s,s=a}n[o].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(s)}i.clear(),0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,s=r.gl,o=t.glShaders[r.CONTEXT_UID];o||(t.glShaderKey?(o=this.shaderCache[t.glShaderKey])||(o=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=o,this.managedFilters.push(t)):(o=t.glShaders[r.CONTEXT_UID]=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),r.bindVao(null),this.quad.initVao(o)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(s.disable(s.SCISSOR_TEST),r.clear(),s.enable(s.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(o);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(o,t),r.state.setBlendMode(t.blendMode),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),s.bindTexture(s.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,s=void 0;if(t.uniforms.filterArea){s=this.filterData.stack[this.filterData.index];var o=t.uniforms.filterArea;o[0]=s.renderTarget.size.width,o[1]=s.renderTarget.size.height,o[2]=s.sourceFrame.x,o[3]=s.sourceFrame.y,t.uniforms.filterArea=o}if(t.uniforms.filterClamp){s=s||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(s.sourceFrame.width-1)/s.renderTarget.size.width,a[3]=(s.sourceFrame.height-1)/s.renderTarget.size.height,t.uniforms.filterClamp=a}for(var h in i)if(t.uniforms.data[h]){var l=i[h].type;if("sampler2d"===l&&0!==n[h]){if(n[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(n[h].baseTexture,r);else{t.uniforms[h]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[h].texture.bind()}r++}else if("mat3"===l)void 0!==n[h].a?t.uniforms[h]=n[h].toArray(!0):t.uniforms[h]=n[h];else if("vec2"===l)if(void 0!==n[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=n[h].x,c[1]=n[h].y,t.uniforms[h]=c}else t.uniforms[h]=n[h];else"float"===l?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=n[h]):t.uniforms[h]=n[h]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return g.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return g.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return g.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<i.length;n++)t||i[n].glShaders[e.CONTEXT_UID].destroy(),delete i[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){var r="screen";e*=n,i*=n,e===this._screenWidth&&i===this._screenHeight||(e=_.default.nextPow2(e),i=_.default.nextPow2(i),r=(65535&e)<<16|65535&i),this.pool[r]||(this.pool[r]=[]);var s=this.pool[r].pop();if(!s){var o=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new u.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=n,s.defaultFrame.width=s.size.width=e/n,s.defaultFrame.height=s.size.height=i/n,s.filterPoolKey=r,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(h.default);i.default=x},{"../../../Shader":133,"../../../math":159,"../filters/filterTransforms":177,"../utils/Quad":184,"../utils/RenderTarget":185,"./WebGLManager":182,"bit-twiddle":10}],180:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("./WebGLManager"),h=n(a),l=t("../filters/spriteMask/SpriteMaskFilter"),u=n(l),c=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return o(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new u.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var n=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),t.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(h.default);i.default=c},{"../filters/spriteMask/SpriteMaskFilter":178,"./WebGLManager":182}],181:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("./WebGLManager"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i){n(this,e);var s=r(this,t.call(this,i));return s.stencilMaskStack=null,s}return s(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){a.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(a.default);i.default=h},{"./WebGLManager":182}],182:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();i.default=r},{}],183:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("../managers/WebGLManager"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(a.default);i.default=h},{"../managers/WebGLManager":182}],184:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=t("pixi-gl-core"),o=n(s),a=t("../../../utils/createIndicesForQuads"),h=n(a),l=function(){function t(e,i){r(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,h.default)(1),this.vertexBuffer=o.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();i.default=l},{"../../../utils/createIndicesForQuads":212,"pixi-gl-core":118}],185:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../../math"),s=t("../../../const"),o=t("../../../settings"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=t("pixi-gl-core"),l=function(){function t(e,i,o,l,u,c){n(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=u||a.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==l?l:a.default.SCALE_MODE,this.root=c||!1,this.root?(this.frameBuffer=new h.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=h.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===s.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,o)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();i.default=l},{"../../../const":135,"../../../math":159,"../../../settings":190,"pixi-gl-core":118}],186:[function(t,e,i){"use strict";function n(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var n=document.createElement("canvas");n.width=1,n.height=1,e=o.default.createContext(n)}for(var s=e.createShader(e.FRAGMENT_SHADER);;){var h=a.replace(/%forloop%/gi,r(t));if(e.shaderSource(s,h),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function r(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}i.__esModule=!0,i.default=n;var s=t("pixi-gl-core"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":118}],187:[function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e}i.__esModule=!0,i.default=n;var r=t("../../../const")},{"../../../const":135}],188:[function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}i.__esModule=!0,i.default=n;var r=t("../../../const")},{"../../../const":135}],189:[function(t,e,i){"use strict";function n(t){t.getContextAttributes().stencil}i.__esModule=!0,i.default=n},{}],190:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./utils/maxRecommendedTextures"),s=n(r),o=t("./utils/canUploadSameBuffer"),a=n(o);i.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,s.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":211,"./utils/maxRecommendedTextures":216}],191:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){
for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../math"),l=t("../utils"),u=t("../const"),c=t("../textures/Texture"),p=n(c),f=t("../display/Container"),d=n(f),m=new h.Point,v=function(t){function e(i){r(this,e);var n=s(this,t.call(this));return n._anchor=new h.ObservablePoint(n._onAnchorUpdate,n,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=u.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||p.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return o(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,l.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,l.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor,p=0,f=0,d=0,m=0;l?(f=l.x-c._x*u.width,p=f+l.width,m=l.y-c._y*u.height,d=m+l.height):(f=-c._x*u.width,p=f+u.width,m=-c._y*u.height,d=m+u.height),h[0]=i*f+r*m+o,h[1]=s*m+n*f+a,h[2]=i*p+r*m+o,h[3]=s*m+n*p+a,h[4]=i*p+r*d+o,h[5]=s*d+n*p+a,h[6]=i*f+r*d+o,h[7]=s*d+n*f+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,u=r.ty,c=-n._x*i.width,p=c+i.width,f=-n._y*i.height,d=f+i.height;e[0]=s*c+a*f+l,e[1]=h*f+o*c+u,e[2]=s*p+a*f+l,e[3]=h*f+o*p+u,e[4]=s*p+a*d+l,e[5]=h*d+o*p+u,e[6]=s*c+a*d+l,e[7]=h*d+o*c+u},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return m.x>=n&&m.x<n+e&&(r=-i*this.anchor.y,m.y>=r&&m.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(p.default.from(t))},e.fromFrame=function(t){var i=l.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(p.default.fromImage(t,i,n))},a(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,l.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,l.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||p.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(d.default);i.default=v},{"../const":135,"../display/Container":137,"../math":159,"../textures/Texture":204,"../utils":214}],192:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=t("../../renderers/canvas/CanvasRenderer"),o=n(s),a=t("../../const"),h=t("../../math"),l=t("./CanvasTinter"),u=n(l),c=new h.Matrix,p=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,r=e._frame.height,s=t.transform.worldTransform,o=0,l=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var p=e.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==p&&(i.context[i.smoothProperty]=p),e.trim?(o=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,l=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(o=(.5-t.anchor.x)*e.orig.width,l=(.5-t.anchor.y)*e.orig.height),e.rotate&&(s.copy(c),s=c,h.GroupD8.matrixAppendRotationInv(s,e.rotate,o,l),o=0,l=0),o-=n/2,l-=r/2,i.roundPixels?(i.context.setTransform(s.a,s.b,s.c,s.d,s.tx*i.resolution|0,s.ty*i.resolution|0),o|=0,l|=0):i.context.setTransform(s.a,s.b,s.c,s.d,s.tx*i.resolution,s.ty*i.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=u.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*f,r*f,o*i.resolution,l*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,n*f,r*f,o*i.resolution,l*i.resolution,n*i.resolution,r*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();i.default=p,o.default.registerPlugin("sprite",p)},{"../../const":135,"../../math":159,"../../renderers/canvas/CanvasRenderer":166,"./CanvasTinter":193}],193:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../utils"),r=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o={getTintedTexture:function(t,e){var i=t._texture;e=o.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var r=i.tintCache[n],s=void 0;if(r){if(r.tintId===i._updateID)return i.tintCache[n];s=i.tintCache[n]}else s=o.canvas||document.createElement("canvas");if(o.tintMethod(i,e,s),s.tintId=i._updateID,o.convertTintToImage){var a=new Image;a.src=s.toDataURL(),i.tintCache[n]=a}else i.tintCache[n]=s,o.canvas=null;return s},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),s=t._frame.clone(),o=t.baseTexture.resolution;s.x*=o,s.y*=o,s.width*=o,s.height*=o,i.width=Math.ceil(s.width),i.height=Math.ceil(s.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),r.restore();for(var a=(0,n.hex2rgb)(e),h=a[0],l=a[1],u=a[2],c=r.getImageData(0,0,s.width,s.height),p=c.data,f=0;f<p.length;f+=4)p[f+0]*=h,p[f+1]*=l,p[f+2]*=u;r.putImageData(c,0,0)},roundColor:function(t){var e=o.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,s.default)(),tintMethod:0};o.tintMethod=o.canUseMultiply?o.tintWithMultiply:o.tintWithPerPixel,i.default=o},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":169,"../../utils":214}],194:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();i.default=r},{}],195:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../../renderers/webgl/utils/ObjectRenderer"),h=n(a),l=t("../../renderers/webgl/WebGLRenderer"),u=n(l),c=t("../../utils/createIndicesForQuads"),p=n(c),f=t("./generateMultiTextureShader"),d=n(f),m=t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),v=n(m),g=t("./BatchBuffer"),y=n(g),_=t("../../settings"),b=n(_),x=t("../../utils"),w=t("pixi-gl-core"),T=n(w),S=t("bit-twiddle"),E=n(S),M=0,P=0,A=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=b.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var o=1;o<=E.default.nextPow2(n.size);o*=2)n.buffers.push(new y.default(4*o*n.vertByteSize));n.indices=(0,p.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,v.default)(this.MAX_TEXTURES,t)),this.shader=(0,d.default)(t,this.MAX_TEXTURES),this.indexBuffer=T.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=T.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=E.default.nextPow2(this.currentIndex),n=E.default.log2(i),r=this.buffers[n],s=this.sprites,o=this.groups,a=r.float32View,h=r.uint32View,l=this.boundTextures,u=this.renderer.boundTextures,c=this.renderer.textureGC.count,p=0,f=void 0,d=void 0,m=1,v=0,g=o[0],y=void 0,_=void 0,w=x.premultiplyBlendMode[s[0]._texture.baseTexture.premultipliedAlpha?1:0][s[0].blendMode];g.textureCount=0,g.start=0,g.blend=w,M++;var S=void 0;for(S=0;S<e;++S){var A=u[S];A._enabled!==M?(l[S]=A,A._virtalBoundId=S,A._enabled=M):l[S]=this.renderer.emptyTextures[S]}for(M++,S=0;S<this.currentIndex;++S){var C=s[S];s[S]=null,f=C._texture.baseTexture;var O=x.premultiplyBlendMode[Number(f.premultipliedAlpha)][C.blendMode];if(w!==O&&(w=O,d=null,v=e,M++),d!==f&&(d=f,f._enabled!==M)){if(v===e&&(M++,g.size=S-g.start,v=0,g=o[m++],g.blend=w,g.textureCount=0,g.start=S),f.touched=c,-1===f._virtalBoundId)for(var L=0;L<e;++L){var k=(L+P)%e,R=l[k];if(R._enabled!==M){P++,R._virtalBoundId=-1,f._virtalBoundId=k,l[k]=f;break}}f._enabled=M,g.textureCount++,g.ids[v]=f._virtalBoundId,g.textures[v++]=f}if(y=C.vertexData,_=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var I=this.renderer.resolution;a[p]=(y[0]*I|0)/I,a[p+1]=(y[1]*I|0)/I,a[p+5]=(y[2]*I|0)/I,a[p+6]=(y[3]*I|0)/I,a[p+10]=(y[4]*I|0)/I,a[p+11]=(y[5]*I|0)/I,a[p+15]=(y[6]*I|0)/I,a[p+16]=(y[7]*I|0)/I}else a[p]=y[0],a[p+1]=y[1],a[p+5]=y[2],a[p+6]=y[3],a[p+10]=y[4],a[p+11]=y[5],a[p+15]=y[6],a[p+16]=y[7];h[p+2]=_[0],h[p+7]=_[1],h[p+12]=_[2],h[p+17]=_[3];var D=Math.min(C.worldAlpha,1),F=D<1&&f.premultipliedAlpha?(0,x.premultiplyTint)(C._tintRGB,D):C._tintRGB+(255*D<<24);h[p+3]=h[p+8]=h[p+13]=h[p+18]=F,a[p+4]=a[p+9]=a[p+14]=a[p+19]=f._virtalBoundId,p+=20}if(g.size=S-g.start,b.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,B=this.vertexBuffers[this.vertexCount]=T.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),j=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(B,N.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(B,N.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(B,N.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&j.addAttribute(B,N.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=j}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(S=0;S<e;++S)u[S]._virtalBoundId=-1;for(S=0;S<m;++S){for(var U=o[S],z=U.textureCount,G=0;G<z;G++)d=U.textures[G],u[U.ids[G]]!==d&&this.renderer.bindTexture(d,U.ids[G],!0),d._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),b.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(h.default);i.default=A,u.default.registerPlugin("sprite",A)},{"../../renderers/webgl/WebGLRenderer":173,"../../renderers/webgl/utils/ObjectRenderer":183,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":186,"../../settings":190,"../../utils":214,"../../utils/createIndicesForQuads":212,"./BatchBuffer":194,"./generateMultiTextureShader":196,"bit-twiddle":10,"pixi-gl-core":118}],196:[function(t,e,i){"use strict";function n(t,e){var i=a;i=i.replace(/%count%/gi,e),i=i.replace(/%forloop%/gi,r(e));for(var n=new o.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),s=[],h=0;h<e;h++)s[h]=h;return n.bind(),n.uniforms.uSamplers=s,n}function r(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}i.__esModule=!0,i.default=n;var s=t("../../Shader"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":133,path:1}],197:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../sprites/Sprite"),l=n(h),u=t("../textures/Texture"),c=n(u),p=t("../math"),f=t("../utils"),d=t("../const"),m=t("../settings"),v=n(m),g=t("./TextStyle"),y=n(g),_=t("./TextMetrics"),b=n(_),x=t("../utils/trimCanvas"),w=n(x),T={texture:!0,children:!1,baseTexture:!0},S=function(t){function e(i,n,o){r(this,e),o=o||document.createElement("canvas"),o.width=3,o.height=3;var a=c.default.fromCanvas(o,v.default.SCALE_MODE,"text");a.orig=new p.Rectangle,a.trim=new p.Rectangle;var h=s(this,t.call(this,a));return c.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=o,h.context=h.canvas.getContext("2d"),h.resolution=v.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=i,h.style=n,h.localStyleID=-1,h}return o(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,n=b.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,s=n.height,o=n.lines,a=n.lineHeight,h=n.lineWidths,l=n.maxLineWidth,u=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,r)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var c=void 0,p=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,d=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<o.length;m++)c=e.strokeThickness/2,p=e.strokeThickness/2+m*a+u.ascent,"right"===e.align?c+=l-h[m]:"center"===e.align&&(c+=(l-h[m])/2),e.fill&&(this.drawLetterSpacing(o[m],c+f+e.padding,p+d+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[m],c+f+e.padding,p+d+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,o);for(var v=0;v<o.length;v++)c=e.strokeThickness/2,p=e.strokeThickness/2+v*a+u.ascent,"right"===e.align?c+=l-h[v]:"center"===e.align&&(c+=(l-h[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[v],c+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(o[v],c+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style,s=r.letterSpacing;if(0===s)return void(n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var o=String.prototype.split.call(t,""),a=e,h=0,l="",u=this.context.measureText(t).width,c=0;h<t.length;)l=o[h++],n?this.context.strokeText(l,a,i):this.context.fillText(l,a,i),c=this.context.measureText(t.substring(h)).width,a+=u-c+s,u=c},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,w.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,s=i.baseTexture;s.hasLoaded=!0,s.resolution=this.resolution,s.realWidth=t.width,s.realHeight=t.height,s.width=t.width/this.resolution,s.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),s.emit("update",s),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,s=void 0,o=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,h=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var u=h.length+1,c=1;c<u;++c)l.push(c/u);if(h.unshift(t.fill[0]),l.unshift(0),h.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===d.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,0,o/2,a),n=(h.length+1)*e.length,r=0;for(var p=0;p<e.length;p++){r+=1;for(var f=0;f<h.length;f++)s="number"==typeof l[f]?l[f]/e.length+p/e.length:r/n,i.addColorStop(s,h[f]),r++}}else{i=this.context.createLinearGradient(0,a/2,o,a/2),n=h.length+1,r=1;for(var m=0;m<h.length;m++)s="number"==typeof l[m]?l[m]:r/n,i.addColorStop(s,h[m]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},T,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},a(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof y.default?this._style=t:this._style=new y.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(l.default);i.default=S},{"../const":135,"../math":159,"../settings":190,"../sprites/Sprite":191,"../textures/Texture":204,"../utils":214,"../utils/trimCanvas":219,"./TextMetrics":198,"./TextStyle":199}],198:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e,i,r,s,o,a,h,l,u){n(this,t),this.text=e,this.style=i,this.width=r,this.height=s,this.lines=o,this.lineWidths=a,this.lineHeight=h,this.maxLineWidth=l,this.fontProperties=u}return t.measureText=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=void 0===n||null===n?i.wordWrap:n;var s=i.toFontString(),o=t.measureFont(s),a=r.getContext("2d");a.font=s;for(var h=n?t.wordWrap(e,i,r):e,l=h.split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,p=0;p<l.length;p++){var f=a.measureText(l[p]).width+(l[p].length-1)*i.letterSpacing;u[p]=f,c=Math.max(c,f)}var d=c+i.strokeThickness;i.dropShadow&&(d+=i.dropShadowDistance);var m=i.lineHeight||o.fontSize+i.strokeThickness,v=Math.max(m,o.fontSize+i.strokeThickness)+(l.length-1)*(m+i.leading);return i.dropShadow&&(v+=i.dropShadowDistance),new t(e,i,d,v,l,u,m+i.leading,c,o)},t.wordWrap=function(e,i){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,r=n.getContext("2d"),s=0,o="",a="",h={},l=i.letterSpacing,u=i.whiteSpace,c=t.collapseSpaces(u),p=t.collapseNewlines(u),f=!c,d=i.wordWrapWidth+l,m=t.tokenize(e),v=0;v<m.length;v++){var g=m[v];if(t.isNewline(g)){if(!p){a+=t.addLine(o),f=!c,o="",s=0;continue}g=" "}if(c){var y=t.isBreakingSpace(g),_=t.isBreakingSpace(o[o.length-1]);if(y&&_)continue}var b=t.getFromCache(g,l,h,r);if(b>d)if(""!==o&&(a+=t.addLine(o),o="",s=0),t.canBreakWords(g,i.breakWords))for(var x=g.split(""),w=0;w<x.length;w++){for(var T=x[w],S=1;x[w+S];){var E=x[w+S],M=T[T.length-1];if(t.canBreakChars(M,E,g,w,i.breakWords))break;T+=E,S++}w+=T.length-1;var P=t.getFromCache(T,l,h,r);P+s>d&&(a+=t.addLine(o),f=!1,o="",s=0),o+=T,s+=P}else{o.length>0&&(a+=t.addLine(o),o="",s=0);var A=v===m.length-1;a+=t.addLine(g,!A),f=!1,o="",s=0}else b+s>d&&(f=!1,a+=t.addLine(o),o="",s=0),(o.length>0||!t.isBreakingSpace(g)||f)&&(o+=g,s+=b)}return a+=t.addLine(o,!1)},t.addLine=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if(void 0===r){var s=t.length*e;r=n.measureText(t).width+s,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var s=e[r];t.isBreakingSpace(s)||t.isNewline(s)?(""!==n&&(i.push(n),n=""),i.push(s)):n+=s}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},n=t._canvas,r=t._context;r.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(r.measureText(s).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=2*a;a=a*t.BASELINE_MULTIPLIER|0,n.width=o,n.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,a);var l=r.getImageData(0,0,o,h).data,u=l.length,c=4*o,p=0,f=0,d=!1;for(p=0;p<a;++p){for(var m=0;m<c;m+=4)if(255!==l[f+m]){d=!0;break}if(d)break;f+=c}for(i.ascent=a-p,f=u-c,d=!1,p=h;p>a;--p){for(var v=0;v<c;v+=4)if(255!==l[f+v]){d=!0;break}if(d)break;f-=c}return i.descent=p-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();i.default=r;var s=document.createElement("canvas");s.width=s.height=10,r._canvas=s,r._context=s.getContext("2d"),r._fonts={},r.METRICS_STRING="|Éq",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],199:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"number"==typeof t?(0,u.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function s(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=r(t[e]);return t}return r(t)}function o(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function a(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}i.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("../const"),u=t("../utils"),c={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:l.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},p=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f=function(){function t(e){n(this,t),this.styleID=0,this.reset(),a(this,e,e)}return t.prototype.clone=function(){var e={};return a(e,this,c),new t(e)},t.prototype.reset=function(){a(this,c,c)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&p.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},h(t,[{
key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=s(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=s(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){o(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=s(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();i.default=f},{"../const":135,"../utils":214}],200:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("./BaseTexture"),h=n(a),l=t("../settings"),u=n(l),c=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],a=arguments[3];r(this,e);var h=s(this,t.call(this,null,o));return h.resolution=a||u.default.RESOLUTION,h.width=Math.ceil(i),h.height=Math.ceil(n),h.realWidth=h.width*h.resolution,h.realHeight=h.height*h.resolution,h.scaleMode=void 0!==o?o:u.default.SCALE_MODE,h.hasLoaded=!0,h._glRenderTargets={},h._canvasRenderTarget=null,h.valid=!1,h}return o(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(h.default);i.default=c},{"../settings":190,"./BaseTexture":201}],201:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../utils"),h=t("../settings"),l=n(h),u=t("eventemitter3"),c=n(u),p=t("../utils/determineCrossOrigin"),f=n(p),d=t("bit-twiddle"),m=n(d),v=function(t){function e(i,n,o){r(this,e);var h=s(this,t.call(this));return h.uid=(0,a.uid)(),h.touched=0,h.resolution=o||l.default.RESOLUTION,h.width=100,h.height=100,h.realWidth=100,h.realHeight=100,h.scaleMode=void 0!==n?n:l.default.SCALE_MODE,h.hasLoaded=!1,h.isLoading=!1,h.source=null,h.origSource=null,h.imageType=null,h.sourceScale=1,h.premultipliedAlpha=!0,h.imageUrl=null,h.isPowerOfTwo=!1,h.mipmap=l.default.MIPMAP_TEXTURES,h.wrapMode=l.default.WRAP_MODE,h._glTextures={},h._enabled=0,h._virtalBoundId=-1,h._destroyed=!1,h.textureCacheIds=[],i&&h.loadSource(i),h}return o(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,a.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,a.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,a.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,a.getSvgSize)(t),n=i.width,r=i.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(r*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,a.uid)(),s.getContext("2d").drawImage(this.source,0,0,n,r,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,r){var s=a.BaseTextureCache[t];if(!s){var o=new Image;void 0===i&&0!==t.indexOf("data:")?o.crossOrigin=(0,f.default)(t):i&&(o.crossOrigin="string"==typeof i?i:"anonymous"),s=new e(o,n),s.imageUrl=t,r&&(s.sourceScale=r),s.resolution=(0,a.getResolutionOfUrl)(t),o.src=t,e.addToCache(s,t)}return s},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,a.uid)());var r=a.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),e.addToCache(r,t._pixiId)),r},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var r=t.src,s=a.BaseTextureCache[r];return s||(s=new e(t,i),s.imageUrl=r,n&&(s.sourceScale=n),s.resolution=(0,a.getResolutionOfUrl)(r),e.addToCache(s,r)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),a.BaseTextureCache[e],a.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=a.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete a.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete a.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(c.default);i.default=v},{"../settings":190,"../utils":214,"../utils/determineCrossOrigin":213,"bit-twiddle":10,eventemitter3:17}],202:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("./BaseRenderTexture"),h=n(a),l=t("./Texture"),u=n(l),c=function(t){function e(i,n){r(this,e);var o=null;if(!(i instanceof h.default)){var a=arguments[1],l=arguments[2],u=arguments[3],c=arguments[4];o=arguments[0],n=null,i=new h.default(a,l,u,c)}var p=s(this,t.call(this,i,n));return p.legacyRenderer=o,p.valid=!0,p._updateUvs(),p}return o(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,r){return new e(new h.default(t,i,n,r))},e}(u.default);i.default=c},{"./BaseRenderTexture":200,"./Texture":204}],203:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../"),o=t("../utils"),a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,o.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE,r=this.baseTexture.sourceScale;i-e<n&&i<this._frameKeys.length;){var o=this._frameKeys[i],a=this._frames[o],h=a.frame;if(h){var l=null,u=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,p=new s.Rectangle(0,0,Math.floor(c.w*r)/this.resolution,Math.floor(c.h*r)/this.resolution);l=a.rotated?new s.Rectangle(Math.floor(h.x*r)/this.resolution,Math.floor(h.y*r)/this.resolution,Math.floor(h.h*r)/this.resolution,Math.floor(h.w*r)/this.resolution):new s.Rectangle(Math.floor(h.x*r)/this.resolution,Math.floor(h.y*r)/this.resolution,Math.floor(h.w*r)/this.resolution,Math.floor(h.h*r)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(u=new s.Rectangle(Math.floor(a.spriteSourceSize.x*r)/this.resolution,Math.floor(a.spriteSourceSize.y*r)/this.resolution,Math.floor(h.w*r)/this.resolution,Math.floor(h.h*r)/this.resolution)),this.textures[o]=new s.Texture(this.baseTexture,l,p,u,a.rotated?2:0,a.anchor),s.Texture.addToCache(this.textures[o],o)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=t[e],n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if(r=i.next(),r.done)break;s=r.value}var o=s;this.animations[e].push(this.textures[o])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();i.default=a},{"../":154,"../utils":214}],204:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}i.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("./BaseTexture"),u=n(l),c=t("./VideoBaseTexture"),p=n(c),f=t("./TextureUvs"),d=n(f),m=t("eventemitter3"),v=n(m),g=t("../math"),y=t("../utils"),_=t("../settings"),b=n(_),x=function(t){function e(i,n,o,a,h,l){r(this,e);var u=s(this,t.call(this));if(u.noFrame=!1,n||(u.noFrame=!0,n=new g.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),u.baseTexture=i,u._frame=n,u.trim=a,u.valid=!1,u.requiresUpdate=!1,u._uvs=null,u.orig=o||n,u._rotate=Number(h||0),!0===h)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(u.noFrame&&(n=new g.Rectangle(0,0,i.width,i.height),i.on("update",u.onBaseTextureUpdated,u)),u.frame=n):i.once("loaded",u.onBaseTextureLoaded,u),u.defaultAnchor=l?new g.Point(l.x,l.y):new g.Point(0,0),u._updateID=0,u.transform=null,u.textureCacheIds=[],u}return o(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new g.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(y.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new d.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,r){var s=y.TextureCache[t];return s||(s=new e(u.default.fromImage(t,i,n,r)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=y.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(u.default.fromCanvas(t,i,n))},e.fromVideo=function(t,i,n,r){return"string"==typeof t?e.fromVideoUrl(t,i,n,r):new e(p.default.fromVideo(t,i,r))},e.fromVideoUrl=function(t,i,n,r){return new e(p.default.fromUrl(t,i,n,r))},e.from=function(t){if("string"==typeof t){var i=y.TextureCache[t];if(!i){return null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t)}return i}return t instanceof HTMLImageElement?new e(u.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,b.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof u.default?new e(t):t},e.fromLoader=function(t,i,n){var r=new u.default(t,void 0,(0,y.getResolutionOfUrl)(i)),s=new e(r);return r.imageUrl=i,n||(n=i),u.default.addToCache(s.baseTexture,n),e.addToCache(s,n),n!==i&&(u.default.addToCache(s.baseTexture,i),e.addToCache(s,i)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),y.TextureCache[e],y.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=y.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete y.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)y.TextureCache[t.textureCacheIds[n]]===t&&delete y.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},h(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,s=e+n>this.baseTexture.width,o=i+r>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,l="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=n&&r&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(v.default);i.default=x,x.EMPTY=new x(new u.default),a(x.EMPTY),a(x.EMPTY.baseTexture),x.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new x(new u.default(t))}(),a(x.WHITE),a(x.WHITE.baseTexture)},{"../math":159,"../settings":190,"../utils":214,"./BaseTexture":201,"./TextureUvs":206,"./VideoBaseTexture":207,eventemitter3:17}],205:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../math/Matrix"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=new o.default,h=function(){function t(e,i){n(this,t),this._texture=e,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(a.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(a));var s=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/s.resolution,l=this.clampOffset;return o[0]=(e._frame.x+h+l)/s.width,o[1]=(e._frame.y+h+l)/s.height,o[2]=(e._frame.x+e._frame.width-h+l)/s.width,o[3]=(e._frame.y+e._frame.height-h+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,!0},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();i.default=h},{"../math/Matrix":156}],206:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../math/GroupD8"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(){n(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var o=t.width/2/n,a=t.height/2/r,h=t.x/n+o,l=t.y/r+a;i=s.default.add(i,s.default.NW),this.x0=h+o*s.default.uX(i),this.y0=l+a*s.default.uY(i),i=s.default.add(i,2),this.x1=h+o*s.default.uX(i),this.y1=l+a*s.default.uY(i),i=s.default.add(i,2),this.x2=h+o*s.default.uX(i),this.y2=l+a*s.default.uY(i),i=s.default.add(i,2),this.x3=h+o*s.default.uX(i),this.y3=l+a*s.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();i.default=o},{"../math/GroupD8":155}],207:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!e){var i=t.split("?").shift().toLowerCase();e="video/"+i.substr(i.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=t,n.type=e,n}i.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("./BaseTexture"),u=n(l),c=t("../utils"),p=t("../ticker"),f=t("../const"),d=t("../utils/determineCrossOrigin"),m=n(d),v=function(t){function e(i,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var a=s(this,t.call(this,i,n));return a.width=i.videoWidth,a.height=i.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=o,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),i.addEventListener("play",a._onPlayStart.bind(a)),i.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(i.addEventListener("canplay",a._onCanPlay),i.addEventListener("canplaythrough",a._onCanPlay)),a}return o(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(p.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(p.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&p.shared.remove(this.update,this),this.source&&this.source._pixiId&&(u.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i,n){t._pixiId||(t._pixiId="video_"+(0,c.uid)());var r=c.BaseTextureCache[t._pixiId];return r||(r=new e(t,i,n),u.default.addToCache(r,t._pixiId)),r},e.fromUrl=function(t,i,n,r){var s=document.createElement("video");s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","");var o=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===n&&0!==o.indexOf("data:")?s.crossOrigin=(0,m.default)(o):n&&(s.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var h=0;h<t.length;++h)s.appendChild(a(t[h].src||t[h],t[h].mime));else s.appendChild(a(o,t.mime));return s.load(),e.fromVideo(s,i,r)},h(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(p.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(p.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(u.default);i.default=v,v.fromUrls=v.fromUrl},{"../const":135,"../ticker":210,"../utils":214,"../utils/determineCrossOrigin":213,"./BaseTexture":201}],208:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("../settings"),a=n(o),h=t("../const"),l=t("./TickerListener"),u=n(l),c=function(){function t(){var e=this;r(this,t),this._head=new u.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/a.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(t,e,i))},t.prototype.addOnce=function(t,e){
var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*a.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},s(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,a.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();i.default=c},{"../const":135,"../settings":190,"./TickerListener":209}],209:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.fn=e,this.context=i,this.priority=r,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();i.default=r},{}],210:[function(t,e,i){"use strict";i.__esModule=!0,i.Ticker=i.shared=void 0;var n=t("./Ticker"),r=function(t){return t&&t.__esModule?t:{default:t}}(n),s=new r.default;s.autoStart=!0,s.destroy=function(){},i.shared=s,i.Ticker=r.default},{"./Ticker":208}],211:[function(t,e,i){"use strict";function n(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}i.__esModule=!0,i.default=n},{}],212:[function(t,e,i){"use strict";function n(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}i.__esModule=!0,i.default=n},{}],213:[function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,o||(o=document.createElement("a")),o.href=t,t=s.default.parse(o.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}i.__esModule=!0,i.default=n;var r=t("url"),s=function(t){return t&&t.__esModule?t:{default:t}}(r),o=void 0},{url:7}],214:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function s(){return++U}function o(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function a(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function h(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function l(t,e){var i=E.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}function u(t){var e=T.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function c(t){var e=T.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function p(t){var e=T.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}function f(){z=!0}function d(t){if(!z){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+T.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console;z=!0}}function m(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}}function v(t){return 0===t?0:t<0?-1:1}function g(){var t=void 0;for(t in G)G[t].destroy();for(t in V)V[t].destroy()}function y(){var t=void 0;for(t in G)delete G[t];for(t in V)delete V[t]}function _(t,e){return X[e?1:0][t]}function b(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return i=i*e+.5|0,n=n*e+.5|0,r=r*e+.5|0,(255*e<<24)+(i<<16)+(n<<8)+r}function x(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function w(t,e,i,n){return i=i||new Float32Array(4),i[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}i.__esModule=!0,i.premultiplyBlendMode=i.BaseTextureCache=i.TextureCache=i.earcut=i.mixins=i.pluginTarget=i.EventEmitter=i.removeItems=i.isMobile=void 0,i.uid=s,i.hex2rgb=o,i.hex2string=a,i.rgb2hex=h,i.getResolutionOfUrl=l,i.decomposeDataUri=u,i.getUrlFileExtension=c,i.getSvgSize=p,i.skipHello=f,i.sayHello=d,i.isWebGLSupported=m,i.sign=v,i.destroyTextureCache=g,i.clearTextureCache=y,i.correctBlendMode=_,i.premultiplyTint=b,i.premultiplyRgba=x,i.premultiplyTintToRgba=w;var T=t("../const"),S=t("../settings"),E=r(S),M=t("eventemitter3"),P=r(M),A=t("./pluginTarget"),C=r(A),O=t("./mixin"),L=n(O),k=t("ismobilejs"),R=n(k),I=t("remove-array-items"),D=r(I),F=t("./mapPremultipliedBlendModes"),N=r(F),B=t("earcut"),j=r(B),U=0,z=!1;i.isMobile=R,i.removeItems=D.default,i.EventEmitter=P.default,i.pluginTarget=C.default,i.mixins=L,i.earcut=j.default;var G=i.TextureCache=Object.create(null),V=i.BaseTextureCache=Object.create(null),X=i.premultiplyBlendMode=(0,N.default)()},{"../const":135,"../settings":190,"./mapPremultipliedBlendModes":215,"./mixin":217,"./pluginTarget":218,earcut:15,eventemitter3:17,ismobilejs:23,"remove-array-items":279}],215:[function(t,e,i){"use strict";function n(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}i.__esModule=!0,i.default=n;var r=t("../const")},{"../const":135}],216:[function(t,e,i){"use strict";function n(t){return s.default.tablet||s.default.phone?4:t}i.__esModule=!0,i.default=n;var r=t("ismobilejs"),s=function(t){return t&&t.__esModule?t:{default:t}}(r)},{ismobilejs:23}],217:[function(t,e,i){"use strict";function n(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}function r(t,e){o.push(t,e)}function s(){for(var t=0;t<o.length;t+=2)n(o[t],o[t+1]);o.length=0}i.__esModule=!0,i.mixin=n,i.delayMixin=r,i.performMixins=s;var o=[]},{}],218:[function(t,e,i){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}i.__esModule=!0,i.default={mixin:function(t){n(t)}}},{}],219:[function(t,e,i){"use strict";function n(t){var e=t.width,i=t.height,n=t.getContext("2d"),r=n.getImageData(0,0,e,i),s=r.data,o=s.length,a={top:null,left:null,right:null,bottom:null},h=null,l=void 0,u=void 0,c=void 0;for(l=0;l<o;l+=4)0!==s[l+3]&&(u=l/4%e,c=~~(l/4/e),null===a.top&&(a.top=c),null===a.left?a.left=u:u<a.left&&(a.left=u),null===a.right?a.right=u+1:a.right<u&&(a.right=u+1),null===a.bottom?a.bottom=c:a.bottom<c&&(a.bottom=c));return null!==a.top&&(e=a.right-a.left,i=a.bottom-a.top+1,h=n.getImageData(a.left,a.top,e,i)),{height:i,width:e,data:h}}i.__esModule=!0,i.default=n},{}],220:[function(t,e,i){"use strict";function n(t){if(!s[t]){var e=(new Error).stack;void 0===e||(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed),s[t]=!0}}function r(t){var e=t.mesh,i=t.particles,r=t.extras,s=t.filters,o=t.prepare,a=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=0;u<l.length;u++)!function(e){var i=l[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})}(u);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),r&&Object.defineProperties(r,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,r){this.legacyRenderer.render(t,this,i,e,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),e=e||{},e instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var s=0;s<i;++s)if(e[s].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[s];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var o=i+1;o<e.length;++o)this._fontFamily+=e[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(s,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),s.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var p=a.Resource,f=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}i.__esModule=!0,i.default=r;var s={}},{}],221:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=new s.Rectangle,a=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=void 0;t&&(a=t instanceof s.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,r=a.frame):(i=e.rootContext,n=e.resolution,r=o,r.width=this.renderer.width,r.height=this.renderer.height);var h=Math.floor(r.width*n+1e-4),l=Math.floor(r.height*n+1e-4),u=new s.CanvasRenderTarget(h,l,1),c=i.getImageData(r.x*n,r.y*n,h,l);return u.context.putImageData(c,0,0),u.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=void 0;return t&&(a=t instanceof s.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,r=a.frame):(i=e.rootContext,r=o,r.width=e.width,r.height=e.height),i.getImageData(0,0,r.width*n,r.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=a,s.CanvasRenderer.registerPlugin("extract",a)},{"../../core":154}],222:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./webgl/WebGLExtract");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return n(r).default}});var s=t("./canvas/CanvasExtract");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return n(s).default}})},{"./canvas/CanvasExtract":221,"./webgl/WebGLExtract":223}],223:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=new s.Rectangle,a=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=!1,h=void 0,l=!1;t&&(t instanceof s.RenderTexture?h=t:(h=this.renderer.generateTexture(t),l=!0)),h?(i=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=h.frame,a=!1):(i=this.renderer.rootRenderTarget,n=i.resolution,a=!0,r=o,r.width=i.size.width,r.height=i.size.height);var u=Math.floor(r.width*n+1e-4),c=Math.floor(r.height*n+1e-4),p=new s.CanvasRenderTarget(u,c,1);if(i){e.bindRenderTarget(i);var f=new Uint8Array(4*u*c),d=e.gl;d.readPixels(r.x*n,r.y*n,u,c,d.RGBA,d.UNSIGNED_BYTE,f);var m=p.context.getImageData(0,0,u,c);m.data.set(f),p.context.putImageData(m,0,0),a&&(p.context.scale(1,-1),p.context.drawImage(p.canvas,0,-c))}return l&&h.destroy(!0),p.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=void 0,h=!1;t&&(t instanceof s.RenderTexture?a=t:(a=this.renderer.generateTexture(t),h=!0)),a?(i=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=a.frame):(i=this.renderer.rootRenderTarget,n=i.resolution,r=o,r.width=i.size.width,r.height=i.size.height);var l=r.width*n,u=r.height*n,c=new Uint8Array(4*l*u);if(i){e.bindRenderTarget(i);var p=e.gl;p.readPixels(r.x*n,r.y*n,l,u,p.RGBA,p.UNSIGNED_BYTE,c)}return h&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=a,s.WebGLRenderer.registerPlugin("extract",a)},{"../../core":154}],224:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=function(t){function e(i,s){n(this,e);var o=r(this,t.call(this,i[0]instanceof h.Texture?i[0]:i[0].texture));return o._textures=null,o._durations=null,o.textures=i,o._autoUpdate=!1!==s,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return s(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&h.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,
this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(h.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(h.Texture.fromImage(t[n]));return new e(i)},o(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof h.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(h.Sprite);i.default=l},{"../core":154}],225:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../core"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),u=t("../core/math/ObservablePoint"),c=n(u),p=t("../core/utils"),f=t("../core/settings"),d=n(f),m=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var o=s(this,t.call(this));return o._textWidth=0,o._textHeight=0,o._glyphs=[],o._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},o.font=n.font,o._text=i,o._maxWidth=0,o._maxLineHeight=0,o._letterSpacing=0,o._anchor=new c.default(function(){o.dirty=!0},o,0,0),o.dirty=!1,o.updateText(),o}return o(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new l.Point,r=[],s=[],o=this.text.replace(/(?:\r\n|\r)/g,"\n"),a=o.length,h=this._maxWidth*t.size/this._font.size,u=null,c=0,p=0,f=0,d=-1,m=0,v=0,g=0,y=0;y<a;y++){var _=o.charCodeAt(y),b=o.charAt(y);if(/(?:\s)/.test(b)&&(d=y,m=c),"\r"!==b&&"\n"!==b){var x=t.chars[_];x&&(u&&x.kerning[u]&&(n.x+=x.kerning[u]),r.push({texture:x.texture,line:f,charCode:_,position:new l.Point(n.x+x.xOffset+this._letterSpacing/2,n.y+x.yOffset)}),n.x+=x.xAdvance+this._letterSpacing,c=n.x,g=Math.max(g,x.yOffset+x.texture.height),u=_,-1!==d&&h>0&&n.x>h&&(++v,l.utils.removeItems(r,1+d-v,1+y-d),y=d,d=-1,s.push(m),p=Math.max(p,m),f++,n.x=0,n.y+=t.lineHeight,u=null))}else s.push(c),p=Math.max(p,c),++f,++v,n.x=0,n.y+=t.lineHeight,u=null}var w=o.charAt(o.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(c=m),s.push(c),p=Math.max(p,c));for(var T=[],S=0;S<=f;S++){var E=0;"right"===this._font.align?E=p-s[S]:"center"===this._font.align&&(E=(p-s[S])/2),T.push(E)}for(var M=r.length,P=this.tint,A=0;A<M;A++){var C=this._glyphs[A];C?C.texture=r[A].texture:(C=new l.Sprite(r[A].texture),this._glyphs.push(C)),C.position.x=(r[A].position.x+T[r[A].line])*i,C.position.y=r[A].position.y*i,C.scale.x=C.scale.y=i,C.tint=P,C.parent||this.addChild(C)}for(var O=M;O<this._glyphs.length;++O)this.removeChild(this._glyphs[O]);if(this._textWidth=p*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var L=0;L<M;L++)this._glyphs[L].x-=this._textWidth*this.anchor.x,this._glyphs[L].y-=this._textHeight*this.anchor.y;this._maxLineHeight=g*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],s=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page"),a=(0,p.getResolutionOfUrl)(o[0].getAttribute("file"),d.default.RESOLUTION),h={};n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(s.getAttribute("lineHeight"),10)/a,n.chars={},i instanceof l.Texture&&(i=[i]);for(var u=0;u<o.length;u++){var c=o[u].getAttribute("id"),f=o[u].getAttribute("file");h[c]=i instanceof Array?i[u]:i[f]}for(var m=t.getElementsByTagName("char"),v=0;v<m.length;v++){var g=m[v],y=parseInt(g.getAttribute("id"),10),_=g.getAttribute("page")||0,b=new l.Rectangle(parseInt(g.getAttribute("x"),10)/a+h[_].frame.x/a,parseInt(g.getAttribute("y"),10)/a+h[_].frame.y/a,parseInt(g.getAttribute("width"),10)/a,parseInt(g.getAttribute("height"),10)/a);n.chars[y]={xOffset:parseInt(g.getAttribute("xoffset"),10)/a,yOffset:parseInt(g.getAttribute("yoffset"),10)/a,xAdvance:parseInt(g.getAttribute("xadvance"),10)/a,kerning:{},texture:new l.Texture(h[_].baseTexture,b),page:_}}for(var x=t.getElementsByTagName("kerning"),w=0;w<x.length;w++){var T=x[w],S=parseInt(T.getAttribute("first"),10)/a,E=parseInt(T.getAttribute("second"),10)/a,M=parseInt(T.getAttribute("amount"),10)/a;n.chars[E]&&(n.chars[E].kerning[S]=M)}return e.fonts[n.font]=n,n},a(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(l.Container);i.default=m,m.fonts={}},{"../core":154,"../core/math/ObservablePoint":157,"../core/settings":190,"../core/utils":214}],226:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=t("../core/sprites/canvas/CanvasTinter"),u=function(t){return t&&t.__esModule?t:{default:t}}(l),c=new h.Point,p=function(t){function e(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;n(this,e);var a=r(this,t.call(this,i));return a.tileTransform=new h.TransformStatic,a._width=s,a._height=o,a._canvasPattern=null,a.uvTransform=i.transform||new h.TextureMatrix(i),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return s(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,r=t.resolution,s=2===e.rotate,o=e.baseTexture,a=o.resolution,l=this.tilePosition.x/this.tileScale.x%e.orig.width*a,c=this.tilePosition.y/this.tileScale.y%e.orig.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var p=new h.CanvasRenderTarget(e.orig.width,e.orig.height,a);if(16777215!==this.tint)this.tintedTexture=u.default.getTintedTexture(this,this.tint),p.context.drawImage(this.tintedTexture,0,0);else{var f=e._frame.x*a,d=e._frame.y*a,m=e._frame.width*a,v=e._frame.height*a,g=(e.trim?e.trim.width:e.orig.width)*a,y=(e.trim?e.trim.height:e.orig.height)*a,_=(e.trim?e.trim.x:0)*a,b=(e.trim?e.trim.y:0)*a;s?(p.context.rotate(-Math.PI/2),p.context.translate(-y,0),p.context.drawImage(o.source,f,d,m,v,-b,_,y,g)):p.context.drawImage(o.source,f,d,m,v,_,b,g,y)}this.cachedTint=this.tint,this._canvasPattern=p.context.createPattern(p.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/a,this.tileScale.y/a);var x=this.anchor.x*-this._width*a,w=this.anchor.y*-this._height*a;this.uvRespectAnchor?(i.translate(l,c),i.fillRect(-l+x,-c+w,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(i.translate(l+x,c+w),i.fillRect(-l,-c,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._width,i=this._height,n=-e*this.anchor._x;if(c.x>=n&&c.x<n+e){var r=-i*this.anchor._y;if(c.y>=r&&c.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(h.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var r=h.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,i,n)},e.fromImage=function(t,i,n,r,s){return new e(h.Texture.fromImage(t,r,s),i,n)},o(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(h.Sprite);i.default=p},{"../core":154,"../core/sprites/canvas/CanvasTinter":193}],227:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),a=t("../core/textures/Texture"),h=n(a),l=t("../core/textures/BaseTexture"),u=n(l),c=t("../core/utils"),p=o.DisplayObject,f=new o.Matrix;p.prototype._cacheAsBitmap=!1,p.prototype._cacheData=!1;var d=function t(){r(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(p.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new d),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),p.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},p.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var n=this._filters[0].padding;i.pad(n)}i.ceil(o.settings.RESOLUTION);var r=t._activeRenderTarget,s=t.filterManager.filterStack,a=o.RenderTexture.create(i.width,i.height),l="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=l,u.default.addToCache(a.baseTexture,l),h.default.addToCache(a,l);var p=f;p.tx=-i.x,p.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,a,!0,p,!0),t.bindRenderTarget(r),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new o.Sprite(a);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-i.x/i.width,d.anchor.y=-i.y/i.height,d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},p.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},p.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context;e.ceil(o.settings.RESOLUTION);var r=o.RenderTexture.create(e.width,e.height),s="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=s,u.default.addToCache(r.baseTexture,s),h.default.addToCache(r,s);var a=f;this.transform.localTransform.copy(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,a,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new o.Sprite(r);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=i,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},p.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},p.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},p.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),h.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},p.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":154,"../core/textures/BaseTexture":201,"../core/textures/Texture":204,"../core/utils":214}],228:[function(t,e,i){"use strict";var n=t("../core"),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":154}],229:[function(t,e,i){"use strict";var n=t("../core"),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":154}],230:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.BitmapText=i.TilingSpriteRenderer=i.TilingSprite=i.AnimatedSprite=void 0;var r=t("./AnimatedSprite");Object.defineProperty(i,"AnimatedSprite",{enumerable:!0,get:function(){return n(r).default}});var s=t("./TilingSprite");Object.defineProperty(i,"TilingSprite",{enumerable:!0,get:function(){return n(s).default}});var o=t("./webgl/TilingSpriteRenderer");Object.defineProperty(i,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=t("./BitmapText");Object.defineProperty(i,"BitmapText",{enumerable:!0,get:function(){return n(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":224,"./BitmapText":225,"./TilingSprite":226,"./cacheAsBitmap":227,"./getChildByName":228,"./getGlobalPosition":229,"./webgl/TilingSpriteRenderer":231}],231:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("../../core"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),h=t("../../core/const"),l=(t("path"),new a.Matrix),u=function(t){function e(i){n(this,e);var s=r(this,t.call(this,i));return s.shader=null,s.simpleShader=null,s.quad=null,s}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new a.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=i.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.upload();var r=t._texture,s=r.baseTexture,o=t.tileTransform.localTransform,u=t.uvTransform,c=s.isPowerOfTwo&&r.frame.width===s.width&&r.frame.height===s.height;c&&(s._glTextures[e.CONTEXT_UID]?c=s.wrapMode!==h.WRAP_MODES.CLAMP:s.wrapMode===h.WRAP_MODES.CLAMP&&(s.wrapMode=h.WRAP_MODES.REPEAT));var p=c?this.simpleShader:this.shader;e.bindShader(p);var f=r.width,d=r.height,m=t._width,v=t._height;l.set(o.a*f/m,o.b*f/v,o.c*d/m,o.d*d/v,o.tx/m,o.ty/v),l.invert(),c?l.prepend(u.mapCoord):(p.uniforms.uMapCoord=u.mapCoord.toArray(!0),p.uniforms.uClampFrame=u.uClampFrame,p.uniforms.uClampOffset=u.uClampOffset),p.uniforms.uTransform=l.toArray(!0),p.uniforms.uColor=a.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,p.uniforms.uColor,s.premultipliedAlpha),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=e.bindTexture(r),e.setBlendMode(a.utils.correctBlendMode(t.blendMode,s.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(a.ObjectRenderer);i.default=u,a.WebGLRenderer.registerPlugin("tilingSprite",u)},{"../../core":154,"../../core/const":135,path:1}],232:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=(t("path"),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n(this,e);var s=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return s.alpha=i,s.glShaderKey="alpha",s}return s(e,t),o(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(h.Filter));i.default=l},{"../../core":154,path:1}],233:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../../core"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),u=t("./BlurXFilter"),c=n(u),p=t("./BlurYFilter"),f=n(p),d=function(t){function e(i,n,o,a){r(this,e);var h=s(this,t.call(this));return h.blurXFilter=new c.default(i,n,o,a),h.blurYFilter=new f.default(i,n,o,a),h.padding=0,h.resolution=o||l.settings.RESOLUTION,h.quality=n||4,h.blur=i||8,h}return o(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},a(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(l.Filter);i.default=d},{"../../core":154,"./BlurXFilter":234,"./BlurYFilter":235}],234:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../../core"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),u=t("./generateBlurVertSource"),c=n(u),p=t("./generateBlurFragSource"),f=n(p),d=t("./getMaxBlurKernelSize"),m=n(d),v=function(t){function e(i,n,o,a){r(this,e),a=a||5;var h=(0,c.default)(a,!0),u=(0,f.default)(a),p=s(this,t.call(this,h,u));return p.resolution=o||l.settings.RESOLUTION,p._quality=0,p.quality=n||4,p.strength=i||8,p.firstRun=!0,p}return o(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,s=(0,m.default)(r);this.vertexSrc=(0,c.default)(s,!0),this.fragmentSrc=(0,f.default)(s),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var o=t.getRenderTarget(!0),a=e,h=o,l=0;l<this.passes-1;l++){t.applyFilter(this,a,h,!0);var u=h;h=a,a=u}t.applyFilter(this,a,i,n),t.returnRenderTarget(o)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.Filter);i.default=v},{"../../core":154,"./generateBlurFragSource":236,"./generateBlurVertSource":237,"./getMaxBlurKernelSize":238}],235:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("../../core"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),u=t("./generateBlurVertSource"),c=n(u),p=t("./generateBlurFragSource"),f=n(p),d=t("./getMaxBlurKernelSize"),m=n(d),v=function(t){function e(i,n,o,a){r(this,e),a=a||5;var h=(0,c.default)(a,!1),u=(0,f.default)(a),p=s(this,t.call(this,h,u));return p.resolution=o||l.settings.RESOLUTION,p._quality=0,p.quality=n||4,p.strength=i||8,p.firstRun=!0,p}return o(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,s=(0,m.default)(r);this.vertexSrc=(0,c.default)(s,!1),this.fragmentSrc=(0,f.default)(s),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var o=t.getRenderTarget(!0),a=e,h=o,l=0;l<this.passes-1;l++){t.applyFilter(this,a,h,!0);var u=h;h=a,a=u}t.applyFilter(this,a,i,n),t.returnRenderTarget(o)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.Filter);i.default=v},{"../../core":154,"./generateBlurFragSource":236,"./generateBlurVertSource":237,"./getMaxBlurKernelSize":238}],236:[function(t,e,i){"use strict";function n(t){for(var e=r[t],i=e.length,n=s,o="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",h=void 0,l=0;l<t;l++){var u=a.replace("%index%",l);h=l,l>=i&&(h=t-l-1),u=u.replace("%value%",e[h]),o+=u,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t)}i.__esModule=!0,i.default=n;var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},s=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],237:[function(t,e,i){"use strict";function n(t,e){var i=Math.ceil(t/2),n=r,s="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var h=o.replace("%index%",a);h=h.replace("%sampleIndex%",a-(i-1)+".0"),s+=h,s+="\n"}return n=n.replace("%blur%",s),n=n.replace("%size%",t)}i.__esModule=!0,i.default=n;var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],238:[function(t,e,i){"use strict";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}i.__esModule=!0,i.default=n},{}],239:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=(t("path"),function(t){function e(){n(this,e);var i=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return s(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=Math.sqrt,s=1/3,o=r(s),a=i+(1-i)*s,h=s*(1-i)-o*n,l=s*(1-i)+o*n,u=s*(1-i)+o*n,c=i+s*(1-i),p=s*(1-i)-o*n,f=s*(1-i)-o*n,d=s*(1-i)+o*n,m=i+s*(1-i),v=[a,h,l,0,0,u,c,p,0,0,f,d,m,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;var s=(i>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=(n>>16&255)/255,l=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,o,a,t,0,h,l,u,e,0,s-h,o-l,a-u,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){t=t||.1;var i=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},o(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(h.Filter));i.default=l,l.prototype.grayscale=l.prototype.greyscale},{"../../core":154,path:1}],240:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=(t("path"),function(t){function e(i,s){n(this,e);var o=new h.Matrix;i.renderable=!1;var a=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=i,a.maskMatrix=o,a.uniforms.mapSampler=i._texture,a.uniforms.filterMatrix=o,a.uniforms.scale={x:1,y:1},null!==s&&void 0!==s||(s=20),a.scale=new h.Point(s,s),a}return s(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},o(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(h.Filter));i.default=l},{"../../core":154,path:1}],241:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("../../core"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),h=(t("path"),function(t){function e(){return n(this,e),r(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return s(e,t),e}(a.Filter));i.default=h},{"../../core":154,path:1}],242:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./fxaa/FXAAFilter");Object.defineProperty(i,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var s=t("./noise/NoiseFilter");Object.defineProperty(i,"NoiseFilter",{enumerable:!0,get:function(){return n(s).default}});var o=t("./displacement/DisplacementFilter");Object.defineProperty(i,"DisplacementFilter",{enumerable:!0,get:function(){return n(o).default}});var a=t("./blur/BlurFilter");Object.defineProperty(i,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var h=t("./blur/BlurXFilter");Object.defineProperty(i,"BlurXFilter",{enumerable:!0,get:function(){return n(h).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(i,"BlurYFilter",{enumerable:!0,get:function(){return n(l).default}});var u=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(i,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(u).default}});var c=t("./alpha/AlphaFilter");Object.defineProperty(i,"AlphaFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./alpha/AlphaFilter":232,"./blur/BlurFilter":233,"./blur/BlurXFilter":234,"./blur/BlurYFilter":235,"./colormatrix/ColorMatrixFilter":239,"./displacement/DisplacementFilter":240,"./fxaa/FXAAFilter":241,"./noise/NoiseFilter":243}],243:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=(t("path"),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();n(this,e);var o=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return o.noise=i,o.seed=s,o}return s(e,t),o(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(h.Filter));i.default=l},{"../../core":154,path:1}],244:[function(t,e,i){(function(e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}i.__esModule=!0,i.loader=i.prepare=i.particles=i.mesh=i.loaders=i.interaction=i.filters=i.extras=i.extract=i.accessibility=void 0;var r=t("./polyfill");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})});var s=t("./core");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return s[t]}})});var o=t("./deprecation"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=t("./accessibility"),l=n(h),u=t("./extract"),c=n(u),p=t("./extras"),f=n(p),d=t("./filters"),m=n(d),v=t("./interaction"),g=n(v),y=t("./loaders"),_=n(y),b=t("./mesh"),x=n(b),w=t("./particles"),T=n(w),S=t("./prepare"),E=n(S);s.utils.mixins.performMixins();var M=_.shared||null;i.accessibility=l,i.extract=c,i.extras=f,i.filters=m,i.interaction=g,i.loaders=_,i.mesh=x,i.particles=T,i.prepare=E,i.loader=M,"function"==typeof a.default&&(0,a.default)(i),e.PIXI=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":131,"./core":154,"./deprecation":220,"./extract":222,"./extras":230,"./filters":242,"./interaction":249,"./loaders":252,"./mesh":261,"./particles":264,"./polyfill":271,"./prepare":275}],245:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),a=function(){function t(){n(this,t),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();i.default=a},{"../core":154}],246:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();i.default=r},{}],247:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=t("../core"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),u=t("./InteractionData"),c=n(u),p=t("./InteractionEvent"),f=n(p),d=t("./InteractionTrackingData"),m=n(d),v=t("eventemitter3"),g=n(v),y=t("./interactiveTarget"),_=n(y);l.utils.mixins.delayMixin(l.DisplayObject.prototype,_.default);var b=1,x={target:null,data:{global:null}},w=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this));return n=n||{},o.renderer=i,o.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,o.interactionFrequency=n.interactionFrequency||10,o.mouse=new c.default,o.mouse.identifier=b,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[b]=o.mouse,o.interactionDataPool=[],o.eventData=new f.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new l.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return o(e,t),e.prototype.hitTest=function(t,e){return x.target=null,x.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(x,e,null,!0),x.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),
this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(l.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":a(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=t.data.global;r=e.interactive||r;var o=!1,a=r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,h=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint(s)||(n=!1,h=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var c=l[u],p=this.processInteractive(t,c,i,n,a);if(p){if(!c.parent)continue;a=!1,p&&(t.target&&(n=!1),o=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new m.default(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a=n[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,l),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+s:"mouseup"+s,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,l),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,s=e.trackedPointers[r],o="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(a){var l=2===n.button,u=m.default.FLAGS,c=l?u.RIGHT_DOWN:u.LEFT_DOWN,p=void 0!==s&&s.flags&c;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),s&&(l?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),i=e[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new m.default(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(e,"pointerover",t),s&&this.dispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),i=e[0],n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===b||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:(i=this.interactionDataPool.pop()||new c.default,i.identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=b),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(g.default);i.default=w,l.WebGLRenderer.registerPlugin("interaction",w),l.CanvasRenderer.registerPlugin("interaction",w)},{"../core":154,"./InteractionData":245,"./InteractionEvent":246,"./InteractionTrackingData":248,"./interactiveTarget":250,eventemitter3:17}],248:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();i.default=s,s.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],249:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./InteractionData");Object.defineProperty(i,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var s=t("./InteractionManager");Object.defineProperty(i,"InteractionManager",{enumerable:!0,get:function(){return n(s).default}});var o=t("./interactiveTarget");Object.defineProperty(i,"interactiveTarget",{enumerable:!0,get:function(){return n(o).default}});var a=t("./InteractionTrackingData");Object.defineProperty(i,"InteractionTrackingData",{enumerable:!0,get:function(){return n(a).default}});var h=t("./InteractionEvent");Object.defineProperty(i,"InteractionEvent",{enumerable:!0,get:function(){return n(h).default}})},{"./InteractionData":245,"./InteractionEvent":246,"./InteractionManager":247,"./InteractionTrackingData":248,"./interactiveTarget":250}],250:[function(t,e,i){"use strict";i.__esModule=!0,i.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],251:[function(t,e,i){"use strict";function n(t,e){t.bitmapFont=a.BitmapText.registerFont(t.data,e)}i.__esModule=!0,i.parse=n,i.default=function(){return function(t,e){if(!t.data||t.type!==o.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var i=t.isDataUrl?"":s.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var r=t.data.getElementsByTagName("page"),a={},h=function(i){a[i.metadata.pageFile]=i.texture,Object.keys(a).length===r.length&&(n(t,a),e())},l=0;l<r.length;++l){var u=r[l].getAttribute("file"),c=i+u,p=!1;for(var f in this.resources){var d=this.resources[f];if(d.url===c){d.metadata.pageFile=u,d.texture?h(d):d.onAfterMiddleware.add(h),p=!0;break}}if(!p){var m={crossOrigin:t.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,m,h)}}}};var r=t("path"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=t("resource-loader"),a=t("../extras")},{"../extras":230,path:1,"resource-loader":284}],252:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.shared=i.Resource=i.textureParser=i.getResourcePath=i.spritesheetParser=i.parseBitmapFontData=i.bitmapFontParser=i.Loader=void 0;var r=t("./bitmapFontParser");Object.defineProperty(i,"bitmapFontParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(i,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var s=t("./spritesheetParser");Object.defineProperty(i,"spritesheetParser",{enumerable:!0,get:function(){return n(s).default}}),Object.defineProperty(i,"getResourcePath",{enumerable:!0,get:function(){return s.getResourcePath}});var o=t("./textureParser");Object.defineProperty(i,"textureParser",{enumerable:!0,get:function(){return n(o).default}});var a=t("resource-loader");Object.defineProperty(i,"Resource",{enumerable:!0,get:function(){return a.Resource}});var h=t("../core/Application"),l=n(h),u=t("./loader"),c=n(u);i.Loader=c.default;var p=new c.default;p.destroy=function(){},i.shared=p;var f=l.default.prototype;f._loader=null,Object.defineProperty(f,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?p:new c.default}return this._loader}}),f._parentDestroy=f.destroy,f.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},{"../core/Application":132,"./bitmapFontParser":251,"./loader":253,"./spritesheetParser":254,"./textureParser":255,"resource-loader":284}],253:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("resource-loader"),h=n(a),l=t("resource-loader/lib/middlewares/parsing/blob"),u=t("eventemitter3"),c=n(u),p=t("./textureParser"),f=n(p),d=t("./spritesheetParser"),m=n(d),v=t("./bitmapFontParser"),g=n(v),y=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this,i,n));c.default.call(o);for(var a=0;a<e._pixiMiddleware.length;++a)o.use(e._pixiMiddleware[a]());return o.onStart.add(function(t){return o.emit("start",t)}),o.onProgress.add(function(t,e){return o.emit("progress",t,e)}),o.onError.add(function(t,e,i){return o.emit("error",t,e,i)}),o.onLoad.add(function(t,e){return o.emit("load",t,e)}),o.onComplete.add(function(t,e){return o.emit("complete",t,e)}),o}return o(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(h.default);i.default=y;for(var _ in c.default.prototype)y.prototype[_]=c.default.prototype[_];y._pixiMiddleware=[l.blobMiddlewareFactory,f.default,m.default,g.default];var b=h.default.Resource;b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":251,"./spritesheetParser":254,"./textureParser":255,eventemitter3:17,"resource-loader":284,"resource-loader/lib/middlewares/parsing/blob":285}],254:[function(t,e,i){"use strict";function n(t,e){return t.isDataUrl?t.data.meta.image:o.default.resolve(t.url.replace(e,""),t.data.meta.image)}i.__esModule=!0,i.default=function(){return function(t,e){var i=t.name+"_image";if(!t.data||t.type!==r.Resource.TYPE.JSON||!t.data.frames||this.resources[i])return void e();var s={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=n(t,this.baseUrl);this.add(i,o,s,function(i){if(i.error)return void e(i.error);var n=new a.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}},i.getResourcePath=n;var r=t("resource-loader"),s=t("url"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=t("../core")},{"../core":154,"resource-loader":284,url:7}],255:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var n=t("resource-loader"),r=t("../core/textures/Texture"),s=function(t){return t&&t.__esModule?t:{default:t}}(r)},{"../core/textures/Texture":204,"resource-loader":284}],256:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=t("../core/textures/Texture"),u=function(t){return t&&t.__esModule?t:{default:t}}(l),c=new h.Point,p=new h.Polygon,f=function(t){function e(i,s,o,a,l){n(this,e);var c=r(this,t.call(this));return c._texture=i||u.default.EMPTY,c.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=s||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=a||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.vertexDirty=0,c.autoUpdate=!0,c.blendMode=h.BLEND_MODES.NORMAL,c.canvasPadding=h.settings.MESH_CANVAS_PADDING,c.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new h.TextureMatrix(c._texture),c.uploadUvTransform=!1,c.pluginName="mesh",c}return s(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c);for(var i=this.vertices,n=p.points,r=this.indices,s=this.indices.length,o=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<s;a+=o){var h=2*r[a],l=2*r[a+1],u=2*r[a+2];if(n[0]=i[h],n[1]=i[h+1],n[2]=i[l],n[3]=i[l+1],n[4]=i[u],n[5]=i[u+1],p.contains(c.x,c.y))return!0}return!1},e.prototype.destroy=function(e){for(var i in this._glDatas){var n=this._glDatas[i];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},o(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return h.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=h.utils.hex2rgb(t,this.tintRgb)}}]),e}(h.Container);i.default=f,f.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":154,"../core/textures/Texture":204}],257:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=t("./Plane"),l=n(h),u=t("../core/sprites/canvas/CanvasTinter"),c=n(u),p=10,f=function(t){function e(i,n,o,a,h){r(this,e);var l=s(this,t.call(this,i,4,4));return l._origWidth=i.orig.width,l._origHeight=i.orig.height,l._width=l._origWidth,l._height=l._origHeight,l._leftWidth=void 0!==n?n:p,l._rightWidth=void 0!==a?a:p,l._topHeight=void 0!==o?o:p,l._bottomHeight=void 0!==h?h:p,l._cachedTint=16777215,l._tintedTexture=null,l._canvasUvs=null,l.refresh(!0),l}return o(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,n=t.resolution,r=16777215!==this.tint,s=this._texture;r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=c.default.getTintedTexture(this,this.tint));var o=r?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var a=this.vertices,h=this._canvasUvs,l=r?0:s.frame.x,u=r?0:s.frame.y,p=l+s.frame.width,f=u+s.frame.height;h[0]=l,h[1]=l+this._leftWidth,h[2]=p-this._rightWidth,h[3]=p,h[4]=u,h[5]=u+this._topHeight,h[6]=f-this._bottomHeight,h[7]=f;for(var d=0;d<8;d++)h[d]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);for(var m=0;m<3;m++)for(var v=0;v<3;v++){var g=2*v+8*m,y=Math.max(1,h[v+1]-h[v]),_=Math.max(1,h[m+5]-h[m+4]),b=Math.max(1,a[g+10]-a[g]),x=Math.max(1,a[g+11]-a[g+1]);e.drawImage(o,h[v],h[m+4],y,_,a[g],a[g+1],b,x)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},a(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(l.default);i.default=f},{"../core/sprites/canvas/CanvasTinter":193,"./Plane":258}],258:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("./Mesh"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i,s,o){n(this,e);var h=r(this,t.call(this,i));return h._ready=!0,h.verticesX=s||10,h.verticesY=o||10,h.drawMode=a.default.DRAW_MODES.TRIANGLES,h.refresh(),h}return s(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],n=[],r=[],s=[],o=this.verticesX-1,a=this.verticesY-1,h=t.width/o,l=t.height/a,u=0;u<e;u++){var c=u%this.verticesX,p=u/this.verticesX|0;i.push(c*h,p*l),r.push(c/o,p/a)}for(var f=o*a,d=0;d<f;d++){var m=d%o,v=d/o|0,g=v*this.verticesX+m,y=v*this.verticesX+m+1,_=(v+1)*this.verticesX+m,b=(v+1)*this.verticesX+m+1;s.push(g,y,_),s.push(y,b,_)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array(n),this.indices=new Uint16Array(s),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){a.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(a.default);i.default=h},{"./Mesh":256}],259:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("./Mesh"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i,s){n(this,e)
;var o=r(this,t.call(this,i));return o.points=s,o.vertices=new Float32Array(4*s.length),o.uvs=new Float32Array(4*s.length),o.colors=new Float32Array(2*s.length),o.indices=new Uint16Array(2*s.length),o.autoUpdate=!0,o.refresh(),o}return s(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r=t.length,s=1;s<r;s++){var o=4*s,a=s/(r-1);e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1,o=2*s,n[o]=1,n[o+1]=1,o=2*s,i[o]=o,i[o+1]=o+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,n=0,r=0,s=this.vertices,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;i=a<t.length-1?t[a+1]:h,r=-(i.x-e.x),n=i.y-e.y;var u=10*(1-a/(o-1));u>1&&(u=1);var c=Math.sqrt(n*n+r*r),p=this._texture.height/2;n/=c,r/=c,n*=p,r*=p,s[l]=h.x+n,s[l+1]=h.y+r,s[l+2]=h.x-n,s[l+3]=h.y-r,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(a.default);i.default=h},{"./Mesh":256}],260:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=t("../../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=t("../Mesh"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],s=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(t,r,s,o)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,s=t.uvs,o=t.vertices,a=t._texture;if(a.valid){var h=a.baseTexture,l=h.source,u=h.width,c=h.height,p=void 0,f=void 0,d=void 0,m=void 0,v=void 0,g=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;p=(s[e]*y.a+s[e+1]*y.c+y.tx)*h.width,f=(s[i]*y.a+s[i+1]*y.c+y.tx)*h.width,d=(s[n]*y.a+s[n+1]*y.c+y.tx)*h.width,m=(s[e]*y.b+s[e+1]*y.d+y.ty)*h.height,v=(s[i]*y.b+s[i+1]*y.d+y.ty)*h.height,g=(s[n]*y.b+s[n+1]*y.d+y.ty)*h.height}else p=s[e]*h.width,f=s[i]*h.width,d=s[n]*h.width,m=s[e+1]*h.height,v=s[i+1]*h.height,g=s[n+1]*h.height;var _=o[e],b=o[i],x=o[n],w=o[e+1],T=o[i+1],S=o[n+1],E=t.canvasPadding/this.renderer.resolution;if(E>0){var M=E/Math.abs(t.worldTransform.a),P=E/Math.abs(t.worldTransform.d),A=(_+b+x)/3,C=(w+T+S)/3,O=_-A,L=w-C,k=Math.sqrt(O*O+L*L);_=A+O/k*(k+M),w=C+L/k*(k+P),O=b-A,L=T-C,k=Math.sqrt(O*O+L*L),b=A+O/k*(k+M),T=C+L/k*(k+P),O=x-A,L=S-C,k=Math.sqrt(O*O+L*L),x=A+O/k*(k+M),S=C+L/k*(k+P)}r.save(),r.beginPath(),r.moveTo(_,w),r.lineTo(b,T),r.lineTo(x,S),r.closePath(),r.clip();var R=p*v+m*d+f*g-v*d-m*f-p*g,I=_*v+m*x+b*g-v*x-m*b-_*g,D=p*b+_*d+f*x-b*d-_*f-p*x,F=p*v*x+m*b*d+_*f*g-_*v*d-m*f*x-p*b*g,N=w*v+m*S+T*g-v*S-m*T-w*g,B=p*T+w*d+f*S-T*d-w*f-p*S,j=p*v*S+m*T*d+w*f*g-w*v*d-m*f*S-p*T*g;r.transform(I/R,N/R,D/R,B/R,F/R,j/R),r.drawImage(l,0,0,u*h.resolution,c*h.resolution,0,0,u,c),r.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var s=2*r,o=i[s],a=i[s+1],h=i[s+2],l=i[s+3],u=i[s+4],c=i[s+5];e.moveTo(o,a),e.lineTo(h,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=h,s.CanvasRenderer.registerPlugin("mesh",h)},{"../../core":154,"../Mesh":256}],261:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./Mesh");Object.defineProperty(i,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var s=t("./webgl/MeshRenderer");Object.defineProperty(i,"MeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var o=t("./canvas/CanvasMeshRenderer");Object.defineProperty(i,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=t("./Plane");Object.defineProperty(i,"Plane",{enumerable:!0,get:function(){return n(a).default}});var h=t("./NineSlicePlane");Object.defineProperty(i,"NineSlicePlane",{enumerable:!0,get:function(){return n(h).default}});var l=t("./Rope");Object.defineProperty(i,"Rope",{enumerable:!0,get:function(){return n(l).default}})},{"./Mesh":256,"./NineSlicePlane":257,"./Plane":258,"./Rope":259,"./canvas/CanvasMeshRenderer":260,"./webgl/MeshRenderer":262}],262:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=t("pixi-gl-core"),u=n(l),c=t("../Mesh"),p=n(c),f=(t("path"),h.Matrix.IDENTITY),d=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.shader=null,n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new h.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var r=t._glDatas[e.CONTEXT_UID];r||(e.bindVao(null),r={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty},r.vao=new u.default.VertexArrayObject(i).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=r),e.bindVao(r.vao),t.dirty!==r.dirty&&(r.dirty=t.dirty,r.uvBuffer.upload(t.uvs)),t.indexDirty!==r.indexDirty&&(r.indexDirty=t.indexDirty,r.indexBuffer.upload(t.indices)),t.vertexDirty!==r.vertexDirty&&(r.vertexDirty=t.vertexDirty,r.vertexBuffer.upload(t.vertices)),e.bindShader(r.shader),r.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(h.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),r.shader.uniforms.uTransform&&(t.uploadUvTransform?r.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):r.shader.uniforms.uTransform=f.toArray(!0)),r.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),r.shader.uniforms.uColor=h.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,r.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var s=t.drawMode===p.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;r.vao.draw(s,t.indices.length,0)}},e}(h.ObjectRenderer);i.default=d,h.WebGLRenderer.registerPlugin("mesh",d)},{"../../core":154,"../Mesh":256,path:1,"pixi-gl-core":118}],263:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=t("../core/utils"),u=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,s=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,e);var l=r(this,t.call(this));return o>16384&&(o=16384),o>i&&(o=i),l._properties=[!1,!0,!1,!1,!1],l._maxSize=i,l._batchSize=o,l._glBuffers={},l._bufferUpdateIDs=[],l._updateID=0,l.interactiveChildren=!1,l.blendMode=h.BLEND_MODES.NORMAL,l.autoResize=a,l.roundPixels=!0,l.baseTexture=null,l.setProperties(s),l._tint=0,l.tintRgb=new Float32Array(4),l.tint=16777215,l}return s(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,s=0,o=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var u=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=l.anchor.x*(-u.width*l.scale.x)+l.position.x+.5,s=l.anchor.y*(-u.height*l.scale.y)+l.position.y+.5,o=u.width*l.scale.x,a=u.height*l.scale.y;else{n||(n=!0),l.displayObjectUpdateTransform();var c=l.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),r=l.anchor.x*-u.width+.5,s=l.anchor.y*-u.height+.5,o=u.width,a=u.height}var p=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.source,u.x*p,u.y*p,u.width*p,u.height*p,r*t.resolution,s*t.resolution,o*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},o(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,l.hex2rgb)(t,this.tintRgb)}}]),e}(h.Container);i.default=u},{"../core":154,"../core/utils":214}],264:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./ParticleContainer");Object.defineProperty(i,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var s=t("./webgl/ParticleRenderer");Object.defineProperty(i,"ParticleRenderer",{enumerable:!0,get:function(){return n(s).default}})},{"./ParticleContainer":263,"./webgl/ParticleRenderer":266}],265:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=t("pixi-gl-core"),o=n(s),a=t("../../core/utils/createIndicesForQuads"),h=n(a),l=function(){function t(e,i,n,s){r(this,t),this.gl=e,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var a=i[o];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,unsignedByte:a.unsignedByte,offset:a.offset},n[o]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,h.default)(this.size),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=o.default.GLBuffer.createVertexBuffer(t,r,t.STREAM_DRAW);var s=0;this.staticStride=0;for(var a=0;a<this.staticProperties.length;++a){var l=this.staticProperties[a];l.offset=s,s+=l.size,this.staticStride+=l.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=o.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var p=this.dynamicProperties[c];p.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*p.offset):this.vao.addAttribute(this.dynamicBuffer,p.attribute,t.FLOAT,!1,4*this.dynamicStride,4*p.offset)}for(var f=0;f<this.staticProperties.length;++f){var d=this.staticProperties[f];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();i.default=l},{"../../core/utils/createIndicesForQuads":212,"pixi-gl-core":118}],266:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=t("./ParticleShader"),u=n(l),c=t("./ParticleBuffer"),p=n(c),f=t("../../core/utils"),d=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new h.Matrix,n.CONTEXT_UID=0,n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new u.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,s=e.length;if(0!==s){s>i&&(s=i);var o=t._glBuffers[r.CONTEXT_UID];o||(o=t._glBuffers[r.CONTEXT_UID]=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.renderer.setBlendMode(h.utils.correctBlendMode(t.blendMode,a.premultipliedAlpha));var l=r.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=h.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.premultipliedAlpha),this.shader.uniforms.uSampler=r.bindTexture(a);for(var c=!1,p=0,f=0;p<s;p+=n,f+=1){var d=s-p;if(d>n&&(d=n),f>=o.length){if(!t.autoResize)break;o.push(this._generateOneMoreBuffer(t))}var m=o[f];m.uploadDynamic(e,p,d);var v=t._bufferUpdateIDs[f]||0;c=c||m._updateID<v,c&&(m._updateID=t._updateID,m.uploadStatic(e,p,d)),r.bindVao(m.vao),m.vao.draw(l.TRIANGLES,6*d)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,s=t._properties,o=0;o<n;o+=r)i.push(new p.default(e,this.properties,s,r));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,n=t._properties;return new p.default(e,this.properties,n,i)},e.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o=0,a=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],p=c._texture,f=c.scale.x,d=c.scale.y,m=p.trim,v=p.orig;m?(a=m.x-c.anchor.x*v.width,o=a+m.width,l=m.y-c.anchor.y*v.height,h=l+m.height):(o=v.width*(1-c.anchor.x),a=v.width*-c.anchor.x,h=v.height*(1-c.anchor.y),l=v.height*-c.anchor.y),n[s]=a*f,n[s+1]=l*d,n[s+r]=o*f,n[s+r+1]=l*d,n[s+2*r]=o*f,n[s+2*r+1]=h*d,n[s+3*r]=a*f,n[s+3*r+1]=h*d,s+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o],h=a._texture.baseTexture.premultipliedAlpha,l=a.alpha,u=l<1&&h?(0,f.premultiplyTint)(a._tintRGB,l):a._tintRGB+(255*l<<24);n[s]=u,n[s+r]=u,n[s+2*r]=u,n[s+3*r]=u,s+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(h.ObjectRenderer);i.default=d,h.WebGLRenderer.registerPlugin("particle",d)},{"../../core":154,"../../core/utils":214,"./ParticleBuffer":265,"./ParticleShader":267}],267:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("../../core/Shader"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return s(e,t),e}(a.default);i.default=h},{"../../core/Shader":133}],268:[function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},{}],269:[function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],270:[function(t,e,i){"use strict";var n=t("object-assign"),r=function(t){return t&&t.__esModule?t:{default:t}}(n);Object.assign||(Object.assign=r.default)},{"object-assign":103}],271:[function(t,e,i){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":268,"./Number.isInteger":269,"./Object.assign":270,"./requestAnimationFrame":272}],272:[function(t,e,i){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var s=n[r];t.requestAnimationFrame=t[s+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s+"CancelAnimationFrame"]||t[s+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],273:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof p.Texture){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function s(t,e){return t instanceof p.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function o(t,e){if(t._texture&&t._texture instanceof p.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function a(t,e){return e instanceof p.Text&&(e.updateText(!0),!0)}function h(t,e){if(e instanceof p.TextStyle){var i=e.toFontString();return p.TextMetrics.measureFont(i),!0}return!1}function l(t,e){if(t instanceof p.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function u(t,e){return t instanceof p.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}i.__esModule=!0;var c=t("../core"),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),f=t("./limiters/CountLimiter"),d=function(t){return t&&t.__esModule?t:{default:t}}(f),m=p.ticker.shared;p.settings.UPLOADS_PER_FRAME=4;var v=function(){function t(e){var i=this;n(this,t),this.limiter=new d.default(p.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(l),this.registerFindHook(u),this.registerFindHook(r),this.registerFindHook(s),this.registerFindHook(o),this.registerUploadHook(a),this.registerUploadHook(h)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,m.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)m.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var s=0,o=r.length;s<o;s++)r[s]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof p.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&m.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();i.default=v},{"../core":154,"./limiters/CountLimiter":276}],274:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(e instanceof h.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),r=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,r,0,0,t.canvas.width,t.canvas.height),!0}return!1}i.__esModule=!0;var a=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),l=t("../BasePrepare"),u=function(t){return t&&t.__esModule?t:{default:t}}(l),c=16,p=function(t){function e(i){n(this,e);var s=r(this,t.call(this,i));return s.uploadHookHelper=s,s.canvas=document.createElement("canvas"),s.canvas.width=c,s.canvas.height=c,s.ctx=s.canvas.getContext("2d"),s.registerUploadHook(o),s}return s(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(u.default);i.default=p,h.CanvasRenderer.registerPlugin("prepare",p)},{"../../core":154,"../BasePrepare":273}],275:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./webgl/WebGLPrepare");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return n(r).default}});var s=t("./canvas/CanvasPrepare");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return n(s).default}});var o=t("./BasePrepare");Object.defineProperty(i,"BasePrepare",{enumerable:!0,get:function(){return n(o).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(i,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var h=t("./limiters/TimeLimiter");Object.defineProperty(i,"TimeLimiter",{enumerable:!0,get:function(){return n(h).default}})},{"./BasePrepare":273,"./canvas/CanvasPrepare":274,"./limiters/CountLimiter":276,"./limiters/TimeLimiter":277,"./webgl/WebGLPrepare":278}],276:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();i.default=r},{}],277:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();i.default=r},{}],278:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){return e instanceof u.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function a(t,e){return e instanceof u.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof u.Graphics&&(e.push(t),!0)}i.__esModule=!0;var l=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),c=t("../BasePrepare"),p=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(i){n(this,e);var s=r(this,t.call(this,i));return s.uploadHookHelper=s.renderer,s.registerFindHook(h),s.registerUploadHook(o),s.registerUploadHook(a),s}return s(e,t),e}(p.default);i.default=f,u.WebGLRenderer.registerPlugin("prepare",f)},{"../../core":154,"../BasePrepare":273}],279:[function(t,e,i){"use strict";e.exports=function(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){i=e+i>r?r-e:i;var s=r-i;for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}}},{}],280:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0,i.Loader=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("mini-signals"),h=n(a),l=t("parse-uri"),u=n(l),c=t("./async"),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),f=t("./Resource"),d=/(#[\w-]+)?$/,m=i.Loader=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=p.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new h.default,this.onError=new h.default,this.onLoad=new h.default,this.onStart=new h.default,this.onComplete=new h.default;for(var s=0;s<t._defaultBeforeMiddleware.length;++s)this.pre(t._defaultBeforeMiddleware[s]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"===(void 0===t?"undefined":s(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new f.Resource(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,a=[],h=0;h<o.children.length;++h)o.children[h].isComplete||a.push(o.children[h]);var l=o.progressChunk*(a.length+1),u=l/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var c=0;c<a.length;++c)a[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,i=100/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,u.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=d.exec(i)[0];i=i.substr(0,i.length-n.length),-1!==i.indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,p.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),p.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},o(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();m._defaultBeforeMiddleware=[],m._defaultAfterMiddleware=[],m.pre=function(t){return m._defaultBeforeMiddleware.push(t),m},m.use=function(t){return m._defaultAfterMiddleware.push(t),m}},{"./Resource":281,"./async":282,"mini-signals":102,"parse-uri":111}],281:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(){}function o(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function a(t){return t.toString().replace("object ","")}i.__esModule=!0,i.Resource=void 0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("parse-uri"),u=n(l),c=t("mini-signals"),p=n(c),f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),d=null,m=i.Resource=function(){function t(e,i,n){if(r(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=s,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new p.default,this.onProgress=new p.default,this.onComplete=new p.default,this.onAfterMiddleware=new p.default}return t.setExtensionLoadType=function(e,i){o(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){o(t._xhrTypeMap,e,i)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(a(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(a(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2!=(n/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,d||(d=document.createElement("a")),d.href=t,t=(0,u.default)(d.href,{strictMode:!0});var i=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(n>-1?n:t.length,r>-1?r:t.length);t=t.substring(0,s),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},h(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();m.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},m.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},m.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},m.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},m._loadTypeMap={gif:m.LOAD_TYPE.IMAGE,png:m.LOAD_TYPE.IMAGE,bmp:m.LOAD_TYPE.IMAGE,jpg:m.LOAD_TYPE.IMAGE,jpeg:m.LOAD_TYPE.IMAGE,tif:m.LOAD_TYPE.IMAGE,tiff:m.LOAD_TYPE.IMAGE,webp:m.LOAD_TYPE.IMAGE,tga:m.LOAD_TYPE.IMAGE,svg:m.LOAD_TYPE.IMAGE,"svg+xml":m.LOAD_TYPE.IMAGE,mp3:m.LOAD_TYPE.AUDIO,ogg:m.LOAD_TYPE.AUDIO,wav:m.LOAD_TYPE.AUDIO,mp4:m.LOAD_TYPE.VIDEO,webm:m.LOAD_TYPE.VIDEO},m._xhrTypeMap={xhtml:m.XHR_RESPONSE_TYPE.DOCUMENT,html:m.XHR_RESPONSE_TYPE.DOCUMENT,htm:m.XHR_RESPONSE_TYPE.DOCUMENT,xml:m.XHR_RESPONSE_TYPE.DOCUMENT,tmx:m.XHR_RESPONSE_TYPE.DOCUMENT,svg:m.XHR_RESPONSE_TYPE.DOCUMENT,tsx:m.XHR_RESPONSE_TYPE.DOCUMENT,gif:m.XHR_RESPONSE_TYPE.BLOB,png:m.XHR_RESPONSE_TYPE.BLOB,bmp:m.XHR_RESPONSE_TYPE.BLOB,jpg:m.XHR_RESPONSE_TYPE.BLOB,jpeg:m.XHR_RESPONSE_TYPE.BLOB,tif:m.XHR_RESPONSE_TYPE.BLOB,tiff:m.XHR_RESPONSE_TYPE.BLOB,webp:m.XHR_RESPONSE_TYPE.BLOB,tga:m.XHR_RESPONSE_TYPE.BLOB,json:m.XHR_RESPONSE_TYPE.JSON,text:m.XHR_RESPONSE_TYPE.TEXT,txt:m.XHR_RESPONSE_TYPE.TEXT,ttf:m.XHR_RESPONSE_TYPE.BUFFER,otf:m.XHR_RESPONSE_TYPE.BUFFER},m.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==e&&(e.exports.default=m)},{"mini-signals":102,"parse-uri":111}],282:[function(t,e,i){"use strict";function n(){}function r(t,e,i,n){var r=0,s=t.length;!function o(a){if(a||r===s)return void(i&&i(a));n?setTimeout(function(){e(t[r++],o)},1):e(t[r++],o)}()}function s(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){return a.drain()},1);var r={data:t,callback:"function"==typeof i?i:n};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){return a.process()},1)}function r(t){return function(){o-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),o<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){o=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!a.paused&&o<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),o+=1,o===a.concurrency&&a.saturated(),t(e.data,s(r(e)))}},length:function(){return a._tasks.length},running:function(){return o},idle:function(){return a._tasks.length+o===0},pause:function(){!0!==a.paused&&(a.paused=!0)},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}i.__esModule=!0,i.eachSeries=r,i.queue=o},{}],283:[function(t,e,i){"use strict";function n(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],s=[0,0,0,0],o=0;o<n.length;++o)i<t.length?n[o]=255&t.charCodeAt(i++):n[o]=0;s[0]=n[0]>>2,s[1]=(3&n[0])<<4|n[1]>>4,s[2]=(15&n[1])<<2|n[2]>>6,s[3]=63&n[2];switch(i-(t.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(var a=0;a<s.length;++a)e+=r.charAt(s[a])}return e}i.__esModule=!0,i.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0!==e&&(e.exports.default=n)},{}],284:[function(t,e,i){"use strict";var n=t("./Loader").Loader,r=t("./Resource").Resource,s=t("./async"),o=t("./b64");n.Resource=r,n.async=s,n.encodeBinary=o,n.base64=o,e.exports=n,e.exports.Loader=n,e.exports.default=n},{"./Loader":280,"./Resource":281,"./async":282,"./b64":283}],285:[function(t,e,i){"use strict";function n(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===r.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+(0,s.encodeBinary)(t.xhr.responseText),t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}i.__esModule=!0,i.blobMiddlewareFactory=n;var r=t("../../Resource"),s=t("../../b64"),o=window.URL||window.webkitURL},{"../../Resource":281,"../../b64":283}],286:[function(t,e,i){!function(t,n){"object"==typeof i&&void 0!==e?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(t.THREE=t.THREE||{})}(this,function(t){"use strict";function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,s,o,a,h,l,u,c,p){Object.defineProperty(this,"id",{value:r()}),this.uuid=To.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:n.DEFAULT_MAPPING,this.wrapS=void 0!==s?s:Ts,this.wrapT=void 0!==o?o:Ts,this.magFilter=void 0!==a?a:Cs,this.minFilter=void 0!==h?h:Ls,this.anisotropy=void 0!==c?c:1,this.format=void 0!==l?l:qs,this.type=void 0!==u?u:Rs,this.offset=new i(0,0),this.repeat=new i(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:fo,this.version=0,this.onUpdate=null}function r(){return So++}function s(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function o(t,e,i){this.uuid=To.generateUUID(),this.width=t,this.height=e,this.scissor=new s(0,0,t,e),this.scissorTest=!1,this.viewport=new s(0,0,t,e),i=i||{},void 0===i.minFilter&&(i.minFilter=Cs),this.texture=new n(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function a(t,e,i){o.call(this,t,e,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function h(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function l(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function u(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length}function c(t,e,i,r,s,o,a,h,l,u){t=void 0!==t?t:[],e=void 0!==e?e:ds,n.call(this,t,e,i,r,s,o,a,h,l,u),this.flipY=!1}function p(){this.seq=[],this.map={}}function f(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,s=Po[r];if(void 0===s&&(s=new Float32Array(r),Po[r]=s),0!==e){n.toArray(s,0);for(var o=1,a=0;o!==e;++o)a+=i,t[o].toArray(s,a)}return s}function d(t,e){var i=Ao[e];void 0===i&&(i=new Int32Array(e),Ao[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function m(t,e){t.uniform1f(this.addr,e)}function v(t,e){t.uniform1i(this.addr,e)}function g(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function y(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function _(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function b(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function w(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function T(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||Eo,n)}function S(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||Mo,n)}function E(t,e){t.uniform2iv(this.addr,e)}function M(t,e){t.uniform3iv(this.addr,e)}function P(t,e){t.uniform4iv(this.addr,e)}function A(t){switch(t){case 5126:return m;case 35664:return g;case 35665:return y;case 35666:return _;case 35674:return b;case 35675:return x;case 35676:return w;case 35678:return T;case 35680:return S;case 5124:case 35670:return v;case 35667:case 35671:return E;case 35668:case 35672:return M;case 35669:case 35673:return P}}function C(t,e){t.uniform1fv(this.addr,e)}function O(t,e){t.uniform1iv(this.addr,e)}function L(t,e){t.uniform2fv(this.addr,f(e,this.size,2))}function k(t,e){t.uniform3fv(this.addr,f(e,this.size,3))}function R(t,e){t.uniform4fv(this.addr,f(e,this.size,4))}function I(t,e){t.uniformMatrix2fv(this.addr,!1,f(e,this.size,4))}function D(t,e){t.uniformMatrix3fv(this.addr,!1,f(e,this.size,9))}function F(t,e){t.uniformMatrix4fv(this.addr,!1,f(e,this.size,16))}function N(t,e,i){var n=e.length,r=d(i,n);t.uniform1iv(this.addr,r);for(var s=0;s!==n;++s)i.setTexture2D(e[s]||Eo,r[s])}function B(t,e,i){var n=e.length,r=d(i,n);t.uniform1iv(this.addr,r);for(var s=0;s!==n;++s)i.setTextureCube(e[s]||Mo,r[s])}function j(t){switch(t){case 5126:return C;case 35664:return L;case 35665:return k;case 35666:return R;case 35674:return I;case 35675:return D;case 35676:return F;case 35678:return N;case 35680:return B;case 5124:case 35670:return O;case 35667:case 35671:return E;case 35668:case 35672:return M;case 35669:case 35673:return P}}function U(t,e,i){this.id=t,this.addr=i,this.setValue=A(e.type)}function z(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=j(e.type)}function G(t){this.id=t,p.call(this)}function V(t,e){t.seq.push(e),t.map[e.id]=e}function X(t,e,i){var n=t.name,r=n.length;for(Co.lastIndex=0;;){var s=Co.exec(n),o=Co.lastIndex,a=s[1],h="]"===s[2],l=s[3];if(h&&(a|=0),void 0===l||"["===l&&o+2===r){V(i,void 0===l?new U(a,t,e):new z(a,t,e));break}var u=i.map,c=u[a];void 0===c&&(c=new G(a),V(i,c)),i=c}}function W(t,e,i){p.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r!==n;++r){var s=t.getActiveUniform(e,r),o=s.name;X(s,t.getUniformLocation(e,o),this)}}function H(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function q(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function Y(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);s=d.createBuffer(),o=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,s),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),p=d.createTexture(),f=d.createTexture(),m.bindTexture(d.TEXTURE_2D,p),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),m.bindTexture(d.TEXTURE_2D,f),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),a={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},h=r(a),u={vertex:d.getAttribLocation(h,"position"),uv:d.getAttribLocation(h,"uv")},c={renderType:d.getUniformLocation(h,"renderType"),map:d.getUniformLocation(h,"map"),occlusionMap:d.getUniformLocation(h,"occlusionMap"),opacity:d.getUniformLocation(h,"opacity"),color:d.getUniformLocation(h,"color"),scale:d.getUniformLocation(h,"scale"),rotation:d.getUniformLocation(h,"rotation"),screenPosition:d.getUniformLocation(h,"screenPosition")}}function r(e){var i=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),r=d.createShader(d.VERTEX_SHADER),s="precision "+t.getPrecision()+" float;\n";return d.shaderSource(n,s+e.fragmentShader),d.shaderSource(r,s+e.vertexShader),d.compileShader(n),d.compileShader(r),d.attachShader(i,n),d.attachShader(i,r),d.linkProgram(i),i}var s,o,a,h,u,c,p,f,d=t.context,m=t.state;this.render=function(r,a,v){if(0!==e.length){var g=new l,y=v.w/v.z,_=.5*v.z,b=.5*v.w,x=16/v.w,w=new i(x*y,x),T=new l(1,1,0),S=new i(1,1),E=new q;E.min.set(v.x,v.y),E.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===h&&n(),d.useProgram(h),m.initAttributes(),m.enableAttribute(u.vertex),m.enableAttribute(u.uv),m.disableUnusedAttributes(),d.uniform1i(c.occlusionMap,0),d.uniform1i(c.map,1),d.bindBuffer(d.ARRAY_BUFFER,s),d.vertexAttribPointer(u.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(u.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),m.disable(d.CULL_FACE),m.setDepthWrite(!1);for(var M=0,P=e.length;M<P;M++){x=16/v.w,w.set(x*y,x);var A=e[M];if(g.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),g.applyMatrix4(a.matrixWorldInverse),g.applyProjection(a.projectionMatrix),T.copy(g),S.x=v.x+T.x*_+_-8,S.y=v.y+T.y*b+b-8,!0===E.containsPoint(S)){m.activeTexture(d.TEXTURE0),m.bindTexture(d.TEXTURE_2D,null),m.activeTexture(d.TEXTURE1),m.bindTexture(d.TEXTURE_2D,p),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,S.x,S.y,16,16,0),d.uniform1i(c.renderType,0),d.uniform2f(c.scale,w.x,w.y),d.uniform3f(c.screenPosition,T.x,T.y,T.z),m.disable(d.BLEND),m.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),m.activeTexture(d.TEXTURE0),m.bindTexture(d.TEXTURE_2D,f),
d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,S.x,S.y,16,16,0),d.uniform1i(c.renderType,1),m.disable(d.DEPTH_TEST),m.activeTexture(d.TEXTURE1),m.bindTexture(d.TEXTURE_2D,p),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),A.positionScreen.copy(T),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),d.uniform1i(c.renderType,2),m.enable(d.BLEND);for(var C=0,O=A.lensFlares.length;C<O;C++){var L=A.lensFlares[C];L.opacity>.001&&L.scale>.001&&(T.x=L.x,T.y=L.y,T.z=L.z,x=L.size*L.scale/v.w,w.x=x*y,w.y=x,d.uniform3f(c.screenPosition,T.x,T.y,T.z),d.uniform2f(c.scale,w.x,w.y),d.uniform1f(c.rotation,L.rotation),d.uniform1f(c.opacity,L.opacity),d.uniform3f(c.color,L.color.r,L.color.g,L.color.b),m.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),t.setTexture2D(L.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}m.enable(d.CULL_FACE),m.enable(d.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function Z(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=d.createBuffer(),a=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),u=r(),c={position:d.getAttribLocation(u,"position"),uv:d.getAttribLocation(u,"uv")},p={uvOffset:d.getUniformLocation(u,"uvOffset"),uvScale:d.getUniformLocation(u,"uvScale"),rotation:d.getUniformLocation(u,"rotation"),scale:d.getUniformLocation(u,"scale"),color:d.getUniformLocation(u,"color"),map:d.getUniformLocation(u,"map"),opacity:d.getUniformLocation(u,"opacity"),modelViewMatrix:d.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:d.getUniformLocation(u,"projectionMatrix"),fogType:d.getUniformLocation(u,"fogType"),fogDensity:d.getUniformLocation(u,"fogDensity"),fogNear:d.getUniformLocation(u,"fogNear"),fogFar:d.getUniformLocation(u,"fogFar"),fogColor:d.getUniformLocation(u,"fogColor"),alphaTest:d.getUniformLocation(u,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var s=i.getContext("2d");s.fillStyle="white",s.fillRect(0,0,8,8),f=new n(i),f.needsUpdate=!0}function r(){var e=d.createProgram(),i=d.createShader(d.VERTEX_SHADER),n=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),d.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),d.compileShader(i),d.compileShader(n),d.attachShader(e,i),d.attachShader(e,n),d.linkProgram(e),e}function s(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var o,a,u,c,p,f,d=t.context,m=t.state,v=new l,g=new h,y=new l;this.render=function(n,r){if(0!==e.length){void 0===u&&i(),d.useProgram(u),m.initAttributes(),m.enableAttribute(c.position),m.enableAttribute(c.uv),m.disableUnusedAttributes(),m.disable(d.CULL_FACE),m.enable(d.BLEND),d.bindBuffer(d.ARRAY_BUFFER,o),d.vertexAttribPointer(c.position,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(c.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.uniformMatrix4fv(p.projectionMatrix,!1,r.projectionMatrix.elements),m.activeTexture(d.TEXTURE0),d.uniform1i(p.map,0);var h=0,l=0,_=n.fog;_?(d.uniform3f(p.fogColor,_.color.r,_.color.g,_.color.b),_&&_.isFog?(d.uniform1f(p.fogNear,_.near),d.uniform1f(p.fogFar,_.far),d.uniform1i(p.fogType,1),h=1,l=1):_&&_.isFogExp2&&(d.uniform1f(p.fogDensity,_.density),d.uniform1i(p.fogType,2),h=2,l=2)):(d.uniform1i(p.fogType,0),h=0,l=0);for(var b=0,x=e.length;b<x;b++){var w=e[b];w.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14]}e.sort(s);for(var T=[],b=0,x=e.length;b<x;b++){var w=e[b],S=w.material;if(!1!==S.visible){d.uniform1f(p.alphaTest,S.alphaTest),d.uniformMatrix4fv(p.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(v,g,y),T[0]=y.x,T[1]=y.y;var E=0;n.fog&&S.fog&&(E=l),h!==E&&(d.uniform1i(p.fogType,E),h=E),null!==S.map?(d.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),d.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(d.uniform2f(p.uvOffset,0,0),d.uniform2f(p.uvScale,1,1)),d.uniform1f(p.opacity,S.opacity),d.uniform3f(p.color,S.color.r,S.color.g,S.color.b),d.uniform1f(p.rotation,S.rotation),d.uniform2fv(p.scale,T),m.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),m.setDepthTest(S.depthTest),m.setDepthWrite(S.depthWrite),S.map?t.setTexture2D(S.map,0):t.setTexture2D(f,0),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)}}m.enable(d.CULL_FACE),t.resetGLState()}}}function Q(){Object.defineProperty(this,"id",{value:K()}),this.uuid=To.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Or,this.side=xr,this.shading=Er,this.vertexColors=Mr,this.opacity=1,this.transparent=!1,this.blendSrc=Wr,this.blendDst=Hr,this.blendEquation=Fr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=es,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function K(){return Do++}function J(t){Q.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(t.attributes,this.setValues(t))}function $(t){Q.call(this),this.type="MeshDepthMaterial",this.depthPacking=xo,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function tt(t,e){this.min=void 0!==t?t:new l(1/0,1/0,1/0),this.max=void 0!==e?e:new l(-1/0,-1/0,-1/0)}function et(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:0}function it(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length}function nt(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}function rt(t,e,i,n,r,s){this.planes=[void 0!==t?t:new nt,void 0!==e?e:new nt,void 0!==i?i:new nt,void 0!==n?n:new nt,void 0!==r?r:new nt,void 0!==s?s:new nt]}function st(t,e,n,r){function a(e,i,n,r){var s=e.geometry,o=null,a=S,h=e.customDepthMaterial;if(n&&(a=E,h=e.customDistanceMaterial),h)o=h;else{var l=!1;i.morphTargets&&(s&&s.isBufferGeometry?l=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(l=s.morphTargets&&s.morphTargets.length>0));var u=e.isSkinnedMesh&&i.skinning,c=0;l&&(c|=x),u&&(c|=w),o=a[c]}if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var p=o.uuid,f=i.uuid,d=M[p];void 0===d&&(d={},M[p]=d);var m=d[f];void 0===m&&(m=o.clone(),d[f]=m),o=m}o.visible=i.visible,o.wireframe=i.wireframe;var v=i.side;return B.renderSingleSided&&v==Tr&&(v=xr),B.renderReverseSided&&(v===xr?v=wr:v===wr&&(v=xr)),o.side=v,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(r),o}function h(t,e,i){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!1===t.frustumCulled||!0===f.intersectsObject(t))){!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),b.push(t))}for(var n=t.children,r=0,s=n.length;r<s;r++)h(n[r],e,i)}}var c=t.context,p=t.state,f=new rt,d=new u,m=e.shadows,v=new i,g=new i(r.maxTextureSize,r.maxTextureSize),y=new l,_=new l,b=[],x=1,w=2,T=1+(x|w),S=new Array(T),E=new Array(T),M={},P=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],A=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)],C=[new s,new s,new s,new s,new s,new s],O=new $;O.depthPacking=wo,O.clipping=!0;for(var L=Io.distanceRGBA,k=Oo.clone(L.uniforms),R=0;R!==T;++R){var I=0!=(R&x),D=0!=(R&w),F=O.clone();F.morphTargets=I,F.skinning=D,S[R]=F;var N=new J({defines:{USE_SHADOWMAP:""},uniforms:k,vertexShader:L.vertexShader,fragmentShader:L.fragmentShader,morphTargets:I,skinning:D,clipping:!0});E[R]=N}var B=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_r,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,i){if(!1!==B.enabled&&(!1!==B.autoUpdate||!1!==B.needsUpdate)&&0!==m.length){p.clearColor(1,1,1,1),p.disable(c.BLEND),p.setDepthTest(!0),p.setScissorTest(!1);for(var r,s,l=0,u=m.length;l<u;l++){var x=m[l],w=x.shadow;if(void 0!==w){var T=w.camera;if(v.copy(w.mapSize),v.min(g),x&&x.isPointLight){r=6,s=!0;var S=v.x,E=v.y;C[0].set(2*S,E,S,E),C[1].set(0,E,S,E),C[2].set(3*S,E,S,E),C[3].set(S,E,S,E),C[4].set(3*S,0,S,E),C[5].set(S,0,S,E),v.x*=4,v.y*=2}else r=1,s=!1;if(null===w.map){var M={minFilter:Ms,magFilter:Ms,format:qs};w.map=new o(v.x,v.y,M),T.updateProjectionMatrix()}w&&w.isSpotLightShadow&&w.update(x);var O=w.map,L=w.matrix;_.setFromMatrixPosition(x.matrixWorld),T.position.copy(_),t.setRenderTarget(O),t.clear();for(var k=0;k<r;k++){if(s){y.copy(T.position),y.add(P[k]),T.up.copy(A[k]),T.lookAt(y);var R=C[k];p.viewport(R)}else y.setFromMatrixPosition(x.target.matrixWorld),T.lookAt(y);T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(T.projectionMatrix),L.multiply(T.matrixWorldInverse),d.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),f.setFromMatrix(d),b.length=0,h(e,i,T);for(var I=0,D=b.length;I<D;I++){var F=b[I],N=n.update(F),j=F.material;if(j&&j.isMultiMaterial)for(var U=N.groups,z=j.materials,G=0,V=U.length;G<V;G++){var X=U[G],W=z[X.materialIndex];if(!0===W.visible){var H=a(F,W,s,_);t.renderBufferDirect(T,null,N,H,F,X)}}else{var H=a(F,j,s,_);t.renderBufferDirect(T,null,N,H,F,null)}}}}}var q=t.getClearColor(),Y=t.getClearAlpha();t.setClearColor(q,Y),B.needsUpdate=!1}}}function ot(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l}function at(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||at.DefaultOrder}function ht(){this.mask=1}function lt(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:ut()}),this.uuid=To.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=lt.DefaultUp.clone();var i=new l,n=new at,r=new h,s=new l(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:s},modelViewMatrix:{value:new u},normalMatrix:{value:new it}}),this.matrix=new u,this.matrixWorld=new u,this.matrixAutoUpdate=lt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ht,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ut(){return Fo++}function ct(t,e){this.start=void 0!==t?t:new l,this.end=void 0!==e?e:new l}function pt(t,e,i){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==i?i:new l}function ft(t,e,i,n,r,s){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new l,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new H,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}function dt(t){Q.call(this),this.type="MeshBasicMaterial",this.color=new H(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=os,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function mt(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=To.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function vt(t,e){return new mt(new Int8Array(t),e)}function gt(t,e){return new mt(new Uint8Array(t),e)}function yt(t,e){return new mt(new Uint8ClampedArray(t),e)}function _t(t,e){return new mt(new Int16Array(t),e)}function bt(t,e){return new mt(new Uint16Array(t),e)}function xt(t,e){return new mt(new Int32Array(t),e)}function wt(t,e){return new mt(new Uint32Array(t),e)}function Tt(t,e){return new mt(new Float32Array(t),e)}function St(t,e){return new mt(new Float64Array(t),e)}function Et(t,e){return new mt(t,e).setDynamic(!0)}function Mt(){Object.defineProperty(this,"id",{value:Pt()}),this.uuid=To.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pt(){return No++}function At(){Object.defineProperty(this,"id",{value:Pt()}),this.uuid=To.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ct(){Object.defineProperty(this,"id",{value:Pt()}),this.uuid=To.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ot(t,e){lt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Ct,this.material=void 0!==e?e:new dt({color:16777215*Math.random()}),this.drawMode=uo,this.updateMorphTargets()}function Lt(t,e,i,n,r,s){function o(t,e,i,n,r,s,o,h,u,b,x){for(var w=s/u,T=o/b,S=s/2,E=o/2,M=h/2,P=u+1,A=b+1,C=0,O=0,L=new l,k=0;k<A;k++)for(var R=k*T-E,I=0;I<P;I++){var D=I*w-S;L[t]=D*n,L[e]=R*r,L[i]=M,p[m]=L.x,p[m+1]=L.y,p[m+2]=L.z,L[t]=0,L[e]=0,L[i]=h>0?1:-1,f[m]=L.x,f[m+1]=L.y,f[m+2]=L.z,d[v]=I/u,d[v+1]=1-k/b,m+=3,v+=2,C+=1}for(k=0;k<b;k++)for(I=0;I<u;I++){var F=y+I+P*k,N=y+I+P*(k+1),B=y+(I+1)+P*(k+1),j=y+(I+1)+P*k;c[g]=F,c[g+1]=N,c[g+2]=j,c[g+3]=N,c[g+4]=B,c[g+5]=j,g+=6,O+=6}a.addGroup(_,O,x),_+=O,y+=C}Ct.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};var a=this;n=Math.floor(n)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var h=function(t,e,i){var n=0;return n+=(t+1)*(e+1)*2,n+=(t+1)*(i+1)*2,n+=(i+1)*(e+1)*2}(n,r,s),u=function(t,e,i){var n=0;return n+=t*e*2,n+=t*i*2,6*(n+=i*e*2)}(n,r,s),c=new(u>65535?Uint32Array:Uint16Array)(u),p=new Float32Array(3*h),f=new Float32Array(3*h),d=new Float32Array(2*h),m=0,v=0,g=0,y=0,_=0;o("z","y","x",-1,-1,i,e,t,s,r,0),o("z","y","x",1,-1,i,e,-t,s,r,1),o("x","z","y",1,1,t,i,e,n,s,2),o("x","z","y",1,-1,t,i,-e,n,s,3),o("x","y","z",1,-1,t,e,i,n,r,4),o("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(new mt(c,1)),this.addAttribute("position",new mt(p,3)),this.addAttribute("normal",new mt(f,3)),this.addAttribute("uv",new mt(d,2))}function kt(t,e,i,n){Ct.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};for(var r=t/2,s=e/2,o=Math.floor(i)||1,a=Math.floor(n)||1,h=o+1,l=a+1,u=t/o,c=e/a,p=new Float32Array(h*l*3),f=new Float32Array(h*l*3),d=new Float32Array(h*l*2),m=0,v=0,g=0;g<l;g++)for(var y=g*c-s,_=0;_<h;_++){var b=_*u-r;p[m]=b,p[m+1]=-y,f[m+2]=1,d[v]=_/o,d[v+1]=1-g/a,m+=3,v+=2}m=0;for(var x=new(p.length/3>65535?Uint32Array:Uint16Array)(o*a*6),g=0;g<a;g++)for(var _=0;_<o;_++){var w=_+h*g,T=_+h*(g+1),S=_+1+h*(g+1),E=_+1+h*g;x[m]=w,x[m+1]=T,x[m+2]=E,x[m+3]=T,x[m+4]=S,x[m+5]=E,m+=6}this.setIndex(new mt(x,1)),this.addAttribute("position",new mt(p,3)),this.addAttribute("normal",new mt(f,3)),this.addAttribute("uv",new mt(d,2))}function Rt(){lt.call(this),this.type="Camera",this.matrixWorldInverse=new u,this.projectionMatrix=new u}function It(t,e,i,n){Rt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Dt(t,e,i,n,r,s){Rt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function Ft(t,e,i){function n(t){a=t}function r(i){i.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(h=t.UNSIGNED_INT,l=4):(h=t.UNSIGNED_SHORT,l=2)}function s(e,n){t.drawElements(a,n,h,e*l),i.calls++,i.vertices+=n,a===t.TRIANGLES&&(i.faces+=n/3)}function o(n,r,s){var o=e.get("ANGLE_instanced_arrays");null!==o&&(o.drawElementsInstancedANGLE(a,s,h,r*l,n.maxInstancedCount),i.calls++,i.vertices+=s*n.maxInstancedCount,a===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*s/3))}var a,h,l;return{setMode:n,setIndex:r,render:s,renderInstances:o}}function Nt(t,e,i){function n(t){o=t}function r(e,n){t.drawArrays(o,e,n),i.calls++,i.vertices+=n,o===t.TRIANGLES&&(i.faces+=n/3)}function s(n){var r=e.get("ANGLE_instanced_arrays");if(null!==r){var s=n.attributes.position,a=0;s&&s.isInterleavedBufferAttribute?(a=s.data.count,r.drawArraysInstancedANGLE(o,0,a,n.maxInstancedCount)):(a=s.count,r.drawArraysInstancedANGLE(o,0,a,n.maxInstancedCount)),i.calls++,i.vertices+=a*n.maxInstancedCount,o===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*a/3)}}var o;return{setMode:n,render:r,renderInstances:s}}function Bt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new l,color:new H,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new l,direction:new l,color:new H,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new l,color:new H,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"HemisphereLight":n={direction:new l,skyColor:new H,groundColor:new H}}return t[e.id]=n,n}}}function jt(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS),t.getShaderInfoLog(n),n}function Ut(t){switch(t){case fo:return["Linear","( value )"];case mo:return["sRGB","( value )"];case go:return["RGBE","( value )"];case yo:return["RGBM","( value, 7.0 )"];case _o:return["RGBM","( value, 16.0 )"];case bo:return["RGBD","( value, 256.0 )"];case vo:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function zt(t,e){var i=Ut(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Gt(t,e){var i=Ut(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Vt(t,e){var i;switch(e){case us:i="Linear";break;case cs:i="Reinhard";break;case ps:i="Uncharted2";break;case fs:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Xt(t,e,i){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(qt).join("\n")}function Wt(t){var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function Ht(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var o=t.getActiveAttrib(e,s),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function qt(t){return""!==t}function Yt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Zt(t){function e(t,e){var i=Lo[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Zt(i)}var i=/#include +<([\w\d.]+)>/g;return t.replace(i,e)}function Qt(t){function e(t,e,i,n){for(var r="",s=parseInt(e);s<parseInt(i);s++)r+=n.replace(/\[ i \]/g,"[ "+s+" ]");return r}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,e)}function Kt(t,e,i,n){var r=t.context,s=i.extensions,o=i.defines,a=i.__webglShader.vertexShader,h=i.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";n.shadowMapType===_r?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===br&&(l="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",c="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case ds:case ms:u="ENVMAP_TYPE_CUBE";break;case _s:case bs:u="ENVMAP_TYPE_CUBE_UV";break;case vs:case gs:u="ENVMAP_TYPE_EQUIREC";break;case ys:u="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ms:case gs:c="ENVMAP_MODE_REFRACTION"}switch(i.combine){case os:p="ENVMAP_BLENDING_MULTIPLY";break;case as:p="ENVMAP_BLENDING_MIX";break;case hs:p="ENVMAP_BLENDING_ADD"}}var f,d,m=t.gammaFactor>0?t.gammaFactor:1,v=Xt(s,n,t.extensions),g=Wt(o),y=r.createProgram();i.isRawShaderMaterial?(f=[g,"\n"].filter(qt).join("\n"),d=[v,g,"\n"].filter(qt).join("\n")):(f=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,g,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qt).join("\n"),d=[v,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==ls?"#define TONE_MAPPING":"",n.toneMapping!==ls?Lo.tonemapping_pars_fragment:"",n.toneMapping!==ls?Vt("toneMapping",n.toneMapping):"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?Lo.encodings_pars_fragment:"",n.mapEncoding?zt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?zt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?zt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?Gt("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(qt).join("\n")),a=Zt(a,n),a=Yt(a,n),h=Zt(h,n),h=Yt(h,n),i.isShaderMaterial||(a=Qt(a),h=Qt(h));var _=f+a,b=d+h,x=jt(r,r.VERTEX_SHADER,_),w=jt(r,r.FRAGMENT_SHADER,b);r.attachShader(y,x),r.attachShader(y,w),void 0!==i.index0AttributeName?r.bindAttribLocation(y,0,i.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);var T=r.getProgramInfoLog(y),S=r.getShaderInfoLog(x),E=r.getShaderInfoLog(w),M=!0,P=!0;!1===r.getProgramParameter(y,r.LINK_STATUS)?M=!1:""!==T||""!==S&&""!==E||(P=!1),P&&(this.diagnostics={runnable:M,material:i,programLog:T,vertexShader:{log:S,prefix:f},fragmentShader:{log:E,prefix:d}}),r.deleteShader(x),r.deleteShader(w);var A;this.getUniforms=function(){return void 0===A&&(A=new W(r,y,t)),A};var C;return this.getAttributes=function(){return void 0===C&&(C=Ht(r,y)),C},this.destroy=function(){r.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.id=Bo++,this.code=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=w,this}function Jt(t,e){function i(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var i=e.maxVertexUniforms,n=Math.floor((i-20)/4),r=n;return void 0!==t&&t&&t.isSkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),t.skeleton.bones.length),r}function n(t,e){var i;return t?t&&t.isTexture?i=t.encoding:t&&t.isWebGLRenderTarget&&(i=t.texture.encoding):i=fo,i===fo&&e&&(i=vo),i}var r=[],s={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(r,o,a,h,l,u){var c=s[r.type],p=i(u),f=t.getPrecision();null!==r.precision&&(f=e.getMaxPrecision(r.precision),r.precision);var d=t.getCurrentRenderTarget();return{shaderID:c,precision:f,supportsVertexTextures:e.vertexTextures,outputEncoding:n(d?d.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:n(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:n(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===_s||r.envMap.mapping===bs),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:n(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,
combine:r.combine,vertexColors:r.vertexColors,fog:!!a,useFog:r.fog,fogExp:a&&a.isFogExp2,flatShading:r.shading===Sr,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:p,useVertexTexture:e.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numHemiLights:o.hemi.length,numClippingPlanes:h,numClipIntersection:l,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&o.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===Tr,flipSided:r.side===wr,depthPacking:void 0!==r.depthPacking&&r.depthPacking}},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<o.length;r++)i.push(e[o[r]]);return i.join()},this.acquireProgram=function(e,i,n){for(var s,o=0,a=r.length;o<a;o++){var h=r[o];if(h.code===n){s=h,++s.usedTimes;break}}return void 0===s&&(s=new Kt(t,n,e,i),r.push(s)),s},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function $t(t,e,i){function n(t){var r=t.target,a=h[r.id];null!==a.index&&s(a.index),o(a.attributes),r.removeEventListener("dispose",n),delete h[r.id];var l=e.get(r);l.wireframe&&s(l.wireframe),e.delete(r);var u=e.get(a);u.wireframe&&s(u.wireframe),e.delete(a),i.memory.geometries--}function r(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function s(e){var i=r(e);void 0!==i&&(t.deleteBuffer(i),a(e))}function o(t){for(var e in t)s(t[e])}function a(t){t.isInterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var h={};return{get:function(t){var e=t.geometry;if(void 0!==h[e.id])return h[e.id];e.addEventListener("dispose",n);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ct).setFromObject(t)),r=e._bufferGeometry),h[e.id]=r,i.memory.geometries++,r}}}function te(t,e,i){function n(e){var i=l.get(e);e.geometry.isGeometry&&i.updateFromObject(e);var n=i.index,s=i.attributes;null!==n&&r(n,t.ELEMENT_ARRAY_BUFFER);for(var o in s)r(s[o],t.ARRAY_BUFFER);var a=i.morphAttributes;for(var o in a)for(var h=a[o],u=0,c=h.length;u<c;u++)r(h[u],t.ARRAY_BUFFER);return i}function r(t,i){var n=t.isInterleavedBufferAttribute?t.data:t,r=e.get(n);void 0===r.__webglBuffer?s(r,n,i):r.version!==n.version&&o(r,n,i)}function s(e,i,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var r=i.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,i.array,r),e.version=i.version}function o(e,i,n){t.bindBuffer(n,e.__webglBuffer),!1===i.dynamic?t.bufferData(n,i.array,t.STATIC_DRAW):-1===i.updateRange.count?t.bufferSubData(n,0,i.array):0===i.updateRange.count||(t.bufferSubData(n,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),e.version=i.version}function a(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function h(i){var n=e.get(i);if(void 0!==n.wireframe)return n.wireframe;var s=[],o=i.index,a=i.attributes,h=a.position;if(null!==o)for(var l=o.array,u=0,c=l.length;u<c;u+=3){var p=l[u+0],f=l[u+1],d=l[u+2];s.push(p,f,f,d,d,p)}else for(var l=a.position.array,u=0,c=l.length/3-1;u<c;u+=3){var p=u+0,f=u+1,d=u+2;s.push(p,f,f,d,d,p)}var m=h.count>65535?Uint32Array:Uint16Array,v=new mt(new m(s),1);return r(v,t.ELEMENT_ARRAY_BUFFER),n.wireframe=v,v}var l=new $t(t,e,i);return{getAttributeBuffer:a,getWireframeAttribute:h,update:n}}function ee(t,e,i,n,r,s,o){function a(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);return n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n}return t}function h(t){return To.isPowerOfTwo(t.width)&&To.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=To.nearestPowerOfTwo(t.width),e.height=To.nearestPowerOfTwo(t.height);return e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}return t}function u(t){return t.wrapS!==Ts||t.wrapT!==Ts||t.minFilter!==Ms&&t.minFilter!==Cs}function c(e){return e===Ms||e===Ps||e===As?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),d(e),P.textures--}function f(t){var e=t.target;e.removeEventListener("dispose",f),m(e),P.textures--}function d(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n.delete(e)}function m(e){var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e&&e.isWebGLRenderTargetCube)for(var s=0;s<6;s++)t.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[s]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.delete(e.texture),n.delete(e)}}function v(e,r){var s=n.get(e);if(e.version>0&&s.__version!==e.version){var o=e.image;if(void 0===o);else if(!1!==o.complete)return void b(s,e,r)}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,s.__webglTexture)}function g(e,o){var l=n.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",p),l.__image__webglTextureCube=t.createTexture(),P.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var u=e&&e.isCompressedTexture,c=e.image[0]&&e.image[0].isDataTexture,f=[],d=0;d<6;d++)f[d]=u||c?c?e.image[d].image:e.image[d]:a(e.image[d],r.maxCubemapSize);var m=f[0],v=h(m),g=s(e.format),y=s(e.type);_(t.TEXTURE_CUBE_MAP,e,v);for(var d=0;d<6;d++)if(u)for(var b,x=f[d].mipmaps,w=0,T=x.length;w<T;w++)b=x[w],e.format!==qs&&e.format!==Hs?i.getCompressedTextureFormats().indexOf(g)>-1&&i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,w,g,b.width,b.height,0,b.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,w,g,b.width,b.height,0,g,y,b.data);else c?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,g,f[d].width,f[d].height,0,g,y,f[d].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,g,g,y,f[d]);e.generateMipmaps&&v&&t.generateMipmap(t.TEXTURE_CUBE_MAP),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function y(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function _(i,o,a){var h;if(a?(t.texParameteri(i,t.TEXTURE_WRAP_S,s(o.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,s(o.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,s(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,s(o.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o.wrapS!==Ts||o.wrapT,t.texParameteri(i,t.TEXTURE_MAG_FILTER,c(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,c(o.minFilter)),o.minFilter!==Ms&&o.minFilter),h=e.get("EXT_texture_filter_anisotropic")){if(o.type===js&&null===e.get("OES_texture_float_linear"))return;if(o.type===Us&&null===e.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(i,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function b(e,n,o){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),P.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var c=a(n.image,r.maxTextureSize);u(n)&&!1===h(c)&&(c=l(c));var f=h(c),d=s(n.format),m=s(n.type);_(t.TEXTURE_2D,n,f);var v,g=n.mipmaps;if(n&&n.isDepthTexture){var y=t.DEPTH_COMPONENT;if(n.type===js){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");y=t.DEPTH_COMPONENT32F}else A&&(y=t.DEPTH_COMPONENT16);n.format===Js&&(y=t.DEPTH_STENCIL),i.texImage2D(t.TEXTURE_2D,0,y,c.width,c.height,0,d,m,null)}else if(n&&n.isDataTexture)if(g.length>0&&f){for(var b=0,x=g.length;b<x;b++)v=g[b],i.texImage2D(t.TEXTURE_2D,b,d,v.width,v.height,0,d,m,v.data);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,d,c.width,c.height,0,d,m,c.data);else if(n&&n.isCompressedTexture)for(var b=0,x=g.length;b<x;b++)v=g[b],n.format!==qs&&n.format!==Hs?i.getCompressedTextureFormats().indexOf(d)>-1&&i.compressedTexImage2D(t.TEXTURE_2D,b,d,v.width,v.height,0,v.data):i.texImage2D(t.TEXTURE_2D,b,d,v.width,v.height,0,d,m,v.data);else if(g.length>0&&f){for(var b=0,x=g.length;b<x;b++)v=g[b],i.texImage2D(t.TEXTURE_2D,b,d,d,m,v);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,d,d,m,c);n.generateMipmaps&&f&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(e,r,o,a){var h=s(r.texture.format),l=s(r.texture.type);i.texImage2D(a,0,h,r.width,r.height,0,h,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,a,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function w(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function T(e,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),v(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Ks)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==Js)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}function S(e){var i=n.get(e),r=e&&e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");T(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var s=0;s<6;s++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[s]),i.__webglDepthbuffer[s]=t.createRenderbuffer(),w(i.__webglDepthbuffer[s],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),w(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e){var r=n.get(e),s=n.get(e.texture);e.addEventListener("dispose",f),s.__webglTexture=t.createTexture(),P.textures++;var o=e&&e.isWebGLRenderTargetCube,a=h(e);if(o){r.__webglFramebuffer=[];for(var l=0;l<6;l++)r.__webglFramebuffer[l]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(o){i.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,a);for(var l=0;l<6;l++)x(r.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);e.texture.generateMipmaps&&a&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,s.__webglTexture),_(t.TEXTURE_2D,e.texture,a),x(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&a&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function M(e){var r=e.texture;if(r.generateMipmaps&&h(e)&&r.minFilter!==Ms&&r.minFilter!==Cs){var s=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=n.get(r).__webglTexture;i.bindTexture(s,o),t.generateMipmap(s),i.bindTexture(s,null)}}var P=o.memory,A="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=g,this.setTextureCubeDynamic=y,this.setupRenderTarget=E,this.updateRenderTargetMipmap=M}function ie(){var t={};return{get:function(e){var i=e.uuid,n=t[i];return void 0===n&&(n={},t[i]=n),n},delete:function(e){delete t[e.uuid]},clear:function(){t={}}}}function ne(t,e,i){function n(){var e=!1,i=new s,n=null,r=new s;return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,s,o){i.set(e,n,s,o),!1===r.equals(i)&&(t.clearColor(e,n,s,o),r.copy(i))},reset:function(){e=!1,n=null,r.set(0,0,0,1)}}}function r(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?f(t.DEPTH_TEST):d(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case Jr:t.depthFunc(t.NEVER);break;case $r:t.depthFunc(t.ALWAYS);break;case ts:t.depthFunc(t.LESS);break;case es:t.depthFunc(t.LEQUAL);break;case is:t.depthFunc(t.EQUAL);break;case ns:t.depthFunc(t.GEQUAL);break;case rs:t.depthFunc(t.GREATER);break;case ss:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function o(){var e=!1,i=null,n=null,r=null,s=null,o=null,a=null,h=null,l=null;return{setTest:function(e){e?f(t.STENCIL_TEST):d(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&s===o||(t.stencilFunc(e,i,o),n=e,r=i,s=o)},setOp:function(e,i,n){o===e&&a===i&&h===n||(t.stencilOp(e,i,n),o=e,a=i,h=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,n=null,r=null,s=null,o=null,a=null,h=null,l=null}}}function a(e,i,n){var r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<n;o++)t.texImage2D(i+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return s}function h(){D(0,0,0,1),F(1),N(0),f(t.DEPTH_TEST),b(es),E(!1),M(vr),f(t.CULL_FACE),f(t.BLEND),v(Or)}function l(){for(var t=0,e=W.length;t<e;t++)W[t]=0}function u(i){if(W[i]=1,0===H[i]&&(t.enableVertexAttribArray(i),H[i]=1),0!==q[i]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),q[i]=0}}function c(e,i,n){W[e]=1,0===H[e]&&(t.enableVertexAttribArray(e),H[e]=1),q[e]!==i&&(n.vertexAttribDivisorANGLE(e,i),q[e]=i)}function p(){for(var e=0,i=H.length;e!==i;++e)H[e]!==W[e]&&(t.disableVertexAttribArray(e),H[e]=0)}function f(e){!0!==Y[e]&&(t.enable(e),Y[e]=!0)}function d(e){!1!==Y[e]&&(t.disable(e),Y[e]=!1)}function m(){if(null===Z&&(Z=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)Z.push(i[n]);return Z}function v(e,n,r,s,o,a,h,l){e!==Cr?f(t.BLEND):d(t.BLEND),e===Q&&l===nt||(e===Lr?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===kr?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Rr?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),Q=e,nt=l),e===Ir?(o=o||n,a=a||r,h=h||s,n===K&&o===tt||(t.blendEquationSeparate(i(n),i(o)),K=n,tt=o),r===J&&s===$&&a===et&&h===it||(t.blendFuncSeparate(i(r),i(s),i(a),i(h)),J=r,$=s,et=a,it=h)):(K=null,J=null,$=null,tt=null,et=null,it=null)}function g(t){z.setMask(t)}function y(t){G.setTest(t)}function _(t){G.setMask(t)}function b(t){G.setFunc(t)}function x(t){V.setTest(t)}function w(t){V.setMask(t)}function T(t,e,i){V.setFunc(t,e,i)}function S(t,e,i){V.setOp(t,e,i)}function E(e){rt!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),rt=e)}function M(e){e!==mr?(f(t.CULL_FACE),e!==st&&(e===vr?t.cullFace(t.BACK):e===gr?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):d(t.CULL_FACE),st=e}function P(e){e!==ot&&(t.lineWidth(e),ot=e)}function A(e,i,n){e?(f(t.POLYGON_OFFSET_FILL),at===i&&ht===n||(t.polygonOffset(i,n),at=i,ht=n)):d(t.POLYGON_OFFSET_FILL)}function C(){return lt}function O(e){lt=e,e?f(t.SCISSOR_TEST):d(t.SCISSOR_TEST)}function L(e){void 0===e&&(e=t.TEXTURE0+ut-1),ct!==e&&(t.activeTexture(e),ct=e)}function k(e,i){null===ct&&L();var n=pt[ct];void 0===n&&(n={type:void 0,texture:void 0},pt[ct]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||mt[e]),n.type=e,n.texture=i)}function R(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}}function I(){try{t.texImage2D.apply(t,arguments)}catch(t){}}function D(t,e,i,n){z.setClear(t,e,i,n)}function F(t){G.setClear(t)}function N(t){V.setClear(t)}function B(e){!1===ft.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ft.copy(e))}function j(e){!1===dt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),dt.copy(e))}function U(){for(var e=0;e<H.length;e++)1===H[e]&&(t.disableVertexAttribArray(e),H[e]=0);Y={},Z=null,ct=null,pt={},Q=null,rt=null,st=null,z.reset(),G.reset(),V.reset()}var z=new n,G=new r,V=new o,X=t.getParameter(t.MAX_VERTEX_ATTRIBS),W=new Uint8Array(X),H=new Uint8Array(X),q=new Uint8Array(X),Y={},Z=null,Q=null,K=null,J=null,$=null,tt=null,et=null,it=null,nt=!1,rt=null,st=null,ot=null,at=null,ht=null,lt=null,ut=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ct=null,pt={},ft=new s,dt=new s,mt={};return mt[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),mt[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:z,depth:G,stencil:V},init:h,initAttributes:l,enableAttribute:u,enableAttributeAndDivisor:c,disableUnusedAttributes:p,enable:f,disable:d,getCompressedTextureFormats:m,setBlending:v,setColorWrite:g,setDepthTest:y,setDepthWrite:_,setDepthFunc:b,setStencilTest:x,setStencilWrite:w,setStencilFunc:T,setStencilOp:S,setFlipSided:E,setCullFace:M,setLineWidth:P,setPolygonOffset:A,getScissorTest:C,setScissorTest:O,activeTexture:L,bindTexture:k,compressedTexImage2D:R,texImage2D:I,clearColor:D,clearDepth:F,clearStencil:N,scissor:B,viewport:j,reset:U}}function re(t,e,i){function n(){if(void 0!==s)return s;var i=e.get("EXT_texture_filter_anisotropic");return s=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var s,o=void 0!==i.precision?i.precision:"highp",a=r(o);a!==o&&(o=a);var h=!0===i.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),f=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=u>0,y=!!e.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:h,maxTextures:l,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}function se(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return e[i]=n,n}}}function oe(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var s=null!==t?t.length:0,o=null;if(0!==s){if(o=l.value,!0!==r||null===o){var u=n+4*s,c=e.matrixWorldInverse;h.getNormalMatrix(c),(null===o||o.length<u)&&(o=new Float32Array(u));for(var p=0,f=n;p!==s;++p,f+=4)a.copy(t[p]).applyMatrix4(c,h),a.normal.toArray(o,f),o[f+3]=a.constant}l.value=o,l.needsUpdate=!0}return i.numPlanes=s,o}var i=this,n=null,r=0,s=!1,o=!1,a=new nt,h=new it,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==r||s;return s=i,n=e(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,e(null)},this.endShadows=function(){o=!1,t()},this.setState=function(i,a,h,u,c,p){if(!s||null===i||0===i.length||o&&!h)o?e(null):t();else{var f=o?0:r,d=4*f,m=c.clippingState||null;l.value=m,m=e(i,u,d,p);for(var v=0;v!==d;++v)m[v]=n[v];c.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function ae(t){function e(){return null===ct?Et:1}function i(t,e,i,n){!0===q&&(t*=n,e*=n,i*=n),Kt.clearColor(t,e,i,n)}function n(){Kt.init(),Kt.scissor(gt.copy(Mt).multiplyScalar(Et)),Kt.viewport(_t.copy(At).multiplyScalar(Et)),i(xt.r,xt.g,xt.b,wt)}function r(){ut=null,vt=null,mt="",ft=-1,Kt.reset()}function o(t){t.preventDefault(),r(),n(),$t.clear()}function a(t){var e=t.target;e.removeEventListener("dispose",a),h(e)}function h(t){c(t),$t.delete(t)}function c(t){var e=$t.get(t).program;t.program=void 0,void 0!==e&&le.releaseProgram(e)}function p(t,e,i,n){var r;if(!i||!i.isInstancedBufferGeometry||null!==(r=Zt.get("ANGLE_instanced_arrays"))){void 0===n&&(n=0),Kt.initAttributes();var s=i.attributes,o=e.getAttributes(),a=t.defaultAttributeValues;for(var h in o){var l=o[h];if(l>=0){var u=s[h];if(void 0!==u){var c=qt.FLOAT,p=u.array,f=u.normalized;p instanceof Float32Array?c=qt.FLOAT:p instanceof Float64Array||(p instanceof Uint16Array?c=qt.UNSIGNED_SHORT:p instanceof Int16Array?c=qt.SHORT:p instanceof Uint32Array?c=qt.UNSIGNED_INT:p instanceof Int32Array?c=qt.INT:p instanceof Int8Array?c=qt.BYTE:p instanceof Uint8Array&&(c=qt.UNSIGNED_BYTE));var d=u.itemSize,m=he.getAttributeBuffer(u);if(u.isInterleavedBufferAttribute){var v=u.data,g=v.stride,y=u.offset;v&&v.isInstancedInterleavedBuffer?(Kt.enableAttributeAndDivisor(l,v.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):Kt.enableAttribute(l),qt.bindBuffer(qt.ARRAY_BUFFER,m),qt.vertexAttribPointer(l,d,c,f,g*v.array.BYTES_PER_ELEMENT,(n*g+y)*v.array.BYTES_PER_ELEMENT)}else u.isInstancedBufferAttribute?(Kt.enableAttributeAndDivisor(l,u.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=u.meshPerAttribute*u.count)):Kt.enableAttribute(l),qt.bindBuffer(qt.ARRAY_BUFFER,m),qt.vertexAttribPointer(l,d,c,f,0,n*d*u.array.BYTES_PER_ELEMENT)}else if(void 0!==a){var _=a[h];if(void 0!==_)switch(_.length){case 2:qt.vertexAttrib2fv(l,_);break;case 3:qt.vertexAttrib3fv(l,_);break;case 4:qt.vertexAttrib4fv(l,_);break;default:qt.vertexAttrib1fv(l,_)}}}}Kt.disableUnusedAttributes()}}function f(t,e){return Math.abs(e[0])-Math.abs(t[0])}function d(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function m(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function v(t,e,i,n,r){var s,o;i.transparent?(s=it,o=++nt):(s=$,o=++tt);var a=s[o];void 0!==a?(a.id=t.id,a.object=t,a.geometry=e,a.material=i,a.z=Xt.z,a.group=r):(a={id:t.id,object:t,geometry:e,material:i,z:Xt.z,group:r},s.push(a))}function g(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Gt.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),_(Gt)}function y(t){return Gt.center.set(0,0,0),Gt.radius=.7071067811865476,Gt.applyMatrix4(t.matrixWorld),_(Gt)}function _(t){if(!Rt.intersectsSphere(t))return!1;var e=jt.numPlanes;if(0===e)return!0;var i=lt.clippingPlanes,n=t.center,r=-t.radius,s=0;do{if(i[s].distanceToPoint(n)<r)return!1}while(++s!==e);return!0}function b(t,e){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask))if(t.isLight)K.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==y(t)||at.push(t);else if(t.isLensFlare)ht.push(t);else if(t.isImmediateRenderObject)!0===lt.sortObjects&&(Xt.setFromMatrixPosition(t.matrixWorld),Xt.applyProjection(Vt)),v(t,null,t.material,Xt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===g(t))){var i=t.material;if(!0===i.visible){!0===lt.sortObjects&&(Xt.setFromMatrixPosition(t.matrixWorld),Xt.applyProjection(Vt));var n=he.update(t);if(i.isMultiMaterial)for(var r=n.groups,s=i.materials,o=0,a=r.length;o<a;o++){var h=r[o],l=s[h.materialIndex];!0===l.visible&&v(t,n,l,Xt.z,h)}else v(t,n,i,Xt.z,null)}}for(var u=t.children,o=0,a=u.length;o<a;o++)b(u[o],e)}}function x(t,e,i,n){for(var r=0,s=t.length;r<s;r++){var o=t[r],a=o.object,h=o.geometry,l=void 0===n?o.material:n,u=o.group;if(a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),a.onBeforeRender(lt,e,i,h,l,u),a.isImmediateRenderObject){T(l);var c=S(i,e.fog,l,a);mt="",a.render(function(t){lt.renderBufferImmediate(t,c,l)})}else lt.renderBufferDirect(i,e.fog,h,l,a,u);a.onAfterRender(lt,e,i,h,l,u)}}function w(t,e,i){var n=$t.get(t),r=le.getParameters(t,Wt,e,jt.numPlanes,jt.numIntersection,i),s=le.getProgramCode(t,r),o=n.program,h=!0;if(void 0===o)t.addEventListener("dispose",a);else if(o.code!==s)c(t);else{if(void 0!==r.shaderID)return;h=!1}if(h){if(r.shaderID){var l=Io[r.shaderID];n.__webglShader={name:t.type,uniforms:Oo.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,o=le.acquireProgram(t,r,s),n.program=o,t.program=o}var u=o.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<lt.maxMorphTargets;p++)u["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<lt.maxMorphNormals;p++)u["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var f=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=jt.numPlanes,n.numIntersection=jt.numIntersection,f.clippingPlanes=jt.uniform),n.fog=e,n.lightsHash=Wt.hash,t.lights&&(f.ambientLightColor.value=Wt.ambient,f.directionalLights.value=Wt.directional,f.spotLights.value=Wt.spot,f.pointLights.value=Wt.point,f.hemisphereLights.value=Wt.hemi,f.directionalShadowMap.value=Wt.directionalShadowMap,f.directionalShadowMatrix.value=Wt.directionalShadowMatrix,f.spotShadowMap.value=Wt.spotShadowMap,f.spotShadowMatrix.value=Wt.spotShadowMatrix,f.pointShadowMap.value=Wt.pointShadowMap,f.pointShadowMatrix.value=Wt.pointShadowMatrix);var d=n.program.getUniforms(),m=W.seqWithValue(d.seq,f);n.uniformsList=m}function T(t){t.side===Tr?Kt.disable(qt.CULL_FACE):Kt.enable(qt.CULL_FACE),Kt.setFlipSided(t.side===wr),!0===t.transparent?Kt.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):Kt.setBlending(Cr),Kt.setDepthFunc(t.depthFunc),Kt.setDepthTest(t.depthTest),Kt.setDepthWrite(t.depthWrite),Kt.setColorWrite(t.colorWrite),Kt.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function S(t,e,i,n){bt=0;var r=$t.get(i);if(Ut&&(zt||t!==vt)){var s=t===vt&&i.id===ft;jt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,s)}!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==Wt.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===jt.numPlanes&&r.numIntersection===jt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(w(i,e,n),i.needsUpdate=!1);var o=!1,a=!1,h=!1,l=r.program,u=l.getUniforms(),c=r.__webglShader.uniforms;if(l.id!==ut&&(qt.useProgram(l.program),ut=l.id,o=!0,a=!0,h=!0),i.id!==ft&&(ft=i.id,a=!0),o||t!==vt){if(u.set(qt,t,"projectionMatrix"),Qt.logarithmicDepthBuffer&&u.setValue(qt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==vt&&(vt=t,a=!0,h=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var p=u.map.cameraPosition;void 0!==p&&p.setValue(qt,Xt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&u.setValue(qt,"viewMatrix",t.matrixWorldInverse),u.set(qt,lt,"toneMappingExposure"),u.set(qt,lt,"toneMappingWhitePoint")}if(i.skinning){u.setOptional(qt,n,"bindMatrix"),u.setOptional(qt,n,"bindMatrixInverse");var f=n.skeleton;f&&(Qt.floatVertexTextures&&f.useVertexTexture?(u.set(qt,f,"boneTexture"),u.set(qt,f,"boneTextureWidth"),u.set(qt,f,"boneTextureHeight")):u.setOptional(qt,f,"boneMatrices"))}return a&&(i.lights&&I(c,h),e&&i.fog&&C(c,e),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshDepthMaterial)&&E(c,i),i.isLineBasicMaterial?M(c,i):i.isLineDashedMaterial?(M(c,i),P(c,i)):i.isPointsMaterial?A(c,i):i.isMeshLambertMaterial?O(c,i):i.isMeshPhongMaterial?L(c,i):i.isMeshPhysicalMaterial?R(c,i):i.isMeshStandardMaterial?k(c,i):i.isMeshDepthMaterial?i.displacementMap&&(c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&(c.opacity.value=i.opacity),W.upload(qt,r.uniformsList,c,lt)),u.set(qt,n,"modelViewMatrix"),u.set(qt,n,"normalMatrix"),u.setValue(qt,"modelMatrix",n.matrixWorld),l}function E(t,e){t.opacity.value=e.opacity,
t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function M(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function P(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function A(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Et,t.scale.value=.5*St,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function C(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function O(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function L(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function k(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function R(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,k(t,e)}function I(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function D(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r.castShadow&&(Wt.shadows[e++]=r)}Wt.shadows.length=e}function F(t,e){var i,n,r,s,o,a,h,l=0,c=0,p=0,f=e.matrixWorldInverse,d=0,m=0,v=0,g=0;for(i=0,n=t.length;i<n;i++)if(r=t[i],s=r.color,o=r.intensity,a=r.distance,h=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)l+=s.r*o,c+=s.g*o,p+=s.b*o;else if(r.isDirectionalLight){var y=ue.get(r);y.color.copy(r.color).multiplyScalar(r.intensity),y.direction.setFromMatrixPosition(r.matrixWorld),Xt.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub(Xt),y.direction.transformDirection(f),y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),Wt.directionalShadowMap[d]=h,Wt.directionalShadowMatrix[d]=r.shadow.matrix,Wt.directional[d++]=y}else if(r.isSpotLight){var y=ue.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(f),y.color.copy(s).multiplyScalar(o),y.distance=a,y.direction.setFromMatrixPosition(r.matrixWorld),Xt.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub(Xt),y.direction.transformDirection(f),y.coneCos=Math.cos(r.angle),y.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),Wt.spotShadowMap[v]=h,Wt.spotShadowMatrix[v]=r.shadow.matrix,Wt.spot[v++]=y}else if(r.isPointLight){var y=ue.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(f),y.color.copy(r.color).multiplyScalar(r.intensity),y.distance=r.distance,y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),Wt.pointShadowMap[m]=h,void 0===Wt.pointShadowMatrix[m]&&(Wt.pointShadowMatrix[m]=new u),Xt.setFromMatrixPosition(r.matrixWorld).negate(),Wt.pointShadowMatrix[m].identity().setPosition(Xt),Wt.point[m++]=y}else if(r.isHemisphereLight){var y=ue.get(r);y.direction.setFromMatrixPosition(r.matrixWorld),y.direction.transformDirection(f),y.direction.normalize(),y.skyColor.copy(r.color).multiplyScalar(o),y.groundColor.copy(r.groundColor).multiplyScalar(o),Wt.hemi[g++]=y}Wt.ambient[0]=l,Wt.ambient[1]=c,Wt.ambient[2]=p,Wt.directional.length=d,Wt.spot.length=v,Wt.point.length=m,Wt.hemi.length=g,Wt.hash=d+","+m+","+v+","+g+","+Wt.shadows.length}function N(){var t=bt;return Qt.maxTextures,bt+=1,t}function B(t){var e;if(t===ws)return qt.REPEAT;if(t===Ts)return qt.CLAMP_TO_EDGE;if(t===Ss)return qt.MIRRORED_REPEAT;if(t===Ms)return qt.NEAREST;if(t===Ps)return qt.NEAREST_MIPMAP_NEAREST;if(t===As)return qt.NEAREST_MIPMAP_LINEAR;if(t===Cs)return qt.LINEAR;if(t===Os)return qt.LINEAR_MIPMAP_NEAREST;if(t===Ls)return qt.LINEAR_MIPMAP_LINEAR;if(t===Rs)return qt.UNSIGNED_BYTE;if(t===zs)return qt.UNSIGNED_SHORT_4_4_4_4;if(t===Gs)return qt.UNSIGNED_SHORT_5_5_5_1;if(t===Vs)return qt.UNSIGNED_SHORT_5_6_5;if(t===Is)return qt.BYTE;if(t===Ds)return qt.SHORT;if(t===Fs)return qt.UNSIGNED_SHORT;if(t===Ns)return qt.INT;if(t===Bs)return qt.UNSIGNED_INT;if(t===js)return qt.FLOAT;if(t===Us&&null!==(e=Zt.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(t===Ws)return qt.ALPHA;if(t===Hs)return qt.RGB;if(t===qs)return qt.RGBA;if(t===Ys)return qt.LUMINANCE;if(t===Zs)return qt.LUMINANCE_ALPHA;if(t===Ks)return qt.DEPTH_COMPONENT;if(t===Js)return qt.DEPTH_STENCIL;if(t===Fr)return qt.FUNC_ADD;if(t===Nr)return qt.FUNC_SUBTRACT;if(t===Br)return qt.FUNC_REVERSE_SUBTRACT;if(t===zr)return qt.ZERO;if(t===Gr)return qt.ONE;if(t===Vr)return qt.SRC_COLOR;if(t===Xr)return qt.ONE_MINUS_SRC_COLOR;if(t===Wr)return qt.SRC_ALPHA;if(t===Hr)return qt.ONE_MINUS_SRC_ALPHA;if(t===qr)return qt.DST_ALPHA;if(t===Yr)return qt.ONE_MINUS_DST_ALPHA;if(t===Zr)return qt.DST_COLOR;if(t===Qr)return qt.ONE_MINUS_DST_COLOR;if(t===Kr)return qt.SRC_ALPHA_SATURATE;if((t===$s||t===to||t===eo||t===io)&&null!==(e=Zt.get("WEBGL_compressed_texture_s3tc"))){if(t===$s)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===to)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===eo)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===io)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===no||t===ro||t===so||t===oo)&&null!==(e=Zt.get("WEBGL_compressed_texture_pvrtc"))){if(t===no)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ro)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===so)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===oo)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ao&&null!==(e=Zt.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===jr||t===Ur)&&null!==(e=Zt.get("EXT_blend_minmax"))){if(t===jr)return e.MIN_EXT;if(t===Ur)return e.MAX_EXT}return t===Xs&&null!==(e=Zt.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}t=t||{};var j=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),U=void 0!==t.context?t.context:null,z=void 0!==t.alpha&&t.alpha,G=void 0===t.depth||t.depth,V=void 0===t.stencil||t.stencil,X=void 0!==t.antialias&&t.antialias,q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,Q=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,K=[],$=[],tt=-1,it=[],nt=-1,ot=new Float32Array(8),at=[],ht=[];this.domElement=j,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=us,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var lt=this,ut=null,ct=null,pt=null,ft=-1,mt="",vt=null,gt=new s,yt=null,_t=new s,bt=0,xt=new H(0),wt=0,Tt=j.width,St=j.height,Et=1,Mt=new s(0,0,Tt,St),Pt=!1,At=new s(0,0,Tt,St),Rt=new rt,jt=new oe,Ut=!1,zt=!1,Gt=new et,Vt=new u,Xt=new l,Wt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Ht={calls:0,vertices:0,faces:0,points:0};this.info={render:Ht,memory:{geometries:0,textures:0},programs:null};var qt;try{var Yt={alpha:z,depth:G,stencil:V,antialias:X,premultipliedAlpha:q,preserveDrawingBuffer:Q};if(null===(qt=U||j.getContext("webgl",Yt)||j.getContext("experimental-webgl",Yt)))throw null!==j.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===qt.getShaderPrecisionFormat&&(qt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),j.addEventListener("webglcontextlost",o,!1)}catch(t){}var Zt=new se(qt);Zt.get("WEBGL_depth_texture"),Zt.get("OES_texture_float"),Zt.get("OES_texture_float_linear"),Zt.get("OES_texture_half_float"),Zt.get("OES_texture_half_float_linear"),Zt.get("OES_standard_derivatives"),Zt.get("ANGLE_instanced_arrays"),Zt.get("OES_element_index_uint")&&(Ct.MaxIndex=4294967296);var Qt=new re(qt,Zt,t),Kt=new ne(qt,Zt,B),$t=new ie,ae=new ee(qt,Zt,Kt,$t,Qt,B,this.info),he=new te(qt,$t,this.info),le=new Jt(this,Qt),ue=new Bt;this.info.programs=le.programs;var ce=new Nt(qt,Zt,Ht),pe=new Ft(qt,Zt,Ht),fe=new Dt(-1,1,1,-1,0,1),de=new It,me=new Ot(new kt(2,2),new dt({depthTest:!1,depthWrite:!1,fog:!1})),ve=Io.cube,ge=new Ot(new Lt(5,5,5),new J({uniforms:ve.uniforms,vertexShader:ve.vertexShader,fragmentShader:ve.fragmentShader,side:wr,depthTest:!1,depthWrite:!1,fog:!1}));n(),this.context=qt,this.capabilities=Qt,this.extensions=Zt,this.properties=$t,this.state=Kt;var ye=new st(this,Wt,he,Qt);this.shadowMap=ye;var _e=new Z(this,at),be=new Y(this,ht);this.getContext=function(){return qt},this.getContextAttributes=function(){return qt.getContextAttributes()},this.forceContextLoss=function(){Zt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Qt.getMaxAnisotropy()},this.getPrecision=function(){return Qt.precision},this.getPixelRatio=function(){return Et},this.setPixelRatio=function(t){void 0!==t&&(Et=t,this.setSize(At.z,At.w,!1))},this.getSize=function(){return{width:Tt,height:St}},this.setSize=function(t,e,i){Tt=t,St=e,j.width=t*Et,j.height=e*Et,!1!==i&&(j.style.width=t+"px",j.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){Kt.viewport(At.set(t,e,i,n))},this.setScissor=function(t,e,i,n){Kt.scissor(Mt.set(t,e,i,n))},this.setScissorTest=function(t){Kt.setScissorTest(Pt=t)},this.getClearColor=function(){return xt},this.setClearColor=function(t,e){xt.set(t),wt=void 0!==e?e:1,i(xt.r,xt.g,xt.b,wt)},this.getClearAlpha=function(){return wt},this.setClearAlpha=function(t){wt=t,i(xt.r,xt.g,xt.b,wt)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=qt.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=qt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=qt.STENCIL_BUFFER_BIT),qt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=r,this.dispose=function(){it=[],nt=-1,$=[],tt=-1,j.removeEventListener("webglcontextlost",o,!1)},this.renderBufferImmediate=function(t,e,i){Kt.initAttributes();var n=$t.get(t);t.hasPositions&&!n.position&&(n.position=qt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=qt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=qt.createBuffer()),t.hasColors&&!n.color&&(n.color=qt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(qt.bindBuffer(qt.ARRAY_BUFFER,n.position),qt.bufferData(qt.ARRAY_BUFFER,t.positionArray,qt.DYNAMIC_DRAW),Kt.enableAttribute(r.position),qt.vertexAttribPointer(r.position,3,qt.FLOAT,!1,0,0)),t.hasNormals){if(qt.bindBuffer(qt.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&i.shading===Sr)for(var s=0,o=3*t.count;s<o;s+=9){var a=t.normalArray,h=(a[s+0]+a[s+3]+a[s+6])/3,l=(a[s+1]+a[s+4]+a[s+7])/3,u=(a[s+2]+a[s+5]+a[s+8])/3;a[s+0]=h,a[s+1]=l,a[s+2]=u,a[s+3]=h,a[s+4]=l,a[s+5]=u,a[s+6]=h,a[s+7]=l,a[s+8]=u}qt.bufferData(qt.ARRAY_BUFFER,t.normalArray,qt.DYNAMIC_DRAW),Kt.enableAttribute(r.normal),qt.vertexAttribPointer(r.normal,3,qt.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(qt.bindBuffer(qt.ARRAY_BUFFER,n.uv),qt.bufferData(qt.ARRAY_BUFFER,t.uvArray,qt.DYNAMIC_DRAW),Kt.enableAttribute(r.uv),qt.vertexAttribPointer(r.uv,2,qt.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==Mr&&(qt.bindBuffer(qt.ARRAY_BUFFER,n.color),qt.bufferData(qt.ARRAY_BUFFER,t.colorArray,qt.DYNAMIC_DRAW),Kt.enableAttribute(r.color),qt.vertexAttribPointer(r.color,3,qt.FLOAT,!1,0,0)),Kt.disableUnusedAttributes(),qt.drawArrays(qt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,s,o){T(r);var a=S(t,i,r,s),h=!1,l=n.id+"_"+a.id+"_"+r.wireframe;l!==mt&&(mt=l,h=!0);var u=s.morphTargetInfluences;if(void 0!==u){for(var c=[],d=0,m=u.length;d<m;d++){var v=u[d];c.push([v,d])}c.sort(f),c.length>8&&(c.length=8);for(var g=n.morphAttributes,d=0,m=c.length;d<m;d++){var v=c[d];if(ot[d]=v[0],0!==v[0]){var y=v[1];!0===r.morphTargets&&g.position&&n.addAttribute("morphTarget"+d,g.position[y]),!0===r.morphNormals&&g.normal&&n.addAttribute("morphNormal"+d,g.normal[y])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+d),!0===r.morphNormals&&n.removeAttribute("morphNormal"+d)}for(var d=c.length,_=ot.length;d<_;d++)ot[d]=0;a.getUniforms().setValue(qt,"morphTargetInfluences",ot),h=!0}var y=n.index,b=n.attributes.position,x=1;!0===r.wireframe&&(y=he.getWireframeAttribute(n),x=2);var w;null!==y?(w=pe,w.setIndex(y)):w=ce,h&&(p(r,a,n),null!==y&&qt.bindBuffer(qt.ELEMENT_ARRAY_BUFFER,he.getAttributeBuffer(y)));var E=0;null!==y?E=y.count:void 0!==b&&(E=b.count);var M=n.drawRange.start*x,P=n.drawRange.count*x,A=null!==o?o.start*x:0,C=null!==o?o.count*x:1/0,O=Math.max(M,A),L=Math.min(E,M+P,A+C)-1,k=Math.max(0,L-O+1);if(0!==k){if(s.isMesh)if(!0===r.wireframe)Kt.setLineWidth(r.wireframeLinewidth*e()),w.setMode(qt.LINES);else switch(s.drawMode){case uo:w.setMode(qt.TRIANGLES);break;case co:w.setMode(qt.TRIANGLE_STRIP);break;case po:w.setMode(qt.TRIANGLE_FAN)}else if(s.isLine){var R=r.linewidth;void 0===R&&(R=1),Kt.setLineWidth(R*e()),s.isLineSegments?w.setMode(qt.LINES):w.setMode(qt.LINE_STRIP)}else s.isPoints&&w.setMode(qt.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&w.renderInstances(n,O,k):w.render(O,k)}},this.render=function(t,e,n,r){if(void 0===e||!0===e.isCamera){mt="",ft=-1,vt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Vt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Rt.setFromMatrix(Vt),K.length=0,tt=-1,nt=-1,at.length=0,ht.length=0,zt=this.localClippingEnabled,Ut=jt.init(this.clippingPlanes,zt,e),b(t,e),$.length=tt+1,it.length=nt+1,!0===lt.sortObjects&&($.sort(d),it.sort(m)),Ut&&jt.beginShadows(),D(K),ye.render(t,e),F(K,e),Ut&&jt.endShadows(),Ht.calls=0,Ht.vertices=0,Ht.faces=0,Ht.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var s=t.background;if(null===s?i(xt.r,xt.g,xt.b,wt):s&&s.isColor&&(i(s.r,s.g,s.b,1),r=!0),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),s&&s.isCubeTexture?(de.projectionMatrix.copy(e.projectionMatrix),de.matrixWorld.extractRotation(e.matrixWorld),de.matrixWorldInverse.getInverse(de.matrixWorld),ge.material.uniforms.tCube.value=s,ge.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,ge.matrixWorld),he.update(ge),lt.renderBufferDirect(de,null,ge.geometry,ge.material,ge,null)):s&&s.isTexture&&(me.material.map=s,he.update(me),lt.renderBufferDirect(fe,null,me.geometry,me.material,me,null)),t.overrideMaterial){var o=t.overrideMaterial;x($,t,e,o),x(it,t,e,o)}else Kt.setBlending(Cr),x($,t,e),x(it,t,e);_e.render(t,e),be.render(t,e,_t),n&&ae.updateRenderTargetMipmap(n),Kt.setDepthTest(!0),Kt.setDepthWrite(!0),Kt.setColorWrite(!0)}},this.setFaceCulling=function(t,e){Kt.setCullFace(t),Kt.setFlipSided(e===yr)},this.allocTextureUnit=N,this.setTexture2D=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTarget&&(t||(t=!0),e=e.texture),ae.setTexture2D(e,i)}}(),this.setTexture=function(){var t=!1;return function(e,i){t||(t=!0),ae.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?ae.setTextureCube(e,i):ae.setTextureCubeDynamic(e,i)}}(),this.getCurrentRenderTarget=function(){return ct},this.setRenderTarget=function(t){ct=t,t&&void 0===$t.get(t).__webglFramebuffer&&ae.setupRenderTarget(t);var e,i=t&&t.isWebGLRenderTargetCube;if(t){var n=$t.get(t);e=i?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,gt.copy(t.scissor),yt=t.scissorTest,_t.copy(t.viewport)}else e=null,gt.copy(Mt).multiplyScalar(Et),yt=Pt,_t.copy(At).multiplyScalar(Et);if(pt!==e&&(qt.bindFramebuffer(qt.FRAMEBUFFER,e),pt=e),Kt.scissor(gt),Kt.setScissorTest(yt),Kt.viewport(_t),i){var r=$t.get(t.texture);qt.framebufferTexture2D(qt.FRAMEBUFFER,qt.COLOR_ATTACHMENT0,qt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,s){if(!1!==(t&&t.isWebGLRenderTarget)){var o=$t.get(t).__webglFramebuffer;if(o){var a=!1;o!==pt&&(qt.bindFramebuffer(qt.FRAMEBUFFER,o),a=!0);try{var h=t.texture,l=h.format,u=h.type;if(l!==qs&&B(l)!==qt.getParameter(qt.IMPLEMENTATION_COLOR_READ_FORMAT))return;if(!(u===Rs||B(u)===qt.getParameter(qt.IMPLEMENTATION_COLOR_READ_TYPE)||u===js&&(Zt.get("OES_texture_float")||Zt.get("WEBGL_color_buffer_float"))||u===Us&&Zt.get("EXT_color_buffer_half_float")))return;qt.checkFramebufferStatus(qt.FRAMEBUFFER)===qt.FRAMEBUFFER_COMPLETE&&e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&qt.readPixels(e,i,n,r,B(l),B(u),s)}finally{a&&qt.bindFramebuffer(qt.FRAMEBUFFER,pt)}}}}}function he(t,e){this.name="",this.color=new H(t),this.density=void 0!==e?e:25e-5}function le(t,e,i){this.name="",this.color=new H(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function ue(){lt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ce(t,e,i,n,r){lt.call(this),this.lensFlares=[],this.positionScreen=new l,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,n,r)}function pe(t){Q.call(this),this.type="SpriteMaterial",this.color=new H(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function fe(t){lt.call(this),this.type="Sprite",this.material=void 0!==t?t:new pe}function de(){lt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function me(t,e,i,r,s,o,a,h,l,u,c,p){n.call(this,null,o,a,h,l,u,r,s,c,p),this.image={data:t,width:e,height:i},this.magFilter=void 0!==l?l:Ms,this.minFilter=void 0!==u?u:Ms,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function ve(t,e,i){if(this.useVertexTexture=void 0===i||i,this.identityMatrix=new u,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=To.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new me(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,qs,js)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(var r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new u)}}function ge(t){lt.call(this),this.type="Bone",this.skin=t}function ye(t,e,i){Ot.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new u,this.bindMatrixInverse=new u;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,s,o=0,a=this.geometry.bones.length;o<a;++o)s=this.geometry.bones[o],r=new ge(this),n.push(r),r.name=s.name,r.position.fromArray(s.pos),r.quaternion.fromArray(s.rotq),void 0!==s.scl&&r.scale.fromArray(s.scl);for(var o=0,a=this.geometry.bones.length;o<a;++o)s=this.geometry.bones[o],-1!==s.parent&&null!==s.parent&&void 0!==n[s.parent]?n[s.parent].add(n[o]):this.add(n[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ve(n,void 0,i),this.matrixWorld)}function _e(t){Q.call(this),this.type="LineBasicMaterial",this.color=new H(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function be(t,e,i){if(1===i)return new xe(t,e);lt.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ct,this.material=void 0!==e?e:new _e({color:16777215*Math.random()})}function xe(t,e){be.call(this,t,e),this.type="LineSegments"}function we(t){Q.call(this),this.type="PointsMaterial",this.color=new H(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Te(t,e){lt.call(this),this.type="Points",this.geometry=void 0!==t?t:new Ct,this.material=void 0!==e?e:new we({color:16777215*Math.random()})}function Se(){lt.call(this),this.type="Group"}function Ee(t,e,i,r,s,o,a,h,l){function u(){requestAnimationFrame(u),t.readyState>=t.HAVE_CURRENT_DATA&&(c.needsUpdate=!0)}n.call(this,t,e,i,r,s,o,a,h,l),this.generateMipmaps=!1;var c=this;u()}function Me(t,e,i,r,s,o,a,h,l,u,c,p){n.call(this,null,o,a,h,l,u,r,s,c,p),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Pe(t,e,i,r,s,o,a,h,l){n.call(this,t,e,i,r,s,o,a,h,l),this.needsUpdate=!0}function Ae(t,e,i,r,s,o,a,h,l,u){if((u=void 0!==u?u:Ks)!==Ks&&u!==Js)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n.call(this,null,r,s,o,a,h,u,i,l),this.image={width:t,height:e},this.type=void 0!==i?i:Fs,this.magFilter=void 0!==a?a:Ms,this.minFilter=void 0!==h?h:Ms,this.flipY=!1,this.generateMipmaps=!1}function Ce(t){function e(t,e){return t-e}Ct.call(this);var i=[0,0],n={},r=["a","b","c"];if(t&&t.isGeometry){for(var s=t.vertices,o=t.faces,a=0,h=new Uint32Array(6*o.length),l=0,u=o.length;l<u;l++)for(var c=o[l],p=0;p<3;p++){i[0]=c[r[p]],i[1]=c[r[(p+1)%3]],i.sort(e);var f=i.toString();void 0===n[f]&&(h[2*a]=i[0],h[2*a+1]=i[1],n[f]=!0,a++)}for(var d=new Float32Array(2*a*3),l=0,u=a;l<u;l++)for(var p=0;p<2;p++){var m=s[h[2*l+p]],v=6*l+3*p;d[v+0]=m.x,d[v+1]=m.y,d[v+2]=m.z}this.addAttribute("position",new mt(d,3))}else if(t&&t.isBufferGeometry)if(null!==t.index){var g=t.index.array,s=t.attributes.position,y=t.groups,a=0;0===y.length&&t.addGroup(0,g.length);for(var h=new Uint32Array(2*g.length),_=0,b=y.length;_<b;++_)for(var x=y[_],w=x.start,T=x.count,l=w,S=w+T;l<S;l+=3)for(var p=0;p<3;p++){i[0]=g[l+p],i[1]=g[l+(p+1)%3],i.sort(e);var f=i.toString();void 0===n[f]&&(h[2*a]=i[0],h[2*a+1]=i[1],n[f]=!0,a++)}for(var d=new Float32Array(2*a*3),l=0,u=a;l<u;l++)for(var p=0;p<2;p++){var v=6*l+3*p,E=h[2*l+p];d[v+0]=s.getX(E),d[v+1]=s.getY(E),d[v+2]=s.getZ(E)}this.addAttribute("position",new mt(d,3))}else{for(var s=t.attributes.position.array,a=s.length/3,M=a/3,d=new Float32Array(2*a*3),l=0,u=M;l<u;l++)for(var p=0;p<3;p++){var v=18*l+6*p,P=9*l+3*p;d[v+0]=s[P],d[v+1]=s[P+1],d[v+2]=s[P+2];var E=9*l+(p+1)%3*3;d[v+3]=s[E],d[v+4]=s[E+1],d[v+5]=s[E+2]}this.addAttribute("position",new mt(d,3))}}function Oe(t,e,i){Ct.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,s,o,a,h=[],l=[],u=e+1;for(n=0;n<=i;n++)for(a=n/i,r=0;r<=e;r++)o=r/e,s=t(o,a),h.push(s.x,s.y,s.z),l.push(o,a);var c,p,f,d,m=[];for(n=0;n<i;n++)for(r=0;r<e;r++)c=n*u+r,p=n*u+r+1,f=(n+1)*u+r+1,d=(n+1)*u+r,m.push(c,p,d),m.push(p,f,d);this.setIndex((m.length>65535?wt:bt)(m,1)),this.addAttribute("position",Tt(h,3)),this.addAttribute("uv",Tt(l,2)),this.computeVertexNormals()}function Le(t,e,i){Mt.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Oe(t,e,i)),this.mergeVertices()}function ke(t,e,n,r){function s(t,e,i,n){var r,s,o=Math.pow(2,n),h=[];for(r=0;r<=o;r++){h[r]=[];var l=t.clone().lerp(i,r/o),u=e.clone().lerp(i,r/o),c=o-r;for(s=0;s<=c;s++)h[r][s]=0===s&&r===o?l:l.clone().lerp(u,s/c)}for(r=0;r<o;r++)for(s=0;s<2*(o-r)-1;s++){var p=Math.floor(s/2);s%2==0?(a(h[r][p+1]),a(h[r+1][p]),a(h[r][p])):(a(h[r][p+1]),a(h[r+1][p+1]),a(h[r+1][p]))}}function o(){for(var t=0;t<m.length;t+=6){var e=m[t+0],i=m[t+2],n=m[t+4],r=Math.max(e,i,n),s=Math.min(e,i,n);r>.9&&s<.1&&(e<.2&&(m[t+0]+=1),i<.2&&(m[t+2]+=1),n<.2&&(m[t+4]+=1))}}function a(t){d.push(t.x,t.y,t.z)}function h(e,i){var n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function u(){for(var t=new l,e=new l,n=new l,r=new l,s=new i,o=new i,a=new i,h=0,u=0;h<d.length;h+=9,u+=6){t.set(d[h+0],d[h+1],d[h+2]),e.set(d[h+3],d[h+4],d[h+5]),n.set(d[h+6],d[h+7],d[h+8]),s.set(m[u+0],m[u+1]),o.set(m[u+2],m[u+3]),a.set(m[u+4],m[u+5]),r.copy(t).add(e).add(n).divideScalar(3);var f=p(r);c(s,u+0,t,f),c(o,u+2,e,f),c(a,u+4,n,f)}}function c(t,e,i,n){n<0&&1===t.x&&(m[e]=t.x-1),0===i.x&&0===i.z&&(m[e]=n/2/Math.PI+.5)}function p(t){return Math.atan2(t.z,-t.x)}function f(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}Ct.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;var d=[],m=[];!function(t){for(var i=new l,n=new l,r=new l,o=0;o<e.length;o+=3)h(e[o+0],i),h(e[o+1],n),h(e[o+2],r),s(i,n,r,t)}(r),function(t){for(var e=new l,i=0;i<d.length;i+=3)e.x=d[i+0],e.y=d[i+1],e.z=d[i+2],e.normalize().multiplyScalar(t),d[i+0]=e.x,d[i+1]=e.y,d[i+2]=e.z}(n),function(){for(var t=new l,e=0;e<d.length;e+=3){t.x=d[e+0],t.y=d[e+1],t.z=d[e+2];var i=p(t)/2/Math.PI+.5,n=f(t)/Math.PI+.5;m.push(i,1-n)}u(),o()}(),this.addAttribute("position",Tt(d,3)),this.addAttribute("normal",Tt(d.slice(),3)),this.addAttribute("uv",Tt(m,2)),this.normalizeNormals(),this.boundingSphere=new et(new l,n)}function Re(t,e){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];ke.call(this,i,n,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ie(t,e){Mt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Re(t,e)),this.mergeVertices()}function De(t,e){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];ke.call(this,i,n,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Fe(t,e){Mt.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new De(t,e)),this.mergeVertices()}function Ne(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];ke.call(this,n,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Be(t,e){Mt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ne(t,e)),this.mergeVertices()}function je(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];ke.call(this,r,s,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ue(t,e){Mt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new je(t,e)),this.mergeVertices()}function ze(t,e,i,n){Mt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new ke(t,e,i,n)),this.mergeVertices()}function Ge(t,e,n,r,s){function o(i){var s=t.getPointAt(i/e),o=u.normals[i],a=u.binormals[i];for(p=0;p<=r;p++){var h=p/r*Math.PI*2,l=Math.sin(h),c=-Math.cos(h);d.x=c*o.x+l*a.x,d.y=c*o.y+l*a.y,d.z=c*o.z+l*a.z,d.normalize(),g.push(d.x,d.y,d.z),f.x=s.x+n*d.x,f.y=s.y+n*d.y,f.z=s.z+n*d.z,v.push(f.x,f.y,f.z)}}function a(){for(p=1;p<=e;p++)for(c=1;c<=r;c++){var t=(r+1)*(p-1)+(c-1),i=(r+1)*p+(c-1),n=(r+1)*p+c,s=(r+1)*(p-1)+c;_.push(t,i,s),_.push(i,n,s)}}function h(){for(c=0;c<=e;c++)for(p=0;p<=r;p++)m.x=c/e,m.y=p/r,y.push(m.x,m.y)}Ct.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:s},e=e||64,n=n||1,r=r||8,s=s||!1;var u=t.computeFrenetFrames(e,s);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var c,p,f=new l,d=new l,m=new i,v=[],g=[],y=[],_=[];!function(){for(c=0;c<e;c++)o(c);o(!1===s?e:0),h(),a()}(),this.setIndex((_.length>65535?wt:bt)(_,1)),this.addAttribute("position",Tt(v,3)),this.addAttribute("normal",Tt(g,3)),this.addAttribute("uv",Tt(y,2))}function Ve(t,e,i,n,r,s){Mt.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r};var o=new Ge(t,e,i,n,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Xe(t,e,n,r,s,o){function a(t,e,i,n,r){var s=Math.cos(t),o=Math.sin(t),a=i/e*t,h=Math.cos(a);r.x=n*(2+h)*.5*s,r.y=n*(2+h)*o*.5,r.z=n*Math.sin(a)*.5}Ct.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:s,q:o},t=t||100,e=e||40,n=Math.floor(n)||64,r=Math.floor(r)||8,s=s||2,o=o||3;var h,u,c=(r+1)*(n+1),p=r*n*2*3,f=new mt(new(p>65535?Uint32Array:Uint16Array)(p),1),d=new mt(new Float32Array(3*c),3),m=new mt(new Float32Array(3*c),3),v=new mt(new Float32Array(2*c),2),g=0,y=0,_=new l,b=new l,x=new i,w=new l,T=new l,S=new l,E=new l,M=new l;for(h=0;h<=n;++h){var P=h/n*s*Math.PI*2;for(a(P,s,o,t,w),a(P+.01,s,o,t,T),E.subVectors(T,w),M.addVectors(T,w),S.crossVectors(E,M),M.crossVectors(S,E),S.normalize(),M.normalize(),u=0;u<=r;++u){var A=u/r*Math.PI*2,C=-e*Math.cos(A),O=e*Math.sin(A);_.x=w.x+(C*M.x+O*S.x),_.y=w.y+(C*M.y+O*S.y),_.z=w.z+(C*M.z+O*S.z),d.setXYZ(g,_.x,_.y,_.z),b.subVectors(_,w).normalize(),m.setXYZ(g,b.x,b.y,b.z),x.x=h/n,x.y=u/r,v.setXY(g,x.x,x.y),g++}}for(u=1;u<=n;u++)for(h=1;h<=r;h++){var L=(r+1)*(u-1)+(h-1),k=(r+1)*u+(h-1),R=(r+1)*u+h,I=(r+1)*(u-1)+h;f.setX(y,L),y++,f.setX(y,k),y++,f.setX(y,I),y++,f.setX(y,k),y++,f.setX(y,R),y++,f.setX(y,I),y++}this.setIndex(f),this.addAttribute("position",d),this.addAttribute("normal",m),this.addAttribute("uv",v)}function We(t,e,i,n,r,s,o){Mt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:s},this.fromBufferGeometry(new Xe(t,e,i,n,r,s)),this.mergeVertices()}function He(t,e,i,n,r){Ct.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,
tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||100,e=e||40,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var s,o,a=(i+1)*(n+1),h=i*n*2*3,u=new(h>65535?Uint32Array:Uint16Array)(h),c=new Float32Array(3*a),p=new Float32Array(3*a),f=new Float32Array(2*a),d=0,m=0,v=0,g=new l,y=new l,_=new l;for(s=0;s<=i;s++)for(o=0;o<=n;o++){var b=o/n*r,x=s/i*Math.PI*2;y.x=(t+e*Math.cos(x))*Math.cos(b),y.y=(t+e*Math.cos(x))*Math.sin(b),y.z=e*Math.sin(x),c[d]=y.x,c[d+1]=y.y,c[d+2]=y.z,g.x=t*Math.cos(b),g.y=t*Math.sin(b),_.subVectors(y,g).normalize(),p[d]=_.x,p[d+1]=_.y,p[d+2]=_.z,f[m]=o/n,f[m+1]=s/i,d+=3,m+=2}for(s=1;s<=i;s++)for(o=1;o<=n;o++){var w=(n+1)*s+o-1,T=(n+1)*(s-1)+o-1,S=(n+1)*(s-1)+o,E=(n+1)*s+o;u[v]=w,u[v+1]=T,u[v+2]=E,u[v+3]=T,u[v+4]=S,u[v+5]=E,v+=6}this.setIndex(new mt(u,1)),this.addAttribute("position",new mt(c,3)),this.addAttribute("normal",new mt(p,3)),this.addAttribute("uv",new mt(f,2))}function qe(t,e,i,n,r){Mt.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new He(t,e,i,n,r))}function Ye(t,e){if(void 0===t)return void(t=[]);Mt.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeFaceNormals()}function Ze(t,e){e=e||{};var i=e.font;if(!1===(i&&i.isFont))return new Mt;var n=i.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Ye.call(this,n,e),this.type="TextGeometry"}function Qe(t,e,i,n,r,s,o){Ct.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,s=void 0!==s?s:0,o=void 0!==o?o:Math.PI;for(var a=s+o,h=(e+1)*(i+1),u=new mt(new Float32Array(3*h),3),c=new mt(new Float32Array(3*h),3),p=new mt(new Float32Array(2*h),2),f=0,d=[],m=new l,v=0;v<=i;v++){for(var g=[],y=v/i,_=0;_<=e;_++){var b=_/e,x=-t*Math.cos(n+b*r)*Math.sin(s+y*o),w=t*Math.cos(s+y*o),T=t*Math.sin(n+b*r)*Math.sin(s+y*o);m.set(x,w,T).normalize(),u.setXYZ(f,x,w,T),c.setXYZ(f,m.x,m.y,m.z),p.setXY(f,b,1-y),g.push(f),f++}d.push(g)}for(var S=[],v=0;v<i;v++)for(var _=0;_<e;_++){var E=d[v][_+1],M=d[v][_],P=d[v+1][_],A=d[v+1][_+1];(0!==v||s>0)&&S.push(E,M,A),(v!==i-1||a<Math.PI)&&S.push(M,P,A)}this.setIndex(new(u.count>65535?wt:bt)(S,1)),this.addAttribute("position",u),this.addAttribute("normal",c),this.addAttribute("uv",p),this.boundingSphere=new et(new l,t)}function Ke(t,e,i,n,r,s,o){Mt.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Qe(t,e,i,n,r,s,o))}function Je(t,e,n,r,s,o){Ct.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},t=t||20,e=e||50,s=void 0!==s?s:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var a,h,u,c=(n+1)*(r+1),p=n*r*2*3,f=new mt(new(p>65535?Uint32Array:Uint16Array)(p),1),d=new mt(new Float32Array(3*c),3),m=new mt(new Float32Array(3*c),3),v=new mt(new Float32Array(2*c),2),g=0,y=0,_=t,b=(e-t)/r,x=new l,w=new i;for(h=0;h<=r;h++){for(u=0;u<=n;u++)a=s+u/n*o,x.x=_*Math.cos(a),x.y=_*Math.sin(a),d.setXYZ(g,x.x,x.y,x.z),m.setXYZ(g,0,0,1),w.x=(x.x/e+1)/2,w.y=(x.y/e+1)/2,v.setXY(g,w.x,w.y),g++;_+=b}for(h=0;h<r;h++){var T=h*(n+1);for(u=0;u<n;u++){a=u+T;var S=a,E=a+n+1,M=a+n+2,P=a+1;f.setX(y,S),y++,f.setX(y,E),y++,f.setX(y,M),y++,f.setX(y,S),y++,f.setX(y,M),y++,f.setX(y,P),y++}}this.setIndex(f),this.addAttribute("position",d),this.addAttribute("normal",m),this.addAttribute("uv",v)}function $e(t,e,i,n,r,s){Mt.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new Je(t,e,i,n,r,s))}function ti(t,e,i,n){Mt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new kt(t,e,i,n))}function ei(t,e,n,r){Ct.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=To.clamp(r,0,2*Math.PI);var s,o,a,h=(e+1)*t.length,u=e*t.length*2*3,c=new mt(new(u>65535?Uint32Array:Uint16Array)(u),1),p=new mt(new Float32Array(3*h),3),f=new mt(new Float32Array(2*h),2),d=0,m=0,v=1/e,g=new l,y=new i;for(o=0;o<=e;o++){var _=n+o*v*r,b=Math.sin(_),x=Math.cos(_);for(a=0;a<=t.length-1;a++)g.x=t[a].x*b,g.y=t[a].y,g.z=t[a].x*x,p.setXYZ(d,g.x,g.y,g.z),y.x=o/e,y.y=a/(t.length-1),f.setXY(d,y.x,y.y),d++}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){s=a+o*t.length;var w=s,T=s+t.length,S=s+t.length+1,E=s+1;c.setX(m,w),m++,c.setX(m,T),m++,c.setX(m,E),m++,c.setX(m,T),m++,c.setX(m,S),m++,c.setX(m,E),m++}if(this.setIndex(c),this.addAttribute("position",p),this.addAttribute("uv",f),this.computeVertexNormals(),r===2*Math.PI){var M=this.attributes.normal.array,P=new l,A=new l,C=new l;for(s=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)P.x=M[a+0],P.y=M[a+1],P.z=M[a+2],A.x=M[s+a+0],A.y=M[s+a+1],A.z=M[s+a+2],C.addVectors(P,A).normalize(),M[a+0]=M[s+a+0]=C.x,M[a+1]=M[s+a+1]=C.y,M[a+2]=M[s+a+2]=C.z}}function ii(t,e,i,n){Mt.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new ei(t,e,i,n)),this.mergeVertices()}function ni(t,e){Mt.call(this),this.type="ShapeGeometry",!1===Array.isArray(t)&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()}function ri(t,e){function i(t,e){return t-e}Ct.call(this),e=void 0!==e?e:1;var n,r=Math.cos(To.DEG2RAD*e),s=[0,0],o={},a=["a","b","c"];t&&t.isBufferGeometry?(n=new Mt,n.fromBufferGeometry(t)):n=t.clone(),n.mergeVertices(),n.computeFaceNormals();for(var h=n.vertices,l=n.faces,u=0,c=l.length;u<c;u++)for(var p=l[u],f=0;f<3;f++){s[0]=p[a[f]],s[1]=p[a[(f+1)%3]],s.sort(i);var d=s.toString();void 0===o[d]?o[d]={vert1:s[0],vert2:s[1],face1:u,face2:void 0}:o[d].face2=u}var m=[];for(var d in o){var v=o[d];if(void 0===v.face2||l[v.face1].normal.dot(l[v.face2].normal)<=r){var g=h[v.vert1];m.push(g.x),m.push(g.y),m.push(g.z),g=h[v.vert2],m.push(g.x),m.push(g.y),m.push(g.z)}}this.addAttribute("position",new mt(new Float32Array(m),3))}function si(t,e,n,r,s,o,a,h){function u(n){var s,o,u,p=new i,f=new l,d=0,x=!0===n?t:e,S=!0===n?1:-1;for(o=_,s=1;s<=r;s++)v.setXYZ(_,0,w*S,0),g.setXYZ(_,0,S,0),p.x=.5,p.y=.5,y.setXY(_,p.x,p.y),_++;for(u=_,s=0;s<=r;s++){var E=s/r,M=E*h+a,P=Math.cos(M),A=Math.sin(M);f.x=x*A,f.y=w*S,f.z=x*P,v.setXYZ(_,f.x,f.y,f.z),g.setXYZ(_,0,S,0),p.x=.5*P+.5,p.y=.5*A*S+.5,y.setXY(_,p.x,p.y),_++}for(s=0;s<r;s++){var C=o+s,O=u+s;!0===n?(m.setX(b,O),b++,m.setX(b,O+1),b++,m.setX(b,C),b++):(m.setX(b,O+1),b++,m.setX(b,O),b++,m.setX(b,C),b++),d+=3}c.addGroup(T,d,!0===n?1:2),T+=d}Ct.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:h};var c=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,s=Math.floor(s)||1,o=void 0!==o&&o,a=void 0!==a?a:0,h=void 0!==h?h:2*Math.PI;var p=0;!1===o&&(t>0&&p++,e>0&&p++);var f=function(){var t=(r+1)*(s+1);return!1===o&&(t+=(r+1)*p+r*p),t}(),d=function(){var t=r*s*2*3;return!1===o&&(t+=r*p*3),t}(),m=new mt(new(d>65535?Uint32Array:Uint16Array)(d),1),v=new mt(new Float32Array(3*f),3),g=new mt(new Float32Array(3*f),3),y=new mt(new Float32Array(2*f),2),_=0,b=0,x=[],w=n/2,T=0;!function(){var i,o,u=new l,p=new l,f=0,d=(e-t)/n;for(o=0;o<=s;o++){var S=[],E=o/s,M=E*(e-t)+t;for(i=0;i<=r;i++){var P=i/r,A=P*h+a,C=Math.sin(A),O=Math.cos(A);p.x=M*C,p.y=-E*n+w,p.z=M*O,v.setXYZ(_,p.x,p.y,p.z),u.set(C,d,O).normalize(),g.setXYZ(_,u.x,u.y,u.z),y.setXY(_,P,1-E),S.push(_),_++}x.push(S)}for(i=0;i<r;i++)for(o=0;o<s;o++){var L=x[o][i],k=x[o+1][i],R=x[o+1][i+1],I=x[o][i+1];m.setX(b,L),b++,m.setX(b,k),b++,m.setX(b,I),b++,m.setX(b,k),b++,m.setX(b,R),b++,m.setX(b,I),b++,f+=6}c.addGroup(T,f,0),T+=f}(),!1===o&&(t>0&&u(!0),e>0&&u(!1)),this.setIndex(m),this.addAttribute("position",v),this.addAttribute("normal",g),this.addAttribute("uv",y)}function oi(t,e,i,n,r,s,o,a){Mt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new si(t,e,i,n,r,s,o,a)),this.mergeVertices()}function ai(t,e,i,n,r,s,o){oi.call(this,0,t,e,i,n,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:o}}function hi(t,e,i,n,r,s,o){si.call(this,0,t,e,i,n,r,s,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:o}}function li(t,e,i,n){Ct.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||50,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r=e+2,s=new Float32Array(3*r),o=new Float32Array(3*r),a=new Float32Array(2*r);o[2]=1,a[0]=.5,a[1]=.5;for(var h=0,u=3,c=2;h<=e;h++,u+=3,c+=2){var p=i+h/e*n;s[u]=t*Math.cos(p),s[u+1]=t*Math.sin(p),o[u+2]=1,a[c]=(s[u]/t+1)/2,a[c+1]=(s[u+1]/t+1)/2}for(var f=[],u=1;u<=e;u++)f.push(u,u+1,0);this.setIndex(new mt(new Uint16Array(f),1)),this.addAttribute("position",new mt(s,3)),this.addAttribute("normal",new mt(o,3)),this.addAttribute("uv",new mt(a,2)),this.boundingSphere=new et(new l,t)}function ui(t,e,i,n){Mt.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new li(t,e,i,n))}function ci(t,e,i,n,r,s){Mt.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new Lt(t,e,i,n,r,s)),this.mergeVertices()}function pi(){J.call(this,{uniforms:Oo.merge([Ro.lights,{opacity:{value:1}}]),vertexShader:Lo.shadow_vert,fragmentShader:Lo.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function fi(t){J.call(this,t),this.type="RawShaderMaterial"}function di(t){this.uuid=To.generateUUID(),this.type="MultiMaterial",this.materials=t instanceof Array?t:[],this.visible=!0}function mi(t){Q.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new H(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vi(t){mi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function gi(t){Q.call(this),this.type="MeshPhongMaterial",this.color=new H(16777215),this.specular=new H(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=os,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function yi(t){Q.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(t)}function _i(t){Q.call(this),this.type="MeshLambertMaterial",this.color=new H(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=os,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bi(t){Q.call(this),this.type="LineDashedMaterial",this.color=new H(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function xi(t,e,i){var n=this,r=!1,s=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,s,o),r=!0},this.itemEnd=function(t){s++,void 0!==n.onProgress&&n.onProgress(t,s,o),s===o&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function wi(t){this.manager=void 0!==t?t:Vo}function Ti(t){this.manager=void 0!==t?t:Vo,this._parser=null}function Si(t){this.manager=void 0!==t?t:Vo,this._parser=null}function Ei(t){this.manager=void 0!==t?t:Vo}function Mi(t){this.manager=void 0!==t?t:Vo}function Pi(t){this.manager=void 0!==t?t:Vo}function Ai(t,e){lt.call(this),this.type="Light",this.color=new H(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ci(t,e,i){Ai.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(lt.DefaultUp),this.updateMatrix(),this.groundColor=new H(e)}function Oi(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new u}function Li(){Oi.call(this,new It(50,1,.5,500))}function ki(t,e,i,n,r,s){Ai.call(this,t,e),this.type="SpotLight",this.position.copy(lt.DefaultUp),this.updateMatrix(),this.target=new lt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new Li}function Ri(t,e,i,n){Ai.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Oi(new It(90,1,.5,500))}function Ii(t){Oi.call(this,new Dt(-5,5,5,-5,.5,500))}function Di(t,e){Ai.call(this,t,e),this.type="DirectionalLight",this.position.copy(lt.DefaultUp),this.updateMatrix(),this.target=new lt,this.shadow=new Ii}function Fi(t,e){Ai.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Ni(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Bi(t,e,i,n){Ni.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ji(t,e,i,n){Ni.call(this,t,e,i,n)}function Ui(t,e,i,n){Ni.call(this,t,e,i,n)}function zi(t,e,i,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Wo.convertArray(e,this.TimeBufferType),this.values=Wo.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Gi(t,e,i,n){zi.call(this,t,e,i,n)}function Vi(t,e,i,n){Ni.call(this,t,e,i,n)}function Xi(t,e,i,n){zi.call(this,t,e,i,n)}function Wi(t,e,i,n){zi.call(this,t,e,i,n)}function Hi(t,e,i,n){zi.call(this,t,e,i,n)}function qi(t,e,i){zi.call(this,t,e,i)}function Yi(t,e,i,n){zi.call(this,t,e,i,n)}function Zi(t,e,i,n){zi.apply(this,arguments)}function Qi(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=To.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Ki(t){this.manager=void 0!==t?t:Vo,this.textures={}}function Ji(t){this.manager=void 0!==t?t:Vo}function $i(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function tn(t){"boolean"==typeof t&&(t=void 0),this.manager=void 0!==t?t:Vo,this.withCredentials=!1}function en(t){this.manager=void 0!==t?t:Vo,this.texturePath=""}function nn(){}function rn(t,e){this.v1=t,this.v2=e}function sn(){this.curves=[],this.autoClose=!1}function on(t,e,i,n,r,s,o,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a||0}function an(t){this.points=void 0===t?[]:t}function hn(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function ln(t,e,i){this.v0=t,this.v1=e,this.v2=i}function un(){cn.apply(this,arguments),this.holes=[]}function cn(t){sn.call(this),this.currentPoint=new i,t&&this.fromPoints(t)}function pn(){this.subPaths=[],this.currentPath=null}function fn(t){this.data=t}function dn(t){this.manager=void 0!==t?t:Vo}function mn(){return void 0===Zo&&(Zo=new(window.AudioContext||window.webkitAudioContext)),Zo}function vn(t){this.manager=void 0!==t?t:Vo}function gn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new It,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new It,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function yn(t,e,i){lt.call(this),this.type="CubeCamera";var n=new It(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new l(1,0,0)),this.add(n);var r=new It(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new l(-1,0,0)),this.add(r);var s=new It(90,1,t,e);s.up.set(0,0,1),s.lookAt(new l(0,1,0)),this.add(s);var o=new It(90,1,t,e);o.up.set(0,0,-1),o.lookAt(new l(0,-1,0)),this.add(o);var h=new It(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new l(0,0,1)),this.add(h);var u=new It(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new l(0,0,-1)),this.add(u);var c={format:Hs,magFilter:Cs,minFilter:Cs};this.renderTarget=new a(i,i,c),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,a=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,n,i),i.activeCubeFace=1,t.render(e,r,i),i.activeCubeFace=2,t.render(e,s,i),i.activeCubeFace=3,t.render(e,o,i),i.activeCubeFace=4,t.render(e,h,i),i.texture.generateMipmaps=a,i.activeCubeFace=5,t.render(e,u,i),t.setRenderTarget(null)}}function _n(){lt.call(this),this.type="AudioListener",this.context=mn(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function bn(t){lt.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function xn(t){bn.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function wn(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Tn(t,e,i){this.binding=t,this.valueSize=i;var n,r=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Sn(t,e,i){this.path=e,this.parsedPath=i||Sn.parseTrackName(e),this.node=Sn.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function En(t){this.uuid=To.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Mn(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null;for(var n=e.tracks,r=n.length,s=new Array(r),o={endingStart:lo,endingEnd:lo},a=0;a!==r;++a){var h=n[a].createInterpolant(null);s[a]=h,h.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ho,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Pn(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function An(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function Cn(){Ct.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function On(t,e,i,n){this.uuid=To.generateUUID(),this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Ln(t,e){this.uuid=To.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function kn(t,e,i){Ln.call(this,t,e),this.meshPerAttribute=i||1}function Rn(t,e,i){mt.call(this,t,e),this.meshPerAttribute=i||1}function In(t,e,i,n){this.ray=new ot(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Dn(t,e){return t.distance-e.distance}function Fn(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n))for(var r=t.children,s=0,o=r.length;s<o;s++)Fn(r[s],e,i,!0)}function Nn(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Bn(t){function e(t,e,i,n,r,s,o){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*o+(-3*(e-i)-2*a-h)*s+a*r+e}this.points=t;var i,n,r,s,o,a,h,u,c,p=[],f={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return i=(this.points.length-1)*t,n=Math.floor(i),r=i-n,p[0]=0===n?n:n-1,p[1]=n,p[2]=n>this.points.length-2?this.points.length-1:n+1,p[3]=n>this.points.length-3?this.points.length-1:n+2,a=this.points[p[0]],h=this.points[p[1]],u=this.points[p[2]],c=this.points[p[3]],s=r*r,o=r*s,f.x=e(a.x,h.x,u.x,c.x,r,s,o),f.y=e(a.y,h.y,u.y,c.y,r,s,o),f.z=e(a.z,h.z,u.z,c.z,r,s,o),f},this.getControlPointsArray=function(){var t,e,i=this.points.length,n=[];for(t=0;t<i;t++)e=this.points[t],n[t]=[e.x,e.y,e.z];return n},this.getLength=function(t){var e,i,n,r,s=0,o=0,a=0,h=new l,u=new l,c=[],p=0;for(c[0]=0,t||(t=100),n=this.points.length*t,h.copy(this.points[0]),e=1;e<n;e++)i=e/n,r=this.getPoint(i),u.copy(r),p+=u.distanceTo(h),h.copy(r),s=(this.points.length-1)*i,(o=Math.floor(s))!==a&&(c[o]=p,a=o);return c[c.length]=p,{chunks:c,total:p}},this.reparametrizeByArcLength=function(t){var e,i,n,r,s,o,a,h,u=[],c=new l,p=this.getLength();for(u.push(c.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(o=p.chunks[e]-p.chunks[e-1],a=Math.ceil(t*o/p.total),r=(e-1)/(this.points.length-1),s=e/(this.points.length-1),i=1;i<a-1;i++)n=r+i*(1/a)*(s-r),h=this.getPoint(n),u.push(c.copy(h).clone());u.push(c.copy(this.points[e]).clone())}this.points=u}}function jn(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Un(t,e){Ot.call(this,t,e),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,n=i-1,r=i/1;this.createAnimation("__default",0,n,r),this.setAnimationWeight("__default",1)}function zn(t){lt.call(this),this.material=t,this.render=function(t){}}function Gn(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,s=void 0!==n?n:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=3*a.faces.length:a&&a.isBufferGeometry&&(o=a.attributes.normal.count);var h=new Ct,l=new Tt(2*o*3,3);h.addAttribute("position",l),xe.call(this,h,new _e({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Vn(t){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new Ct,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,r=1;n<32;n++,r++){var s=n/32*Math.PI*2,o=r/32*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(o),Math.sin(o),1)}e.addAttribute("position",new Tt(i,3));var a=new _e({fog:!1});this.cone=new xe(e,a),this.add(this.cone),this.update()}function Xn(t){this.bones=this.getBoneList(t);for(var e=new Mt,i=0;i<this.bones.length;i++){var n=this.bones[i];n.parent&&n.parent.isBone&&(e.vertices.push(new l),e.vertices.push(new l),e.colors.push(new H(0,0,1)),e.colors.push(new H(0,1,0)))}e.dynamic=!0;var r=new _e({vertexColors:Ar,depthTest:!1,depthWrite:!1,transparent:!0});xe.call(this,e,r),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Wn(t,e){this.light=t,this.light.updateMatrixWorld();var i=new Qe(e,4,2),n=new dt({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),Ot.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Hn(t,e){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new H,new H];var i=new Ke(e,4,2);i.rotateX(-Math.PI/2);for(var n=0;n<8;n++)i.faces[n].color=this.colors[n<4?0:1];var r=new dt({vertexColors:Pr,wireframe:!0});this.lightSphere=new Ot(i,r),this.add(this.lightSphere),this.update()}function qn(t,e,i,n){e=e||1,i=new H(void 0!==i?i:4473924),n=new H(void 0!==n?n:8947848);for(var r=e/2,s=2*t/e,o=[],a=[],h=0,l=0,u=-t;h<=e;h++,u+=s){o.push(-t,0,u,t,0,u),o.push(u,0,-t,u,0,t);var c=h===r?i:n;c.toArray(a,l),l+=3,c.toArray(a,l),l+=3,c.toArray(a,l),l+=3,c.toArray(a,l),l+=3}var p=new Ct;p.addAttribute("position",new Tt(o,3)),p.addAttribute("color",new Tt(a,3));var f=new _e({vertexColors:Ar});xe.call(this,p,f)}function Yn(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,s=void 0!==n?n:1,o=0,a=this.object.geometry;a&&a.isGeometry&&(o=a.faces.length);var h=new Ct,l=new Tt(2*o*3,3);h.addAttribute("position",l),xe.call(this,h,new _e({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Zn(t,e){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var i=new Ct;i.addAttribute("position",new Tt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var n=new _e({fog:!1});this.add(new be(i,n)),i=new Ct,i.addAttribute("position",new Tt([0,0,0,0,0,1],3)),this.add(new be(i,n)),this.update()}function Qn(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){n.vertices.push(new l),n.colors.push(new H(e)),void 0===s[t]&&(s[t]=[]),s[t].push(n.vertices.length-1)}var n=new Mt,r=new _e({color:16777215,vertexColors:Pr}),s={};e("n1","n2",16755200),e("n2","n4",16755200),e("n4","n3",16755200),e("n3","n1",16755200),e("f1","f2",16755200),e("f2","f4",16755200),e("f4","f3",16755200),e("f3","f1",16755200),e("n1","f1",16755200),e("n2","f2",16755200),e("n3","f3",16755200),e("n4","f4",16755200),e("p","n1",16711680),e("p","n2",16711680),e("p","n3",16711680),e("p","n4",16711680),e("u1","u2",43775),e("u2","u3",43775),e("u3","u1",43775),e("c","t",16777215),e("p","c",3355443),e("cn1","cn2",3355443),e("cn3","cn4",3355443),e("cf1","cf2",3355443),e("cf3","cf4",3355443),xe.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Kn(t,e){var i=void 0!==e?e:8947848;this.object=t,this.box=new tt,Ot.call(this,new ci(1,1,1),new dt({color:i,wireframe:!0}))}function Jn(t,e){void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Ct;r.setIndex(new mt(i,1)),r.addAttribute("position",new mt(n,3)),xe.call(this,r,new _e({color:e})),void 0!==t&&this.update(t)}function $n(t,e,i,n,r,s){lt.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===s&&(s=.2*r),this.position.copy(e),this.line=new be(Qo,new _e({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ot(Ko,new dt({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,s)}function tr(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new Ct;n.addAttribute("position",new mt(e,3)),n.addAttribute("color",new mt(i,3));var r=new _e({vertexColors:Ar});xe.call(this,n,r)}function er(t){Jo.call(this,t),this.type="catmullrom",this.closed=!0}function ir(t,e,i,n,r,s){on.call(this,t,e,i,i,n,r,s)}function nr(t,e,i,n,r,s,o){return new ft(t,e,i,r,s,o)}function rr(t,e){return new Te(t,e)}function sr(t,e){return new Te(t,e)}function or(t){return new we(t)}function ar(t){return new we(t)}function hr(t){return new we(t)}function lr(t,e,i){return new l(t,e,i)}function ur(t,e){return new xe(new ri(t.geometry),new _e({color:void 0!==e?e:16777215}))}function cr(t,e){return new xe(new Ce(t.geometry),new _e({color:void 0!==e?e:16777215}))}function pr(){this.projectVector=function(t,e){t.project(e)},this.unprojectVector=function(t,e){t.unproject(e)},this.pickingRay=function(t,e){}}function fr(){this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}(),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;var n=[],r=0,s=i.length;for(r=0;r<s;r++)n[r]=i[r];for(r=0;r<s;r++)n[r].call(this,t)}}}});var dr={LEFT:0,MIDDLE:1,RIGHT:2},mr=0,vr=1,gr=2,yr=0,_r=1,br=2,xr=0,wr=1,Tr=2,Sr=1,Er=2,Mr=0,Pr=1,Ar=2,Cr=0,Or=1,Lr=2,kr=3,Rr=4,Ir=5,Dr={NoBlending:Cr,NormalBlending:Or,AdditiveBlending:Lr,SubtractiveBlending:kr,MultiplyBlending:Rr,CustomBlending:Ir
},Fr=100,Nr=101,Br=102,jr=103,Ur=104,zr=200,Gr=201,Vr=202,Xr=203,Wr=204,Hr=205,qr=206,Yr=207,Zr=208,Qr=209,Kr=210,Jr=0,$r=1,ts=2,es=3,is=4,ns=5,rs=6,ss=7,os=0,as=1,hs=2,ls=0,us=1,cs=2,ps=3,fs=4,ds=301,ms=302,vs=303,gs=304,ys=305,_s=306,bs=307,xs={UVMapping:300,CubeReflectionMapping:ds,CubeRefractionMapping:ms,EquirectangularReflectionMapping:vs,EquirectangularRefractionMapping:gs,SphericalReflectionMapping:ys,CubeUVReflectionMapping:_s,CubeUVRefractionMapping:bs},ws=1e3,Ts=1001,Ss=1002,Es={RepeatWrapping:ws,ClampToEdgeWrapping:Ts,MirroredRepeatWrapping:Ss},Ms=1003,Ps=1004,As=1005,Cs=1006,Os=1007,Ls=1008,ks={NearestFilter:Ms,NearestMipMapNearestFilter:Ps,NearestMipMapLinearFilter:As,LinearFilter:Cs,LinearMipMapNearestFilter:Os,LinearMipMapLinearFilter:Ls},Rs=1009,Is=1010,Ds=1011,Fs=1012,Ns=1013,Bs=1014,js=1015,Us=1016,zs=1017,Gs=1018,Vs=1019,Xs=1020,Ws=1021,Hs=1022,qs=1023,Ys=1024,Zs=1025,Qs=qs,Ks=1026,Js=1027,$s=2001,to=2002,eo=2003,io=2004,no=2100,ro=2101,so=2102,oo=2103,ao=2151,ho=2201,lo=2400,uo=0,co=1,po=2,fo=3e3,mo=3001,vo=3007,go=3002,yo=3004,_o=3005,bo=3006,xo=3200,wo=3201,To={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},random16:function(){return Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*To.DEG2RAD},radToDeg:function(t){return t*To.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*i-s*n+t.x,this.y=r*n+s*i+t.y,this}},n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=300,n.prototype={constructor:n,isTexture:!0,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=To.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),e.image=i.uuid}return t.textures[this.uuid]=e,e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case ws:t.x=t.x-Math.floor(t.x);break;case Ts:t.x=t.x<0?0:1;break;case Ss:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ws:t.y=t.y-Math.floor(t.y);break;case Ts:t.y=t.y<0?0:1;break;case Ss:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(n.prototype,e.prototype);var So=0;s.prototype={constructor:s,isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,s=t.elements,o=s[0],a=s[4],h=s[8],l=s[1],u=s[5],c=s[9],p=s[2],f=s[6],d=s[10];if(Math.abs(a-l)<.01&&Math.abs(h-p)<.01&&Math.abs(c-f)<.01){if(Math.abs(a+l)<.1&&Math.abs(h+p)<.1&&Math.abs(c+f)<.1&&Math.abs(o+u+d-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,v=(u+1)/2,g=(d+1)/2,y=(a+l)/4,_=(h+p)/4,b=(c+f)/4;return m>v&&m>g?m<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(m),n=y/i,r=_/i):v>g?v<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(v),i=y/n,r=b/n):g<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(g),i=_/r,n=b/r),this.set(i,n,r,e),this}var x=Math.sqrt((f-c)*(f-c)+(h-p)*(h-p)+(l-a)*(l-a));return Math.abs(x)<.001&&(x=1),this.x=(f-c)/x,this.y=(h-p)/x,this.z=(l-a)/x,this.w=Math.acos((o+u+d-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new s,e=new s),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},Object.assign(o.prototype,e.prototype,{isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.isWebGLRenderTargetCube=!0,h.prototype={constructor:h,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),s=Math.sin(t._x/2),o=Math.sin(t._y/2),a=Math.sin(t._z/2),h=t.order;return"XYZ"===h?(this._x=s*n*r+i*o*a,this._y=i*o*r-s*n*a,this._z=i*n*a+s*o*r,this._w=i*n*r-s*o*a):"YXZ"===h?(this._x=s*n*r+i*o*a,this._y=i*o*r-s*n*a,this._z=i*n*a-s*o*r,this._w=i*n*r+s*o*a):"ZXY"===h?(this._x=s*n*r-i*o*a,this._y=i*o*r+s*n*a,this._z=i*n*a+s*o*r,this._w=i*n*r-s*o*a):"ZYX"===h?(this._x=s*n*r-i*o*a,this._y=i*o*r+s*n*a,this._z=i*n*a-s*o*r,this._w=i*n*r+s*o*a):"YZX"===h?(this._x=s*n*r+i*o*a,this._y=i*o*r+s*n*a,this._z=i*n*a-s*o*r,this._w=i*n*r-s*o*a):"XZY"===h&&(this._x=s*n*r-i*o*a,this._y=i*o*r-s*n*a,this._z=i*n*a+s*o*r,this._w=i*n*r+s*o*a),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],s=i[8],o=i[1],a=i[5],h=i[9],l=i[2],u=i[6],c=i[10],p=n+a+c;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(u-h)*e,this._y=(s-l)*e,this._z=(o-r)*e):n>a&&n>c?(e=2*Math.sqrt(1+n-a-c),this._w=(u-h)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+l)/e):a>c?(e=2*Math.sqrt(1+a-n-c),this._w=(s-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(h+u)/e):(e=2*Math.sqrt(1+c-n-a),this._w=(o-r)/e,this._x=(s+l)/e,this._y=(h+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(i,n){return void 0===t&&(t=new l),e=i.dot(n)+1,e<1e-6?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,s=t._w,o=e._x,a=e._y,h=e._z,l=e._w;return this._x=i*l+s*o+n*h-r*a,this._y=n*l+s*a+r*o-i*h,this._z=r*l+s*h+i*a-n*o,this._w=s*l-i*o-n*a-r*h,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,s=this._w,o=s*t._w+i*t._x+n*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;var a=Math.sqrt(1-o*o);if(Math.abs(a)<.001)return this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var h=Math.atan2(a,o),l=Math.sin((1-e)*h)/a,u=Math.sin(e*h)/a;return this._w=s*l+this._w*u,this._x=i*l+this._x*u,this._y=n*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(h,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,s,o){var a=i[n+0],h=i[n+1],l=i[n+2],u=i[n+3],c=r[s+0],p=r[s+1],f=r[s+2],d=r[s+3];if(u!==d||a!==c||h!==p||l!==f){var m=1-o,v=a*c+h*p+l*f+u*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var x=o*g;if(a=a*m+c*x,h=h*m+p*x,l=l*m+f*x,u=u*m+d*x,m===1-o){var w=1/Math.sqrt(a*a+h*h+l*l+u*u);a*=w,h*=w,l*=w,u*=w}}t[e]=a,t[e+1]=h,t[e+2]=l,t[e+3]=u}}),l.prototype={constructor:l,isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e&&e.isEuler,void 0===t&&(t=new h),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new h),this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14],this},applyProjection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,s=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*s,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*n-o*i,l=a*i+o*e-r*n,u=a*n+r*i-s*e,c=-r*e-s*i-o*n;return this.x=h*a+c*-r+l*-o-u*-s,this.y=l*a+c*-s+u*-r-h*-o,this.z=u*a+c*-o+h*-s-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new l,e=new l),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){if(void 0!==e)return this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=n*a-r*o,this.y=r*s-i*a,this.z=i*o-n*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new l),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new l),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(To.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){var i=t;t=e,e=i}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,i){return void 0===i&&(i=0),e=e*t.itemSize+i,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},u.prototype={constructor:u,isMatrix4:!0,set:function(t,e,i,n,r,s,o,a,h,l,u,c,p,f,d,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=r,v[5]=s,v[9]=o,v[13]=a,v[2]=h,v[6]=l,v[10]=u,v[14]=c,v[3]=p,v[7]=f,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new l);var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),s=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*s,i[5]=n[5]*s,i[6]=n[6]*s,i[8]=n[8]*o,i[9]=n[9]*o,i[10]=n[10]*o,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler;var e=this.elements,i=t.x,n=t.y,r=t.z,s=Math.cos(i),o=Math.sin(i),a=Math.cos(n),h=Math.sin(n),l=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var c=s*l,p=s*u,f=o*l,d=o*u;e[0]=a*l,e[4]=-a*u,e[8]=h,e[1]=p+f*h,e[5]=c-d*h,e[9]=-o*a,e[2]=d-c*h,e[6]=f+p*h,e[10]=s*a}else if("YXZ"===t.order){var m=a*l,v=a*u,g=h*l,y=h*u;e[0]=m+y*o,e[4]=g*o-v,e[8]=s*h,e[1]=s*u,e[5]=s*l,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=s*a}else if("ZXY"===t.order){var m=a*l,v=a*u,g=h*l,y=h*u;e[0]=m-y*o,e[4]=-s*u,e[8]=g+v*o,e[1]=v+g*o,e[5]=s*l,e[9]=y-m*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){var c=s*l,p=s*u,f=o*l,d=o*u;e[0]=a*l,e[4]=f*h-p,e[8]=c*h+d,e[1]=a*u,e[5]=d*h+c,e[9]=p*h-f,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var _=s*a,b=s*h,x=o*a,w=o*h;e[0]=a*l,e[4]=w-_*u,e[8]=x*u+b,e[1]=u,e[5]=s*l,e[9]=-o*l,e[2]=-h*l,e[6]=b*u+x,e[10]=_-w*u}else if("XZY"===t.order){var _=s*a,b=s*h,x=o*a,w=o*h;e[0]=a*l,e[4]=-u,e[8]=h*l,e[1]=_*u+w,e[5]=s*l,e[9]=b*u-x,e[2]=x*u-b,e[6]=o*l,e[10]=w*u+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,s=t.w,o=i+i,a=n+n,h=r+r,l=i*o,u=i*a,c=i*h,p=n*a,f=n*h,d=r*h,m=s*o,v=s*a,g=s*h;return e[0]=1-(p+d),e[4]=u-g,e[8]=c+v,e[1]=u+g,e[5]=1-(l+d),e[9]=f-m,e[2]=c-v,e[6]=f+m,e[10]=1-(l+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,i;return function(n,r,s){void 0===t&&(t=new l,e=new l,i=new l);var o=this.elements;return i.subVectors(n,r).normalize(),0===i.lengthSq()&&(i.z=1),t.crossVectors(s,i).normalize(),0===t.lengthSq()&&(i.z+=1e-4,t.crossVectors(s,i).normalize()),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,s=i[0],o=i[4],a=i[8],h=i[12],l=i[1],u=i[5],c=i[9],p=i[13],f=i[2],d=i[6],m=i[10],v=i[14],g=i[3],y=i[7],_=i[11],b=i[15],x=n[0],w=n[4],T=n[8],S=n[12],E=n[1],M=n[5],P=n[9],A=n[13],C=n[2],O=n[6],L=n[10],k=n[14],R=n[3],I=n[7],D=n[11],F=n[15];return r[0]=s*x+o*E+a*C+h*R,r[4]=s*w+o*M+a*O+h*I,r[8]=s*T+o*P+a*L+h*D,r[12]=s*S+o*A+a*k+h*F,r[1]=l*x+u*E+c*C+p*R,r[5]=l*w+u*M+c*O+p*I,r[9]=l*T+u*P+c*L+p*D,r[13]=l*S+u*A+c*k+p*F,r[2]=f*x+d*E+m*C+v*R,r[6]=f*w+d*M+m*O+v*I,r[10]=f*T+d*P+m*L+v*D,r[14]=f*S+d*A+m*k+v*F,r[3]=g*x+y*E+_*C+b*R,r[7]=g*w+y*M+_*O+b*I,r[11]=g*T+y*P+_*L+b*D,r[15]=g*S+y*A+_*k+b*F,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,i,n){void 0===t&&(t=new l),void 0===i&&(i=0),void 0===n&&(n=e.length);for(var r=0,s=i;r<n;r+=3,s+=3)t.fromArray(e,s),t.applyMatrix4(this),t.toArray(e,s);return e}}(),applyToBuffer:function(){var t;return function(e,i,n){void 0===t&&(t=new l),void 0===i&&(i=0),void 0===n&&(n=e.length/e.itemSize);for(var r=0,s=i;r<n;r++,s++)t.x=e.getX(s),t.y=e.getY(s),t.z=e.getZ(s),t.applyMatrix4(this),e.setXYZ(s,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],s=t[1],o=t[5],a=t[9],h=t[13],l=t[2],u=t[6],c=t[10],p=t[14];return t[3]*(+r*a*u-n*h*u-r*o*c+i*h*c+n*o*p-i*a*p)+t[7]*(+e*a*p-e*h*c+r*s*c-n*s*p+n*h*l-r*a*l)+t[11]*(+e*h*u-e*o*p-r*s*u+i*s*p+r*o*l-i*h*l)+t[15]*(-n*o*l-e*a*u+e*o*c+n*s*u-i*s*c+i*a*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new l),t.setFromMatrixColumn(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){
var i=this.elements,n=t.elements,r=n[0],s=n[1],o=n[2],a=n[3],h=n[4],l=n[5],u=n[6],c=n[7],p=n[8],f=n[9],d=n[10],m=n[11],v=n[12],g=n[13],y=n[14],_=n[15],b=f*y*c-g*d*c+g*u*m-l*y*m-f*u*_+l*d*_,x=v*d*c-p*y*c-v*u*m+h*y*m+p*u*_-h*d*_,w=p*g*c-v*f*c+v*l*m-h*g*m-p*l*_+h*f*_,T=v*f*u-p*g*u-v*l*d+h*g*d+p*l*y-h*f*y,S=r*b+s*x+o*w+a*T;if(0===S){if(!0===e)throw new Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()}var E=1/S;return i[0]=b*E,i[1]=(g*d*a-f*y*a-g*o*m+s*y*m+f*o*_-s*d*_)*E,i[2]=(l*y*a-g*u*a+g*o*c-s*y*c-l*o*_+s*u*_)*E,i[3]=(f*u*a-l*d*a-f*o*c+s*d*c+l*o*m-s*u*m)*E,i[4]=x*E,i[5]=(p*y*a-v*d*a+v*o*m-r*y*m-p*o*_+r*d*_)*E,i[6]=(v*u*a-h*y*a-v*o*c+r*y*c+h*o*_-r*u*_)*E,i[7]=(h*d*a-p*u*a+p*o*c-r*d*c-h*o*m+r*u*m)*E,i[8]=w*E,i[9]=(v*f*a-p*g*a-v*s*m+r*g*m+p*s*_-r*f*_)*E,i[10]=(h*g*a-v*l*a+v*s*c-r*g*c-h*s*_+r*l*_)*E,i[11]=(p*l*a-h*f*a-p*s*c+r*f*c+h*s*m-r*l*m)*E,i[12]=T*E,i[13]=(p*g*o-v*f*o+v*s*d-r*g*d-p*s*y+r*f*y)*E,i[14]=(v*l*o-h*g*o-v*s*u+r*g*u+h*s*y-r*l*y)*E,i[15]=(h*f*o-p*l*o+p*s*u-r*f*u-h*s*d+r*l*d)*E,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,o=t.y,a=t.z,h=r*s,l=r*o;return this.set(h*s+i,h*o-n*a,h*a+n*o,0,h*o+n*a,l*o+i,l*a-n*s,0,h*a-n*o,l*a+n*s,r*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t,e;return function(i,n,r){void 0===t&&(t=new l,e=new u);var s=this.elements,o=t.set(s[0],s[1],s[2]).length(),a=t.set(s[4],s[5],s[6]).length(),h=t.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),i.x=s[12],i.y=s[13],i.z=s[14],e.elements.set(this.elements);var c=1/o,p=1/a,f=1/h;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=p,e.elements[5]*=p,e.elements[6]*=p,e.elements[8]*=f,e.elements[9]*=f,e.elements[10]*=f,n.setFromRotationMatrix(e),r.x=o,r.y=a,r.z=h,this}}(),makeFrustum:function(t,e,i,n,r,s){var o=this.elements,a=2*r/(e-t),h=2*r/(n-i),l=(e+t)/(e-t),u=(n+i)/(n-i),c=-(s+r)/(s-r),p=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=h,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(t,e,i,n){var r=i*Math.tan(To.DEG2RAD*t*.5),s=-r,o=s*e,a=r*e;return this.makeFrustum(o,a,s,r,i,n)},makeOrthographic:function(t,e,i,n,r,s){var o=this.elements,a=1/(e-t),h=1/(i-n),l=1/(s-r),u=(e+t)*a,c=(i+n)*h,p=(s+r)*l;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Eo=new n,Mo=new c,Po=[],Ao=[];G.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var s=i[n];s.setValue(t,e[s.id])}};var Co=/([\w\d_]+)(\])?(\[|\.)?/g;W.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},W.prototype.set=function(t,e,i){var n=this.map[i];void 0!==n&&n.setValue(t,e[i],this.renderer)},W.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},W.upload=function(t,e,i,n){for(var r=0,s=e.length;r!==s;++r){var o=e[r],a=i[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,n)}},W.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var s=t[n];s.id in e&&i.push(s)}return i};var Oo={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},Lo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",normal_vert:"varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};H.prototype={constructor:H,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=To.euclideanModulo(e,1),i=To.clamp(i,0,1),n=To.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;this.r=t(s,r,e+1/3),this.g=t(s,r,e),this.b=t(s,r,e-1/3)}return this}}(),setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var o=parseFloat(n[1])/360,a=parseInt(n[2],10)/100,h=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,a,h)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=i[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=ko[t];void 0!==l&&this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,s=this.g,o=this.b,a=Math.max(r,s,o),h=Math.min(r,s,o),l=(h+a)/2;if(h===a)e=0,i=0;else{var u=a-h;switch(i=l<=.5?u/(a+h):u/(2-a-h),a){case r:e=(s-o)/u+(s<o?6:0);break;case s:e=(o-r)/u+2;break;case o:e=(r-s)/u+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var ko={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ro={common:{diffuse:{value:new H(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new s(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new H(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new H(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new s(0,0,1,1)}}},Io={basic:{uniforms:Oo.merge([Ro.common,Ro.aomap,Ro.fog]),vertexShader:Lo.meshbasic_vert,fragmentShader:Lo.meshbasic_frag},lambert:{uniforms:Oo.merge([Ro.common,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.fog,Ro.lights,{emissive:{value:new H(0)}}]),vertexShader:Lo.meshlambert_vert,fragmentShader:Lo.meshlambert_frag},phong:{uniforms:Oo.merge([Ro.common,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,Ro.fog,Ro.lights,{emissive:{value:new H(0)},specular:{value:new H(1118481)},shininess:{value:30}}]),vertexShader:Lo.meshphong_vert,fragmentShader:Lo.meshphong_frag},standard:{uniforms:Oo.merge([Ro.common,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,Ro.roughnessmap,Ro.metalnessmap,Ro.fog,Ro.lights,{emissive:{value:new H(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lo.meshphysical_vert,fragmentShader:Lo.meshphysical_frag},points:{uniforms:Oo.merge([Ro.points,Ro.fog]),vertexShader:Lo.points_vert,fragmentShader:Lo.points_frag},dashed:{uniforms:Oo.merge([Ro.common,Ro.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lo.linedashed_vert,fragmentShader:Lo.linedashed_frag},depth:{uniforms:Oo.merge([Ro.common,Ro.displacementmap]),vertexShader:Lo.depth_vert,fragmentShader:Lo.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:Lo.normal_vert,fragmentShader:Lo.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lo.cube_vert,fragmentShader:Lo.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Lo.equirect_vert,fragmentShader:Lo.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new l}},vertexShader:Lo.distanceRGBA_vert,fragmentShader:Lo.distanceRGBA_frag}};Io.physical={uniforms:Oo.merge([Io.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Lo.meshphysical_vert,fragmentShader:Lo.meshphysical_frag},q.prototype={constructor:q,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new i).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new i).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Q.prototype={constructor:Q,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var n=this[e];void 0!==n&&(n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]="overdraw"===e?Number(i):i)}}},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Or&&(n.blending=this.blending),this.shading!==Er&&(n.shading=this.shading),this.side!==xr&&(n.side=this.side),this.vertexColors!==Mr&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,i){var r=e(t.textures),s=e(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Q.prototype,e.prototype);var Do=0;J.prototype=Object.create(Q.prototype),J.prototype.constructor=J,J.prototype.isShaderMaterial=!0,J.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Oo.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},J.prototype.toJSON=function(t){var e=Q.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},$.prototype=Object.create(Q.prototype),$.prototype.constructor=$,$.prototype.isMeshDepthMaterial=!0,$.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},tt.prototype={constructor:tt,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,h=t.length;a<h;a+=3){var l=t[a],u=t[a+1],c=t[a+2];l<e&&(e=l),u<i&&(i=u),c<n&&(n=c),l>r&&(r=l),u>s&&(s=u),c>o&&(o=c)}this.min.set(e,i,n),this.max.set(r,s,o)},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new l;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(){var t=new l;return function(e){var i=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n=e.geometry;if(void 0!==n)if(n&&n.isGeometry)for(var r=n.vertices,s=0,o=r.length;s<o;s++)t.copy(r[s]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t);else if(n&&n.isBufferGeometry){var a=n.attributes.position;if(void 0!==a){var h,l,u;a&&a.isInterleavedBufferAttribute?(h=a.data.array,l=a.offset,u=a.data.stride):(h=a.array,l=0,u=3);for(var s=l,o=h.length;s<o;s+=u)t.fromArray(h,s),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new l;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new l;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new l).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new l),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},clampPoint:function(t,e){return(e||new l).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new l;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new l;return function(e){var i=e||new et;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new l,new l,new l,new l,new l,new l,new l,new l];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},et.prototype={constructor:et,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new tt;return function(e,i){var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=0,s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new l;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new tt;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},it.prototype={constructor:it,isMatrix3:!0,set:function(t,e,i,n,r,s,o,a,h){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=r,l[5]=a,l[6]=i,l[7]=s,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(){var t;return function(e,i,n){void 0===t&&(t=new l),void 0===i&&(i=0),void 0===n&&(n=e.length);for(var r=0,s=i;r<n;r+=3,s+=3)t.fromArray(e,s),t.applyMatrix3(this),t.toArray(e,s);return e}}(),applyToBuffer:function(){var t;return function(e,i,n){void 0===t&&(t=new l),void 0===i&&(i=0),void 0===n&&(n=e.length/e.itemSize);for(var r=0,s=i;r<n;r++,s++)t.x=e.getX(s),t.y=e.getY(s),t.z=e.getZ(s),t.applyMatrix3(this),e.setXYZ(s,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*s*l-e*o*h-i*r*l+i*o*a+n*r*h-n*s*a},getInverse:function(t,e){t&&t.isMatrix4;var i=t.elements,n=this.elements,r=i[0],s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],u=i[6],c=i[7],p=i[8],f=p*h-l*c,d=l*u-p*a,m=c*a-h*u,v=r*f+s*d+o*m;if(0===v){if(!0===e)throw new Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()}var g=1/v;return n[0]=f*g,n[1]=(o*c-p*s)*g,n[2]=(l*s-o*h)*g,n[3]=d*g,n[4]=(p*r-o*u)*g,n[5]=(o*a-l*r)*g,n[6]=m*g,n[7]=(s*u-c*r)*g,n[8]=(h*r-s*a)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}},nt.prototype={constructor:nt,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new l,e=new l;return function(i,n,r){var s=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t);return(e||new l).copy(this.normal).multiplyScalar(i)},intersectLine:function(){var t=new l;return function(e,i){var n=i||new l,r=e.delta(t),s=this.normal.dot(r);if(0!==s){var o=-(e.start.dot(this.normal)+this.constant)/s;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new l).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new l,e=new it;return function(i,n){var r=this.coplanarPoint(t).applyMatrix4(i),s=n||e.getNormalMatrix(i),o=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},rt.prototype={constructor:rt,set:function(t,e,i,n,r,s){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],u=i[7],c=i[8],p=i[9],f=i[10],d=i[11],m=i[12],v=i[13],g=i[14],y=i[15];return e[0].setComponents(o-n,u-a,d-c,y-m).normalize(),e[1].setComponents(o+n,u+a,d+c,y+m).normalize(),e[2].setComponents(o+r,u+h,d+p,y+v).normalize(),e[3].setComponents(o-r,u-h,d-p,y-v).normalize(),e[4].setComponents(o-s,u-l,d-f,y-g).normalize(),e[5].setComponents(o+s,u+l,d+f,y+g).normalize(),this},intersectsObject:function(){var t=new et;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new et;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:function(){var t=new l,e=new l;return function(i){for(var n=this.planes,r=0;r<6;r++){var s=n[r];t.x=s.normal.x>0?i.min.x:i.max.x,e.x=s.normal.x>0?i.max.x:i.min.x,t.y=s.normal.y>0?i.min.y:i.max.y,e.y=s.normal.y>0?i.max.y:i.min.y,t.z=s.normal.z>0?i.min.z:i.max.z,e.z=s.normal.z>0?i.max.z:i.min.z;var o=s.distanceToPoint(t),a=s.distanceToPoint(e);if(o<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},ot.prototype={constructor:ot,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new l).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new l;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new l;i.subVectors(t,this.origin);var n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new l;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new l,e=new l,i=new l;return function(n,r,s,o){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var a,h,l,u,c=.5*n.distanceTo(r),p=-this.direction.dot(e),f=i.dot(this.direction),d=-i.dot(e),m=i.lengthSq(),v=Math.abs(1-p*p);if(v>0)if(a=p*d-f,h=p*f-d,u=c*v,a>=0)if(h>=-u)if(h<=u){var g=1/v;a*=g,h*=g,l=a*(a+p*h+2*f)+h*(p*a+h+2*d)+m}else h=c,a=Math.max(0,-(p*h+f)),l=-a*a+h*(h+2*d)+m;else h=-c,a=Math.max(0,-(p*h+f)),l=-a*a+h*(h+2*d)+m;else h<=-u?(a=Math.max(0,-(-p*c+f)),h=a>0?-c:Math.min(Math.max(-c,-d),c),l=-a*a+h*(h+2*d)+m):h<=u?(a=0,h=Math.min(Math.max(-c,-d),c),l=h*(h+2*d)+m):(a=Math.max(0,-(p*c+f)),h=a>0?c:Math.min(Math.max(-c,-d),c),l=-a*a+h*(h+2*d)+m);else h=p>0?-c:c,a=Math.max(0,-(p*h+f)),l=-a*a+h*(h+2*d)+m;return s&&s.copy(this.direction).multiplyScalar(a).add(this.origin),o&&o.copy(e).multiplyScalar(h).add(t),l}}(),intersectSphere:function(){var t=new l;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,s=e.radius*e.radius;if(r>s)return null;var o=Math.sqrt(s-r),a=n-o,h=n+o;return a<0&&h<0?null:a<0?this.at(h,i):this.at(a,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r,s,o,a,h=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,c=this.origin;return h>=0?(i=(t.min.x-c.x)*h,n=(t.max.x-c.x)*h):(i=(t.max.x-c.x)*h,n=(t.min.x-c.x)*h),l>=0?(r=(t.min.y-c.y)*l,s=(t.max.y-c.y)*l):(r=(t.max.y-c.y)*l,s=(t.min.y-c.y)*l),i>s||r>n?null:((r>i||i!==i)&&(i=r),(s<n||n!==n)&&(n=s),u>=0?(o=(t.min.z-c.z)*u,a=(t.max.z-c.z)*u):(o=(t.max.z-c.z)*u,a=(t.min.z-c.z)*u),i>a||o>n?null:((o>i||i!==i)&&(i=o),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:function(){var t=new l;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new l,e=new l,i=new l,n=new l;return function(r,s,o,a,h){e.subVectors(s,r),i.subVectors(o,r),n.crossVectors(e,i);var l,u=this.direction.dot(n);if(u>0){if(a)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,r);var c=l*this.direction.dot(i.crossVectors(t,i));if(c<0)return null;var p=l*this.direction.dot(e.cross(t));if(p<0)return null;if(c+p>u)return null;var f=-l*t.dot(n);return f<0?null:this.at(f/u,h)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},at.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],at.DefaultOrder="XYZ",at.prototype={constructor:at,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=To.clamp,r=t.elements,s=r[0],o=r[4],a=r[8],h=r[1],l=r[5],u=r[9],c=r[2],p=r[6],f=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-c,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,s))):"ZYX"===e?(this._y=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===e&&(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0)),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,n){return void 0===t&&(t=new u),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new h;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},ht.prototype={constructor:ht,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}},lt.DefaultUp=new l(0,1,0),lt.DefaultMatrixAutoUpdate=!0,Object.assign(lt.prototype,e.prototype,{isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new h;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new l(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new l(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new l(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new l;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new l(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new l(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new l(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new u;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new u;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?this:(t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);-1!==i&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i],s=r.getObjectByProperty(t,e);if(void 0!==s)return s}},getWorldPosition:function(t){var e=t||new l;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new l,e=new l;return function(i){var n=i||new h;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new h;return function(e){var i=e||new at;return this.getWorldQuaternion(t),
i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new l,e=new h;return function(i){var n=i||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new h;return function(e){var i=e||new l;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t||""===t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(i){var o=e(t.geometries),a=e(t.materials),h=e(t.textures),l=e(t.images);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),h.length>0&&(n.textures=h),l.length>0&&(n.images=l)}return n.object=r,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}});var Fo=0;ct.prototype={constructor:ct,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new l).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new l).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new l;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new l,e=new l;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),s=e.dot(t),o=s/r;return n&&(o=To.clamp(o,0,1)),o}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new l;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},pt.normal=function(){var t=new l;return function(e,i,n,r){var s=r||new l;s.subVectors(n,i),t.subVectors(e,i),s.cross(t);var o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}}(),pt.barycoordFromPoint=function(){var t=new l,e=new l,i=new l;return function(n,r,s,o,a){t.subVectors(o,r),e.subVectors(s,r),i.subVectors(n,r);var h=t.dot(t),u=t.dot(e),c=t.dot(i),p=e.dot(e),f=e.dot(i),d=h*p-u*u,m=a||new l;if(0===d)return m.set(-2,-1,-1);var v=1/d,g=(p*c-u*f)*v,y=(h*f-u*c)*v;return m.set(1-g-y,y,g)}}(),pt.containsPoint=function(){var t=new l;return function(e,i,n,r){var s=pt.barycoordFromPoint(e,i,n,r,t);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}(),pt.prototype={constructor:pt,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new l,e=new l;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new l).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return pt.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new nt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return pt.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return pt.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,i,n;return function(r,s){void 0===t&&(t=new nt,e=[new ct,new ct,new ct],i=new l,n=new l);var o=s||new l,a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,i),!0===this.containsPoint(i))o.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var h=0;h<e.length;h++){e[h].closestPointToPoint(i,!0,n);var u=i.distanceToSquared(n);u<a&&(a=u,o.copy(n))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ft.prototype={constructor:ft,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},dt.prototype=Object.create(Q.prototype),dt.prototype.constructor=dt,dt.prototype.isMeshBasicMaterial=!0,dt.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},mt.prototype={constructor:mt,isBufferAttribute:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var s=t[n];void 0===s&&(s=new H),e[i++]=s.r,e[i++]=s.g,e[i++]=s.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var s=t[n];e[i++]=s.a,e[i++]=s.b,e[i++]=s.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,s=t.length;r<s;r++){var o=t[r];void 0===o&&(o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var s=t[n];void 0===s&&(s=new l),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(o=new s),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},clone:function(){return(new this.constructor).copy(this)}},Object.assign(Mt.prototype,e.prototype,{isGeometry:!0,applyMatrix:function(t){for(var e=(new it).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){this.vertices[i].applyMatrix4(t)}for(var i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(e).normalize();for(var s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new u),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new u),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new lt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,r){var s=void 0!==a?[p[t].clone(),p[e].clone(),p[i].clone()]:[],o=void 0!==h?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],l=new ft(t,e,i,s,o,r);n.faces.push(l),void 0!==u&&n.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[i].clone()]),void 0!==c&&n.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[i].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,s=t.attributes,o=s.position.array,a=void 0!==s.normal?s.normal.array:void 0,h=void 0!==s.color?s.color.array:void 0,u=void 0!==s.uv?s.uv.array:void 0,c=void 0!==s.uv2?s.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var p=[],f=[],d=[],m=0,v=0;m<o.length;m+=3,v+=2)n.vertices.push(new l(o[m],o[m+1],o[m+2])),void 0!==a&&p.push(new l(a[m],a[m+1],a[m+2])),void 0!==h&&n.colors.push(new H(h[m],h[m+1],h[m+2])),void 0!==u&&f.push(new i(u[v],u[v+1])),void 0!==c&&d.push(new i(c[v],c[v+1]));if(void 0!==r){var g=t.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var y=g[m],_=y.start,b=y.count,v=_,x=_+b;v<x;v+=3)e(r[v],r[v+1],r[v+2],y.materialIndex);else for(var m=0;m<r.length;m+=3)e(r[m],r[m+1],r[m+2])}else for(var m=0;m<o.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new u;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new l,e=new l,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,i,n,r,s,o;for(o=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)o[e]=new l;if(t){var a,h,u,c=new l,p=new l;for(n=0,r=this.faces.length;n<r;n++)s=this.faces[n],a=this.vertices[s.a],h=this.vertices[s.b],u=this.vertices[s.c],c.subVectors(u,h),p.subVectors(a,h),c.cross(p),o[s.a].add(c),o[s.b].add(c),o[s.c].add(c)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)s=this.faces[n],o[s.a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(e=0,i=this.vertices.length;e<i;e++)o[e].normalize();for(n=0,r=this.faces.length;n<r;n++){s=this.faces[n];var f=s.vertexNormals;3===f.length?(f[0].copy(o[s.a]),f[1].copy(o[s.b]),f[2].copy(o[s.c])):(f[0]=o[s.a].clone(),f[1]=o[s.b].clone(),f[2]=o[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){i=this.faces[t];var n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var s=new Mt;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o,a,h=this.morphNormals[t].faceNormals,u=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)o=new l,a={a:new l,b:new l,c:new l},h.push(o),u.push(a)}var c=this.morphNormals[t];s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals();var o,a;for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],o=c.faceNormals[i],a=c.vertexNormals[i],o.copy(r.normal),a.a.copy(r.vertexNormals[0]),a.b.copy(r.vertexNormals[1]),a.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;i<n;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new et),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!1!==(t&&t.isGeometry)){var n,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,h=t.faces,l=this.faceVertexUvs[0],u=t.faceVertexUvs[0],c=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new it).getNormalMatrix(e));for(var f=0,d=o.length;f<d;f++){var m=o[f],v=m.clone();void 0!==e&&v.applyMatrix4(e),s.push(v)}for(var f=0,d=p.length;f<d;f++)c.push(p[f].clone());for(f=0,d=h.length;f<d;f++){var g,y,_,b=h[f],x=b.vertexNormals,w=b.vertexColors;g=new ft(b.a+r,b.b+r,b.c+r),g.normal.copy(b.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize();for(var T=0,S=x.length;T<S;T++)y=x[T].clone(),void 0!==n&&y.applyMatrix3(n).normalize(),g.vertexNormals.push(y);g.color.copy(b.color);for(var T=0,S=w.length;T<S;T++)_=w[T],g.vertexColors.push(_.clone());g.materialIndex=b.materialIndex+i,a.push(g)}for(f=0,d=u.length;f<d;f++){var E=u[f],M=[];if(void 0!==E){for(var T=0,S=E.length;T<S;T++)M.push(E[T].clone());l.push(M)}}}},mergeMesh:function(t){!1!==(t&&t.isMesh)&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,n,r,s,o,a,h={},l=[],u=[],c=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],e=Math.round(t.x*c)+"_"+Math.round(t.y*c)+"_"+Math.round(t.z*c),void 0===h[e]?(h[e]=i,l.push(this.vertices[i]),u[i]=l.length-1):u[i]=u[h[e]];var p=[];for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],s=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(s[f]===s[(f+1)%3]){f,p.push(i);break}}for(i=p.length-1;i>=0;i--){var d=p[i];for(this.faces.splice(d,1),o=0,a=this.faceVertexUvs.length;o<a;o++)this.faceVertexUvs[o].splice(d,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;n<i;n++)e[n]._id=n;e.sort(t);var r,s,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===i&&(r=[]),a&&a.length===i&&(s=[]);for(var n=0;n<i;n++){var h=e[n]._id;r&&r.push(o[h]),s&&s.push(a[h])}r&&(this.faceVertexUvs[0]=r),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=c.length/3,c.push(t.x,t.y,t.z),p[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=f.length,f.push(t.getHex()),d[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=m.length/2,m.push(t.x,t.y),v[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var s=this.parameters;for(var o in s)void 0!==s[o]&&(r[o]=s[o]);return r}for(var a=[],h=0;h<this.vertices.length;h++){var l=this.vertices[h];a.push(l.x,l.y,l.z)}for(var u=[],c=[],p={},f=[],d={},m=[],v={},h=0;h<this.faces.length;h++){var g=this.faces[h],y=void 0!==this.faceVertexUvs[0][h],_=g.normal.length()>0,b=g.vertexNormals.length>0,x=1!==g.color.r||1!==g.color.g||1!==g.color.b,w=g.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,!0),T=t(T,2,!1),T=t(T,3,y),T=t(T,4,_),T=t(T,5,b),T=t(T,6,x),T=t(T,7,w),u.push(T),u.push(g.a,g.b,g.c),u.push(g.materialIndex),y){var S=this.faceVertexUvs[0][h];u.push(n(S[0]),n(S[1]),n(S[2]))}if(_&&u.push(e(g.normal)),b){var E=g.vertexNormals;u.push(e(E[0]),e(E[1]),e(E[2]))}if(x&&u.push(i(g.color)),w){var M=g.vertexColors;u.push(i(M[0]),i(M[1]),i(M[2]))}}return r.data={},r.data.vertices=a,r.data.normals=c,f.length>0&&(r.data.colors=f),m.length>0&&(r.data.uvs=[m]),r.data.faces=u,r},clone:function(){return(new Mt).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var e=t.vertices,i=0,n=e.length;i<n;i++)this.vertices.push(e[i].clone());for(var r=t.colors,i=0,n=r.length;i<n;i++)this.colors.push(r[i].clone());for(var s=t.faces,i=0,n=s.length;i<n;i++)this.faces.push(s[i].clone());for(var i=0,n=t.faceVertexUvs.length;i<n;i++){var o=t.faceVertexUvs[i];void 0===this.faceVertexUvs[i]&&(this.faceVertexUvs[i]=[]);for(var a=0,h=o.length;a<h;a++){for(var l=o[a],u=[],c=0,p=l.length;c<p;c++){var f=l[c];u.push(f.clone())}this.faceVertexUvs[i].push(u)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var No=0;Object.assign(At.prototype,e.prototype,{computeBoundingBox:Mt.prototype.computeBoundingBox,computeBoundingSphere:Mt.prototype.computeBoundingSphere,computeFaceNormals:function(){},computeVertexNormals:function(){},computeGroups:function(t){for(var e,i,n=[],r=t.faces,s=0;s<r.length;s++){var o=r[s];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*s-e.start,n.push(e)),e={start:3*s,materialIndex:i})}void 0!==e&&(e.count=3*s-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,s=t.faceVertexUvs,o=s[0]&&s[0].length>0,a=s[1]&&s[1].length>0,h=t.morphTargets,l=h.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var c,p=t.morphNormals,f=p.length;if(f>0){c=[];for(var u=0;u<f;u++)c[u]=[];this.morphTargets.normal=c}for(var d=t.skinIndices,m=t.skinWeights,v=d.length===r.length,g=m.length===r.length,u=0;u<n.length;u++){var y=n[u];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=y.color;this.colors.push(w,w,w)}if(!0===o){var T=s[0][u];void 0!==T?this.uvs.push(T[0],T[1],T[2]):this.uvs.push(new i,new i,new i)}if(!0===a){var T=s[1][u];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):this.uvs2.push(new i,new i,new i)}for(var S=0;S<l;S++){var E=h[S].vertices;e[S].push(E[y.a],E[y.b],E[y.c])}for(var S=0;S<f;S++){var M=p[S].vertexNormals[u];c[S].push(M.a,M.b,M.c)}v&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Ct.prototype,e.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return!1===(e&&e.isBufferAttribute)&&!1===(e&&e.isInterleavedBufferAttribute)?void this.addAttribute(t,new mt(arguments[1],arguments[2])):"index"===t?void this.setIndex(e):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){(new it).getNormalMatrix(t).applyToVector3Array(i.array),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new u),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new u),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new lt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t&&t.isPoints||t&&t.isLine){var i=new Tt(3*e.vertices.length,3),n=new Tt(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Tt(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t&&t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t&&t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}var n;return!0===e.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new At).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new mt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new mt(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new mt(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new mt(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new mt(s,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=t.vertices.length>65535?Uint32Array:Uint16Array,a=new o(3*t.indices.length);this.setIndex(new mt(a,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var h in t.morphTargets){for(var l=[],u=t.morphTargets[h],c=0,p=u.length;c<p;c++){var f=u[c],d=new Tt(3*f.length,3);l.push(d.copyVector3sArray(f))}this.morphAttributes[h]=l}if(t.skinIndices.length>0){var m=new Tt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var v=new Tt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tt);var t=this.attributes.position.array;void 0!==t?this.boundingBox.setFromArray(t):this.boundingBox.makeEmpty(),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){var t=new tt,e=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new et);var i=this.attributes.position;if(i){var n=i.array,r=this.boundingSphere.center;t.setFromArray(n),t.getCenter(r);for(var s=0,o=0,a=n.length;o<a;o+=3)e.fromArray(n,o),s=Math.max(s,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new mt(new Float32Array(n.length),3));else for(var r=e.normal.array,s=0,o=r.length;s<o;s++)r[s]=0;var a,h,u,c=e.normal.array,p=new l,f=new l,d=new l,m=new l,v=new l;if(t){var g=t.array;0===i.length&&this.addGroup(0,g.length);for(var y=0,_=i.length;y<_;++y)for(var b=i[y],x=b.start,w=b.count,s=x,o=x+w;s<o;s+=3)a=3*g[s+0],h=3*g[s+1],u=3*g[s+2],p.fromArray(n,a),f.fromArray(n,h),d.fromArray(n,u),m.subVectors(d,f),v.subVectors(p,f),m.cross(v),c[a]+=m.x,c[a+1]+=m.y,c[a+2]+=m.z,c[h]+=m.x,c[h+1]+=m.y,c[h+2]+=m.z,c[u]+=m.x,c[u+1]+=m.y,c[u+2]+=m.z}else for(var s=0,o=n.length;s<o;s+=9)p.fromArray(n,s),f.fromArray(n,s+3),d.fromArray(n,s+6),m.subVectors(d,f),v.subVectors(p,f),m.cross(v),c[s]=m.x,c[s+1]=m.y,c[s+2]=m.z,c[s+3]=m.x,c[s+4]=m.y,c[s+5]=m.z,c[s+6]=m.x,c[s+7]=m.y,c[s+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!1!==(t&&t.isBufferGeometry)){void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],s=r.array,o=t.attributes[n],a=o.array,h=o.itemSize,l=0,u=h*e;l<a.length;l++,u++)s[u]=a[l];return this}},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,s=0,o=r.length;s<o;s+=3)t=r[s],e=r[s+1],i=r[s+2],n=1/Math.sqrt(t*t+e*e+i*i),r[s]*=n,r[s+1]*=n,r[s+2]*=n},toNonIndexed:function(){if(null===this.index)return this;var t=new Ct,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],s=r.array,o=r.itemSize,a=new s.constructor(e.length*o),h=0,l=0,u=0,c=e.length;u<c;u++){h=e[u]*o;for(var p=0;p<o;p++)a[l++]=s[h++]}t.addAttribute(n,new mt(a,o))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var s=this.attributes;for(var i in s){var o=s[i],r=Array.prototype.slice.call(o.array);t.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var h=this.boundingSphere;return null!==h&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t},clone:function(){return(new Ct).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var i=t.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}for(var s=t.groups,o=0,a=s.length;o<a;o++){var h=s[o];this.addGroup(h.start,h.count,h.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ct.MaxIndex=65535,Ot.prototype=Object.assign(Object.create(lt.prototype),{constructor:Ot,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return lt.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,i,n,r,s,o){return pt.barycoordFromPoint(t,e,i,n,y),r.multiplyScalar(y.x),s.multiplyScalar(y.y),o.multiplyScalar(y.z),r.add(s).add(o),r.clone()}function e(t,e,i,n,r,s,o){var a=t.material;if(null===(a.side===wr?i.intersectTriangle(s,r,n,!0,o):i.intersectTriangle(n,r,s,a.side!==Tr,o)))return null;b.copy(o),
b.applyMatrix4(t.matrixWorld);var h=e.ray.origin.distanceTo(b);return h<e.near||h>e.far?null:{distance:h,point:b.clone(),object:t}}function n(i,n,r,s,o,l,u,p){a.fromArray(s,3*l),h.fromArray(s,3*u),c.fromArray(s,3*p);var f=e(i,n,r,a,h,c,_);return f&&(o&&(m.fromArray(o,2*l),v.fromArray(o,2*u),g.fromArray(o,2*p),f.uv=t(_,a,h,c,m,v,g)),f.face=new ft(l,u,p,pt.normal(a,h,c)),f.faceIndex=l),f}var r=new u,s=new ot,o=new et,a=new l,h=new l,c=new l,p=new l,f=new l,d=new l,m=new i,v=new i,g=new i,y=new l,_=new l,b=new l;return function(i,l){var u=this.geometry,y=this.material,b=this.matrixWorld;if(void 0!==y&&(null===u.boundingSphere&&u.computeBoundingSphere(),o.copy(u.boundingSphere),o.applyMatrix4(b),!1!==i.ray.intersectsSphere(o)&&(r.getInverse(b),s.copy(i.ray).applyMatrix4(r),null===u.boundingBox||!1!==s.intersectsBox(u.boundingBox)))){var x,w;if(u&&u.isBufferGeometry){var T,S,E,M=u.index,P=u.attributes,A=P.position.array;if(void 0!==P.uv&&(x=P.uv.array),null!==M)for(var C=M.array,O=0,L=C.length;O<L;O+=3)T=C[O],S=C[O+1],E=C[O+2],(w=n(this,i,s,A,x,T,S,E))&&(w.faceIndex=Math.floor(O/3),l.push(w));else for(var O=0,L=A.length;O<L;O+=9)T=O/3,S=T+1,E=T+2,(w=n(this,i,s,A,x,T,S,E))&&(w.index=T,l.push(w))}else if(u&&u.isGeometry){var k,R,I,D=y&&y.isMultiMaterial,F=!0===D?y.materials:null,N=u.vertices,B=u.faces,j=u.faceVertexUvs[0];j.length>0&&(x=j);for(var U=0,z=B.length;U<z;U++){var G=B[U],V=!0===D?F[G.materialIndex]:y;if(void 0!==V){if(k=N[G.a],R=N[G.b],I=N[G.c],!0===V.morphTargets){var X=u.morphTargets,W=this.morphTargetInfluences;a.set(0,0,0),h.set(0,0,0),c.set(0,0,0);for(var H=0,q=X.length;H<q;H++){var Y=W[H];if(0!==Y){var Z=X[H].vertices;a.addScaledVector(p.subVectors(Z[G.a],k),Y),h.addScaledVector(f.subVectors(Z[G.b],R),Y),c.addScaledVector(d.subVectors(Z[G.c],I),Y)}}a.add(k),h.add(R),c.add(I),k=a,R=h,I=c}if(w=e(this,i,s,k,R,I,_)){if(x){var Q=x[U];m.copy(Q[0]),v.copy(Q[1]),g.copy(Q[2]),w.uv=t(_,k,R,I,m,v,g)}w.face=G,w.faceIndex=U,l.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Lt.prototype=Object.create(Ct.prototype),Lt.prototype.constructor=Lt,kt.prototype=Object.create(Ct.prototype),kt.prototype.constructor=kt,Rt.prototype=Object.create(lt.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isCamera=!0,Rt.prototype.getWorldDirection=function(){var t=new h;return function(e){var i=e||new l;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),Rt.prototype.lookAt=function(){var t=new u;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Rt.prototype.clone=function(){return(new this.constructor).copy(this)},Rt.prototype.copy=function(t){return lt.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},It.prototype=Object.assign(Object.create(Rt.prototype),{constructor:It,isPerspectiveCamera:!0,copy:function(t){return Rt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*To.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*To.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*To.RAD2DEG*Math.atan(Math.tan(.5*To.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,s){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:s},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*To.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,s=this.view;if(null!==s){var o=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/o,e-=s.offsetY*i/a,n*=s.width/o,i*=s.height/a}var h=this.filmOffset;0!==h&&(r+=t*h/this.getFilmWidth()),this.projectionMatrix.makeFrustum(r,r+n,e-i,e,t,this.far)},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Dt.prototype=Object.assign(Object.create(Rt.prototype),{constructor:Dt,isOrthographicCamera:!0,copy:function(t){return Rt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,s){this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:s},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,s=i+t,o=n+e,a=n-e;if(null!==this.view){var h=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,c=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/h),s=r+u*(this.view.width/h),o-=c*(this.view.offsetY/l),a=o-c*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far)},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var Bo=0;he.prototype.isFogExp2=!0,he.prototype.clone=function(){return new he(this.color.getHex(),this.density)},he.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},le.prototype.isFog=!0,le.prototype.clone=function(){return new le(this.color.getHex(),this.near,this.far)},le.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ue.prototype=Object.create(lt.prototype),ue.prototype.constructor=ue,ue.prototype.copy=function(t,e){return lt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},ue.prototype.toJSON=function(t){var e=lt.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},ce.prototype=Object.assign(Object.create(lt.prototype),{constructor:ce,isLensFlare:!0,copy:function(t){lt.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,i=t.lensFlares.length;e<i;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,i,n,r,s){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=new H(16777215)),void 0===n&&(n=Or),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:s,color:r,blending:n})},updateLensFlares:function(){var t,e,i=this.lensFlares.length,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<i;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),pe.prototype=Object.create(Q.prototype),pe.prototype.constructor=pe,pe.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},fe.prototype=Object.assign(Object.create(lt.prototype),{constructor:fe,isSprite:!0,raycast:function(){var t=new l;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t);n>this.scale.x*this.scale.y/4||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),de.prototype=Object.assign(Object.create(lt.prototype),{constructor:de,copy:function(t){lt.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;i<n;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(){var t=new l;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),update:function(){var t=new l,e=new l;return function(i){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);n[0].object.visible=!0;for(var s=1,o=n.length;s<o&&r>=n[s].distance;s++)n[s-1].object.visible=!1,n[s].object.visible=!0;for(;s<o;s++)n[s].object.visible=!1}}}(),toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var s=i[n];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}}),me.prototype=Object.create(n.prototype),me.prototype.constructor=me,me.prototype.isDataTexture=!0,Object.assign(ve.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new u;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){for(var t,e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new u;return function(){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(n,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ve(this.bones,this.boneInverses,this.useVertexTexture)}}),ge.prototype=Object.assign(Object.create(lt.prototype),{constructor:ge,isBone:!0,copy:function(t){return lt.prototype.copy.call(this,t),this.skin=t.skin,this}}),ye.prototype=Object.assign(Object.create(Ot.prototype),{constructor:ye,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],i=1/e.lengthManhattan();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var n=new s,r=this.geometry.attributes.skinWeight,t=0;t<r.count;t++){n.x=r.getX(t),n.y=r.getY(t),n.z=r.getZ(t),n.w=r.getW(t);var i=1/n.lengthManhattan();i!==1/0?n.multiplyScalar(i):n.set(1,0,0,0),r.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){Ot.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_e.prototype=Object.create(Q.prototype),_e.prototype.constructor=_e,_e.prototype.isLineBasicMaterial=!0,_e.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},be.prototype=Object.assign(Object.create(lt.prototype),{constructor:be,isLine:!0,raycast:function(){var t=new u,e=new ot,i=new et;return function(n,r){var s=n.linePrecision,o=s*s,a=this.geometry,h=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(h),!1!==n.ray.intersectsSphere(i)){t.getInverse(h),e.copy(n.ray).applyMatrix4(t);var u=new l,c=new l,p=new l,f=new l,d=this&&this.isLineSegments?2:1;if(a&&a.isBufferGeometry){var m=a.index,v=a.attributes,g=v.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length-1;_<b;_+=d){var x=y[_],w=y[_+1];u.fromArray(g,3*x),c.fromArray(g,3*w);var T=e.distanceSqToSegment(u,c,f,p);if(!(T>o)){f.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(f);S<n.near||S>n.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=g.length/3-1;_<b;_+=d){u.fromArray(g,3*_),c.fromArray(g,3*_+3);var T=e.distanceSqToSegment(u,c,f,p);if(!(T>o)){f.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(f);S<n.near||S>n.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(a&&a.isGeometry)for(var E=a.vertices,M=E.length,_=0;_<M-1;_+=d){var T=e.distanceSqToSegment(E[_],E[_+1],f,p);if(!(T>o)){f.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(f);S<n.near||S>n.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xe.prototype=Object.assign(Object.create(be.prototype),{constructor:xe,isLineSegments:!0}),we.prototype=Object.create(Q.prototype),we.prototype.constructor=we,we.prototype.isPointsMaterial=!0,we.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Te.prototype=Object.assign(Object.create(lt.prototype),{constructor:Te,isPoints:!0,raycast:function(){var t=new u,e=new ot,i=new et;return function(n,r){function s(t,i){var s=e.distanceSqToPoint(t);if(s<p){var a=e.closestPointToPoint(t);a.applyMatrix4(h);var l=n.ray.origin.distanceTo(a);if(l<n.near||l>n.far)return;r.push({distance:l,distanceToRay:Math.sqrt(s),point:a.clone(),index:i,face:null,object:o})}}var o=this,a=this.geometry,h=this.matrixWorld,u=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(h),!1!==n.ray.intersectsSphere(i)){t.getInverse(h),e.copy(n.ray).applyMatrix4(t);var c=u/((this.scale.x+this.scale.y+this.scale.z)/3),p=c*c,f=new l;if(a&&a.isBufferGeometry){var d=a.index,m=a.attributes,v=m.position.array;if(null!==d)for(var g=d.array,y=0,_=g.length;y<_;y++){var b=g[y];f.fromArray(v,3*b),s(f,b)}else for(var y=0,x=v.length/3;y<x;y++)f.fromArray(v,3*y),s(f,y)}else for(var w=a.vertices,y=0,x=w.length;y<x;y++)s(w[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Se.prototype=Object.assign(Object.create(lt.prototype),{constructor:Se}),Ee.prototype=Object.create(n.prototype),Ee.prototype.constructor=Ee,Me.prototype=Object.create(n.prototype),Me.prototype.constructor=Me,Me.prototype.isCompressedTexture=!0,Pe.prototype=Object.create(n.prototype),Pe.prototype.constructor=Pe,Ae.prototype=Object.create(n.prototype),Ae.prototype.constructor=Ae,Ae.prototype.isDepthTexture=!0,Ce.prototype=Object.create(Ct.prototype),Ce.prototype.constructor=Ce,Oe.prototype=Object.create(Ct.prototype),Oe.prototype.constructor=Oe,Le.prototype=Object.create(Mt.prototype),Le.prototype.constructor=Le,ke.prototype=Object.create(Ct.prototype),ke.prototype.constructor=ke,Re.prototype=Object.create(ke.prototype),Re.prototype.constructor=Re,Ie.prototype=Object.create(Mt.prototype),Ie.prototype.constructor=Ie,De.prototype=Object.create(ke.prototype),De.prototype.constructor=De,Fe.prototype=Object.create(Mt.prototype),Fe.prototype.constructor=Fe,Ne.prototype=Object.create(ke.prototype),Ne.prototype.constructor=Ne,Be.prototype=Object.create(Mt.prototype),Be.prototype.constructor=Be,je.prototype=Object.create(ke.prototype),je.prototype.constructor=je,Ue.prototype=Object.create(Mt.prototype),Ue.prototype.constructor=Ue,ze.prototype=Object.create(Mt.prototype),ze.prototype.constructor=ze,Ge.prototype=Object.create(Ct.prototype),Ge.prototype.constructor=Ge,Ve.prototype=Object.create(Mt.prototype),Ve.prototype.constructor=Ve,Xe.prototype=Object.create(Ct.prototype),Xe.prototype.constructor=Xe,We.prototype=Object.create(Mt.prototype),We.prototype.constructor=We,He.prototype=Object.create(Ct.prototype),He.prototype.constructor=He,qe.prototype=Object.create(Mt.prototype),qe.prototype.constructor=qe;var jo={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,s){var o,a,h,l,u,c,p,f,d;if(a=t[s[e]].x,h=t[s[e]].y,l=t[s[i]].x,u=t[s[i]].y,c=t[s[n]].x,p=t[s[n]].y,(l-a)*(p-h)-(u-h)*(c-a)<=0)return!1;var m,v,g,y,_,b,x,w,T,S,E,M,P,A,C;for(m=c-l,v=p-u,g=a-c,y=h-p,_=l-a,b=u-h,o=0;o<r;o++)if(f=t[s[o]].x,d=t[s[o]].y,!(f===a&&d===h||f===l&&d===u||f===c&&d===p)&&(x=f-a,w=d-h,T=f-l,S=d-u,E=f-c,M=d-p,C=m*S-v*T,P=_*w-b*x,A=g*M-y*E,C>=-Number.EPSILON&&A>=-Number.EPSILON&&P>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(n<3)return null;var r,s,o,a=[],h=[],l=[];if(jo.area(e)>0)for(s=0;s<n;s++)h[s]=s;else for(s=0;s<n;s++)h[s]=n-1-s;var u=n,c=2*u;for(s=u-1;u>2;){if(c--<=0)return i?l:a;if(r=s,u<=r&&(r=0),s=r+1,u<=s&&(s=0),o=s+1,u<=o&&(o=0),t(e,r,s,o,u,h)){var p,f,d,m,v;for(p=h[r],f=h[s],d=h[o],a.push([e[p],e[f],e[d]]),l.push([h[r],h[s],h[o]]),m=s,v=s+1;v<u;m++,v++)h[m]=h[v];u--,c=2*u}}return i?l:a}}(),triangulateShape:function(t,e){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,s){var o=e.x-t.x,a=e.y-t.y,h=r.x-i.x,l=r.y-i.y,u=t.x-i.x,c=t.y-i.y,p=a*h-o*l,f=a*u-o*c;if(Math.abs(p)>Number.EPSILON){var d;if(p>0){if(f<0||f>p)return[];if((d=l*u-h*c)<0||d>p)return[]}else{if(f>0||f<p)return[];if((d=l*u-h*c)>0||d<p)return[]}if(0===d)return!s||0!==f&&f!==p?[t]:[];if(d===p)return!s||0!==f&&f!==p?[e]:[];if(0===f)return[i];if(f===p)return[r];var m=d/p;return[{x:t.x+m*o,y:t.y+m*a}]}if(0!==f||l*u!=h*c)return[];var v=0===o&&0===a,g=0===h&&0===l;if(v&&g)return t.x!==i.x||t.y!==i.y?[]:[t];if(v)return n(i,r,t)?[t]:[];if(g)return n(t,e,i)?[i]:[];var y,_,b,x,w,T,S,E;return 0!==o?(t.x<e.x?(y=t,b=t.x,_=e,x=e.x):(y=e,b=e.x,_=t,x=t.x),i.x<r.x?(w=i,S=i.x,T=r,E=r.x):(w=r,S=r.x,T=i,E=i.x)):(t.y<e.y?(y=t,b=t.y,_=e,x=e.y):(y=e,b=e.y,_=t,x=t.y),i.y<r.y?(w=i,S=i.y,T=r,E=r.y):(w=r,S=r.y,T=i,E=i.y)),b<=S?x<S?[]:x===S?s?[]:[w]:x<=E?[w,_]:[w,T]:b>E?[]:b===E?s?[]:[y]:x<=E?[y,_]:[y,T]}function s(t,e,i,n){var r=e.x-t.x,s=e.y-t.y,o=i.x-t.x,a=i.y-t.y,h=n.x-t.x,l=n.y-t.y,u=r*a-s*o,c=r*l-s*h;if(Math.abs(u)>Number.EPSILON){var p=h*a-l*o;return u>0?c>=0&&p>=0:c>=0||p>=0}return c>0}i(t),e.forEach(i);for(var o,a,h,l,u,c,p={},f=t.concat(),d=0,m=e.length;d<m;d++)Array.prototype.push.apply(f,e[d]);for(o=0,a=f.length;o<a;o++)u=f[o].x+":"+f[o].y,p[u],p[u]=o;var v=function(t,e){for(var i,n,o,a,h,l,u,c,p,f,d,m=t.concat(),v=[],g=[],y=0,_=e.length;y<_;y++)v.push(y);for(var b=0,x=2*v.length;v.length>0&&!(--x<0);)for(o=b;o<m.length;o++){a=m[o],n=-1;for(var y=0;y<v.length;y++)if(l=v[y],u=a.x+":"+a.y+":"+l,void 0===g[u]){i=e[l];for(var w=0;w<i.length;w++)if(h=i[w],function(t,e){var n=m.length-1,r=t-1;r<0&&(r=n);var o=t+1;o>n&&(o=0);var a=s(m[t],m[r],m[o],i[e]);if(!a)return!1;var h=i.length-1,l=e-1;l<0&&(l=h);var u=e+1;return u>h&&(u=0),!!(a=s(i[e],i[l],i[u],m[t]))}(o,w)&&!function(t,e){var i,n,s;for(i=0;i<m.length;i++)if(n=i+1,n%=m.length,s=r(t,e,m[i],m[n],!0),s.length>0)return!0;return!1}(a,h)&&!function(t,i){var n,s,o,a,h;for(n=0;n<v.length;n++)for(s=e[v[n]],o=0;o<s.length;o++)if(a=o+1,a%=s.length,h=r(t,i,s[o],s[a],!0),h.length>0)return!0;return!1}(a,h)){n=w,v.splice(y,1),c=m.slice(0,o+1),p=m.slice(o),f=i.slice(n),d=i.slice(0,n+1),m=c.concat(f).concat(d).concat(p),b=o;break}if(n>=0)break;g[u]=!0}if(n>=0)break}return m}(t,e),g=jo.triangulate(v,!1);for(o=0,a=g.length;o<a;o++)for(l=g[o],h=0;h<3;h++)u=l[h].x+":"+l[h].y,void 0!==(c=p[u])&&(l[h]=c);return g.concat()},isClockWise:function(t){return jo.area(t)<0},b2:function(){function t(t,e){var i=1-t;return i*i*e}function e(t,e){return 2*(1-t)*t*e}function i(t,e){return t*t*e}return function(n,r,s,o){return t(n,r)+e(n,s)+i(n,o)}}(),b3:function(){function t(t,e){var i=1-t;return i*i*i*e}function e(t,e){var i=1-t;return 3*i*i*t*e}function i(t,e){return 3*(1-t)*t*t*e}function n(t,e){return t*t*t*e}return function(r,s,o,a,h){return t(r,s)+e(r,o)+i(r,a)+n(r,h)}}()};Ye.prototype=Object.create(Mt.prototype),Ye.prototype.constructor=Ye,Ye.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];this.addShape(r,e)}},Ye.prototype.addShape=function(t,e){function n(t,e,i){return e.clone().multiplyScalar(i).add(t)}function r(t,e,n){var r,s,o=1,a=t.x-e.x,h=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=a*a+h*h,p=a*u-h*l;if(Math.abs(p)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(l*l+u*u),m=e.x-h/f,v=e.y+a/f,g=n.x-u/d,y=n.y+l/d,_=((g-m)*u-(y-v)*l)/(a*u-h*l);r=m+a*_-t.x,s=v+h*_-t.y;var b=r*r+s*s;if(b<=2)return new i(r,s);o=Math.sqrt(b/2)}else{var x=!1;a>Number.EPSILON?l>Number.EPSILON&&(x=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(h)===Math.sign(u)&&(x=!0),x?(r=-h,s=a,o=Math.sqrt(c)):(r=a,s=h,o=Math.sqrt(c/2))}return new i(r/o,s/o)}function s(t,e){var i,n;for(W=t.length;--W>=0;){i=W,n=W-1,n<0&&(n=t.length-1);var r=0,s=x+2*y;for(r=0;r<s;r++){var o=G*r,a=G*(r+1);h(e+i+o,e+n+o,e+n+a,e+i+a,t,r,s,i,n)}}}function o(t,e,i){A.vertices.push(new l(t,e,i))}function a(t,e,i){t+=C,e+=C,i+=C,A.faces.push(new ft(t,e,i,null,null,0));var n=S.generateTopUV(A,t,e,i);A.faceVertexUvs[0].push(n)}function h(t,e,i,n,r,s,o,a,h){t+=C,e+=C,i+=C,n+=C,A.faces.push(new ft(t,e,n,null,null,1)),A.faces.push(new ft(e,i,n,null,null,1));var l=S.generateSideWallUV(A,t,e,i,n);A.faceVertexUvs[0].push([l[0],l[1],l[3]]),A.faceVertexUvs[0].push([l[1],l[2],l[3]])}var u,c,p,f,d,m=void 0!==e.amount?e.amount:100,v=void 0!==e.bevelThickness?e.bevelThickness:6,g=void 0!==e.bevelSize?e.bevelSize:v-2,y=void 0!==e.bevelSegments?e.bevelSegments:3,_=void 0===e.bevelEnabled||e.bevelEnabled,b=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,w=e.extrudePath,T=!1,S=void 0!==e.UVGenerator?e.UVGenerator:Ye.WorldUVGenerator;w&&(u=w.getSpacedPoints(x),T=!0,_=!1,c=void 0!==e.frames?e.frames:w.computeFrenetFrames(x,!1),p=new l,f=new l,d=new l),_||(y=0,v=0,g=0);var E,M,P,A=this,C=this.vertices.length,O=t.extractPoints(b),L=O.shape,k=O.holes,R=!jo.isClockWise(L);if(R){for(L=L.reverse(),M=0,P=k.length;M<P;M++)E=k[M],jo.isClockWise(E)&&(k[M]=E.reverse());R=!1}var I=jo.triangulateShape(L,k),D=L;for(M=0,P=k.length;M<P;M++)E=k[M],L=L.concat(E);for(var F,N,B,j,U,z,G=L.length,V=I.length,X=[],W=0,H=D.length,q=H-1,Y=W+1;W<H;W++,q++,Y++)q===H&&(q=0),Y===H&&(Y=0),X[W]=r(D[W],D[q],D[Y]);var Z,Q=[],K=X.concat();for(M=0,P=k.length;M<P;M++){for(E=k[M],Z=[],W=0,H=E.length,q=H-1,Y=W+1;W<H;W++,q++,Y++)q===H&&(q=0),Y===H&&(Y=0),Z[W]=r(E[W],E[q],E[Y]);Q.push(Z),K=K.concat(Z)}for(F=0;F<y;F++){for(B=F/y,j=v*Math.cos(B*Math.PI/2),N=g*Math.sin(B*Math.PI/2),W=0,H=D.length;W<H;W++)U=n(D[W],X[W],N),o(U.x,U.y,-j);for(M=0,P=k.length;M<P;M++)for(E=k[M],Z=Q[M],W=0,H=E.length;W<H;W++)U=n(E[W],Z[W],N),o(U.x,U.y,-j)}for(N=g,W=0;W<G;W++)U=_?n(L[W],K[W],N):L[W],T?(f.copy(c.normals[0]).multiplyScalar(U.x),p.copy(c.binormals[0]).multiplyScalar(U.y),d.copy(u[0]).add(f).add(p),o(d.x,d.y,d.z)):o(U.x,U.y,0);var J;for(J=1;J<=x;J++)for(W=0;W<G;W++)U=_?n(L[W],K[W],N):L[W],T?(f.copy(c.normals[J]).multiplyScalar(U.x),p.copy(c.binormals[J]).multiplyScalar(U.y),d.copy(u[J]).add(f).add(p),o(d.x,d.y,d.z)):o(U.x,U.y,m/x*J);for(F=y-1;F>=0;F--){for(B=F/y,j=v*Math.cos(B*Math.PI/2),N=g*Math.sin(B*Math.PI/2),W=0,H=D.length;W<H;W++)U=n(D[W],X[W],N),o(U.x,U.y,m+j);for(M=0,P=k.length;M<P;M++)for(E=k[M],Z=Q[M],W=0,H=E.length;W<H;W++)U=n(E[W],Z[W],N),T?o(U.x,U.y+u[x-1].y,u[x-1].x+j):o(U.x,U.y,m+j)}!function(){if(_){var t=0,e=G*t;for(W=0;W<V;W++)z=I[W],a(z[2]+e,z[1]+e,z[0]+e);for(t=x+2*y,e=G*t,W=0;W<V;W++)z=I[W],a(z[0]+e,z[1]+e,z[2]+e)}else{for(W=0;W<V;W++)z=I[W],a(z[2],z[1],z[0]);for(W=0;W<V;W++)z=I[W],a(z[0]+G*x,z[1]+G*x,z[2]+G*x)}}(),function(){var t=0;for(s(D,t),t+=D.length,M=0,P=k.length;M<P;M++)E=k[M],s(E,t),t+=E.length}()},Ye.WorldUVGenerator={generateTopUV:function(t,e,n,r){var s=t.vertices,o=s[e],a=s[n],h=s[r];return[new i(o.x,o.y),new i(a.x,a.y),new i(h.x,h.y)]},generateSideWallUV:function(t,e,n,r,s){var o=t.vertices,a=o[e],h=o[n],l=o[r],u=o[s];return Math.abs(a.y-h.y)<.01?[new i(a.x,1-a.z),new i(h.x,1-h.z),new i(l.x,1-l.z),new i(u.x,1-u.z)]:[new i(a.y,1-a.z),new i(h.y,1-h.z),new i(l.y,1-l.z),new i(u.y,1-u.z)]}},Ze.prototype=Object.create(Ye.prototype),Ze.prototype.constructor=Ze,Qe.prototype=Object.create(Ct.prototype),Qe.prototype.constructor=Qe,Ke.prototype=Object.create(Mt.prototype),Ke.prototype.constructor=Ke,Je.prototype=Object.create(Ct.prototype),Je.prototype.constructor=Je,$e.prototype=Object.create(Mt.prototype),$e.prototype.constructor=$e,ti.prototype=Object.create(Mt.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Ct.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(Mt.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Mt.prototype),ni.prototype.constructor=ni,ni.prototype.addShapeList=function(t,e){for(var i=0,n=t.length;i<n;i++)this.addShape(t[i],e);return this},ni.prototype.addShape=function(t,e){void 0===e&&(e={});var i,n,r,s=void 0!==e.curveSegments?e.curveSegments:12,o=e.material,a=void 0===e.UVGenerator?Ye.WorldUVGenerator:e.UVGenerator,h=this.vertices.length,u=t.extractPoints(s),c=u.shape,p=u.holes,f=!jo.isClockWise(c);if(f){for(c=c.reverse(),i=0,n=p.length;i<n;i++)r=p[i],jo.isClockWise(r)&&(p[i]=r.reverse());f=!1}var d=jo.triangulateShape(c,p);for(i=0,n=p.length;i<n;i++)r=p[i],c=c.concat(r);var m,v,g=c.length,y=d.length;for(i=0;i<g;i++)m=c[i],this.vertices.push(new l(m.x,m.y,0));for(i=0;i<y;i++){v=d[i];var _=v[0]+h,b=v[1]+h,x=v[2]+h;this.faces.push(new ft(_,b,x,null,null,o)),this.faceVertexUvs[0].push(a.generateTopUV(this,_,b,x))}},ri.prototype=Object.create(Ct.prototype),ri.prototype.constructor=ri,si.prototype=Object.create(Ct.prototype),si.prototype.constructor=si,oi.prototype=Object.create(Mt.prototype),oi.prototype.constructor=oi,ai.prototype=Object.create(oi.prototype),ai.prototype.constructor=ai,hi.prototype=Object.create(si.prototype),hi.prototype.constructor=hi,li.prototype=Object.create(Ct.prototype),li.prototype.constructor=li,ui.prototype=Object.create(Mt.prototype),ui.prototype.constructor=ui,ci.prototype=Object.create(Mt.prototype),ci.prototype.constructor=ci;var Uo=Object.freeze({WireframeGeometry:Ce,ParametricGeometry:Le,ParametricBufferGeometry:Oe,TetrahedronGeometry:Ie,TetrahedronBufferGeometry:Re,OctahedronGeometry:Fe,OctahedronBufferGeometry:De,IcosahedronGeometry:Be,IcosahedronBufferGeometry:Ne,DodecahedronGeometry:Ue,DodecahedronBufferGeometry:je,PolyhedronGeometry:ze,PolyhedronBufferGeometry:ke,TubeGeometry:Ve,TubeBufferGeometry:Ge,TorusKnotGeometry:We,TorusKnotBufferGeometry:Xe,TorusGeometry:qe,TorusBufferGeometry:He,TextGeometry:Ze,SphereBufferGeometry:Qe,SphereGeometry:Ke,RingGeometry:$e,RingBufferGeometry:Je,PlaneBufferGeometry:kt,PlaneGeometry:ti,LatheGeometry:ii,LatheBufferGeometry:ei,ShapeGeometry:ni,ExtrudeGeometry:Ye,EdgesGeometry:ri,ConeGeometry:ai,ConeBufferGeometry:hi,CylinderGeometry:oi,CylinderBufferGeometry:si,CircleBufferGeometry:li,CircleGeometry:ui,BoxBufferGeometry:Lt,BoxGeometry:ci});pi.prototype=Object.create(J.prototype),pi.prototype.constructor=pi,pi.prototype.isShadowMaterial=!0,fi.prototype=Object.create(J.prototype),fi.prototype.constructor=fi,fi.prototype.isRawShaderMaterial=!0,di.prototype={constructor:di,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,n=0,r=i.length;n<r;n++){var s=i[n].toJSON(t);delete s.metadata,e.materials.push(s)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},mi.prototype=Object.create(Q.prototype),mi.prototype.constructor=mi,mi.prototype.isMeshStandardMaterial=!0,mi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vi.prototype=Object.create(mi.prototype),vi.prototype.constructor=vi,vi.prototype.isMeshPhysicalMaterial=!0,vi.prototype.copy=function(t){return mi.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},gi.prototype=Object.create(Q.prototype),gi.prototype.constructor=gi,gi.prototype.isMeshPhongMaterial=!0,gi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},yi.prototype=Object.create(Q.prototype),yi.prototype.constructor=yi,yi.prototype.isMeshNormalMaterial=!0,yi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.wireframe=t.wireframe,
this.wireframeLinewidth=t.wireframeLinewidth,this},_i.prototype=Object.create(Q.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshLambertMaterial=!0,_i.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bi.prototype=Object.create(Q.prototype),bi.prototype.constructor=bi,bi.prototype.isLineDashedMaterial=!0,bi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var zo=Object.freeze({ShadowMaterial:pi,SpriteMaterial:pe,RawShaderMaterial:fi,ShaderMaterial:J,PointsMaterial:we,MultiMaterial:di,MeshPhysicalMaterial:vi,MeshStandardMaterial:mi,MeshPhongMaterial:gi,MeshNormalMaterial:yi,MeshLambertMaterial:_i,MeshDepthMaterial:$,MeshBasicMaterial:dt,LineDashedMaterial:bi,LineBasicMaterial:_e,Material:Q}),Go={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Vo=new xi;Object.assign(wi.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,s=Go.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;var o=/^data:(.*?)(;base64)?,(.*)$/,a=t.match(o);if(a){var h=a[1],l=!!a[2],u=a[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var c,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":c=new ArrayBuffer(u.length);for(var f=new Uint8Array(c),d=0;d<u.length;d++)f[d]=u.charCodeAt(d);"blob"===p&&(c=new Blob([c],{type:h}));break;case"document":var m=new DOMParser;c=m.parseFromString(u,h);break;case"json":c=JSON.parse(u);break;default:c=u}window.setTimeout(function(){e&&e(c),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),r.manager.itemError(t)},0)}}else{var v=new XMLHttpRequest;v.open("GET",t,!0),v.addEventListener("load",function(i){var s=i.target.response;Go.add(t,s),200===this.status?(e&&e(s),r.manager.itemEnd(t)):0===this.status?(e&&e(s),r.manager.itemEnd(t)):(n&&n(i),r.manager.itemError(t))},!1),void 0!==i&&v.addEventListener("progress",function(t){i(t)},!1),v.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType("text/plain"),v.send(null)}return r.manager.itemStart(t),v},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this}}),Object.assign(Ti.prototype,{load:function(t,e,i,n){var r=this,s=[],o=new Me;o.image=s;var a=new wi(this.manager);if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(t))for(var h=0,l=0,u=t.length;l<u;++l)!function(l){a.load(t[l],function(t){var i=r._parser(t,!0);s[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(h+=1)&&(1===i.mipmapCount&&(o.minFilter=Cs),o.format=i.format,o.needsUpdate=!0,e&&e(o))},i,n)}(l);else a.load(t,function(t){var i=r._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,a=0;a<n;a++){s[a]={mipmaps:[]};for(var h=0;h<i.mipmapCount;h++)s[a].mipmaps.push(i.mipmaps[a*i.mipmapCount+h]),s[a].format=i.format,s[a].width=i.width,s[a].height=i.height}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps;1===i.mipmapCount&&(o.minFilter=Cs),o.format=i.format,o.needsUpdate=!0,e&&e(o)},i,n);return o},setPath:function(t){return this.path=t,this}});var Xo=Si;Object.assign(Si.prototype,{load:function(t,e,i,n){var r=this,s=new me,o=new wi(this.manager);return o.setResponseType("arraybuffer"),o.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?s.image=i.image:void 0!==i.data&&(s.image.width=i.width,s.image.height=i.height,s.image.data=i.data),s.wrapS=void 0!==i.wrapS?i.wrapS:Ts,s.wrapT=void 0!==i.wrapT?i.wrapT:Ts,s.magFilter=void 0!==i.magFilter?i.magFilter:Cs,s.minFilter=void 0!==i.minFilter?i.minFilter:Ls,s.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(s.format=i.format),void 0!==i.type&&(s.type=i.type),void 0!==i.mipmaps&&(s.mipmaps=i.mipmaps),1===i.mipmapCount&&(s.minFilter=Cs),s.needsUpdate=!0,e&&e(s,i))},i,n),s}}),Object.assign(Ei.prototype,{load:function(t,e,i,n){var r=this,s=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(s.onload=function(){s.onload=null,URL.revokeObjectURL(s.src),e&&e(s),r.manager.itemEnd(t)},s.onerror=n,0===t.indexOf("data:"))s.src=t;else{var o=new wi;o.setPath(this.path),o.setResponseType("blob"),o.setWithCredentials(this.withCredentials),o.load(t,function(t){s.src=URL.createObjectURL(t)},i,n)}return r.manager.itemStart(t),s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Mi.prototype,{load:function(t,e,i,n){var r=new c,s=new Ei(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var o=0,a=0;a<t.length;++a)!function(i){s.load(t[i],function(t){r.images[i]=t,6==++o&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}(a);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Pi.prototype,{load:function(t,e,i,r){var s=new n,o=new Ei(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setWithCredentials(this.withCredentials),o.setPath(this.path),o.load(t,function(i){var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);s.format=n?Hs:qs,s.image=i,s.needsUpdate=!0,void 0!==e&&e(s)},i,r),s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),Ai.prototype=Object.assign(Object.create(lt.prototype),{constructor:Ai,isLight:!0,copy:function(t){return lt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Ci.prototype=Object.assign(Object.create(Ai.prototype),{constructor:Ci,isHemisphereLight:!0,copy:function(t){return Ai.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Oi.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Li.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Li,isSpotLightShadow:!0,update:function(t){var e=2*To.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,n=t.distance||500,r=this.camera;e===r.fov&&i===r.aspect&&n===r.far||(r.fov=e,r.aspect=i,r.far=n,r.updateProjectionMatrix())}}),ki.prototype=Object.assign(Object.create(Ai.prototype),{constructor:ki,isSpotLight:!0,copy:function(t){return Ai.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ri.prototype=Object.assign(Object.create(Ai.prototype),{constructor:Ri,isPointLight:!0,copy:function(t){return Ai.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Ii.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Ii}),Di.prototype=Object.assign(Object.create(Ai.prototype),{constructor:Di,isDirectionalLight:!0,copy:function(t){return Ai.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Fi.prototype=Object.assign(Object.create(Ai.prototype),{constructor:Fi,isAmbientLight:!0});var Wo={arraySlice:function(t,e,i){return Wo.isTypedArray(t)?new t.constructor(t.subarray(e,i)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=r;return n.sort(e),n},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),s=0,o=0;o!==n;++s)for(var a=i[s]*e,h=0;h!==e;++h)r[o++]=t[a+h];return r},flattenJSON:function(t,e,i,n){for(var r=1,s=t[0];void 0!==s&&void 0===s[n];)s=t[r++];if(void 0!==s){var o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),i.push.apply(i,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(i,i.length)),s=t[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),i.push(o)),s=t[r++]}while(void 0!==s)}}};Ni.prototype={constructor:Ni,evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var s;i:{n:if(!(t<n)){for(var o=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===o)break;if(r=n,n=e[++i],t<n)break e}s=e.length;break i}{if(t>=r)break t;var a=e[1];t<a&&(i=2,r=a);for(var o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===o)break;if(n=r,r=e[--i-1],t>=r)break e}s=i,i=0}}for(;i<s;){var h=i+s>>>1;t<e[h]?s=h:i=h+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,s=0;s!==n;++s)e[s]=i[r+s];return e},interpolate_:function(t,e,i,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,i){}},Object.assign(Ni.prototype,{beforeStart_:Ni.prototype.copySampleValue_,afterEnd_:Ni.prototype.copySampleValue_}),Bi.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Bi,DefaultSettings_:{endingStart:lo,endingEnd:lo},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,s=t+1,o=n[r],a=n[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:r=n.length-2,o=e+n[r]-n[r+1];break;default:r=t,o=i}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:s=t,a=2*i-e;break;case 2402:s=1,a=i+n[1]-n[0];break;default:s=t-1,a=e}var h=.5*(i-e),l=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(a-i),this._offsetPrev=r*l,this._offsetNext=s*l},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,p=this._weightNext,f=(i-e)/(n-e),d=f*f,m=d*f,v=-c*m+2*c*d-c*f,g=(1+c)*m+(-1.5-2*c)*d+(-.5+c)*f+1,y=(-1-p)*m+(1.5+p)*d+.5*f,_=p*m-p*d,b=0;b!==o;++b)r[b]=v*s[l+b]+g*s[h+b]+y*s[a+b]+_*s[u+b];return r}}),ji.prototype=Object.assign(Object.create(Ni.prototype),{constructor:ji,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=(i-e)/(n-e),u=1-l,c=0;c!==o;++c)r[c]=s[h+c]*u+s[a+c]*l;return r}}),Ui.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Ui,interpolate_:function(t,e,i,n){return this.copySampleValue_(t-1)}});var Ho;Ho={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Ui(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new ji(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Bi(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)this.createInterpolant=e;else{var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,s=n-1;r!==n&&i[r]<t;)++r;for(;-1!==s&&i[s]>e;)--s;if(++s,0!==r||s!==n){r>=s&&(s=Math.max(s,1),r=s-1);var o=this.getValueSize();this.times=Wo.arraySlice(i,r,s),this.values=Wo.arraySlice(this.values,r*o,s*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(t=!1);for(var s=null,o=0;o!==r;o++){var a=i[o];if("number"==typeof a&&isNaN(a)){t=!1;break}if(null!==s&&s>a){t=!1;break}s=a}if(void 0!==n&&Wo.isTypedArray(n))for(var o=0,h=n.length;o!==h;++o){var l=n[o];if(isNaN(l)){t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,s=t.length-1,o=1;o<s;++o){var a=!1,h=t[o];if(h!==t[o+1]&&(1!==o||h!==h[0]))if(n)a=!0;else for(var l=o*i,u=l-i,c=l+i,p=0;p!==i;++p){var f=e[l+p];if(f!==e[u+p]||f!==e[c+p]){a=!0;break}}if(a){if(o!==r){t[r]=t[o];for(var d=o*i,m=r*i,p=0;p!==i;++p)e[m+p]=e[d+p]}++r}}if(s>0){t[r]=t[s];for(var d=s*i,m=r*i,p=0;p!==i;++p)e[m+p]=e[d+p];++r}return r!==t.length&&(this.times=Wo.arraySlice(t,0,r),this.values=Wo.arraySlice(e,0,r*i)),this}},Gi.prototype=Object.assign(Object.create(Ho),{constructor:Gi,ValueTypeName:"vector"}),Vi.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Vi,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=(i-e)/(n-e),u=a+o;a!==u;a+=4)h.slerpFlat(r,0,s,a-o,s,a,l);return r}}),Xi.prototype=Object.assign(Object.create(Ho),{constructor:Xi,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Vi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Wi.prototype=Object.assign(Object.create(Ho),{constructor:Wi,ValueTypeName:"number"}),Hi.prototype=Object.assign(Object.create(Ho),{constructor:Hi,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),qi.prototype=Object.assign(Object.create(Ho),{constructor:qi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yi.prototype=Object.assign(Object.create(Ho),{constructor:Yi,ValueTypeName:"color"}),Zi.prototype=Ho,Ho.constructor=Zi,Object.assign(Zi,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=Zi._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];Wo.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Wo.convertArray(t.times,Array),values:Wo.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wi;case"vector":case"vector2":case"vector3":case"vector4":return Gi;case"color":return Yi;case"quaternion":return Xi;case"bool":case"boolean":return qi;case"string":return Hi}throw new Error("Unsupported typeName: "+t)}}),Qi.prototype={constructor:Qi,resetDuration:function(){for(var t=this.tracks,e=0,i=0,n=t.length;i!==n;++i){var r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Qi,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,s=i.length;r!==s;++r)e.push(Zi.parse(i[r]).scale(n));return new Qi(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,s=i.length;r!==s;++r)e.push(Zi.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,s=[],o=0;o<r;o++){var a=[],h=[];a.push((o+r-1)%r,o,(o+1)%r),h.push(0,1,0);var l=Wo.getKeyframeOrder(a);a=Wo.sortedArray(a,1,l),h=Wo.sortedArray(h,1,l),n||0!==a[0]||(a.push(r),h.push(h[0])),s.push(new Wi(".morphTargetInfluences["+e[o].name+"]",a,h).scale(1/i))}return new Qi(t,-1,s)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,s=0,o=t.length;s<o;s++){var a=t[s],h=a.name.match(r);if(h&&h.length>1){var l=h[1],u=n[l];u||(n[l]=u=[]),u.push(a)}}var c=[];for(var l in n)c.push(Qi.CreateFromMorphTargetSequence(l,n[l],e,i));return c},parseAnimation:function(t,e){if(!t)return null;for(var i=function(t,e,i,n,r){if(0!==i.length){var s=[],o=[];Wo.flattenJSON(i,s,o,n),0!==s.length&&r.push(new t(e,s,o))}},n=[],r=t.name||"default",s=t.length||-1,o=t.fps||30,a=t.hierarchy||[],h=0;h<a.length;h++){var l=a[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},c=0;c<l.length;c++)if(l[c].morphTargets)for(var p=0;p<l[c].morphTargets.length;p++)u[l[c].morphTargets[p]]=-1;for(var f in u){for(var d=[],m=[],p=0;p!==l[c].morphTargets.length;++p){var v=l[c];d.push(v.time),m.push(v.morphTarget===f?1:0)}n.push(new Wi(".morphTargetInfluence["+f+"]",d,m))}s=u.length*(o||1)}else{var g=".bones["+e[h].name+"]";i(Gi,g+".position",l,"pos",n),i(Xi,g+".quaternion",l,"rot",n),i(Gi,g+".scale",l,"scl",n)}}return 0===n.length?null:new Qi(r,s,n)}}),Object.assign(Ki.prototype,{load:function(t,e,i,n){var r=this;new wi(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return n[t],n[t]}var n=this.textures,r=new zo[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new i).fromArray(s)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var o=0,a=t.materials.length;o<a;o++)r.materials.push(this.parse(t.materials[o]));return r}}),Object.assign(Ji.prototype,{load:function(t,e,i,n){var r=this;new wi(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new Ct,i=t.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==i){var r=new n[i.type](i.array);e.setIndex(new mt(r,1))}var s=t.data.attributes;for(var o in s){var a=s[o],r=new n[a.type](a.array);e.addAttribute(o,new mt(r,a.itemSize,a.normalized))}var h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(var u=0,c=h.length;u!==c;++u){var p=h[u];e.addGroup(p.start,p.count,p.materialIndex)}var f=t.data.boundingSphere;if(void 0!==f){var d=new l;void 0!==f.center&&d.fromArray(f.center),e.boundingSphere=new et(d,f.radius)}return e}}),$i.prototype={constructor:$i,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t,e,i;return function(n,r,s){function o(t,i,n,o,h){var l,u=r+t,c=$i.Handlers.get(u);null!==c?l=c.load(u):(e.setCrossOrigin(s),l=e.load(u)),void 0!==i&&(l.repeat.fromArray(i),1!==i[0]&&(l.wrapS=ws),1!==i[1]&&(l.wrapT=ws)),void 0!==n&&l.offset.fromArray(n),void 0!==o&&("repeat"===o[0]&&(l.wrapS=ws),"mirror"===o[0]&&(l.wrapS=Ss),"repeat"===o[1]&&(l.wrapT=ws),"mirror"===o[1]&&(l.wrapT=Ss)),void 0!==h&&(l.anisotropy=h);var p=To.generateUUID();return a[p]=l,p}void 0===t&&(t=new H),void 0===e&&(e=new Pi),void 0===i&&(i=new Ki);var a={},h={uuid:To.generateUUID(),type:"MeshLambertMaterial"};for(var l in n){var u=n[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=u;break;case"blending":h.blending=Dr[u];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":h.color=t.fromArray(u).getHex();break;case"colorSpecular":h.specular=t.fromArray(u).getHex();break;case"colorEmissive":h.emissive=t.fromArray(u).getHex();break;case"specularCoef":h.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(h.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=o(u,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=o(u,n.mapEmissiveRepeat,n.mapEmissiveOffset,n.mapEmissiveWrap,n.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=o(u,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=o(u,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=o(u,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=o(u,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=o(u,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=o(u,n.mapMetalnessRepeat,n.mapMetalnessOffset,n.mapMetalnessWrap,n.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=o(u,n.mapRoughnessRepeat,n.mapRoughnessOffset,n.mapRoughnessWrap,n.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=o(u,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=wr;break;case"doubleSided":h.side=Tr;break;case"transparency":h.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[l]=u;break;case"vertexColors":!0===u&&(h.vertexColors=Ar),"face"===u&&(h.vertexColors=Pr)}}return"MeshBasicMaterial"===h.type&&delete h.emissive,"MeshPhongMaterial"!==h.type&&delete h.specular,h.opacity<1&&(h.transparent=!0),i.setTextures(a),i.parse(h)}}()},$i.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],s=e[i+1];if(r.test(t))return s}return null}},Object.assign(tn.prototype,{load:function(t,e,i,n){var r=this,s=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:$i.prototype.extractUrlBase(t),o=new wi(this.manager);o.setWithCredentials(this.withCredentials),o.load(t,function(t){var i=JSON.parse(t),n=i.metadata;if(void 0!==n){var o=n.type;if(void 0!==o){if("object"===o.toLowerCase())return;if("scene"===o.toLowerCase())return}}var a=r.parse(i,s);e(a.geometry,a.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){var n=new Mt,r=void 0!==t.scale?1/t.scale:1;if(function(e){function r(t,e){return t&1<<e}var s,o,a,h,u,c,p,f,d,m,v,g,y,_,b,x,w,T,S,E,M,P,A,C,O,L,k,R=t.faces,I=t.vertices,D=t.normals,F=t.colors,N=0;if(void 0!==t.uvs){for(s=0;s<t.uvs.length;s++)t.uvs[s].length&&N++;for(s=0;s<N;s++)n.faceVertexUvs[s]=[]}for(h=0,u=I.length;h<u;)T=new l,T.x=I[h++]*e,T.y=I[h++]*e,T.z=I[h++]*e,n.vertices.push(T);for(h=0,u=R.length;h<u;)if(m=R[h++],v=r(m,0),g=r(m,1),y=r(m,3),_=r(m,4),b=r(m,5),x=r(m,6),w=r(m,7),v){if(E=new ft,E.a=R[h],E.b=R[h+1],E.c=R[h+3],M=new ft,M.a=R[h+1],M.b=R[h+2],M.c=R[h+3],h+=4,g&&(d=R[h++],E.materialIndex=d,M.materialIndex=d),a=n.faces.length,y)for(s=0;s<N;s++)for(C=t.uvs[s],n.faceVertexUvs[s][a]=[],n.faceVertexUvs[s][a+1]=[],o=0;o<4;o++)f=R[h++],L=C[2*f],k=C[2*f+1],O=new i(L,k),2!==o&&n.faceVertexUvs[s][a].push(O),0!==o&&n.faceVertexUvs[s][a+1].push(O);if(_&&(p=3*R[h++],E.normal.set(D[p++],D[p++],D[p]),M.normal.copy(E.normal)),b)for(s=0;s<4;s++)p=3*R[h++],A=new l(D[p++],D[p++],D[p]),2!==s&&E.vertexNormals.push(A),0!==s&&M.vertexNormals.push(A);if(x&&(c=R[h++],P=F[c],E.color.setHex(P),M.color.setHex(P)),w)for(s=0;s<4;s++)c=R[h++],P=F[c],2!==s&&E.vertexColors.push(new H(P)),0!==s&&M.vertexColors.push(new H(P));n.faces.push(E),n.faces.push(M)}else{if(S=new ft,S.a=R[h++],S.b=R[h++],S.c=R[h++],g&&(d=R[h++],S.materialIndex=d),a=n.faces.length,y)for(s=0;s<N;s++)for(C=t.uvs[s],n.faceVertexUvs[s][a]=[],o=0;o<3;o++)f=R[h++],L=C[2*f],k=C[2*f+1],O=new i(L,k),n.faceVertexUvs[s][a].push(O);if(_&&(p=3*R[h++],S.normal.set(D[p++],D[p++],D[p])),b)for(s=0;s<3;s++)p=3*R[h++],A=new l(D[p++],D[p++],D[p]),S.vertexNormals.push(A);if(x&&(c=R[h++],S.color.setHex(F[c])),w)for(s=0;s<3;s++)c=R[h++],S.vertexColors.push(new H(F[c]));n.faces.push(S)}}(r),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,r=t.skinWeights.length;i<r;i+=e){var o=t.skinWeights[i],a=e>1?t.skinWeights[i+1]:0,h=e>2?t.skinWeights[i+2]:0,l=e>3?t.skinWeights[i+3]:0;n.skinWeights.push(new s(o,a,h,l))}if(t.skinIndices)for(var i=0,r=t.skinIndices.length;i<r;i+=e){var u=t.skinIndices[i],c=e>1?t.skinIndices[i+1]:0,p=e>2?t.skinIndices[i+2]:0,f=e>3?t.skinIndices[i+3]:0;n.skinIndices.push(new s(u,c,p,f))}n.bones=t.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||(n.skinIndices.length,n.vertices.length))}(),function(e){if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){n.morphTargets[i]={},n.morphTargets[i].name=t.morphTargets[i].name,n.morphTargets[i].vertices=[];for(var s=n.morphTargets[i].vertices,o=t.morphTargets[i].vertices,a=0,h=o.length;a<h;a+=3){var u=new l;u.x=o[a]*e,u.y=o[a+1]*e,u.z=o[a+2]*e,s.push(u)}}if(void 0!==t.morphColors&&t.morphColors.length>0)for(var c=n.faces,p=t.morphColors[0].colors,i=0,r=c.length;i<r;i++)c[i].color.fromArray(p,3*i)}(r),function(){var e=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var s=Qi.parseAnimation(i[r],n.bones);s&&e.push(s)}if(n.morphTargets){var o=Qi.CreateClipsFromMorphTargetSequences(n.morphTargets,10);e=e.concat(o)}e.length>0&&(n.animations=e)}(),n.computeFaceNormals(),
n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:n};var o=$i.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:n,materials:o}}}),Object.assign(en.prototype,{load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new wi(r.manager).load(t,function(t){r.parse(JSON.parse(t),e)},i,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseGeometries(t.geometries),n=this.parseImages(t.images,function(){void 0!==e&&e(o)}),r=this.parseTextures(t.textures,n),s=this.parseMaterials(t.materials,r),o=this.parseObject(t.object,i,s);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o},parseGeometries:function(t){var e={};if(void 0!==t)for(var i=new tn,n=new Ji,r=0,s=t.length;r<s;r++){var o,a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Uo[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Uo[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Uo[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Uo[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Uo[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Uo[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new Uo[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Uo[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Uo[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Uo[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Uo[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"BufferGeometry":o=n.parse(a);break;case"Geometry":o=i.parse(a.data,this.texturePath).geometry;break;default:continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),e[a.uuid]=o}return e},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new Ki;n.setTextures(e);for(var r=0,s=t.length;r<s;r++){var o=n.parse(t[r]);i[o.uuid]=o}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=Qi.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){var i=this,n={};if(void 0!==t&&t.length>0){var r=new xi(e),s=new Ei(r);s.setCrossOrigin(this.crossOrigin);for(var o=0,a=t.length;o<a;o++){var h=t[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:i.texturePath+h.url;n[h.uuid]=function(t){return i.manager.itemStart(t),s.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t)})}(l)}}return n},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:e[t]}var r={};if(void 0!==t)for(var s=0,o=t.length;s<o;s++){var a=t[s];a.image,e[a.image];var h=new n(e[a.image]);h.needsUpdate=!0,h.uuid=a.uuid,void 0!==a.name&&(h.name=a.name),void 0!==a.mapping&&(h.mapping=i(a.mapping,xs)),void 0!==a.offset&&h.offset.fromArray(a.offset),void 0!==a.repeat&&h.repeat.fromArray(a.repeat),void 0!==a.wrap&&(h.wrapS=i(a.wrap[0],Es),h.wrapT=i(a.wrap[1],Es)),void 0!==a.minFilter&&(h.minFilter=i(a.minFilter,ks)),void 0!==a.magFilter&&(h.magFilter=i(a.magFilter,ks)),void 0!==a.anisotropy&&(h.anisotropy=a.anisotropy),void 0!==a.flipY&&(h.flipY=a.flipY),r[a.uuid]=h}return r},parseObject:function(){var t=new u;return function(e,i,n){function r(t){return i[t],i[t]}function s(t){if(void 0!==t)return n[t],n[t]}var o;switch(e.type){case"Scene":o=new ue,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new H(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new le(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new he(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new It(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Dt(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":o=new Fi(e.color,e.intensity);break;case"DirectionalLight":o=new Di(e.color,e.intensity);break;case"PointLight":o=new Ri(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":o=new ki(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ci(e.color,e.groundColor,e.intensity);break;case"Mesh":var a=r(e.geometry),h=s(e.material);o=a.bones&&a.bones.length>0?new ye(a,h):new Ot(a,h);break;case"LOD":o=new de;break;case"Line":o=new be(r(e.geometry),s(e.material),e.mode);break;case"LineSegments":o=new xe(r(e.geometry),s(e.material));break;case"PointCloud":case"Points":o=new Te(r(e.geometry),s(e.material));break;case"Sprite":o=new fe(s(e.material));break;case"Group":o=new Se;break;default:o=new lt}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var l in e.children)o.add(this.parseObject(e.children[l],i,n));if("LOD"===e.type)for(var u=e.levels,c=0;c<u.length;c++){var p=u[c],l=o.getObjectByProperty("uuid",p.object);void 0!==l&&o.addLevel(l,p.distance)}return o}}()}),nn.prototype={constructor:nn,getPoint:function(t){return null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){t||(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),s=0;for(n.push(0),i=1;i<=t;i++)e=this.getPoint(i/t),s+=e.distanceTo(r),n.push(s),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,s=n.length;i=e||t*n[s-1];for(var o,a=0,h=s-1;a<=h;)if(r=Math.floor(a+(h-a)/2),(o=n[r]-i)<0)a=r+1;else{if(!(o>0)){h=r;break}h=r-1}if(r=h,n[r]===i){var l=r/(s-1);return l}var u=n[r],c=n[r+1],p=c-u,f=(i-u)/p,l=(r+f)/(s-1);return l},getTangent:function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,s=new l,o=[],a=[],h=[],c=new l,p=new u;for(i=0;i<=t;i++)n=i/t,o[i]=this.getTangentAt(n),o[i].normalize();a[0]=new l,h[0]=new l;var f=Number.MAX_VALUE,d=Math.abs(o[0].x),m=Math.abs(o[0].y),v=Math.abs(o[0].z);for(d<=f&&(f=d,s.set(1,0,0)),m<=f&&(f=m,s.set(0,1,0)),v<=f&&s.set(0,0,1),c.crossVectors(o[0],s).normalize(),a[0].crossVectors(o[0],c),h[0].crossVectors(o[0],a[0]),i=1;i<=t;i++)a[i]=a[i-1].clone(),h[i]=h[i-1].clone(),c.crossVectors(o[i-1],o[i]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(To.clamp(o[i-1].dot(o[i]),-1,1)),a[i].applyMatrix4(p.makeRotationAxis(c,r))),h[i].crossVectors(o[i],a[i]);if(!0===e)for(r=Math.acos(To.clamp(a[0].dot(a[t]),-1,1)),r/=t,o[0].dot(c.crossVectors(a[0],a[t]))>0&&(r=-r),i=1;i<=t;i++)a[i].applyMatrix4(p.makeRotationAxis(o[i],r*i)),h[i].crossVectors(o[i],a[i]);return{tangents:o,normals:a,binormals:h}}},nn.create=function(t,e){return t.prototype=Object.create(nn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},rn.prototype=Object.create(nn.prototype),rn.prototype.constructor=rn,rn.prototype.isLineCurve=!0,rn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},rn.prototype.getPointAt=function(t){return this.getPoint(t)},rn.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},sn.prototype=Object.assign(Object.create(nn.prototype),{constructor:sn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new rn(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,s=this.curves[n],o=s.getLength(),a=0===o?0:1-r/o;return s.getPointAt(a)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t||(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var s=r[n],o=s&&s.isEllipseCurve?2*t:s&&s.isLineCurve?1:s&&s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o),h=0;h<a.length;h++){var l=a[h];e&&e.equals(l)||(i.push(l),e=l)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new Mt,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new l(r.x,r.y,r.z||0))}return e}}),on.prototype=Object.create(nn.prototype),on.prototype.constructor=on,on.prototype.isEllipseCurve=!0,on.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=r?0:e),!0!==this.aClockwise||r||(n===e?n=-e:n-=e);var s=this.aStartAngle+t*n,o=this.aX+this.xRadius*Math.cos(s),a=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var h=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=o-this.aX,c=a-this.aY;o=u*h-c*l+this.aX,a=u*l+c*h+this.aY}return new i(o,a)};var qo={tangentQuadraticBezier:function(t,e,i,n){return 2*(1-t)*(i-e)+2*t*(n-i)},tangentCubicBezier:function(t,e,i,n,r){return-3*e*(1-t)*(1-t)+3*i*(1-t)*(1-t)-6*t*i*(1-t)+6*t*n*(1-t)-3*t*t*n+3*t*t*r},tangentSpline:function(t,e,i,n,r){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,e,i,n,r){var s=.5*(i-t),o=.5*(n-e),a=r*r;return(2*e-2*i+s+o)*(r*a)+(-3*e+3*i-2*s-o)*a+s*r+e}};an.prototype=Object.create(nn.prototype),an.prototype.constructor=an,an.prototype.isSplineCurve=!0,an.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),s=n-r,o=e[0===r?r:r-1],a=e[r],h=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],u=qo.interpolate;return new i(u(o.x,a.x,h.x,l.x,s),u(o.y,a.y,h.y,l.y,s))},hn.prototype=Object.create(nn.prototype),hn.prototype.constructor=hn,hn.prototype.getPoint=function(t){var e=jo.b3;return new i(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},hn.prototype.getTangent=function(t){var e=qo.tangentCubicBezier;return new i(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},ln.prototype=Object.create(nn.prototype),ln.prototype.constructor=ln,ln.prototype.getPoint=function(t){var e=jo.b2;return new i(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y))},ln.prototype.getTangent=function(t){var e=qo.tangentQuadraticBezier;return new i(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y)).normalize()};var Yo=Object.assign(Object.create(sn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new rn(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var s=new ln(this.currentPoint.clone(),new i(t,e),new i(n,r));this.curves.push(s),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,s,o){var a=new hn(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(s,o));this.curves.push(a),this.currentPoint.set(s,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),i=new an(e);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,s){var o=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+o,e+a,i,n,r,s)},absarc:function(t,e,i,n,r,s){this.absellipse(t,e,i,i,n,r,s)},ellipse:function(t,e,i,n,r,s,o,a){var h=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+h,e+l,i,n,r,s,o,a)},absellipse:function(t,e,i,n,r,s,o,a){var h=new on(t,e,i,n,r,s,o,a);if(this.curves.length>0){var l=h.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(h);var u=h.getPoint(1);this.currentPoint.copy(u)}});un.prototype=Object.assign(Object.create(Yo),{constructor:un,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),cn.prototype=Yo,Yo.constructor=cn,pn.prototype={moveTo:function(t,e){this.currentPath=new cn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,s){this.currentPath.bezierCurveTo(t,e,i,n,r,s)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],s=new un;s.curves=r.curves,e.push(s)}return e}var n=jo.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return i(r);var s,o,a,h=[];if(1===r.length)return o=r[0],a=new un,a.curves=o.curves,h.push(a),h;var l=!n(r[0].getPoints());l=t?!l:l;var u,c=[],p=[],f=[],d=0;p[d]=void 0,f[d]=[];for(var m=0,v=r.length;m<v;m++)o=r[m],u=o.getPoints(),s=n(u),s=t?!s:s,s?(!l&&p[d]&&d++,p[d]={s:new un,p:u},p[d].s.curves=o.curves,l&&d++,f[d]=[]):f[d].push({h:o,p:u[0]});if(!p[0])return i(r);if(p.length>1){for(var g=!1,y=[],_=0,b=p.length;_<b;_++)c[_]=[];for(var _=0,b=p.length;_<b;_++)for(var x=f[_],w=0;w<x.length;w++){for(var T=x[w],S=!0,E=0;E<p.length;E++)(function(t,e){for(var i=e.length,n=!1,r=i-1,s=0;s<i;r=s++){var o=e[r],a=e[s],h=a.x-o.x,l=a.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[s],h=-h,a=e[r],l=-l),t.y<o.y||t.y>a.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var u=l*(t.x-o.x)-h*(t.y-o.y);if(0===u)return!0;if(u<0)continue;n=!n}}else{if(t.y!==o.y)continue;if(a.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=a.x)return!0}}return n})(T.p,p[E].p)&&(_!==E&&y.push({froms:_,tos:E,hole:w}),S?(S=!1,c[E].push(T)):g=!0);S&&c[_].push(T)}y.length>0&&(g||(f=c))}for(var M,m=0,P=p.length;m<P;m++){a=p[m].s,h.push(a),M=f[m];for(var A=0,C=M.length;A<C;A++)a.holes.push(M[A].h)}return h}},Object.assign(fn.prototype,{isFont:!0,generateShapes:function(t,e,i){function n(t,e,n){var s=r.glyphs[t]||r.glyphs["?"];if(s){var o,a,h,l,u,c,p,f,d,m,v,g=new pn,y=[],_=jo.b2,b=jo.b3;if(s.o)for(var x=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),w=0,T=x.length;w<T;){var S=x[w++];switch(S){case"m":o=x[w++]*e+n,a=x[w++]*e,g.moveTo(o,a);break;case"l":o=x[w++]*e+n,a=x[w++]*e,g.lineTo(o,a);break;case"q":if(h=x[w++]*e+n,l=x[w++]*e,p=x[w++]*e+n,f=x[w++]*e,g.quadraticCurveTo(p,f,h,l),v=y[y.length-1]){u=v.x,c=v.y;for(var E=1;E<=i;E++){var M=E/i;_(M,u,p,h),_(M,c,f,l)}}break;case"b":if(h=x[w++]*e+n,l=x[w++]*e,p=x[w++]*e+n,f=x[w++]*e,d=x[w++]*e+n,m=x[w++]*e,g.bezierCurveTo(p,f,d,m,h,l),v=y[y.length-1]){u=v.x,c=v.y;for(var E=1;E<=i;E++){var M=E/i;b(M,u,p,d,h),b(M,c,f,m,l)}}}}return{offset:s.ha*e,path:g}}}void 0===e&&(e=100),void 0===i&&(i=4);for(var r=this.data,s=function(t){for(var i=String(t).split(""),s=e/r.resolution,o=0,a=[],h=0;h<i.length;h++){var l=n(i[h],s,o);o+=l.offset,a.push(l.path)}return a}(t),o=[],a=0,h=s.length;a<h;a++)Array.prototype.push.apply(o,s[a].toShapes());return o}}),Object.assign(dn.prototype,{load:function(t,e,i,n){var r=this;new wi(this.manager).load(t,function(t){var i;try{i=JSON.parse(t)}catch(e){i=JSON.parse(t.substring(65,t.length-2))}var n=r.parse(i);e&&e(n)},i,n)},parse:function(t){return new fn(t)}});var Zo;Object.assign(vn.prototype,{load:function(t,e,i,n){var r=new wi(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){mn().decodeAudioData(t,function(t){e(t)})},i,n)}}),Object.assign(gn.prototype,{update:function(){var t,e,i,n,r,s,o,a=new u,h=new u;return function(l){if(t!==this||e!==l.focus||i!==l.fov||n!==l.aspect*this.aspect||r!==l.near||s!==l.far||o!==l.zoom){t=this,e=l.focus,i=l.fov,n=l.aspect*this.aspect,r=l.near,s=l.far,o=l.zoom;var u,c,p=l.projectionMatrix.clone(),f=this.eyeSep/2,d=f*r/e,m=r*Math.tan(To.DEG2RAD*i*.5)/o;h.elements[12]=-f,a.elements[12]=f,u=-m*n+d,c=m*n+d,p.elements[0]=2*r/(c-u),p.elements[8]=(c+u)/(c-u),this.cameraL.projectionMatrix.copy(p),u=-m*n-d,c=m*n-d,p.elements[0]=2*r/(c-u),p.elements[8]=(c+u)/(c-u),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(a)}}()}),yn.prototype=Object.create(lt.prototype),yn.prototype.constructor=yn,_n.prototype=Object.assign(Object.create(lt.prototype),{constructor:_n,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new l,e=new h,i=new l,n=new l;return function(r){lt.prototype.updateMatrixWorld.call(this,r);var s=this.context.listener,o=this.up;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),s.setPosition(t.x,t.y,t.z),s.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z)}}()}),bn.prototype=Object.assign(Object.create(lt.prototype),{constructor:bn,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.source.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying&&!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()}},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1!==this.hasPlaybackControl&&this.source.loop},setLoop:function(t){!1!==this.hasPlaybackControl&&(this.source.loop=t)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),xn.prototype=Object.assign(Object.create(bn.prototype),{constructor:xn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new l;return function(e){lt.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(wn.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Tn.prototype={constructor:Tn,accumulate:function(t,e){var i=this.buffer,n=this.valueSize,r=t*n+n,s=this.cumulativeWeight;if(0===s){for(var o=0;o!==n;++o)i[r+o]=i[o];s=e}else{s+=e;var a=e/s;this._mixBufferRegion(i,r,0,a,n)}this.cumulativeWeight=s},apply:function(t){var e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,s=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*e;this._mixBufferRegion(i,n,o,1-r,e)}for(var a=e,h=e+e;a!==h;++a)if(i[a]!==i[a+e]){s.setValue(i,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,n=3*i;t.getValue(e,n);for(var r=i,s=n;r!==s;++r)e[r]=e[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,i,n,r){if(n>=.5)for(var s=0;s!==r;++s)t[e+s]=t[i+s]},_slerp:function(t,e,i,n,r){h.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,r){for(var s=1-n,o=0;o!==r;++o){var a=e+o;t[a]=t[a]*s+t[i+o]*n}}},Sn.prototype={constructor:Sn,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(t=Sn.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var s=e.objectIndex;switch(i){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===s){s=o;break}break;default:if(void 0===t[i])return;t=t[i]}if(void 0!==s){if(void 0===t[s])return;t=t[s]}}var a=t[n];if(void 0!==a){var h=this.Versioning.None;void 0!==t.needsUpdate?(h=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(h=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return;if(!t.geometry.morphTargets)return;for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):void 0!==a.length?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][h]}else{e.nodeName}}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Sn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Sn.prototype.getValue,_setValue_unbound:Sn.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Sn.Composite=function(t,e,i){var n=i||Sn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)},Sn.Composite.prototype={constructor:Sn.Composite,getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Sn.create=function(t,e,i){return t&&t.isAnimationObjectGroup?new Sn.Composite(t,e,i):new Sn(t,e,i)},Sn.parseTrackName=function(t){var e=/^((?:\w+[\/:])*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,i=e.exec(t);if(!i)throw new Error("cannot parse trackName at all: "+t);var n={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return n},Sn.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=function(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];if(n.name===e)return n}return null}(t.skeleton);if(i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e)return r;var s=n(r.children);if(s)return s}return null},r=n(t.children);if(r)return r}return null},En.prototype={constructor:En,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,i=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,s=this._paths,o=this._parsedPaths,a=this._bindings,h=a.length,l=0,u=arguments.length;l!==u;++l){var c=arguments[l],p=c.uuid,f=r[p];if(void 0===f){f=i++,r[p]=f,e.push(c);for(var d=0,m=h;d!==m;++d)a[d].push(new Sn(c,s[d],o[d]))}else if(f<n){var v=(e[f],--n),g=e[v];r[g.uuid]=f,e[f]=g,r[p]=v,e[v]=c;for(var d=0,m=h;d!==m;++d){var y=a[d],_=y[v],b=y[f];y[f]=_,void 0===b&&(b=new Sn(c,s[d],o[d])),y[v]=b}}else e[f]}this.nCachedObjects_=n},remove:function(t){for(var e=this._objects,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,s=r.length,o=0,a=arguments.length;o!==a;++o){var h=arguments[o],l=h.uuid,u=n[l];if(void 0!==u&&u>=i){var c=i++,p=e[c];n[p.uuid]=u,e[u]=p,n[l]=c,e[c]=h;for(var f=0,d=s;f!==d;++f){var m=r[f],v=m[c],g=m[u];m[u]=v,m[c]=g}}}this.nCachedObjects_=i},uncache:function(t){for(var e=this._objects,i=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,s=this._bindings,o=s.length,a=0,h=arguments.length;a!==h;++a){var l=arguments[a],u=l.uuid,c=r[u];if(void 0!==c)if(delete r[u],c<n){var p=--n,f=e[p],d=--i,m=e[d];r[f.uuid]=c,e[c]=f,r[m.uuid]=p,e[p]=m,e.pop();for(var v=0,g=o;v!==g;++v){var y=s[v],_=y[p],b=y[d];y[c]=_,y[p]=b,y.pop()}}else{var d=--i,m=e[d];r[m.uuid]=c,e[c]=m,e.pop();for(var v=0,g=o;v!==g;++v){var y=s[v];y[c]=y[d],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var s=this._paths,o=this._parsedPaths,a=this._objects,h=a.length,l=this.nCachedObjects_,u=new Array(h);n=r.length,i[t]=n,s.push(t),o.push(e),r.push(u);for(var c=l,p=a.length;c!==p;++c){var f=a[c];u[c]=new Sn(f,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];e[t[o]]=i,s[i]=a,s.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}},Mn.prototype={constructor:Mn,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){
return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){var n=this._clip.duration,r=t._clip.duration,s=r/n,o=n/r;t.warp(1,s,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,s=this._timeScaleInterpolant,o=this.timeScale;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);var a=s.parameterPositions,h=s.sampleValues;return a[0]=r,a[1]=r+i,h[0]=t/o,h[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){var r=this._startTime;if(null!==r){var s=(t-r)*i;if(s<0||0===i)return;this._startTime=null,e=i*s}e*=this._updateTimeScale(t);var o=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var h=this._interpolants,l=this._propertyBindings,u=0,c=h.length;u!==c;++u)h[u].evaluate(o),l[u].accumulate(n,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i){e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(2200===n){-1===r&&(this.loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=i)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var s=2202===n;if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),e>=i||e<0){var o=Math.floor(e/i);e-=i*o,r+=Math.abs(o);var a=this.repetitions-r;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===a){var h=t<0;this._setEndings(h,!h,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(s&&1==(1&r))return this.time=e,i-e}return this.time=e,e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:lo:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:lo:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,s=this._weightInterpolant;null===s&&(s=n._lendControlInterpolant(),this._weightInterpolant=s);var o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=i,this}},Object.assign(Pn.prototype,e.prototype,{clipAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Qi.findByName(i,t):t,s=null!==r?r.uuid:t,o=this._actionsByClip[s],a=null;if(void 0!==o){var h=o.actionByRoot[n];if(void 0!==h)return h;a=o.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var l=new Mn(this,r,e);return this._bindAction(l,a),this._addInactiveAction(l,s,n),l},existingAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Qi.findByName(i,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o?o.actionByRoot[n]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1,o=0;o!==i;++o){var a=e[o];a.enabled&&a._update(n,t,r,s)}for(var h=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)h[o].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var s=r.knownActions,o=0,a=s.length;o!==a;++o){var h=s[o];this._deactivateAction(h);var l=h._cacheIndex,u=e[e.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(h)}delete n[i]}},uncacheRoot:function(t){var e=t.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot,s=r[e];void 0!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}var o=this._bindingsByRootAndName,a=o[e];if(void 0!==a)for(var h in a){var l=a[h];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Object.assign(Pn.prototype,{_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,s=t._propertyBindings,o=t._interpolants,a=i.uuid,h=this._bindingsByRootAndName,l=h[a];void 0===l&&(l={},h[a]=l);for(var u=0;u!==r;++u){var c=n[u],p=c.name,f=l[p];if(void 0!==f)s[u]=f;else{if(void 0!==(f=s[u])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,a,p));continue}var d=e&&e._propertyBindings[u].binding.parsedPath;f=new Tn(Sn.create(i,p,d),c.ValueTypeName,c.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,p),s[u]=f}o[u].resultBuffer=f.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(var r=t._propertyBindings,s=0,o=r.length;s!==o;++s){var a=r[s];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{var o=s.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=n.length,n.push(t),s.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,h=a[a.length-1],l=t._byClipCacheIndex;h._byClipCacheIndex=l,a[l]=h,a.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],s=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,s=this._bindingsByRootAndName,o=s[n],a=e[e.length-1],h=t._cacheIndex;a._cacheIndex=h,e[h]=a,e.pop(),delete o[r];t:{for(var l in o)break t;delete s[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(i=new ji(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),Cn.prototype=Object.create(Ct.prototype),Cn.prototype.constructor=Cn,Cn.prototype.isInstancedBufferGeometry=!0,Cn.prototype.addGroup=function(t,e,i){this.groups.push({start:t,count:e,materialIndex:i})},Cn.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var i=t.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}for(var s=t.groups,o=0,a=s.length;o<a;o++){var h=s[o];this.addGroup(h.start,h.count,h.materialIndex)}return this},On.prototype={constructor:On,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}},Ln.prototype={constructor:Ln,isInterleavedBuffer:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},kn.prototype=Object.create(Ln.prototype),kn.prototype.constructor=kn,kn.prototype.isInstancedInterleavedBuffer=!0,kn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Rn.prototype=Object.create(mt.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isInstancedBufferAttribute=!0,Rn.prototype.copy=function(t){return mt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},In.prototype={constructor:In,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld))},intersectObject:function(t,e){var i=[];return Fn(t,this,i,e),i.sort(Dn),i},intersectObjects:function(t,e){var i=[];if(!1===Array.isArray(t))return i;for(var n=0,r=t.length;n<r;n++)Fn(t[n],this,i,e);return i.sort(Dn),i}},Nn.prototype={constructor:Nn,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},jn.prototype={constructor:jn,set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(To.clamp(t.y/this.radius,-1,1))),this}},Un.prototype=Object.create(Ot.prototype),Un.prototype.constructor=Un,Un.prototype.createAnimation=function(t,e,i,n){var r={start:e,end:i,length:i-e+1,fps:n,duration:(i-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},Un.prototype.autoCreateAnimations=function(t){for(var e,i=/([a-z]+)_?(\d+)/i,n={},r=this.geometry,s=0,o=r.morphTargets.length;s<o;s++){var a=r.morphTargets[s],h=a.name.match(i);if(h&&h.length>1){var l=h[1];n[l]||(n[l]={start:1/0,end:-1/0});var u=n[l];s<u.start&&(u.start=s),s>u.end&&(u.end=s),e||(e=l)}}for(var l in n){var u=n[l];this.createAnimation(l,u.start,u.end,t)}this.firstAnimation=e},Un.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},Un.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},Un.prototype.setAnimationFPS=function(t,e){var i=this.animationsMap[t];i&&(i.fps=e,i.duration=(i.end-i.start)/i.fps)},Un.prototype.setAnimationDuration=function(t,e){var i=this.animationsMap[t];i&&(i.duration=e,i.fps=(i.end-i.start)/i.duration)},Un.prototype.setAnimationWeight=function(t,e){var i=this.animationsMap[t];i&&(i.weight=e)},Un.prototype.setAnimationTime=function(t,e){var i=this.animationsMap[t];i&&(i.time=e)},Un.prototype.getAnimationTime=function(t){var e=0,i=this.animationsMap[t];return i&&(e=i.time),e},Un.prototype.getAnimationDuration=function(t){var e=-1,i=this.animationsMap[t];return i&&(e=i.duration),e},Un.prototype.playAnimation=function(t){var e=this.animationsMap[t];e&&(e.time=0,e.active=!0)},Un.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},Un.prototype.update=function(t){for(var e=0,i=this.animationsList.length;e<i;e++){var n=this.animationsList[e];if(n.active){var r=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var s=n.start+To.clamp(Math.floor(n.time/r),0,n.length-1),o=n.weight;s!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*o,this.morphTargetInfluences[s]=0,n.lastFrame=n.currentFrame,n.currentFrame=s);var a=n.time%r/r;n.directionBackwards&&(a=1-a),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=a*o,this.morphTargetInfluences[n.lastFrame]=(1-a)*o):this.morphTargetInfluences[n.currentFrame]=o}}},zn.prototype=Object.create(lt.prototype),zn.prototype.constructor=zn,zn.prototype.isImmediateRenderObject=!0,Gn.prototype=Object.create(xe.prototype),Gn.prototype.constructor=Gn,Gn.prototype.update=function(){var t=new l,e=new l,i=new it;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,s=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var a=o.vertices,h=o.faces,l=0,u=0,c=h.length;u<c;u++)for(var p=h[u],f=0,d=p.vertexNormals.length;f<d;f++){var m=a[p[n[f]]],v=p.vertexNormals[f];t.copy(m).applyMatrix4(r),e.copy(v).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),s.setXYZ(l,t.x,t.y,t.z),l+=1,s.setXYZ(l,e.x,e.y,e.z),l+=1}else if(o&&o.isBufferGeometry)for(var g=o.attributes.position,y=o.attributes.normal,l=0,f=0,d=g.count;f<d;f++)t.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(r),e.set(y.getX(f),y.getY(f),y.getZ(f)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),s.setXYZ(l,t.x,t.y,t.z),l+=1,s.setXYZ(l,e.x,e.y,e.z),l+=1;return s.needsUpdate=!0,this}}(),Vn.prototype=Object.create(lt.prototype),Vn.prototype.constructor=Vn,Vn.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Vn.prototype.update=function(){var t=new l,e=new l;return function(){var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Xn.prototype=Object.create(xe.prototype),Xn.prototype.constructor=Xn,Xn.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,this.getBoneList(t.children[i]));return e},Xn.prototype.update=function(){for(var t=this.geometry,e=(new u).getInverse(this.root.matrixWorld),i=new u,n=0,r=0;r<this.bones.length;r++){var s=this.bones[r];s.parent&&s.parent.isBone&&(i.multiplyMatrices(e,s.matrixWorld),t.vertices[n].setFromMatrixPosition(i),i.multiplyMatrices(e,s.parent.matrixWorld),t.vertices[n+1].setFromMatrixPosition(i),n+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},Wn.prototype=Object.create(Ot.prototype),Wn.prototype.constructor=Wn,Wn.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Wn.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Hn.prototype=Object.create(lt.prototype),Hn.prototype.constructor=Hn,Hn.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},Hn.prototype.update=function(){var t=new l;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),qn.prototype=Object.create(xe.prototype),qn.prototype.constructor=qn,qn.prototype.setColors=function(){},Yn.prototype=Object.create(xe.prototype),Yn.prototype.constructor=Yn,Yn.prototype.update=function(){var t=new l,e=new l,i=new it;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,s=this.object.geometry,o=s.vertices,a=s.faces,h=0,l=0,u=a.length;l<u;l++){var c=a[l],p=c.normal;t.copy(o[c.a]).add(o[c.b]).add(o[c.c]).divideScalar(3).applyMatrix4(n),e.copy(p).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(h,t.x,t.y,t.z),h+=1,r.setXYZ(h,e.x,e.y,e.z),h+=1}return r.needsUpdate=!0,this}}(),Zn.prototype=Object.create(lt.prototype),Zn.prototype.constructor=Zn,Zn.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},Zn.prototype.update=function(){var t=new l,e=new l,i=new l;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t);var n=this.children[0],r=this.children[1];n.lookAt(i),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.lookAt(i),r.scale.z=i.length()}}(),Qn.prototype=Object.create(xe.prototype),Qn.prototype.constructor=Qn,Qn.prototype.update=function(){function t(t,s,o,a){n.set(s,o,a).unproject(r);var h=i[t];if(void 0!==h)for(var l=0,u=h.length;l<u;l++)e.vertices[h[l]].copy(n)}var e,i,n=new l,r=new Rt;return function(){e=this.geometry,i=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.verticesNeedUpdate=!0}}(),Kn.prototype=Object.create(Ot.prototype),Kn.prototype.constructor=Kn,Kn.prototype.update=function(){this.box.setFromObject(this.object),this.box.getSize(this.scale),this.box.getCenter(this.position)},Jn.prototype=Object.create(xe.prototype),Jn.prototype.constructor=Jn,Jn.prototype.update=function(){var t=new tt;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var i=t.min,n=t.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=i.x,s[4]=n.y,s[5]=n.z,s[6]=i.x,s[7]=i.y,s[8]=n.z,s[9]=n.x,s[10]=i.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=i.z,s[15]=i.x,s[16]=n.y,s[17]=i.z,s[18]=i.x,s[19]=i.y,s[20]=i.z,s[21]=n.x,s[22]=i.y,s[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Qo=new Ct;Qo.addAttribute("position",new Tt([0,0,0,0,1,0],3));var Ko=new si(0,.5,1,5,1);Ko.translate(0,-.5,0),$n.prototype=Object.create(lt.prototype),$n.prototype.constructor=$n,$n.prototype.setDirection=function(){var t,e=new l;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),$n.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},$n.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},tr.prototype=Object.create(xe.prototype),tr.prototype.constructor=tr;var Jo=function(){function t(){}var e=new l,i=new t,n=new t,r=new t;return t.prototype.init=function(t,e,i,n){this.c0=t,this.c1=i,this.c2=-3*t+3*e-2*i-n,this.c3=2*t-2*e+i+n},t.prototype.initNonuniformCatmullRom=function(t,e,i,n,r,s,o){var a=(e-t)/r-(i-t)/(r+s)+(i-e)/s,h=(i-e)/s-(n-e)/(s+o)+(n-i)/o;a*=s,h*=s,this.init(e,i,a,h)},t.prototype.initCatmullRom=function(t,e,i,n,r){this.init(e,i,r*(i-t),r*(n-e))},t.prototype.calc=function(t){var e=t*t,i=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*i},nn.create(function(t){this.points=t||[],this.closed=!1},function(t){var s,o,a,h,u=this.points;h=u.length,s=(h-(this.closed?0:1))*t,o=Math.floor(s),a=s-o,this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/u.length)+1)*u.length:0===a&&o===h-1&&(o=h-2,a=1);var c,p,f,d;if(this.closed||o>0?c=u[(o-1)%h]:(e.subVectors(u[0],u[1]).add(u[0]),c=e),p=u[o%h],f=u[(o+1)%h],this.closed||o+2<h?d=u[(o+2)%h]:(e.subVectors(u[h-1],u[h-2]).add(u[h-1]),d=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(c.distanceToSquared(p),m),g=Math.pow(p.distanceToSquared(f),m),y=Math.pow(f.distanceToSquared(d),m);g<1e-4&&(g=1),v<1e-4&&(v=g),y<1e-4&&(y=g),i.initNonuniformCatmullRom(c.x,p.x,f.x,d.x,v,g,y),n.initNonuniformCatmullRom(c.y,p.y,f.y,d.y,v,g,y),r.initNonuniformCatmullRom(c.z,p.z,f.z,d.z,v,g,y)}else if("catmullrom"===this.type){var _=void 0!==this.tension?this.tension:.5;i.initCatmullRom(c.x,p.x,f.x,d.x,_),n.initCatmullRom(c.y,p.y,f.y,d.y,_),r.initCatmullRom(c.z,p.z,f.z,d.z,_)}return new l(i.calc(a),n.calc(a),r.calc(a))})}();er.prototype=Object.create(Jo.prototype);var $o=nn.create(function(t){this.points=void 0===t?[]:t},function(t){var e=this.points,i=(e.length-1)*t,n=Math.floor(i),r=i-n,s=e[0==n?n:n-1],o=e[n],a=e[n>e.length-2?e.length-1:n+1],h=e[n>e.length-3?e.length-1:n+2],u=qo.interpolate;return new l(u(s.x,o.x,a.x,h.x,r),u(s.y,o.y,a.y,h.y,r),u(s.z,o.z,a.z,h.z,r))}),ta=nn.create(function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},function(t){var e=jo.b3;return new l(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),ea=nn.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e=jo.b2;return new l(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y),e(t,this.v0.z,this.v1.z,this.v2.z))}),ia=nn.create(function(t,e){this.v1=t,this.v2=e},function(t){if(1===t)return this.v2.clone();var e=new l;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e});ir.prototype=Object.create(on.prototype),ir.prototype.constructor=ir;var na={createMultiMaterialObject:function(t,e){for(var i=new Se,n=0,r=e.length;n<r;n++)i.add(new Ot(t,e[n]));return i},detach:function(t,e,i){t.applyMatrix(e.matrixWorld),e.remove(t),i.add(t)},attach:function(t,e,i){var n=new u;n.getInverse(i.matrixWorld),t.applyMatrix(n),e.remove(t),i.add(t)}};Object.assign(q.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},size:function(t){return this.getSize(t)}}),Object.assign(tt.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),Object.assign(ct.prototype,{center:function(t){return this.getCenter(t)}}),Object.assign(it.prototype,{multiplyVector3:function(t){return t.applyMatrix3(this)},multiplyVector3Array:function(t){return this.applyToVector3Array(t)}}),Object.assign(u.prototype,{extractPosition:function(t){return this.copyPosition(t)},setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return t.applyProjection(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(t){return this.applyToVector3Array(t)},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(t){},rotateX:function(t){},rotateY:function(t){},rotateZ:function(t){},rotateByAxis:function(t,e){}}),Object.assign(nt.prototype,{isIntersectionLine:function(t){return this.intersectsLine(t)}}),Object.assign(h.prototype,{multiplyVector3:function(t){return t.applyQuaternion(this)}}),Object.assign(ot.prototype,{isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionPlane:function(t){return this.intersectsPlane(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)}}),Object.assign(un.prototype,{extrude:function(t){return new Ye(this,t)},makeGeometry:function(t){return new ni(this,t)}}),Object.assign(l.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)}}),Object.assign(lt.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(t){},translate:function(t,e){return this.translateOnAxis(e,t)}}),Object.defineProperties(lt.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(t){}}}),Object.defineProperties(de.prototype,{objects:{get:function(){return this.levels}}}),It.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ai.prototype,{onlyShadow:{set:function(t){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(t){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(mt.prototype,{length:{get:function(){return this.array.length}}}),Object.assign(Ct.prototype,{addIndex:function(t){this.setIndex(t)},addDrawCall:function(t,e,i){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(Ct.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(Q.prototype,{wrapAround:{get:function(){},set:function(t){}},wrapRGB:{get:function(){return new H}}}),Object.defineProperties(gi.prototype,{metal:{get:function(){return!1},set:function(t){}}}),Object.defineProperties(J.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),e.prototype=Object.assign(Object.create({constructor:e,apply:function(t){Object.assign(t,this)}}),e.prototype),Object.defineProperties(An.prototype,{dynamic:{set:function(t){}},onUpdate:{value:function(){return this}}}),Object.assign(ae.prototype,{supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){}}),Object.defineProperties(ae.prototype,{shadowMapEnabled:{get:function(){
return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){this.shadowMap.cullFace=t}}}),Object.defineProperties(st.prototype,{cullFace:{get:function(){return this.renderReverseSided?gr:vr},set:function(t){var e=t!==vr;this.renderReverseSided=e}}}),Object.defineProperties(o.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),Object.assign(bn.prototype,{load:function(t){var e=this;return(new vn).load(t,function(t){e.setBuffer(t)}),this}}),Object.assign(wn.prototype,{getData:function(t){return this.getFrequencyData()}});var ra={merge:function(t,e,i){var n;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return t.center()}},sa={crossOrigin:void 0,loadTexture:function(t,e,i,n){var r=new Pi;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,i,void 0,n);return e&&(s.mapping=e),s},loadTextureCube:function(t,e,i,n){var r=new Mi;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,i,void 0,n);return e&&(s.mapping=e),s},loadCompressedTexture:function(){},loadCompressedTextureCube:function(){}};t.WebGLRenderTargetCube=a,t.WebGLRenderTarget=o,t.WebGLRenderer=ae,t.ShaderLib=Io,t.UniformsLib=Ro,t.UniformsUtils=Oo,t.ShaderChunk=Lo,t.FogExp2=he,t.Fog=le,t.Scene=ue,t.LensFlare=ce,t.Sprite=fe,t.LOD=de,t.SkinnedMesh=ye,t.Skeleton=ve,t.Bone=ge,t.Mesh=Ot,t.LineSegments=xe,t.Line=be,t.Points=Te,t.Group=Se,t.VideoTexture=Ee,t.DataTexture=me,t.CompressedTexture=Me,t.CubeTexture=c,t.CanvasTexture=Pe,t.DepthTexture=Ae,t.TextureIdCount=r,t.Texture=n,t.MaterialIdCount=K,t.CompressedTextureLoader=Ti,t.BinaryTextureLoader=Si,t.DataTextureLoader=Xo,t.CubeTextureLoader=Mi,t.TextureLoader=Pi,t.ObjectLoader=en,t.MaterialLoader=Ki,t.BufferGeometryLoader=Ji,t.DefaultLoadingManager=Vo,t.LoadingManager=xi,t.JSONLoader=tn,t.ImageLoader=Ei,t.FontLoader=dn,t.XHRLoader=wi,t.Loader=$i,t.Cache=Go,t.AudioLoader=vn,t.SpotLightShadow=Li,t.SpotLight=ki,t.PointLight=Ri,t.HemisphereLight=Ci,t.DirectionalLightShadow=Ii,t.DirectionalLight=Di,t.AmbientLight=Fi,t.LightShadow=Oi,t.Light=Ai,t.StereoCamera=gn,t.PerspectiveCamera=It,t.OrthographicCamera=Dt,t.CubeCamera=yn,t.Camera=Rt,t.AudioListener=_n,t.PositionalAudio=xn,t.getAudioContext=mn,t.AudioAnalyser=wn,t.Audio=bn,t.VectorKeyframeTrack=Gi,t.StringKeyframeTrack=Hi,t.QuaternionKeyframeTrack=Xi,t.NumberKeyframeTrack=Wi,t.ColorKeyframeTrack=Yi,t.BooleanKeyframeTrack=qi,t.PropertyMixer=Tn,t.PropertyBinding=Sn,t.KeyframeTrack=Zi,t.AnimationUtils=Wo,t.AnimationObjectGroup=En,t.AnimationMixer=Pn,t.AnimationClip=Qi,t.Uniform=An,t.InstancedBufferGeometry=Cn,t.BufferGeometry=Ct,t.GeometryIdCount=Pt,t.Geometry=Mt,t.InterleavedBufferAttribute=On,t.InstancedInterleavedBuffer=kn,t.InterleavedBuffer=Ln,t.InstancedBufferAttribute=Rn,t.DynamicBufferAttribute=Et,t.Float64Attribute=St,t.Float32Attribute=Tt,t.Uint32Attribute=wt,t.Int32Attribute=xt,t.Uint16Attribute=bt,t.Int16Attribute=_t,t.Uint8ClampedAttribute=yt,t.Uint8Attribute=gt,t.Int8Attribute=vt,t.BufferAttribute=mt,t.Face3=ft,t.Object3DIdCount=ut,t.Object3D=lt,t.Raycaster=In,t.Layers=ht,t.EventDispatcher=e,t.Clock=Nn,t.QuaternionLinearInterpolant=Vi,t.LinearInterpolant=ji,t.DiscreteInterpolant=Ui,t.CubicInterpolant=Bi,t.Interpolant=Ni,t.Triangle=pt,t.Spline=Bn,t.Math=To,t.Spherical=jn,t.Plane=nt,t.Frustum=rt,t.Sphere=et,t.Ray=ot,t.Matrix4=u,t.Matrix3=it,t.Box3=tt,t.Box2=q,t.Line3=ct,t.Euler=at,t.Vector4=s,t.Vector3=l,t.Vector2=i,t.Quaternion=h,t.ColorKeywords=ko,t.Color=H,t.MorphBlendMesh=Un,t.ImmediateRenderObject=zn,t.VertexNormalsHelper=Gn,t.SpotLightHelper=Vn,t.SkeletonHelper=Xn,t.PointLightHelper=Wn,t.HemisphereLightHelper=Hn,t.GridHelper=qn,t.FaceNormalsHelper=Yn,t.DirectionalLightHelper=Zn,t.CameraHelper=Qn,t.BoundingBoxHelper=Kn,t.BoxHelper=Jn,t.ArrowHelper=$n,t.AxisHelper=tr,t.ClosedSplineCurve3=er,t.CatmullRomCurve3=Jo,t.SplineCurve3=$o,t.CubicBezierCurve3=ta,t.QuadraticBezierCurve3=ea,t.LineCurve3=ia,t.ArcCurve=ir,t.EllipseCurve=on,t.SplineCurve=an,t.CubicBezierCurve=hn,t.QuadraticBezierCurve=ln,t.LineCurve=rn,t.Shape=un,t.ShapePath=pn,t.Path=cn,t.Font=fn,t.CurvePath=sn,t.Curve=nn,t.ShapeUtils=jo,t.SceneUtils=na,t.CurveUtils=qo,t.WireframeGeometry=Ce,t.ParametricGeometry=Le,t.ParametricBufferGeometry=Oe,t.TetrahedronGeometry=Ie,t.TetrahedronBufferGeometry=Re,t.OctahedronGeometry=Fe,t.OctahedronBufferGeometry=De,t.IcosahedronGeometry=Be,t.IcosahedronBufferGeometry=Ne,t.DodecahedronGeometry=Ue,t.DodecahedronBufferGeometry=je,t.PolyhedronGeometry=ze,t.PolyhedronBufferGeometry=ke,t.TubeGeometry=Ve,t.TubeBufferGeometry=Ge,t.TorusKnotGeometry=We,t.TorusKnotBufferGeometry=Xe,t.TorusGeometry=qe,t.TorusBufferGeometry=He,t.TextGeometry=Ze,t.SphereBufferGeometry=Qe,t.SphereGeometry=Ke,t.RingGeometry=$e,t.RingBufferGeometry=Je,t.PlaneBufferGeometry=kt,t.PlaneGeometry=ti,t.LatheGeometry=ii,t.LatheBufferGeometry=ei,t.ShapeGeometry=ni,t.ExtrudeGeometry=Ye,t.EdgesGeometry=ri,t.ConeGeometry=ai,t.ConeBufferGeometry=hi;t.CylinderGeometry=oi,t.CylinderBufferGeometry=si,t.CircleBufferGeometry=li,t.CircleGeometry=ui,t.BoxBufferGeometry=Lt,t.BoxGeometry=ci,t.ShadowMaterial=pi,t.SpriteMaterial=pe,t.RawShaderMaterial=fi,t.ShaderMaterial=J,t.PointsMaterial=we,t.MultiMaterial=di,t.MeshPhysicalMaterial=vi,t.MeshStandardMaterial=mi,t.MeshPhongMaterial=gi,t.MeshNormalMaterial=yi,t.MeshLambertMaterial=_i,t.MeshDepthMaterial=$,t.MeshBasicMaterial=dt,t.LineDashedMaterial=bi,t.LineBasicMaterial=_e,t.Material=Q,t.REVISION="82",t.MOUSE=dr,t.CullFaceNone=mr,t.CullFaceBack=vr,t.CullFaceFront=gr,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=yr,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=_r,t.PCFSoftShadowMap=br,t.FrontSide=xr,t.BackSide=wr,t.DoubleSide=Tr,t.FlatShading=Sr,t.SmoothShading=Er,t.NoColors=Mr,t.FaceColors=Pr,t.VertexColors=Ar,t.NoBlending=Cr,t.NormalBlending=Or,t.AdditiveBlending=Lr,t.SubtractiveBlending=kr,t.MultiplyBlending=Rr,t.CustomBlending=Ir,t.BlendingMode=Dr,t.AddEquation=Fr,t.SubtractEquation=Nr,t.ReverseSubtractEquation=Br,t.MinEquation=jr,t.MaxEquation=Ur,t.ZeroFactor=zr,t.OneFactor=Gr,t.SrcColorFactor=Vr,t.OneMinusSrcColorFactor=Xr,t.SrcAlphaFactor=Wr,t.OneMinusSrcAlphaFactor=Hr,t.DstAlphaFactor=qr,t.OneMinusDstAlphaFactor=Yr,t.DstColorFactor=Zr,t.OneMinusDstColorFactor=Qr,t.SrcAlphaSaturateFactor=Kr,t.NeverDepth=Jr,t.AlwaysDepth=$r,t.LessDepth=ts,t.LessEqualDepth=es,t.EqualDepth=is,t.GreaterEqualDepth=ns,t.GreaterDepth=rs,t.NotEqualDepth=ss,t.MultiplyOperation=os,t.MixOperation=as,t.AddOperation=hs,t.NoToneMapping=ls,t.LinearToneMapping=us,t.ReinhardToneMapping=cs,t.Uncharted2ToneMapping=ps,t.CineonToneMapping=fs,t.UVMapping=300,t.CubeReflectionMapping=ds,t.CubeRefractionMapping=ms,t.EquirectangularReflectionMapping=vs,t.EquirectangularRefractionMapping=gs,t.SphericalReflectionMapping=ys,t.CubeUVReflectionMapping=_s,t.CubeUVRefractionMapping=bs,t.TextureMapping=xs,t.RepeatWrapping=ws,t.ClampToEdgeWrapping=Ts,t.MirroredRepeatWrapping=Ss,t.TextureWrapping=Es,t.NearestFilter=Ms,t.NearestMipMapNearestFilter=Ps,t.NearestMipMapLinearFilter=As,t.LinearFilter=Cs,t.LinearMipMapNearestFilter=Os,t.LinearMipMapLinearFilter=Ls,t.TextureFilter=ks,t.UnsignedByteType=Rs,t.ByteType=Is,t.ShortType=Ds,t.UnsignedShortType=Fs,t.IntType=Ns,t.UnsignedIntType=Bs,t.FloatType=js,t.HalfFloatType=Us,t.UnsignedShort4444Type=zs,t.UnsignedShort5551Type=Gs,t.UnsignedShort565Type=Vs,t.UnsignedInt248Type=Xs,t.AlphaFormat=Ws,t.RGBFormat=Hs,t.RGBAFormat=qs,t.LuminanceFormat=Ys,t.LuminanceAlphaFormat=Zs,t.RGBEFormat=Qs,t.DepthFormat=Ks,t.DepthStencilFormat=Js,t.RGB_S3TC_DXT1_Format=$s,t.RGBA_S3TC_DXT1_Format=to,t.RGBA_S3TC_DXT3_Format=eo,t.RGBA_S3TC_DXT5_Format=io,t.RGB_PVRTC_4BPPV1_Format=no,t.RGB_PVRTC_2BPPV1_Format=ro,t.RGBA_PVRTC_4BPPV1_Format=so,t.RGBA_PVRTC_2BPPV1_Format=oo,t.RGB_ETC1_Format=ao,t.LoopOnce=2200,t.LoopRepeat=ho,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=lo,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=uo,t.TriangleStripDrawMode=co,t.TriangleFanDrawMode=po,t.LinearEncoding=fo,t.sRGBEncoding=mo,t.GammaEncoding=vo,t.RGBEEncoding=go,t.LogLuvEncoding=3003,t.RGBM7Encoding=yo,t.RGBM16Encoding=_o,t.RGBDEncoding=bo,t.BasicDepthPacking=xo,t.RGBADepthPacking=wo,t.CubeGeometry=ci,t.Face4=nr,t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=di,t.PointCloud=rr,t.Particle=fe,t.ParticleSystem=sr,t.PointCloudMaterial=or,t.ParticleBasicMaterial=ar,t.ParticleSystemMaterial=hr,t.Vertex=lr,t.EdgesHelper=ur,t.WireframeHelper=cr,t.GeometryUtils=ra,t.ImageUtils=sa,t.Projector=pr,t.CanvasRenderer=fr,Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AudioContext",{get:function(){return t.getAudioContext()}})})},{}],287:[function(t,e,i){!function(){function t(t,e,i){return t.call.apply(t.bind,arguments)}function i(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function n(e,r,s){return n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:i,n.apply(null,arguments)}function r(t,e){this.a=t,this.o=e||t,this.c=this.o.document}function s(t,e,i,n){if(e=t.c.createElement(e),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?e.style.cssText=i[r]:e.setAttribute(r,i[r]));return n&&e.appendChild(t.c.createTextNode(n)),e}function o(t,e,i){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var s=!1,o=0;o<n.length;o+=1)if(e[r]===n[o]){s=!0;break}s||n.push(e[r])}for(e=[],r=0;r<n.length;r+=1){for(s=!1,o=0;o<i.length;o+=1)if(n[r]===i[o]){s=!0;break}s||e.push(n[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function l(t,e){for(var i=t.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==e)return!0;return!1}function u(t){return t.o.location.hostname||t.a.location.hostname}function c(t,e,i){function n(){l&&r&&a&&(l(h),l=null)}e=s(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,a=!0,h=null,l=i||null;it?(e.onload=function(){r=!0,n()},e.onerror=function(){r=!0,h=Error("Stylesheet failed to load"),n()}):setTimeout(function(){r=!0,n()},0),o(t,"head",e)}function p(t,e,i,n){var r=t.c.getElementsByTagName("head")[0];if(r){var o=s(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),o}return null}function f(){this.a=0,this.c=null}function d(t){return t.a++,function(){t.a--,v(t)}}function m(t,e){t.c=e,v(t)}function v(t){0==t.a&&t.c&&(t.c(),t.c=null)}function g(t){this.a=t||"-"}function y(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function _(t){return w(t)+" "+t.f+"00 300px "+b(t.c)}function b(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function x(t){return t.a+t.f}function w(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function T(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function S(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new g("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function E(t){t.g&&h(t.f,[t.a.c("wf","loading")]),P(t,"loading")}function M(t){if(t.g){var e=l(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),h(t.f,i,n)}P(t,"inactive")}function P(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,x(i)):t.h[e]())}function A(){this.c={}}function C(t,e,i){var n,r=[];for(n in e)if(e.hasOwnProperty(n)){var s=t.c[n];s&&r.push(s(e[n],i))}return r}function O(t,e){this.c=t,this.f=e,this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function L(t){o(t.c,"body",t.a)}function k(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(t.c)+";font-style:"+w(t)+";font-weight:"+t.f+"00;"}function R(t,e,i,n,r,s){this.g=t,this.j=e,this.a=n,this.c=i,this.f=r||3e3,this.h=s||void 0}function I(t,e,i,n,r,s,o){this.v=t,this.B=e,this.c=i,this.a=n,this.s=o||"BESbswy",this.f={},this.w=r||3e3,this.u=s||null,this.m=this.j=this.h=this.g=null,this.g=new O(this.c,this.s),this.h=new O(this.c,this.s),this.j=new O(this.c,this.s),this.m=new O(this.c,this.s),t=new y(this.a.c+",serif",x(this.a)),t=k(t),this.g.a.style.cssText=t,t=new y(this.a.c+",sans-serif",x(this.a)),t=k(t),this.h.a.style.cssText=t,t=new y("serif",x(this.a)),t=k(t),this.j.a.style.cssText=t,t=new y("sans-serif",x(this.a)),t=k(t),this.m.a.style.cssText=t,L(this.g),L(this.h),L(this.j),L(this.m)}function D(){if(null===rt){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);rt=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return rt}function F(t,e,i){for(var n in nt)if(nt.hasOwnProperty(n)&&e===t.f[nt[n]]&&i===t.f[nt[n]])return!0;return!1}function N(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=D()&&F(t,i,n)),e?et()-t.A>=t.w?D()&&F(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?j(t,t.v):j(t,t.B):B(t):j(t,t.v)}function B(t){setTimeout(n(function(){N(this)},t),50)}function j(t,e){setTimeout(n(function(){a(this.g.a),a(this.h.a),a(this.j.a),a(this.m.a),e(this.a)},t),0)}function U(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}function z(t){0==--t.f&&t.j&&(t.m?(t=t.a,t.g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),P(t,"active")):M(t.a))}function G(t){this.j=t,this.a=new A,this.h=0,this.f=this.g=!0}function V(t,e,i,r,s){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=s||null,a=r||null||{};if(0===i.length&&o)M(e.a);else{e.f+=i.length,o&&(e.j=o);var l,u=[];for(l=0;l<i.length;l++){var c=i[l],p=a[c.c],f=e.a,d=c;if(f.g&&h(f.f,[f.a.c("wf",d.c,x(d).toString(),"loading")]),P(f,"fontloading",d),f=null,null===st)if(window.FontFace){var d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);st=d?42<parseInt(d[1],10):!m}else st=!1;f=st?new R(n(e.g,e),n(e.h,e),e.c,c,e.s,p):new I(n(e.g,e),n(e.h,e),e.c,c,e.s,t,p),u.push(f)}for(l=0;l<u.length;l++)u[l].start()}},0)}function X(t,e,i){var n=[],r=i.timeout;E(e);var n=C(t.a,i,t.c),s=new U(t.c,e,r);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load(function(e,i,n){V(t,s,e,i,n)})}function W(t,e){this.c=t,this.a=e}function H(t,e){this.c=t,this.a=e}function q(t,e){this.c=t||ot,this.a=[],this.f=[],this.g=e||""}function Y(t,e){for(var i=e.length,n=0;n<i;n++){var r=e[n].split(":");3==r.length&&t.f.push(r.pop());var s="";2==r.length&&""!=r[1]&&(s=":"),t.a.push(r.join(s))}}function Z(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function Q(t){this.f=t,this.a=[],this.c={}}function K(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),r=n[0].replace(/\+/g," "),s=["n4"];if(2<=n.length){var o,a=n[1];if(o=[],a)for(var a=a.split(","),h=a.length,l=0;l<h;l++){var u;if(u=a[l],u.match(/^[\w-]+$/)){var c=ut.exec(u.toLowerCase());if(null==c)u="";else{if(u=c[2],u=null==u||""==u?"n":lt[u],null==(c=c[1])||""==c)c="4";else var p=ht[c],c=p||(isNaN(c)?"4":c.substr(0,1));u=[u,c].join("")}}else u="";u&&o.push(u)}0<o.length&&(s=o),3==n.length&&(n=n[2],o=[],n=n?n.split(","):o,0<n.length&&(n=at[n[0]])&&(t.c[r]=n))}for(t.c[r]||(n=at[r])&&(t.c[r]=n),n=0;n<s.length;n+=1)t.a.push(new y(r,s[n]))}}function J(t,e){this.c=t,this.a=e}function $(t,e){this.c=t,this.a=e}function tt(t,e){this.c=t,this.f=e,this.a=[]}var et=Date.now||function(){return+new Date},it=!!window.FontFace;g.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},R.prototype.start=function(){var t=this.c.o.document,e=this,i=et(),n=new Promise(function(n,r){function s(){et()-i>=e.f?r():t.fonts.load(_(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(s,25)},function(){r()})}s()}),r=null,s=new Promise(function(t,i){r=setTimeout(i,e.f)});Promise.race([s,n]).then(function(){r&&(clearTimeout(r),r=null),e.g(e.a)},function(){e.j(e.a)})};var nt={D:"serif",C:"sans-serif"},rt=null;I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=et(),N(this)};var st=null;U.prototype.g=function(t){var e=this.a;e.g&&h(e.f,[e.a.c("wf",t.c,x(t).toString(),"active")],[e.a.c("wf",t.c,x(t).toString(),"loading"),e.a.c("wf",t.c,x(t).toString(),"inactive")]),P(e,"fontactive",t),this.m=!0,z(this)},U.prototype.h=function(t){var e=this.a;if(e.g){var i=l(e.f,e.a.c("wf",t.c,x(t).toString(),"active")),n=[],r=[e.a.c("wf",t.c,x(t).toString(),"loading")];i||n.push(e.a.c("wf",t.c,x(t).toString(),"inactive")),h(e.f,n,r)}P(e,"fontinactive",t),z(this)},G.prototype.load=function(t){this.c=new r(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,X(this,new S(this.c,t),t)},W.prototype.load=function(t){function e(){if(s["__mti_fntLst"+n]){var i,r=s["__mti_fntLst"+n](),o=[];if(r)for(var a=0;a<r.length;a++){var h=r[a].fontfamily;void 0!=r[a].fontStyle&&void 0!=r[a].fontWeight?(i=r[a].fontStyle+r[a].fontWeight,o.push(new y(h,i))):o.push(new y(h))}t(o)}else setTimeout(function(){e()},50)}var i=this,n=i.a.projectId,r=i.a.version;if(n){var s=i.c.o;p(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(r?"?v="+r:""),function(r){r?t([]):(s["__MonotypeConfiguration__"+n]=function(){return i.a},e())}).id="__MonotypeAPIScript__"+n}else t([])},H.prototype.load=function(t){var e,i,n=this.a.urls||[],r=this.a.families||[],s=this.a.testStrings||{},o=new f;for(e=0,i=n.length;e<i;e++)c(this.c,n[e],d(o));var a=[];for(e=0,i=r.length;e<i;e++)if(n=r[e].split(":"),n[1])for(var h=n[1].split(","),l=0;l<h.length;l+=1)a.push(new y(n[0],h[l]));else a.push(new y(n[0]));m(o,function(){t(a,s)})};var ot="https://fonts.googleapis.com/css",at={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ht={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},lt={i:"i",italic:"i",n:"n",normal:"n"},ut=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,ct={Arimo:!0,Cousine:!0,Tinos:!0};J.prototype.load=function(t){var e=new f,i=this.c,n=new q(this.a.api,this.a.text),r=this.a.families;Y(n,r);var s=new Q(r);K(s),c(i,Z(n),d(e)),m(e,function(){t(s.a,s.c,ct)})},$.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],r=0;r<e.length;r+=2)for(var s=e[r],o=e[r+1],a=0;a<o.length;a++)n.push(new y(s,o[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}},2e3):t([])},tt.prototype.load=function(t){var e=this.f.id,i=this.c.o,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var r=0,s=i.fonts.length;r<s;++r){var o=i.fonts[r];n.a.push(new y(o.name,T("font-weight:"+o.weight+";font-style:"+o.style)))}t(n.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+u(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var pt=new G(window);pt.a.c.custom=function(t,e){return new H(e,t)},pt.a.c.fontdeck=function(t,e){return new tt(e,t)},pt.a.c.monotype=function(t,e){return new W(e,t)},pt.a.c.typekit=function(t,e){return new $(e,t)},pt.a.c.google=function(t,e){return new J(e,t)};var ft={load:n(pt.load,pt)};"function"==typeof define&&define.amd?define(function(){return ft}):void 0!==e&&e.exports?e.exports=ft:(window.WebFont=ft,window.WebFontConfig&&pt.load(window.WebFontConfig))}()},{}],288:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();t("vendor/modernizr"),t("vendor/detectizr"),t("utils/polyfills");var s=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}();Modernizr.addTest("webgl",function(){return s&&!Modernizr.ie}),Modernizr.addTest("disablegold",function(){var t=Modernizr.chrome,e=parseInt(Detectizr.browser.major);return t&&e>=65&&e<71});var o=t("utils/deferred"),a=t("webfontloader"),h=t("view/viewManager");new(function(){function t(){n(this,t),Promise.all([this.fontReady,this.domReady]).then(this.init.bind(this))}return r(t,[{key:"showPage",value:function(){document.documentElement.classList.add("ready")}},{key:"init",value:function(){this.showPage(),new h}},{key:"fontReady",get:function(){var t=new o;try{a.load({custom:{families:["Brandon:n4,n5,n7,n9","Archer:n4,n6,n7"]},loading:function(){},active:function(){t.resolve()},inactive:function(){t.resolve()}})}catch(e){t.resolve()}return t.promise}},{key:"domReady",get:function(){var t=new o;return document.addEventListener("DOMContentLoaded",t.resolve),t.promise}}]),t}())},{"utils/deferred":319,"utils/polyfills":332,"vendor/detectizr":339,"vendor/modernizr":341,"view/viewManager":383,webfontloader:287}],289:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s={center:{start:".line-separator__before",end:".line-separator__after"},left:{start:".line-separator__after",end:".line-separator__before"},right:{start:".line-separator__before",end:".line-separator__after"},top:{start:".line-separator__after",end:".line-separator__before"},bottom:{start:".line-separator__before",end:".line-separator__after"}},o=function(){function t(e){n(this,t),this.line=e,this.path=this.line.querySelector(".line-separator__path"),this.before=this.line.querySelector(".line-separator__before"),this.after=this.line.querySelector(".line-separator__after");var i=new RegExp(/line-separator--(\w+)/gi);this.direction=i.exec(e.getAttribute("class"))[1],this.isVertical="top"===this.direction||"bottom"===this.direction,this.isHorizontal=!this.vertical,this.order=s[this.direction],this.start=e.querySelector(this.order.start),this.end=e.querySelector(this.order.end)}return r(t,[{key:"prepare",value:function(){TweenMax.set(this.path,{scaleX:this.isHorizontal?0:1,scaleY:this.isVertical?0:1}),TweenMax.set([this.before,this.after],{scale:0})}},{key:"show",value:function(){return this.tl&&this.tl.kill(),this.tl=new TimelineMax,this.tl.to(this.path,1,{scaleX:1,scaleY:1,ease:Quart.easeInOut},0),this.tl.to(this.start,.5,{scale:1,ease:Quad.easeOut},0),this.tl.to(this.end,.5,{scale:1,delay:.65,ease:Back.easeOut},0),this.tl}},{key:"hide",value:function(){return this.tl&&this.tl.kill(),this.tl=new TimelineMax,this.tl.to(this.path,1,{scaleX:this.isHorizontal?0:1,scaleY:this.isVertical?0:1,ease:Quart.easeInOut},0),this.tl.to(this.start,.5,{scale:0,ease:Quad.easeOut},0),this.tl.to(this.end,.5,{scale:0,delay:.65,ease:Back.easeOut},0),this.tl}}]),t}();e.exports=o},{}],290:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("lodash/forEach"),a=t("utils/dependentVariable"),h=t("utils/dispatcher"),l=function(){function t(e){n(this,t),this.el=e,this.current=0,this.isStopped=new a({default:!1}),this.left=this.el.querySelector(".antonyms__left"),this.right=this.el.querySelector(".antonyms__right"),this.bind(),this.createObserver()}return r(t,[{key:"bind",value:function(){this.update(),this.setDependency=this.setDependency.bind(this),h.on("antonyms:setStop",this.setDependency),this.next=this.next.bind(this),this.interval=TweenMax.delayedCall(4,this.next)}},{key:"next",value:function(){this.isStopped.status||this.change(this.current+1),TweenMax.delayedCall(4,this.next)}},{key:"setDependency",value:function(t,e){this.isStopped.setDependency(t,e)}},{key:"createObserver",value:function(){var t=this;this.observer=new IntersectionObserver(function(e){var i=e[0],n=!(i.intersectionRatio>0);t.isStopped.setDependency("antonyms",n)},{}),this.observer.observe(this.el)}},{key:"destroy",value:function(){h.off("antonyms:setDependency",this.setDependency),this.interval.kill(),this.observer.disconnect()}},{key:"getPair",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current,e=this.left.children[t],i=this.right.children[t];return{left:e,leftSize:e.getBoundingClientRect(),right:i,rightSize:i.getBoundingClientRect()}}},{key:"update",value:function(){var t=this.getPair();t.left.style.visibility="visible",t.right.style.visibility="visible",TweenLite.set(this.left,{width:t.leftSize.width,height:t.leftSize.height}),TweenLite.set(this.right,{width:t.rightSize.width,height:t.rightSize.height})}},{key:"change",value:function(t){var e=this;if(t!==this.current){t%=this.left.children.length;var i=new TimelineLite({onComplete:function(){e.current=t}}),n=this.getPair(),r=this.getPair(t);i.set([r.left,r.right],{visibility:"visible",yPercent:100,force3D:!1}),i.to(n.left,.3,{yPercent:-100,force3D:!1,onComplete:function(){TweenLite.set(n.left,{visibility:"hidden"})}}),i.to(n.right,.3,{yPercent:-100,force3D:!1,onComplete:function(){TweenLite.set(n.right,{visibility:"hidden"})}},.1),i.to(this.left,.3,{width:r.leftSize.width,height:r.leftSize.height},.3),i.to(this.right,.3,{width:r.rightSize.width,height:r.rightSize.height},.3),i.to(r.left,.3,{yPercent:0,force3D:!1},.55),i.to(r.right,.3,{yPercent:0,force3D:!1},.6)}}}]),t}(),u=[];s.Dispatcher.on("newPageReady",function(t,e,i){var n=i.querySelectorAll(".antonyms");o(u,function(t){t.destroy()}),u=[],o(n,function(t){u.push(new l(t))})}),e.exports=l},{"barba.js":9,"lodash/forEach":78,"utils/dependentVariable":320,"utils/dispatcher":321}],291:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("lodash/forEach"),a=function(){function e(){n(this,e),this.animations=[t("shared/appearAnimations/fadeUp"),t("shared/appearAnimations/blockUp"),t("shared/appearAnimations/coverDescription"),t("shared/appearAnimations/skillList"),t("shared/appearAnimations/textBrake"),t("shared/appearAnimations/showcase"),t("shared/appearAnimations/team"),t("shared/appearAnimations/person"),t("shared/appearAnimations/pageHeader"),t("shared/appearAnimations/zoomIn"),t("shared/appearAnimations/cases/header"),t("shared/appearAnimations/cases/footer"),t("shared/appearAnimations/cases/quote"),t("shared/appearAnimations/cases/duoImages"),t("shared/appearAnimations/cases/duoTextMedia"),t("shared/appearAnimations/cases/simpleText"),t("shared/appearAnimations/microcaseImage")],this.instances=[],this.container=document.body,this.bind()}return r(e,[{key:"clean",value:function(){o(this.instances,function(t){t.destroy()}),this.instances=[]}},{key:"bind",value:function(){var t=this;s.Dispatcher.on("newPageReady",function(e,i,n){t.container=n,t.parse()})}},{key:"parse",value:function(){var t=this;this.clean(),o(this.animations,function(e){t.instances.push(new e(t.container))})}}]),e}();e.exports=new a},{"barba.js":9,"lodash/forEach":78,"shared/appearAnimations/blockUp":293,"shared/appearAnimations/cases/duoImages":294,"shared/appearAnimations/cases/duoTextMedia":295,"shared/appearAnimations/cases/footer":296,"shared/appearAnimations/cases/header":297,"shared/appearAnimations/cases/quote":298,"shared/appearAnimations/cases/simpleText":299,"shared/appearAnimations/coverDescription":300,"shared/appearAnimations/fadeUp":301,"shared/appearAnimations/microcaseImage":302,"shared/appearAnimations/pageHeader":303,"shared/appearAnimations/person":304,"shared/appearAnimations/showcase":305,"shared/appearAnimations/skillList":306,"shared/appearAnimations/team":307,"shared/appearAnimations/textBrake":308,"shared/appearAnimations/zoomIn":309}],292:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("vendor/totodile");s.Dispatcher.once=function(t,e){function i(){n.off(t,i),e()}var n=this;this.on(t,i)};var a=function(){function t(){n(this,t),this.name="show",this.delay=0,this.threshold=0,this.stagger=200,this.toto=void 0}return r(t,[{key:"init",value:function(t,e){this.els=e||t.querySelectorAll('[data-animation="'+this.name+'"]'),this.ready=this.getDfdTransition(),this.els.length&&(this.toto=new o(this.els,{threshold:this.threshold,delay:this.delay,stagger:this.stagger,prepare:this.prepare.bind(this),run:this.runAfterPageTransition.bind(this)}))}},{
key:"runAfterPageTransition",value:function(t,e){var i=this;this.ready.then(function(){0===e?i.run(t):TweenLite.delayedCall(e/1e3,function(){i.run(t)})})}},{key:"prepare",value:function(t){t.style.display="none"}},{key:"run",value:function(t){t.style.display="block"}},{key:"destroy",value:function(){this.toto&&this.toto.destroy()}},{key:"getDfdTransition",value:function(){var t=new s.Utils.deferred;return s.Pjax.transitionProgress?s.Dispatcher.on("transitionCompleted",function(){t.resolve()}):t.resolve(),t.promise}}]),t}();e.exports=a},{"barba.js":9,"vendor/totodile":343}],293:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("utils/viewport"),l=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.threshold=0,i.name="block";var s=t.querySelectorAll(".block-up-animate");return i.init(t,s),i}return s(e,t),o(e,[{key:"prepare",value:function(t){var e=.1*h.height;TweenLite.set(t,{y:e,opacity:0})}},{key:"run",value:function(t){TweenLite.set(t,{y:300}),TweenLite.to(t,1,{y:0,opacity:1})}}]),e}(a);e.exports=l},{"shared/appearAnimations/baseAnimation":292,"utils/viewport":336}],294:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("utils/mq"),l=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.5,i.name="duo-images",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){if(this.left=t.querySelector(".duo-images__left"),this.right=t.querySelector(".duo-images__right"),this.inner=t.querySelectorAll(".duo-images__inner"),h.isMoreThan("small-xxl")){var e=t.getBoundingClientRect();TweenLite.set(this.inner,{height:e.height}),TweenLite.set([this.left,this.right],{height:0})}}},{key:"run",value:function(t){var e=this;if(this.left=t.querySelector(".duo-images__left"),this.right=t.querySelector(".duo-images__right"),this.inner=t.querySelectorAll(".duo-images__inner"),h.isMoreThan("small-xxl")){var i=t.getBoundingClientRect();TweenMax.staggerTo([this.left,this.right],1,{height:i.height,ease:Expo.easeInOut,onComplete:function(){}},.2,function(){TweenLite.set([e.left,e.right,e.inner],{clearProps:"height"})})}}}]),e}(a);e.exports=l},{"shared/appearAnimations/baseAnimation":292,"utils/mq":328}],295:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("shared/animateLine"),l=(t("utils/mq"),function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.1,i.name="duo-text-media",i.prepared=0,i.runned=0,i.animateLines=[],i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.media=t.querySelector(".content__media"),this.title=t.querySelector(".content__title"),this.headline=t.querySelector(".content__headline"),this.text=t.querySelector(".content__text"),this.images=t.querySelectorAll(".content__image"),this.lines=t.querySelectorAll('[class ^="line-separator--"]'),this.prepareMedia(),this.prepareTitle(),this.prepareText(),this.prepareLines(),this.images&&this.prepareImages(),this.headline&&this.prepareHeadline()}},{key:"run",value:function(t){this.media=t.querySelector(".content__media"),this.title=t.querySelector(".content__title"),this.headline=t.querySelector(".content__headline"),this.text=t.querySelector(".content__text"),this.images=t.querySelectorAll(".content__image"),this.lines=t.querySelectorAll('[class ^="line-separator--"]'),this.runMedia(),this.runTitle(),this.runText(),this.runLines(),this.images&&this.runImages(),this.headline&&this.runHeadline()}},{key:"prepareMedia",value:function(){TweenLite.set(this.media,{opacity:0})}},{key:"runMedia",value:function(){TweenLite.to(this.media,1,{opacity:1,ease:Quad.easeOut})}},{key:"prepareHeadline",value:function(){this.headline&&TweenLite.set(this.headline,{y:20,opacity:0})}},{key:"runHeadline",value:function(){this.headline&&TweenLite.to(this.headline,1,{y:0,opacity:1,ease:Quad.easeOut})}},{key:"prepareTitle",value:function(){this.title&&TweenLite.set(this.title,{y:20,opacity:0})}},{key:"runTitle",value:function(){this.title&&TweenLite.to(this.title,1,{y:0,opacity:1,delay:.3,ease:Quad.easeOut})}},{key:"prepareText",value:function(){this.text&&TweenLite.set(this.text,{y:20,opacity:0})}},{key:"runText",value:function(){this.text&&TweenLite.to(this.text,1,{y:0,opacity:1,delay:1.2,ease:Quad.easeOut})}},{key:"prepareImages",value:function(){TweenLite.set(this.images,{opacity:0})}},{key:"runImages",value:function(){Array.prototype.forEach.call(this.images,function(t,e){TweenLite.to(t,1,{opacity:1,delay:1.2+.5*(e+1),ease:Quad.easeOut})})}},{key:"prepareLines",value:function(){var t=this;this.animateLines[this.prepared]=[],Array.prototype.forEach.call(this.lines,function(e,i){t.animateLines[t.prepared][i]=new h(e),t.animateLines[t.prepared][i].prepare()}),this.prepared=this.prepared+1}},{key:"runLines",value:function(){var t=this.animateLines[this.runned];TweenLite.delayedCall(.6,function(){for(var e=0;e<t.length;e++)t[e].show()}),this.runned=this.runned+1}}]),e}(a));e.exports=l},{"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292,"utils/mq":328}],296:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("shared/animateLine"),l=(t("utils/mq"),function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.3,i.name="case-footer",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.title=t.querySelector(".case-footer__title"),this.text=t.querySelector(".case-footer__text"),this.statValue=t.querySelector(".stat__value"),this.statText=t.querySelector(".stat__text"),this.awards=t.querySelector(".awards"),this.lines=t.querySelectorAll('[class ^="line-separator--"]'),this.prepareTitle(),this.prepareText(),this.prepareLines(),this.awards&&this.prepareAwards()}},{key:"run",value:function(t){this.runTitle(),this.runText(),this.runLines(),this.awards&&this.runAwards()}},{key:"prepareTitle",value:function(){TweenLite.set([this.title,this.statValue],{y:20,opacity:0})}},{key:"runTitle",value:function(){TweenLite.to([this.title,this.statValue],1,{y:0,opacity:1,ease:Quad.easeOut})}},{key:"prepareText",value:function(){TweenLite.set([this.text,this.statText],{y:20,opacity:0})}},{key:"runText",value:function(){TweenLite.to([this.text,this.statText],1,{y:0,opacity:1,delay:.3,ease:Quad.easeOut})}},{key:"prepareLines",value:function(){var t=this;this.animateLines=[],Array.prototype.forEach.call(this.lines,function(e,i){t.animateLines[i]=new h(e),t.animateLines[i].prepare()})}},{key:"runLines",value:function(){var t=this;TweenLite.delayedCall(.6,function(){for(var e=0;e<t.animateLines.length;e++)t.animateLines[e].show()})}},{key:"prepareAwards",value:function(){TweenLite.set(this.awards,{y:20,opacity:0})}},{key:"runAwards",value:function(){TweenLite.to(this.awards,1,{y:0,opacity:1,delay:.6,ease:Quad.easeOut})}}]),e}(a));e.exports=l},{"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292,"utils/mq":328}],297:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(t("barba.js"),t("shared/appearAnimations/baseAnimation")),h=t("shared/animateLine"),l=(t("utils/mq"),function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="case-header",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.picture=t.querySelector(".case-header__picture"),this.title=t.querySelector(".title__title"),this.subtitle=t.querySelector(".case-header__subtitle"),this.lines=t.querySelectorAll('[class ^="line-separator--"]'),this.scroll=t.querySelector(".scroll-down"),this.layer=t.querySelector(".case-header__layer"),this.isDirectLoading=!1,this.isDirectLoading&&this.preparePicture(),this.prepareTitle(),this.prepareSubtitle(),this.prepareLines(),Features.firefox||this.prepareScroll(),this.prepareLayer()}},{key:"run",value:function(t){this.isDirectLoading&&this.runPicture(),this.runTitle(),this.runSubtitle(),this.runLines(),Features.firefox||this.runScroll(),this.runLayer()}},{key:"prepareScroll",value:function(){TweenLite.set(this.scroll,{y:150})}},{key:"runScroll",value:function(){TweenLite.to(this.scroll,.4,{y:0,delay:2,ease:Quad.easeOut})}},{key:"prepareLayer",value:function(){this.layer&&TweenLite.set(this.layer,{opacity:0})}},{key:"runLayer",value:function(){this.layer&&TweenLite.to(this.layer,2,{delay:1,opacity:1})}},{key:"preparePicture",value:function(){TweenLite.set(this.picture,{opacity:0})}},{key:"runPicture",value:function(){TweenLite.to(this.picture,3,{opacity:1,ease:Quad.easeOut})}},{key:"prepareTitle",value:function(){TweenLite.set(this.title,{opacity:0})}},{key:"runTitle",value:function(){TweenLite.to(this.title,2,{opacity:1,delay:this.isDirectLoading?1:0,ease:Quad.easeOut})}},{key:"prepareSubtitle",value:function(){this.subtitleSplit=new SplitText(this.subtitle,{type:"words"}),TweenLite.set(this.subtitleSplit.words,{opacity:0,y:10})}},{key:"runSubtitle",value:function(){TweenMax.staggerTo(this.subtitleSplit.words,1,{delay:2,y:0,opacity:1},.1)}},{key:"prepareLines",value:function(){var t=this;this.animateLines=[],Array.prototype.forEach.call(this.lines,function(e,i){t.animateLines[i]=new h(e),t.animateLines[i].prepare()})}},{key:"runLines",value:function(){var t=this,e=this.isDirectLoading?2:1;TweenLite.delayedCall(e,function(){for(var e=0;e<t.animateLines.length;e++)t.animateLines[e].show()})}},{key:"random",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}}]),e}(a));e.exports=l},{"barba.js":9,"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292,"utils/mq":328}],298:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("shared/animateLine"),l=t("utils/mq"),u=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.1,i.name="case-quote",l.isMoreThan("large")?(i.init(t),i):r(i)}return s(e,t),o(e,[{key:"prepare",value:function(t){this.box=t.querySelector(".case-quote__inner"),this.lines=t.querySelectorAll("[class^='line-separator--']"),this.prepareBox(),this.prepareLines()}},{key:"run",value:function(t){this.runBox(),this.runLines()}},{key:"prepareBox",value:function(){TweenLite.set(this.box,{y:0})}},{key:"runBox",value:function(){TweenLite.to(this.box,1.2,{y:l.isMoreThan("large")?"-50%":0,ease:Quart.easeOut,clearProps:"all"})}},{key:"prepareLines",value:function(){var t=this;this.animateLines=[],Array.prototype.forEach.call(this.lines,function(e,i){t.animateLines[i]=new h(e),t.animateLines[i].prepare()})}},{key:"runLines",value:function(){var t=this;this.animateLines&&TweenLite.delayedCall(1,function(){for(var e=0;e<t.animateLines.length;e++)t.animateLines[e].show()})}}]),e}(a);e.exports=u},{"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292,"utils/mq":328}],299:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("shared/animateLine"),l=(t("utils/mq"),function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.2,i.name="simple-text",i.prepared=0,i.runned=0,i.animateLines=[],i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.title=t.querySelector(".content__title"),this.text=t.querySelector(".content__text"),this.lines=t.querySelectorAll('[class ^="line-separator--"]'),this.link=t.querySelector(".simple-text__link"),this.prepareTitle(),this.prepareText(),this.prepareLines(),this.prepareLink()}},{key:"run",value:function(t){this.title=t.querySelector(".content__title"),this.text=t.querySelector(".content__text"),this.lines=t.querySelectorAll('[class ^="line-separator--"]'),this.link=t.querySelector(".simple-text__link"),this.runTitle(),this.runText(),this.runLines(),this.runLink()}},{key:"prepareTitle",value:function(){this.title&&TweenLite.set(this.title,{y:20,opacity:0})}},{key:"runTitle",value:function(){this.title&&TweenLite.to(this.title,1,{y:0,opacity:1,ease:Quad.easeOut})}},{key:"prepareText",value:function(){this.text&&TweenLite.set(this.text,{y:20,opacity:0})}},{key:"runText",value:function(){this.text&&TweenLite.to(this.text,1,{y:0,opacity:1,delay:.6,ease:Quad.easeOut})}},{key:"prepareLines",value:function(){var t=this;this.animateLines[this.prepared]=[],Array.prototype.forEach.call(this.lines,function(e,i){t.animateLines[t.prepared][i]=new h(e),t.animateLines[t.prepared][i].prepare()}),this.prepared=this.prepared+1}},{key:"runLines",value:function(){var t=this.animateLines[this.runned];TweenLite.delayedCall(.3,function(){for(var e=0;e<t.length;e++)t[e].show()}),this.runned=this.runned+1}},{key:"prepareLink",value:function(){this.link&&TweenLite.set(this.link,{y:20,opacity:0})}},{key:"runLink",value:function(){this.link&&TweenLite.to(this.link,1,{y:0,opacity:1,delay:1,ease:Quad.easeOut})}}]),e}(a));e.exports=l},{"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292,"utils/mq":328}],300:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=0,i.delay=400,i.name="cover-description",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){TweenLite.set(t,{opacity:0})}},{key:"run",value:function(t){TweenLite.to(t,4,{opacity:1})}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],301:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="fadeup",i.stagger=100,i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){TweenLite.set(t,{opacity:0,y:0})}},{key:"run",value:function(t){TweenLite.to(t,1,{opacity:1,y:0,ease:Power4.easeIn})}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],302:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="microcaseimage",i.stagger=300,i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){TweenLite.set(t,{opacity:0,y:50})}},{key:"run",value:function(t){TweenLite.to(t,1,{opacity:1,y:0,ease:Power4.easeOut})}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],303:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("shared/animateLine"),l=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="page-header",window.homeAboutToAboutActive?r(i):(i.init(t),i)}return s(e,t),o(e,[{key:"prepare",value:function(t){this.bodymovin=t.querySelector("[data-bodymovin]"),this.icon=t.querySelector(".title__icon"),this.title=t.querySelector(".title__title"),this.lineLeft=t.querySelector(".line-separator--left"),this.lineRight=t.querySelector(".line-separator--right"),this.aLineLeft=new h(this.lineLeft),this.aLineRight=new h(this.lineRight),this.text=t.querySelector(".page-header__text"),this.icon&&TweenLite.set(this.icon,{opacity:0,y:10}),TweenLite.set(this.title,{opacity:0,y:10}),this.text&&(this.splitText=new SplitText(this.text,{type:"words"}),TweenLite.set(this.splitText.words,{opacity:0,y:10})),this.bodymovin&&TweenLite.set(this.bodymovin,{opacity:0,y:100}),this.aLineLeft.prepare(),this.aLineRight.prepare()}},{key:"run",value:function(t){var e=this,i=new TimelineLite({});i.add("start"),this.icon&&i.to(this.icon,.8,{opacity:1,y:0},"start"),this.title&&i.to(this.title,.8,{opacity:1,y:0},"start+=.3"),i.add(function(){e.aLineLeft.show(),e.aLineRight.show()},"start+=.3"),this.text&&i.staggerTo(this.splitText.words,1,{opacity:1,y:0,ease:Power4.easeOut},.03,"start+=.4"),this.bodymovin&&i.to(this.bodymovin,3,{opacity:1,y:0},"start+=.5")}}]),e}(a);e.exports=l},{"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292}],304:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.threshold=.3,i.delay=200,i.stagger=100,i.name="person";var s=t.querySelectorAll(".person");return i.init(t,s),i}return s(e,t),o(e,[{key:"prepare",value:function(t){TweenLite.set(t,{opacity:0})}},{key:"run",value:function(t){TweenLite.set(t,{y:100}),TweenLite.to(t,.6,{y:0,opacity:1,ease:Power4.easeOut,force3D:!1})}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],305:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.1,i.delay=100,i.name="showcase",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.titleSvg=t.querySelector(".title svg"),this.title=t.querySelector(".title__title"),this.text=t.querySelector(".showcase__text"),this.splitText=new SplitText(this.text,{type:"lines"}),this.logos=t.querySelectorAll(".list-logos li"),this.icons=t.querySelectorAll("ul li"),this.awardsTitle=t.querySelectorAll(".awards__title"),this.awards=t.querySelectorAll(".awards li"),TweenLite.set(this.titleSvg,{opacity:0,y:5}),TweenLite.set(this.title,{opacity:0,y:5}),TweenLite.set(this.splitText.lines,{opacity:0,y:5}),TweenLite.set(this.logos,{opacity:0,y:5}),TweenLite.set(this.awardsTitle,{opacity:0,y:5}),TweenLite.set(this.awards,{opacity:0,y:5})}},{key:"run",value:function(t){var e=this,i=new TimelineMax({onComplete:function(){e.splitText.revert()}});i.add("start"),i.to(this.titleSvg,1,{opacity:1,y:0,ease:Power4.easeOut}),i.to(this.title,1,{opacity:1,y:0,ease:Power4.easeOut},.1),i.staggerTo(this.splitText.lines,1,{opacity:1,y:0,ease:Power4.easeOut},.1,.2),i.staggerTo(this.logos,.4,{force3D:!0,opacity:.3,y:0,ease:Power4.easeOut},.08,.3),i.to(this.awardsTitle,.5,{opacity:1,y:0,ease:Power4.easeOut},.4),i.staggerTo(this.awards,.6,{opacity:1,y:0,ease:Power4.easeOut},.2,.5)}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],306:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.01,i.delay=0,i.name="skill-list",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.title=t.querySelector(".skill-list__title"),this.icons=t.querySelectorAll("ul li"),TweenLite.set(this.title,{opacity:0,y:20}),TweenLite.set(this.icons,{opacity:0,y:10})}},{key:"run",value:function(t){var e=new TimelineMax({});e.add("start"),e.to(this.title,.6,{opacity:1,y:0,ease:Power4.easeOut}),e.staggerTo(this.icons,.4,{opacity:1,y:0,ease:Power4.easeOut},.05,"start+=.2")}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],307:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=t("shared/animateLine"),l=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=0,i.delay=200,i.name="team",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){this.title=t.querySelector(".title__title"),this.lineLeft=t.querySelector(".line-separator--left"),this.lineRight=t.querySelector(".line-separator--right"),this.text=t.querySelector(".team__intro__text"),this.aLineLeft=new h(this.lineLeft),this.aLineRight=new h(this.lineRight),this.splitText=new SplitText(this.text,{type:"lines"}),this.specs=t.querySelectorAll(".team__intro__specs li"),TweenLite.set(this.title,{opacity:0,y:20}),this.aLineLeft.prepare(),this.aLineRight.prepare(),TweenLite.set(this.splitText.lines,{opacity:0,y:5}),TweenLite.set(this.specs,{opacity:0,y:0})}},{key:"run",
value:function(t){var e=this,i=new TimelineMax({onComplete:function(){e.splitText.revert()}});i.add("start"),i.to(this.title,.6,{opacity:1,y:0,ease:Power4.easeOut}),i.add(this.aLineLeft.show.bind(this.aLineLeft),"start += .1"),i.add(this.aLineRight.show.bind(this.aLineRight),"start += .1"),i.staggerTo(this.splitText.lines,1,{opacity:1,y:0,ease:Power4.easeOut},.1,"start += .3"),i.staggerTo(this.specs,.6,{opacity:1,y:0,ease:Power4.easeOut},.1,"start += .3")}}]),e}(a);e.exports=l},{"shared/animateLine":289,"shared/appearAnimations/baseAnimation":292}],308:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.threshold=.01,i.delay=0,i.name="text-brake",i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){TweenLite.set(t,{opacity:0})}},{key:"run",value:function(t){TweenLite.to(t,4,{opacity:1})}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],309:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("shared/appearAnimations/baseAnimation"),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="zoomIn",i.stagger=100,i.init(t),i}return s(e,t),o(e,[{key:"prepare",value:function(t){TweenLite.set(t,{opacity:0,scale:.9})}},{key:"run",value:function(t){TweenLite.to(t,1,{opacity:1,ease:Power4.easeIn}),TweenLite.to(t,5,{scale:1,ease:Expo.easeOut})}}]),e}(a);e.exports=h},{"shared/appearAnimations/baseAnimation":292}],310:[function(t,e,i){"use strict";var n=t("pixi.js");n.utils.sayHello=function(){},e.exports=function(t){function e(t){var e,i,n,r;t?(n=t.clientX/w,r=t.clientY/x,e=2*n-1,i=1-2*r,D={x:e,y:i}):(n=D.x/w,r=D.y/x),k=1+.15*n,R=.95+.05*r}function i(){x=window.innerHeight,w=window.innerWidth,T=Math.min(w,1600),S=Math.min(x,900),F.resize(w,x),o()}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;x=e,w=t,F.resize(w,x),o()}function s(t){for(var e=0,i=I.length;e<i;e++){var n=I[e];n.sprite.scale.x=n.sprite.scale.y=t}}function o(t){for(var e=0,i=I.length;e<i;e++){I[e].updatePosition(t)}a()}function a(){g&&(g.sprite.width=w-2*L,g.sprite.y=L,g.sprite.x=L,y.sprite.width=w-2*L,y.sprite.y=x-L,y.sprite.x=L,te.sprite.width=x-2*L,te.sprite.x=w-L,te.sprite.y=L,$t.sprite.width=x-2*L,$t.sprite.x=L,$t.sprite.y=L,_.sprite.x=w/2,_.sprite.y=L+5,b.sprite.x=w/2,b.sprite.y=x-L-5,f.sprite.x=L,f.sprite.y=L,d.sprite.x=w-L,d.sprite.y=L,v.sprite.x=w-L,v.sprite.y=x-L,m.sprite.x=L,m.sprite.y=x-L,U.sprite.width=2*w,U.sprite.height=2*x),p&&(p.clear(),p.beginFill(16776960),p.drawRect(L+2,L+2,w-2*L,x-2*L))}function h(t,r){U=new ee("background-base.png",N,{tiling:!0,depth:0,initPcX:0,initPcY:0,initDispY:0,initDispX:0,centerPivotX:!1,centerPivotY:!1,affectedByScale:!1}),z=new n.Sprite,N.addChild(z),p=new n.Graphics,N.addChild(p),z.mask=p,G=new ee("cupola-left.png",z,{depth:-7,initPcX:.5,initPcY:0,initDispY:125,initDispX:-220,hideBelowX:M}),V=new ee("cupola-left.png",z,{depth:-7,initPcX:.5,initPcY:0,initDispY:125,initDispX:220,initScaleX:-.5,hideBelowX:M}),X=new ee("star-top-big.png",z,{depth:-8,initPcX:.5,initPcY:.1,hideBelowX:M}),W=new ee("star-top-small.png",z,{depth:-8,initPcX:.55,initPcY:.11,hideBelowX:P}),H=new ee("sun.png",z,{depth:-6,initPcX:0,initPcY:0,initDispY:140,initDispX:240,hideBelowX:A}),q=new ee("moon-top-right.png",z,{depth:-6,initPcX:1,initPcY:0,initDispX:-125,initDispY:125,hideBelowX:A}),Y=new ee("saturn-top-right.png",z,{depth:-6,initPcX:1,initPcY:0,initDispX:-185,initDispY:60,hideBelowX:P}),Z=new ee("saturn-cloud-top-right.png",z,{depth:-7,initPcX:.77,initPcY:.15,hideBelowX:E}),Q=new ee("planet-top-left.png",z,{depth:-7,initPcX:.35,initPcY:.13,hideBelowX:P}),K=new ee("meteorite.png",z,{depth:-7,initPcX:.92,initPcY:.35,hideBelowX:E}),J=new ee("planet-orbit-top-right.png",z,{depth:-6,initPcX:1,initPcY:0,initDispX:-145,initDispY:200}),$=new ee("mountain-top-right.png",z,{depth:-5,initPcX:.65,initPcY:.2,hideBelowX:P}),tt=new ee("mountain-top-left.png",z,{depth:-5,initPcX:.35,initPcY:.2,hideBelowX:P}),et=new ee("cloud-top.png",z,{depth:-5,initPcX:.5,initPcY:.2,hideBelowX:P}),it=new ee("cloud-b.png",z,{depth:-4,initRotation:.1,initPcX:.71,initPcY:.27,hideBelowX:P}),nt=new ee("shelf-left-small.png",z,{depth:-4,initPcX:.23,initPcY:.48,hideBelowX:E,floatFrequency:.02,floatAmplitude:2,floatAngle:0}),rt=new ee("cloud-b.png",z,{depth:-3,initPcX:.25,initPcY:.53,hideBelowX:M}),st=new ee("ship-left-small.png",z,{depth:-3,initPcX:.28,initPcY:.55,hideBelowX:P,floatFrequency:.035,floatAmplitude:3,floatAngle:0}),ot=new ee("cloud-a.png",z,{depth:-2,initPcX:.25,initPcY:.6,hideBelowX:P}),at=new ee("balloon-right-small.png",z,{depth:-3,initPcX:.77,initPcY:.48,hideBelowX:E,floatFrequency:.02,floatAmplitude:2,floatAngle:0}),ht=new ee("balloons-castle.png",z,{depth:-1,initPcX:.25,initPcY:.15,hideBelowX:M}),lt=new ee("troy.png",z,{depth:2,initPcX:.7,initPcY:.45,hideBelowX:M,floatFrequency:.02,floatAmplitude:3,floatAngle:0}),ut=new ee("cloud-c.png",z,{depth:2,initPcX:.03,initPcY:.27}),ct=new ee("bubbles-castle.png",z,{depth:3,initPcX:.23,initPcY:.35,hideBelowX:M,floatFrequency:.01,floatAmplitude:3,floatAngle:0}),pt=new ee("small-castle.png",z,{depth:3,initPcX:.8,initPcY:.25,hideBelowX:E,floatFrequency:.025,floatAmplitude:2,floatAngle:0}),ft=new ee("balloon-top-right-small.png",z,{depth:3,initPcX:.7,initPcY:.22,hideBelowX:E,floatFrequency:.02,floatAmplitude:1,floatAngle:0}),dt=new ee("mountain-left-small.png",z,{depth:7,initPcX:.05,initPcY:.4,hideBelowX:P}),mt=new ee("mountain-right-small2.png",z,{depth:7.5,initPcX:.12,initPcY:.46,hideBelowX:E});var o=new n.Sprite;N.addChild(o),vt=new ee("cloud-a.png",z,{depth:8,initPcX:.13,initPcY:.5,hideBelowX:E}),gt=new ee("cloud-top.png",z,{depth:8,initPcX:.35,initPcY:.75,initRotation:Math.PI/6,hideBelowX:E}),yt=new ee("cloud-top.png",z,{depth:8,initPcX:-.05,initPcY:.5,hideBelowX:E}),_t=new ee("cloud-top.png",z,{depth:9,initPcX:-.1,initPcY:.3,initRotation:Math.PI/2,hideBelowX:E}),bt=new ee("cloud-top.png",z,{depth:8,initPcX:1.05,initPcY:.5,initRotation:-Math.PI/2,hideBelowX:E}),xt=new ee("cloud-top.png",z,{depth:9,initPcX:1,initPcY:.3,initRotation:-Math.PI/3,hideBelowX:E}),wt=new ee("cloud-top.png",z,{depth:8,initPcX:.5,initPcY:0,initRotation:-Math.PI,hideBelowX:E}),Tt=new ee("mountain-left-big.png",z,{depth:9,initPcX:.15,initPcY:.69}),St=new ee("mountain-right-small3.png",z,{depth:8,initPcX:.9,initPcY:.5}),Et=new ee("smoke-big.png",St.sprite,{initScaleX:1,initScaleY:1,initDispX:90,initDispY:30,hideBelowX:E}),Mt=new ee("smoke-small.png",St.sprite,{initScaleX:1,initScaleY:1,initDispX:70,initDispY:-80,hideBelowX:M}),Pt=new ee("cloud-b.png",z,{depth:8,initRotation:-.75,initPcX:.71,initPcY:.57,hideBelowX:P}),At=new ee("mountain-right-big.png",z,{depth:9,initPcX:.8,initPcY:.65}),Ct=new ee("diamond.png",At.sprite,{initScaleX:1,initScaleY:1,initDispX:440,initDispY:-60,hideBelowX:M,floatFrequency:.02,floatAmplitude:4,floatAngle:0}),Ot=new ee("cloud-c.png",z,{depth:11,initPcX:.6,initPcY:.7,hideBelowX:M}),St=new ee("mountain-right-small2.png",z,{depth:12,initPcX:.77,initPcY:.65,hideBelowX:P}),Lt=new ee("mountain-right-small1.png",z,{depth:12,initPcX:.7,initPcY:.7,hideBelowX:P}),kt=new ee("cloud-c.png",z,{depth:13,initPcX:.55,initPcY:.75,initRotation:-Math.PI/6,hideBelowX:E}),Rt=new ee("mountain-right-small2.png",z,{depth:12,initPcX:.95,initPcY:.65,hideBelowX:P}),It=new ee("cloud-c.png",z,{depth:13,initPcX:.85,initPcY:.7,hideBelowX:E}),Dt=new ee("hills-bottom-left.png",z,{depth:11,initPcX:.15,initPcY:.74,hideBelowX:P}),Ft=new ee("water-surface-a.png",z,{depth:12,initPcX:.25,initPcY:.91,initDispY:-65,hideBelowX:M}),Nt=new ee("water-surface-b.png",z,{depth:12,initPcX:.35,initPcY:.91,initDispY:-65}),Bt=new ee("water-surface-c.png",z,{depth:12,initPcX:.45,initPcY:.91,initDispY:-65}),jt=new ee("water-surface-d.png",z,{depth:12,initPcX:.65,initPcY:.91,initDispY:-65}),Ut=new ee("water-surface-e.png",z,{depth:12,initPcX:.85,initPcY:.91,initDispY:-65}),u=new ee("castle.png",z,{depth:14,initPcX:.5,initPcY:.45,floatFrequency:.03,floatAmplitude:5,floatAngle:0}),zt=new ee("tentacle-left.png",z,{depth:18,initPcX:.5,initDispX:-115,initPcY:.92,initDispY:-70,hideBelowX:E}),Gt=new ee("tentacle-right.png",z,{depth:18,initPcX:.5,initDispX:115,initPcY:.92,initDispY:-70,hideBelowX:E}),Vt=new ee("whale.png",z,{depth:22,initPcX:.5,initPcY:.97,initDispY:-70,hideBelowX:A}),Xt=new ee("beach-left.png",z,{depth:21,initPcX:.17,initPcY:.91}),Wt=new ee("beach-left.png",z,{depth:21,initPcX:.9,initPcY:.91,initScaleX:-.5}),Ht=new ee("small-ship-bottom-right.png",z,{depth:21,initPcX:.82,initPcY:.8}),qt=new ee("sword-tree-left.png",z,{depth:22,initPcX:.17,initPcY:.91}),Yt=new ee("trees-left.png",z,{depth:22,initPcX:.11,initPcY:.86}),Zt=new ee("column-left.png",z,{depth:25,initPcX:.05,initPcY:1,initDispY:-150}),Qt=new ee("tree-bottom-right.png",z,{depth:25,initPcX:.95,initPcY:1,initDispY:-150}),Kt=new ee("spartan.png",z,{depth:26,initPcX:.3,initPcY:1,initDispY:-110,hideBelowX:P}),Jt=new ee("viking.png",z,{depth:26,initPcX:.7,initPcY:1,initDispY:-110,hideBelowX:P}),c=new n.Sprite,N.addChild(c),g=new ee("frame-line.png",c,{centerPivotX:!1,initDispX:L,initDispY:L,affectedByScale:!1}),y=new ee("frame-line.png",c,{centerPivotX:!1,initDispX:L,initPcY:1,initDispY:-L,affectedByScale:!1}),$t=new ee("frame-line.png",c,{centerPivotX:!1,initRotation:Math.PI/2,initDispX:L,initDispY:L,affectedByScale:!1}),te=new ee("frame-line.png",c,{centerPivotX:!1,initRotation:Math.PI/2,initPcX:1,initDispX:-L,initDispY:L,affectedByScale:!1}),_=new ee("frame-top-middle.png",c,{initPcX:.5,initDispY:L+5,affectedByScale:!1}),b=new ee("frame-top-middle.png",c,{initPcX:.5,initPcY:1,initDispY:-L-5,initRotation:Math.PI,affectedByScale:!1}),f=new ee("frame-corner.png",c,{initDispX:L,initDispY:L,affectedByScale:!1}),d=new ee("frame-corner.png",c,{initPcX:1,initDispX:-L,initDispY:L,affectedByScale:!1}),m=new ee("frame-corner.png",c,{initDispX:L,initPcY:1,initDispY:-L,affectedByScale:!1}),v=new ee("frame-corner.png",c,{initPcX:1,initDispX:-L,initPcY:1,initDispY:-L,affectedByScale:!1}),s(0),i(),l(),l(!1);var h={val:-20};TweenMax.to(h,1,{val:O,ease:Power4.easeInOut,onUpdate:function(){L=h.val,a()},onComplete:function(){e()}})}function l(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(ie=requestAnimationFrame(l)),!ne&&t||(o(),F.render(N))}var u,c,p,f,d,m,v,g,y,_,b,x=window.innerHeight,w=window.innerWidth,T=w,S=x,E=1440,M=1200,P=900,A=480,C=t,O=0,L=-20,k=0,R=.95,I=[],D={x:0,y:0},F=(window.devicePixelRatio,n.autoDetectRenderer(800,600,{antialiasing:!0,transparent:!0,resolution:1}));C.appendChild(F.view);var N=new n.Container,B=new n.filters.ColorMatrixFilter;B.brightness(1.3),N.filters=[B];var j=new n.loaders.Loader(window.EPICINFO.BASEURL+"/assets/pixi/",30);j.add("world","world.json"),j.once("complete",h),j.load(),window.addEventListener("resize",i,!1),document.addEventListener("mousemove",e);var U,z,G,V,X,W,H,q,Y,Z,Q,K,J,$,tt,et,it,nt,rt,st,ot,at,ht,lt,ut,ct,ut,ct,pt,ft,dt,mt,vt,gt,yt,_t,bt,xt,wt,Tt,St,Et,Mt,Pt,At,Ct,Ot,St,Lt,kt,Rt,It,Dt,Ft,Nt,Bt,jt,Ut,u,zt,Gt,Vt,Xt,Wt,Ht,qt,Yt,Zt,Qt,Kt,Jt,g,y,$t,te,_,b,f,d,m,v,ee=function(t,e,i){this.params=i||{},this.initPcX=this.params.initPcX||0,this.initPcY=this.params.initPcY||0,this.initDispX=this.params.initDispX||0,this.initDispY=this.params.initDispY||0,this.depth=this.params.depth||0,this.tiling=!!this.params.tiling,this.initRotation=this.params.initRotation||0,this.initScaleX=this.params.initScaleX||.5,this.initScaleY=this.params.initScaleY||.5,this.affectedByScale=0!=this.params.affectedByScale,this.centerPivotX=0!=this.params.centerPivotX,this.centerPivotY=0!=this.params.centerPivotY,this.hideBelowX=this.params.hideBelowX||0,this.hideBelowY=this.params.hideBelowY||0,this.floatFrequency=this.params.floatFrequency||0,this.floatAmplitude=this.params.floatAmplitude||0,this.floatAngle=this.params.floatAngle||0,this.texName=t,this.visible=!0,this.parent=e,this.tiling?this.sprite=n.extras.TilingSprite.fromFrame(t):this.sprite=n.Sprite.fromFrame(t),this.centerPivotX&&(this.sprite.pivot.x=this.sprite.width/2),this.centerPivotY&&(this.sprite.pivot.y=this.sprite.height/2),this.parent.addChild(this.sprite),I.push(this),this.updatePosition()};ee.prototype.updatePosition=function(t){var e=0;this.floatFrequency>0&&(this.floatAngle+=this.floatFrequency,e=Math.cos(this.floatAngle)*this.floatAmplitude*2);var i,n;this.tiling?(i=w*this.initPcX+this.initDispX-D.x*this.depth*3,n=x*this.initPcY+this.initDispY+e+D.y*this.depth*3):(i=.5*(w-T)+T*this.initPcX+this.initDispX-D.x*this.depth*3,n=.5*(x-S)+S*this.initPcY+this.initDispY+e+D.y*this.depth*3);var r=this.initScaleX,s=this.initScaleY;if(this.affectedByScale){var o=1+(this.depth-18)/100;this.depth;r*=k*o,s*=k*o,i=T/2+(i-T/2)*k*R,n=S/2+(n-S/2)*k*R}return this.sprite.rotation=this.initRotation,!this.visible&&w>this.hideBelowX&&x>this.hideBelowY?(this.visible=!0,TweenMax.to(this.sprite.scale,1,{x:r,y:s,ease:Power4.easeInOut}),this.sprite.x=i,void(this.sprite.y=n)):this.visible?this.visible&&(w<this.hideBelowX||x<this.hideBelowY)?(this.visible=!1,TweenMax.killTweensOf(this.sprite.scale),void TweenMax.to(this.sprite.scale,1,{x:0,y:0,ease:Power4.easeInOut})):(this.visible=!0,void(this.affectedByScale?(this.sprite.x+=.1*(i-this.sprite.x),this.sprite.y+=.1*(n-this.sprite.y),this.sprite.scale.x+=.1*(r-this.sprite.scale.x),this.sprite.scale.y+=.1*(s-this.sprite.scale.y)):(this.sprite.x=i,this.sprite.y=n,this.sprite.scale.x=r,this.sprite.scale.y=s))):(this.sprite.x=i,void(this.sprite.y=n))};var ie,ne=!0;return{stop:function(){ne=!1},play:function(){ne=!0},destroy:function(){cancelAnimationFrame(ie),F.destroy(),N.destroy(!0),window.removeEventListener("resize",i),document.removeEventListener("mousemove",e),C.parentNode.removeChild(C)},resize:r}}},{"pixi.js":244}],311:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("bodymovin/build/player/bodymovin_light"),a=t("lodash/forEach"),h=t("lodash/uniqueId"),l=t("utils/deferred"),u=t("utils/dependentVariable"),c=t("utils/dispatcher");o.setQuality("low");var p={data:{},add:function(t,e){this.data[t]=e},get:function(t){return this.data[t]||void 0}},f=function(){function t(e,i){n(this,t),i&&(e.classList.contains("bodymovin-added")||(this.isStopped=new u({onTrue:this.pause.bind(this),onFalse:this.play.bind(this),default:!0}),this.dfd=new l,this.promise=this.dfd.promise,this.id=h("bodymovin"),this.element=e,this.jsonUrl=i,this.json=void 0,this.wantObserver="false"!==this.element.dataset.observer,this.wantLoop="false"!==this.element.dataset.loop,this.element.dataset.bodymovinId=this.id,this.element.classList.add("bodymovin-added"),this.container=document.createElement("div"),this.element.appendChild(this.container),this.bind(),this.load()))}return r(t,[{key:"bind",value:function(){this.setPlayStatus=this.setPlayStatus.bind(this),c.on("bodymovin:setStop",this.setPlayStatus)}},{key:"destroy",value:function(){this.observer&&this.observer.disconnect(),this.player&&this.player.destroy(),c.off("bodymovin:setPlayStatus",this.setPlayStatus)}},{key:"setPlayStatus",value:function(t,e){this.isStopped.setDependency(t,e)}},{key:"getPlayer",value:function(){var t=this;return this.promise.then(function(){return t.player})}},{key:"play",value:function(){this.getPlayer().then(function(t){t.play()})}},{key:"pause",value:function(){this.getPlayer().then(function(t){t.pause()})}},{key:"load",value:function(){var t=this,e=p.get(this.jsonUrl);if(e)return void e.then(function(e){t.json=e,t.init()});var i=fetch(this.jsonUrl).then(function(t){return t.json()});i.then(function(e){t.json=e,t.init()}),p.add(this.jsonUrl,i)}},{key:"loadFinish",value:function(t){if(this.json=t,!s.Pjax.transitionProgress)return this.init();s.Dispatcher.on("transitionCompleted",this.init.bind(this))}},{key:"init",value:function(){this.player=o.loadAnimation({container:this.container,renderer:"svg",loop:this.wantLoop,autoplay:!1,animationData:this.json}),this.wantObserver&&this.createObserver(),this.dfd.resolve()}},{key:"createObserver",value:function(){var t=this;this.observer=new IntersectionObserver(function(e){var i=e[0],n=i.intersectionRatio>0;t.isStopped.setDependency("observer",!n)},{}),this.observer.observe(this.element)}}]),t}(),d=function(){function t(){n(this,t),this.instances=[],this.parse=this.parse.bind(this),s.Dispatcher.on("transitionCompleted",this.parse)}return r(t,[{key:"destroyOld",value:function(){var t=this;if(s.HistoryManager.history.length!==this.oldHistory){var e=document.querySelectorAll("#barba-wrapper .bodymovin-added");a(e,function(e){t.getBodyMovinByElement(e).destroy()}),this.oldHistory=s.HistoryManager.history.length}}},{key:"getBodyMovinByElement",value:function(t){var e=t.dataset.bodymovinId,i=void 0;return a(this.instances,function(t){if(t.id===e)return void(i=t)}),i}},{key:"parse",value:function(t,e,i){var n=this;i=i||document.body;var r=i.querySelectorAll("[data-bodymovin]:not(.bodymovin-added)");this.destroyOld(),a(r,function(t){var e=new f(t,t.dataset.bodymovin);n.instances.push(e)})}}]),t}();e.exports=new d},{"barba.js":9,"bodymovin/build/player/bodymovin_light":11,"lodash/forEach":78,"lodash/uniqueId":100,"utils/deferred":319,"utils/dependentVariable":320,"utils/dispatcher":321}],312:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("lodash/forEach"),a=t("shared/bodymovin"),h=function(){function t(e){var i=this;n(this,t),this.el=e,this.bodymovinEl=this.el.querySelector("[data-bodymovin]"),this.container=this.bodymovinEl.children[0],this.bodymovin=a.getBodyMovinByElement(this.bodymovinEl),this.speed=0,this.bodymovinEl&&this.bodymovin&&this.bodymovin.isStopped&&(this.bodymovin.isStopped.setDependency("hover",!0),this.player={setSpeed:function(){},play:function(){},pause:function(){}},this.bodymovin.getPlayer().then(function(t){i.player=t}),this.bind())}return r(t,[{key:"bind",value:function(){this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.el.addEventListener("mouseenter",this.onEnter),this.el.addEventListener("mouseleave",this.onLeave)}},{key:"onEnter",value:function(){this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.bodymovin.isStopped.setDependency("hover",!1),this.tl.to(this,1,{speed:1,onUpdate:this.updateSpeed.bind(this),ease:Power4.easeOut});var t={values:[{x:20,y:5,scale:1.1},{x:-35,y:-25,scale:1.2}],type:"soft"};this.tl.to(this.container,3,{bezier:t,ease:CustomEase.create("custom","M0,0 C0.126,0.382 0.152,0.674 0.31,0.822 0.502,1.002 0.818,1 1,1")},0)}},{key:"onLeave",value:function(){var t=this;this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this,3,{speed:0,ease:Circ.easeOut,onUpdate:this.updateSpeed.bind(this),onComplete:function(){t.bodymovin.isStopped.setDependency("hover",!0)}}),this.tl.to(this.container,.5,{x:0,y:0,scale:1,ease:Power4.easeOut},0)}},{key:"updateSpeed",value:function(){this.player&&this.player.setSpeed(this.speed)}},{key:"destroy",value:function(){}}]),t}(),l=function(){function t(e){n(this,t),this.instances=[],this.parse=this.parse.bind(this),s.Dispatcher.on("transitionCompleted",this.parse)}return r(t,[{key:"destroyOld",value:function(){o(this.instances,function(t){t.destroy()}),this.instances=[]}},{key:"parse",value:function(t,e,i){var n=this;i=i||document.body,this.destroyOld();var r=i.querySelectorAll(".hover-bodymovin");o(r,function(t){var e=new h(t);n.instances.push(e)})}}]),t}();e.exports=new l},{"barba.js":9,"lodash/forEach":78,"shared/bodymovin":311}],313:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("gsap"),o=t("vendor/cookies.js"),a=function(){function t(){n(this,t),this.$element=document.querySelector(".cookie"),this.$element&&this.init()}return r(t,[{key:"init",value:function(){this.$cta=this.$element.querySelector(".cta"),this.accept=this.accept.bind(this),this.hasAccepted()||this.show(),this.bind()}},{key:"bind",value:function(){this.$cta.addEventListener("click",this.accept)}},{key:"hasAccepted",value:function(){return o.hasItem("acceptpolicy")}},{key:"accept",value:function(t){t.preventDefault(),this.hide(),o.setItem("acceptpolicy","true",1/0,"/")}},{key:"show",value:function(){this.$element.classList.add("visible"),s.TweenMax.from(this.$element,1.5,{yPercent:130})}},{key:"hide",value:function(){var t=this;s.TweenMax.to(this.$element,.4,{yPercent:130,onComplete:function(){t.$element.classList.remove("visible")}})}}]),t}();e.exports=new a},{gsap:21,"vendor/cookies.js":337}],314:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("lodash/forEach"),a=function(){function t(e){n(this,t),this.input=e,this.name=this.input.dataset.passive,this.select=document.querySelector('select[name="'+this.name+'"]'),this.bind()}return r(t,[{key:"bind",value:function(){this.onChange=this.onChange.bind(this),this.select.addEventListener("change",this.onChange)}},{key:"destroy",value:function(){this.select.removeEventListener("change",this.onChange)}},{key:"onChange",value:function(t){var e=t.target.selectedIndex,i=t.target.options;this.input.value=i[e].textContent}}]),t}(),h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;o(t.querySelectorAll("input[data-passive]"),function(t){new a(t)})};s.Dispatcher.on("newPageReady",function(t,e,i){h(i)})},{"barba.js":9,"lodash/forEach":78}],315:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("lodash/forEach"),a=function(){function t(e){n(this,t),e.classList.contains("hover-js")||(this.el=e,this.el.classList.add("hover-js"),this.image=this.el.querySelector(".cta-thumb__image"),this.title=this.el.querySelector(".cta-thumb__title--title"),this.view=this.el.querySelector(".cta-thumb__title--view"),this.arrow=this.el.querySelector(".cta-thumb__arrow"),this.splitTitle=new SplitText(this.title,{type:"words, chars",charsClass:"char",wordsClass:"word",position:"absolute"}),this.splitView=new SplitText(this.view,{type:"words, chars",charsClass:"char",wordsClass:"word",position:"absolute"}),TweenLite.set(this.splitView.chars,{x:-10,opacity:0,autoRound:!1}),TweenLite.set(this.arrow,{x:-30,opacity:0}),this.bind())}return r(t,[{key:"bind",value:function(){this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.el.addEventListener("mouseenter",this.onEnter),this.el.addEventListener("mouseleave",this.onLeave)}},{key:"onEnter",value:function(){this.tl&&this.tl.kill(),this.tl=new TimelineLite;var t=this.isSmallHover();this.tl.add("start"),t&&this.tl.to(this.el,.5,{y:0,ease:Power4.easeOut},"start");var e={values:[{x:20,y:5,scale:1.1},{x:-35,y:35,scale:1.2}],type:"soft"};t&&(e={values:[{x:4,y:5,scale:1.05},{x:-5,y:-5,scale:1.08}],type:"soft"}),this.tl.to(this.image,8,{bezier:e,ease:CustomEase.create("custom","M0,0 C0.126,0.382 0.152,0.674 0.31,0.822 0.502,1.002 0.818,1 1,1")},"start"),this.tl.staggerTo(this.splitTitle.chars.reverse(),.3,{x:10,width:0,opacity:1,autoRound:!1,ease:Power4.easeOut},.02,0),this.tl.staggerTo(this.splitView.chars.reverse(),.3,{x:0,width:"auto",opacity:1,autoRound:!1,ease:Power4.easeOut},.02,0),this.tl.to(this.arrow,2,{x:0,opacity:1,ease:"softEase"},.25)}},{key:"onLeave",value:function(){this.tl&&this.tl.kill(),this.tl=new TimelineLite({onComplete:function(){}});var t=this.isSmallHover();this.tl.add("start"),t&&this.tl.to(this.el,1,{y:20,ease:Power4.easeOut},"start"),this.tl.to(this.image,1,{x:0,y:0,scale:1,ease:Power4.easeOut},"start"),this.tl.to(this.image,.6,{webkitFilter:"brightness(1)",filter:"brightness(1)"},0),this.tl.staggerTo(this.splitTitle.chars,.4,{x:0,width:"auto",opacity:1,autoRound:!1,ease:Strong.easeOut},.02,.25),this.tl.staggerTo(this.splitView.chars,.4,{x:-10,width:0,opacity:0,autoRound:!1,ease:Strong.easeOut},.02,.25),this.tl.to(this.arrow,.4,{x:-30,opacity:0,ease:Power4.easeOut},0)}},{key:"destroy",value:function(){this.el.removeEventListener("mouseenter",this.onEnter),this.el.removeEventListener("mouseleave",this.onLeave)}},{key:"isSmallHover",value:function(){return this.el.classList.contains("small-hover")}}]),t}(),h=function(){function t(e){n(this,t),this.instances=[],this.parse=this.parse.bind(this),s.Dispatcher.on("transitionCompleted",this.parse)}return r(t,[{key:"destroyOld",value:function(){o(this.instances,function(t){t.destroy()}),this.instances=[]}},{key:"parse",value:function(t,e,i){var n=this;i=i||document.body;var r=i.querySelectorAll('.cta-thumb,[class^="cta-thumb--"]');o(r,function(t){var e=new a(t);n.instances.push(e)})}}]),t}();e.exports=new h},{"barba.js":9,"lodash/forEach":78}],316:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(){n(this,t),this.$el=document.querySelector(".footer__newsletter"),this.$el&&(this.$form=this.$el.querySelector("form"),this.$input=this.$form.querySelector("input.email"),this.bind())}return r(t,[{key:"bind",value:function(){this.$form.addEventListener("submit",this.onSubmit.bind(this))}},{key:"startLoading",value:function(){this.isLoading=!0}},{key:"endLoading",value:function(){this.isLoading=!1}},{key:"onSubmit",value:function(t){t.preventDefault(),t.stopPropagation(),this.isLoading||this.send()}},{key:"send",value:function(){var t=this;this.startLoading();var e=this.$form.getAttribute("action"),i=new FormData(this.$form);fetch(e,{method:this.$form.getAttribute("method")||"POST",body:i}).then(function(t){return t.json()}).then(this.parseResponse.bind(this)).catch(function(){t.endLoading()})}},{key:"parseResponse",value:function(t){"error"===t.status&&this.onError(),"success"===t.status&&this.onSuccess(),this.endLoading()}},{key:"reset",value:function(){this.$form.classList.remove("error"),this.$form.classList.remove("success"),this.$input.value=""}},{key:"onSuccess",value:function(){this.reset(),this.$form.classList.add("success")}},{key:"onError",value:function(){this.$form.classList.add("error")}}]),t}();e.exports=new s},{}],317:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(){n(this,t),this.FB_ID=window.EPICINFO.FB_ID||"",this.bind()}return r(t,[{key:"bind",value:function(){this.onClick=this.onClick.bind(this),document.addEventListener("click",this.onClick)}},{key:"onClick",value:function(t){for(var e=t.target;e&&(!e.dataset||!e.dataset.share);)e=e.parentNode;if(e&&e.dataset&&e.dataset.share){t.preventDefault(),t.stopPropagation();var i=e.dataset.share;"facebook"===i&&this.openFacebook(),"linkedin"===i&&this.openLinkedin(),"twitter"===i&&this.openTwitter(window.location.href,e.dataset.text)}}},{key:"openFacebook",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,e=this.e(t),i="https://www.facebook.com/dialog/share?app_id="+this.FB_ID+"&display=popup&href="+e;return this.openPopup(i,"Share on Facebook",575,300)}},{key:"openTwitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.e(e),n=this.e("epicwebagency"),r=this.e(t),s="https://twitter.com/intent/tweet?url="+r+"&text="+i+"&via="+n;return this.openPopup(s,"Share on Twitter",550,255)}},{key:"openLinkedin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,e=this.e(t),i="https://www.linkedin.com/shareArticle?mini=true&url="+e;return this.openPopup(i,"Share on Linkedin",550,255)}},{key:"openPopup",value:function(t,e,i,n){var r=(window.screen.width-i)/2,s=(window.screen.height-n)/2;return window.open(t,e,"status=no,resizable=yes,height="+n+",width="+i+",top="+s+",left="+r+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no")}},{key:"e",value:function(t){return window.encodeURIComponent(t)}}]),t}();e.exports=new s},{}],318:[function(t,e,i){e.exports=e.exports='{\n  "tiny": "240px",\n  "small": "320px",\n  "small-xl": "500px",\n  "small-xxl": "650px",\n  "medium": "768px",\n  "medium-xl": "940px",\n  "large": "1024px",\n  "xlarge": "1280px",\n  "xxlarge": "1440px"\n}\n'},{}],319:[function(t,e,i){"use strict";e.exports=function(){return new function(){this.resolve=null,this.reject=null,
this.promise=new Promise(function(t,e){this.resolve=t,this.reject=e}.bind(this))}}},{}],320:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lodash/assign"),o=t("lodash/includes"),a=function(){function t(e){n(this,t),this.opts=s({onTrue:function(){},onFalse:function(){},default:!1},e),this.status=this.opts.default,this.dependencies={}}return r(t,[{key:"setDependency",value:function(t,e){this.dependencies[t]=e,this.check()}},{key:"check",value:function(){var t=o(this.dependencies,!0);t!==this.status&&(this.status=t,this.opts[this.status?"onTrue":"onFalse"]())}}]),t}();e.exports=a},{"lodash/assign":74,"lodash/includes":80}],321:[function(t,e,i){"use strict";var n=t("eventemitter3");e.exports=new n},{eventemitter3:17}],322:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("three"),o=function(){function t(e,i,r,o,a){n(this,t),this.renderer=r;var h=r.getContext();if(!h.getExtension("OES_texture_float"))throw new Error("float textures not supported");if(0==h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS))throw new Error("vertex shader cannot read textures");this.scene=new s.Scene,this.orthoCamera=new s.OrthographicCamera(-1,1,1,-1,1/Math.pow(2,53),1),this.rtt=new s.WebGLRenderTarget(e,i,{minFilter:s.NearestFilter,magFilter:s.NearestFilter,format:s.RGBAFormat,type:Features.ios?s.HalfFloatType:s.FloatType});var l=new s.BufferGeometry;l.addAttribute("position",new s.BufferAttribute(new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]),3)),l.addAttribute("uv",new s.BufferAttribute(new Float32Array([0,1,1,1,1,0,0,1,1,0,0,0]),2)),this.scene.add(new s.Mesh(l,o));for(var u=e*i,c=new Float32Array(3*u),p=0;p<u;p++){var f=3*p;c[f]=p%e/e,c[f+1]=p/e/i}var d=new s.BufferGeometry;d.addAttribute("position",new s.BufferAttribute(c,3)),this.particles=new s.Points(d,a)}return r(t,[{key:"update",value:function(){this.renderer.render(this.scene,this.orthoCamera,this.rtt,!0),this.particles.material.uniforms.positions.value=this.rtt.texture}}]),t}();e.exports=o},{three:286}],323:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/dispatcher"),o=function(){function t(e){n(this,t),"objectFit"in document.documentElement.style==!1&&(this.element=e,this.bind(),this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.fit())}return r(t,[{key:"bind",value:function(){this.onResize=this.onResize.bind(this),s.on("resize",this.onResize)}},{key:"destroy",value:function(){this.onResize&&s.off("resize",this.onResize)}},{key:"onResize",value:function(t,e){this.windowWidth=t,this.windowHeight=e,this.fit()}},{key:"fit",value:function(){var t,e,i=this.element.dataset.width||1920,n=this.element.dataset.height||1080;this.windowWidth/this.windowHeight>i/n?(e=Math.floor(n*this.windowWidth/i)+1,t=Math.floor(e*i/n)+1):(t=Math.floor(this.windowHeight*i/n)+1,e=Math.floor(n*t/i)+1),this.element.style.cssText="\n      width: "+t+"px;\n      height: "+e+"px;\n      margin-top: "+-e/2+"px;\n      margin-left: "+-t/2+"px;\n      left: 50%;\n      top: 50%;\n      position: absolute;\n      z-index: 0;\n    "}}]),t}();e.exports=o},{"utils/dispatcher":321}],324:[function(t,e,i){"use strict";var n=function(t,e){if(!t)return!1;for(var i=document.querySelectorAll(e),n=t.parentNode;n&&!r(i,n);)n=n.parentNode;return n},r=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]==e)return!0;return!1};e.exports=n},{}],325:[function(t,e,i){"use strict";!function(t,e){function i(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||u(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,i=e.width*e.height,n=this.intersectionRect,r=n.width*n.height;this.intersectionRatio=i?r/i:0}function n(t,e){var i=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=s(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function r(){return t.performance&&performance.now&&performance.now()}function s(t,e){var i=null;return function(){i||(i=setTimeout(function(){t(),i=null},e))}}function o(t,e,i,n){"function"==typeof t.addEventListener?t.addEventListener(e,i,n||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,i)}function a(t,e,i,n){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,n||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,i)}function h(t,e){var i=Math.max(t.top,e.top),n=Math.min(t.bottom,e.bottom),r=Math.max(t.left,e.left),s=Math.min(t.right,e.right),o=s-r,a=n-i;return o>=0&&a>=0&&{top:i,bottom:n,left:r,right:s,width:o,height:a}}function l(t){var e=t.getBoundingClientRect();if(e)return e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e}function u(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)){var c=e.documentElement,p=[];n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},n.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},n.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,i){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==i[e-1]})},n.prototype._parseRootMargin=function(t){var e=t||"0px",i=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(o(t,"resize",this._checkForIntersections,!0),o(e,"scroll",this._checkForIntersections,!0),"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():u();this._observationTargets.forEach(function(n){var s=n.element,o=l(s),a=this._rootContainsTarget(s),h=n.entry,u=t&&a&&this._computeTargetAndRootIntersection(s,e),c=n.entry=new i({time:r(),target:s,boundingClientRect:o,rootBounds:e,intersectionRect:u});t&&a?this._hasCrossedThreshold(h,c)&&this._queuedEntries.push(c):h&&h.isIntersecting&&this._queuedEntries.push(c)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(e,i){if("none"!=t.getComputedStyle(e).display){for(var n=l(e),r=n,s=e.parentNode,o=!1;!o;){var a=null;if(s==this.root||1!=s.nodeType?(o=!0,a=i):"visible"!=t.getComputedStyle(s).overflow&&(a=l(s)),a&&!(r=h(a,r)))break;s=s.parentNode}return r}},n.prototype._getRootRect=function(){var t;if(this.root)t=l(this.root);else{var i=e.documentElement,n=e.body;t={top:0,left:0,right:i.clientWidth||n.clientWidth,width:i.clientWidth||n.clientWidth,bottom:i.clientHeight||n.clientHeight,height:i.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},n.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,i){return"px"==e.unit?e.value:e.value*(i%2?t.width:t.height)/100}),i={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},n.prototype._hasCrossedThreshold=function(t,e){var i=t&&t.isIntersecting?t.intersectionRatio||0:-1,n=e.isIntersecting?e.intersectionRatio||0:-1;if(i!==n)for(var r=0;r<this.thresholds.length;r++){var s=this.thresholds[r];if(s==i||s==n||s<i!=s<n)return!0}},n.prototype._rootIsInDom=function(){return!this.root||c.contains(this.root)},n.prototype._rootContainsTarget=function(t){return(this.root||c).contains(t)},n.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},n.prototype._unregisterInstance=function(){var t=p.indexOf(this);-1!=t&&p.splice(t,1)},t.IntersectionObserver=n,t.IntersectionObserverEntry=i}}(window,document)},{}],326:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.binds=e,this.bind()}return r(t,[{key:"bind",value:function(){this.onKeyDown=this.onKeyDown.bind(this),document.addEventListener("keydown",this.onKeyDown)}},{key:"destroy",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"onKeyDown",value:function(t){for(var e=t.keyCode,i=0;i<this.binds.length;i++){var n=this.binds[i];if(e===n.key){t.preventDefault(),n.callback();break}}}}]),t}();e.exports=s},{}],327:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lethargy").Lethargy,o=function(){function t(e,i){n(this,t),this.lethargy=new s,this.prev=e,this.next=i,this.eventListenerOpt=!!this.hasPassive&&{passive:!0},this.bind()}return r(t,[{key:"bind",value:function(){this.onMouseWheel=this.onMouseWheel.bind(this),document.addEventListener("mousewheel",this.onMouseWheel,this.eventListenerOpt),document.addEventListener("wheel",this.onMouseWheel,this.eventListenerOpt)}},{key:"destroy",value:function(){document.removeEventListener("mousewheel",this.onMouseWheel),document.removeEventListener("wheel",this.onMouseWheel)}},{key:"hasPassive",value:function(){var t=!1,e=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){t=!0}});return document.addEventListener("test",function(){},e),t}},{key:"onMouseWheel",value:function(t){var e=(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),this.lethargy.check(t));!1!==e&&(-1===e&&this.next(),1===e&&this.prev())}}]),t}();e.exports=o},{lethargy:24}],328:[function(t,e,i){"use strict";var n=t("vendor/enquire"),r=JSON.parse(t("./breakpoints.json")),s=function(){this._px2em=function(t){var e=parseInt(t.replace("px",""),10);return Math.round(e/16)+"em"},this._px2emMax=function(t){var e=this._px2em(t),i=e.replace("em","");return parseInt(i,10)-.01+"em"}};s.prototype.register=function(t){var e,i,s;s="screen and (min-width:"+r[t]+")","string"==typeof arguments[1]?(e=arguments[1],i=arguments[2],s+=" and (max-width:"+this._px2emMax(r[e])+")"):(e=!1,i=arguments[1]),n.register(s,i)},s.prototype.unregister=function(t,e){var i,s;s="screen and (min-width:"+r[t]+")","string"==typeof arguments[1]?(i=arguments[1],arguments[2],s+=" and (max-width:"+this._px2emMax(r[i])+")"):(i=!1,arguments[1]),n.unregister(s,e)},s.prototype.isMoreThan=function(t){var e=parseInt(r[t]);return window.innerWidth>=e},s.prototype.isLessThan=function(t){var e=parseInt(r[t]);return window.innerWidth<=e},e.exports=new s},{"./breakpoints.json":318,"vendor/enquire":340}],329:[function(t,e,i){"use strict";e.exports=function(t,e,i,n,r){return n+(t-e)/(i-e)*(r-n)}},{}],330:[function(t,e,i){"use strict";e.exports=function(t){var e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop)}while(t=t.offsetParent);return e}},{}],331:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lodash/forEach"),o=t("lodash/isNumber"),a=t("lodash/assign"),h=JSON.parse(t("../utils/breakpoints.json"));e.exports=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.el=e,this.originalParent=e.parentNode,this.options=a({root:document.body,states:[{limit:0,outside:!0},{limit:"medium",outside:!1}],onStatusChange:function(t){}},i),this.currentStatus=!1,this.onResize(),this.bind()}return r(t,[{key:"bind",value:function(){this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize)}},{key:"destroy",value:function(){this.el.parentNode.removeChild(this.el),window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.width=window.innerWidth,this.update()}},{key:"getCurrentState",value:function(){var t=this,e=null;return s(this.options.states,function(i){var n=o(i.limit)?i.limit:parseInt(h[i.limit]);t.width>=n&&(e=i)}),e}},{key:"update",value:function(){var t=this.currentStatus,e=this.getCurrentState();if(t!==e){var i=e;this.currentStatus=i,this[i.outside?"moveOutside":"moveInside"](),this.options.onStatusChange(i)}}},{key:"moveOutside",value:function(){this.options.root.appendChild(this.el)}},{key:"moveInside",value:function(){this.originalParent.appendChild(this.el)}}]),t}()},{"../utils/breakpoints.json":318,"lodash/assign":74,"lodash/forEach":78,"lodash/isNumber":87}],332:[function(t,e,i){"use strict";t("utils/intersection-observer"),t("object-fit-images")()},{"object-fit-images":104,"utils/intersection-observer":325}],333:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("utils/dispatcher"),a=t("utils/deferred"),h=t("utils/dependentVariable"),l=t("utils/viewport"),u=function(){function t(){var e=this;n(this,t),this.isLocked=new h({onTrue:this.lock.bind(this),onFalse:this.unlock.bind(this),default:!1}),this.customScrollbar=Features.webkit&&Features.desktop&&!Features.edge,this.transformCss=window.Features.prefixed("transform"),this.scrollbar=document.querySelector("#fake-scrollbar"),this.scrollbarTrack=this.scrollbar.querySelector(".scrollbar__track"),this.scrollbarHeight=0,this.bind(),this.init(),window.setTimeout(function(){e.onResize(),e.onScroll()},200),window.setTimeout(function(){e.onResize(),e.onScroll()},2e3)}return r(t,[{key:"bind",value:function(){var t=this;this.onScroll=this.onScroll.bind(this),this.onResize=this.onResize.bind(this),this.updateScrollbar=this.updateScrollbar.bind(this),this.update=this.update.bind(this),o.on("resize",this.onScroll),o.on("resize",this.onResize),o.on("scroll:resize",this.onResize),this.customScrollbar&&(s.Dispatcher.on("transitionCompleted",this.onResize),s.Dispatcher.on("transitionCompleted",function(){window.setTimeout(function(){t.onResize(),t.onScroll()},2e3)})),this.update()}},{key:"init",value:function(){}},{key:"update",value:function(){window.requestAnimationFrame(this.update),this.isLocked.status||(this.y=this.getCurrent(),this.customScrollbar&&this.updateScrollbar())}},{key:"updateScrollbar",value:function(){if(!this.isLocked.status){var t=this.scrollbarHeight,e=l.height,i=this.bounding-e,n=this.y,r=n*e/i;r-=t*(n/i),this.scrollbarTrack.style[this.transformCss]="translate3d(0, "+r+"px, 0)"}}},{key:"onScroll",value:function(){o.emit("scroll",this.y)}},{key:"onResize",value:function(){var t=l.height,e=this.getMaxScroll(),i=t*(t/(e+t));this.scrollbarHeight=i,this.scrollbarTrack.style.height=i+"px",this.bounding=e}},{key:"getCurrent",value:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},{key:"getMaxScroll",value:function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}},{key:"goToEl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2],n=t.offsetTop+e;this.goTo(n,i)}},{key:"goTo",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a(),r={y:this.y};return TweenLite.to(r,i,{y:t,onUpdate:function(){e.setTo(r.y)},onComplete:function(){n.resolve()}}),n.promise}},{key:"setTo",value:function(t){window.scrollTo(0,t)}},{key:"lock",value:function(){document.documentElement.classList.add("lock")}},{key:"unlock",value:function(){document.documentElement.classList.remove("lock"),this.onResize(),this.updateScrollbar()}}]),t}();e.exports=new u},{"barba.js":9,"utils/deferred":319,"utils/dependentVariable":320,"utils/dispatcher":321,"utils/viewport":336}],334:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.points=e||[{x:50,y:50},{x:100,y:50},{x:100,y:100},{x:50,y:100}],this.pointLength=this.points.length,this.createElement()}return r(t,[{key:"createElement",value:function(){var t="http://www.w3.org/2000/svg";this.element=document.createElementNS(t,"svg"),this.element.setAttributeNS(null,"preserveAspectRatio","xMidYMid slice"),this.element.style.cssText="\n      display: block;\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 90;\n    ",this.setSize(),this.polygon=document.createElementNS(t,"polygon"),this.polygon.setAttributeNS(null,"points",this.pString),this.element.appendChild(this.polygon),document.body.appendChild(this.element)}},{key:"destroy",value:function(){document.body.removeChild(this.element)}},{key:"update",value:function(){this.polygon.setAttribute("points",this.pString)}},{key:"setSize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.element.setAttributeNS(null,"viewBox","0 0 "+this.width+" "+this.height),this.element.setAttributeNS(null,"width",this.width),this.element.setAttributeNS(null,"height",this.height)}},{key:"pString",get:function(){for(var t="",e=0;e<this.pointLength;e++){var i=this.points[e];t+=i.x+", "+i.y+" "}return t}},{key:"polySize",get:function(){return this.polygon.getBoundingClientRect()}}]),t}();e.exports=s},{}],335:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("hammerjs"),o=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;n(this,t),this.prev=e,this.next=i,this.root=r,this.mc=new s(this.root),this.bind()}return r(t,[{key:"bind",value:function(){this.onSwipe=this.onSwipe.bind(this),this.mc.get("swipe").set({direction:s.DIRECTION_VERTICAL}),this.mc.on("swipeup swipedown",this.onSwipe.bind(this))}},{key:"destroy",value:function(){this.mc.destroy()}},{key:"onSwipe",value:function(t){return"swipeup"===t.type?this.next():"swipedown"===t.type?this.prev():void 0}}]),t}();e.exports=o},{hammerjs:22}],336:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/dispatcher"),o=function(){function t(){n(this,t),this.width=window.innerWidth,this.height=window.innerHeight,this.bind()}return r(t,[{key:"bind",value:function(){window.addEventListener("resize",this.onResize.bind(this))}},{key:"onResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,s.emit("resize",this.width,this.height)}}]),t}();e.exports=new o},{"utils/dispatcher":321}],337:[function(t,e,i){"use strict";e.exports={getItem:function(t){return t?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(t,e,i,n,r,s){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var o="";if(i)switch(i.constructor){case Number:o=i===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i;break;case String:o="; expires="+i;break;case Date:o="; expires="+i.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+o+(r?"; domain="+r:"")+(n?"; path="+n:"")+(s?"; secure":""),!0},removeItem:function(t,e,i){return!!this.hasItem(t)&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(e?"; path="+e:""),!0)},hasItem:function(t){return!!t&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,i=0;i<e;i++)t[i]=decodeURIComponent(t[i]);return t}}},{}],338:[function(t,e,i){(function(t){"use strict";var i=void 0!==e&&e.exports&&void 0!==t?t:window;(i._gsQueue||(i._gsQueue=[])).push(function(){i._gsDefine("easing.CustomEase",["easing.Ease"],function(t){var e=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,i=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,n=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,r=/[cLlsS]/g,s="CustomEase only accepts Cubic Bezier data.",o=function t(e,i,n,r,s,o,a,h,l,u,c){var p,f=(e+n)/2,d=(i+r)/2,m=(n+s)/2,v=(r+o)/2,g=(s+a)/2,y=(o+h)/2,_=(f+m)/2,b=(d+v)/2,x=(m+g)/2,w=(v+y)/2,T=(_+x)/2,S=(b+w)/2,E=a-e,M=h-i,P=Math.abs((n-a)*M-(r-h)*E),A=Math.abs((s-a)*M-(o-h)*E);return u||(u=[{x:e,y:i},{x:a,y:h}],c=1),u.splice(c||u.length-1,0,{x:T,y:S}),(P+A)*(P+A)>l*(E*E+M*M)&&(p=u.length,t(e,i,f,d,_,b,T,S,l,u,c),t(T,S,x,w,g,y,a,h,l,u,c+1+(u.length-p))),u},a=function(t){var e,r,o,a,h,l,u,c,p,f,d,m=(t+"").replace(n,function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e}).match(i)||[],v=[],g=0,y=0,_=m.length,b=2;for(e=0;e<_;e++)if(p=a,isNaN(m[e])?(a=m[e].toUpperCase(),h=a!==m[e]):e--,r=+m[e+1],o=+m[e+2],h&&(r+=g,o+=y),e||(u=r,c=o),"M"===a)l&&l.length<8&&(v.length-=1,b=0),g=u=r,y=c=o,l=[r,o],b=2,v.push(l),e+=2,a="L";else if("C"===a)l||(l=[0,0]),l[b++]=r,l[b++]=o,h||(g=y=0),l[b++]=g+1*m[e+3],l[b++]=y+1*m[e+4],l[b++]=g+=1*m[e+5],l[b++]=y+=1*m[e+6],e+=6;else if("S"===a)"C"===p||"S"===p?(f=g-l[b-4],d=y-l[b-3],l[b++]=g+f,l[b++]=y+d):(l[b++]=g,l[b++]=y),l[b++]=r,l[b++]=o,h||(g=y=0),l[b++]=g+=1*m[e+3],l[b++]=y+=1*m[e+4],e+=4;else{if("L"!==a&&"Z"!==a)throw s;"Z"===a&&(r=u,o=c,l.closed=!0),("L"===a||Math.abs(g-r)>.5||Math.abs(y-o)>.5)&&(l[b++]=g+(r-g)/3,l[b++]=y+(o-y)/3,l[b++]=g+2*(r-g)/3,l[b++]=y+2*(o-y)/3,l[b++]=r,l[b++]=o,"L"===a&&(e+=2)),g=r,y=o}return v[0]},h=function(t){var e,i=t.length,n=999999999999;for(e=1;e<i;e+=6)+t[e]<n&&(n=+t[e]);return n},l=function(t,e,i){i||0===i||(i=Math.max(+t[t.length-1],+t[1]));var n,r=-1*+t[0],s=-i,o=t.length,a=1/(+t[o-2]+r),l=-e||(Math.abs(+t[o-1]-+t[1])<.01*(+t[o-2]-+t[0])?h(t)+s:+t[o-1]+s);for(l=l?1/l:-a,n=0;n<o;n+=2)t[n]=(+t[n]+r)*a,t[n+1]=(+t[n+1]+s)*l},u=function(t){var e=this.lookup[t*this.l|0]||this.lookup[this.l-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},c=function(e,i,n){this._calcEnd=!0,this.id=e,e&&(t.map[e]=this),this.getRatio=u,this.setData(i,n)},p=c.prototype=new t;return p.constructor=c,p.setData=function(t,i){t=t||"0,0,1,1";var n,h,u,c,p,f,d,m,v,g,y=t.match(e),_=1,b=[];if(i=i||{},g=i.precision||1,this.data=t,this.lookup=[],this.points=b,this.fast=g<=1,(r.test(t)||-1!==t.indexOf("M")&&-1===t.indexOf("C"))&&(y=a(t)),4===(n=y.length))y.unshift(0,0),y.push(1,1),n=8;else if((n-2)%6)throw s;for(0==+y[0]&&1==+y[n-2]||l(y,i.height,i.originY),this.rawBezier=y,c=2;c<n;c+=6)h={x:+y[c-2],y:+y[c-1]},u={x:+y[c+4],y:+y[c+5]},b.push(h,u),o(h.x,h.y,+y[c],+y[c+1],+y[c+2],+y[c+3],u.x,u.y,1/(2e5*g),b,b.length-1);for(n=b.length,c=0;c<n;c++)d=b[c],m=b[c-1]||d,d.x>m.x||m.y!==d.y&&m.x===d.x||d===m?(m.cx=d.x-m.x,m.cy=d.y-m.y,m.n=d,m.nx=d.x,this.fast&&c>1&&Math.abs(m.cy/m.cx-b[c-2].cy/b[c-2].cx)>2&&(this.fast=!1),m.cx<_&&(m.cx?_=m.cx:(m.cx=.001,c===n-1&&(m.x-=.001,_=Math.min(_,.001),this.fast=!1)))):(b.splice(c--,1),n--);if(n=1/_+1|0,this.l=n,p=1/n,f=0,d=b[0],this.fast){for(c=0;c<n;c++)v=c*p,d.nx<v&&(d=b[++f]),h=d.y+(v-d.x)/d.cx*d.cy,this.lookup[c]={x:v,cx:p,y:h,cy:0,nx:9},c&&(this.lookup[c-1].cy=h-this.lookup[c-1].y);this.lookup[n-1].cy=b[b.length-1].y-h}else{for(c=0;c<n;c++)d.nx<c*p&&(d=b[++f]),this.lookup[c]=d;f<b.length-1&&(this.lookup[c-1]=b[b.length-2])}return this._calcEnd=1!==b[b.length-1].y||0!==b[0].y,this},p.getRatio=u,p.getSVGData=function(t){return c.getSVGData(this,t)},c.create=function(t,e,i){return new c(t,e,i)},c.version="0.2.1",c.bezierToPoints=o,c.get=function(e){return t.map[e]},c.getSVGData=function(e,i){i=i||{};var n,r,s,o,a,h,l,u,c,p,f=i.width||100,d=i.height||100,m=i.x||0,v=(i.y||0)+d,g=i.path;if(i.invert&&(d=-d,v=0),e=e.getRatio?e:t.map[e]||void 0,e.rawBezier){for(n=[],l=e.rawBezier.length,s=0;s<l;s+=2)n.push((1e3*(m+e.rawBezier[s]*f)|0)/1e3+","+(1e3*(v+e.rawBezier[s+1]*-d)|0)/1e3);n[0]="M"+n[0],n[1]="C"+n[1]}else for(n=["M"+m+","+v],l=Math.max(5,200*(i.precision||1)),o=1/l,l+=2,u=5/l,c=(1e3*(m+o*f)|0)/1e3,p=(1e3*(v+e.getRatio(o)*-d)|0)/1e3,r=(p-v)/(c-m),s=2;s<l;s++)a=(1e3*(m+s*o*f)|0)/1e3,h=(1e3*(v+e.getRatio(s*o)*-d)|0)/1e3,(Math.abs((h-p)/(a-c)-r)>u||s===l-1)&&(n.push(c+","+p),r=(h-p)/(a-c)),c=a,p=h;return g&&("string"==typeof g?document.querySelector(g):g).setAttribute("d",n.join(" ")),n.join(" ")},c},!0)}),i._gsDefine&&i._gsQueue.pop()(),function(t){var n=function(){return(i.GreenSockGlobals||i).CustomEase};"function"==typeof define&&define.amd?define(["TweenLite"],n):void 0!==e&&e.exports&&(e.exports=n())}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],339:[function(t,e,i){"use strict";window.Detectizr=function(t,e,i,n){function r(t,e){var i,n,s;if(arguments.length>2)for(i=1,n=arguments.length;i<n;i+=1)r(t,arguments[i]);else for(s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function s(t){return b.browser.userAgent.indexOf(t)>-1}function o(t){return t.test(b.browser.userAgent)}function a(t){return t.exec(b.browser.userAgent)}function h(t){return t.replace(/^\s+|\s+$/g,"")}function l(t){return null===t||t===n?"":String(t).replace(/((\s|\-|\.)+[a-z0-9])/g,function(t){return t.toUpperCase().replace(/(\s|\-|\.)/g,"")})}function u(t,e){var i=e||"",n=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(E," "):"");if(n){for(;n.indexOf(" "+i+" ")>=0;)n=n.replace(" "+i+" "," ");t.className=e?h(n):""}}function c(t,e,i){t&&(t=l(t),e&&(e=l(e),p(t+e,!0),i&&p(t+e+"_"+i,!0)))}function p(t,e){t&&x&&(T.addAllFeaturesAsClass?x.addTest(t,e):(e="function"==typeof e?e():e,e?x.addTest(t,!0):(delete x[t],u(M,t))))}function f(t,e){t.version=e;var i=e.split(".");i.length>0?(i=i.reverse(),t.major=i.pop(),i.length>0?(t.minor=i.pop(),i.length>0?(i=i.reverse(),t.patch=i.join(".")):t.patch="0"):t.minor="0"):t.major="0"}function d(){t.clearTimeout(y),y=t.setTimeout(function(){_=b.device.orientation,t.innerHeight>t.innerWidth?b.device.orientation="portrait":b.device.orientation="landscape",p(b.device.orientation,!0),_!==b.device.orientation&&p(_,!1)},10)}function m(t){var i,n,r,s,o,a=e.plugins;for(s=a.length-1;s>=0;s--){for(i=a[s],n=i.name+i.description,r=0,o=t.length;o>=0;o--)-1!==n.indexOf(t[o])&&(r+=1);if(r===t.length)return!0}return!1}function v(t){var e;for(e=t.length-1;e>=0;e--)try{new ActiveXObject(t[e])}catch(t){}return!1}function g(n){var h,u,g,y,_,E,M;if(T=r({},T,n||{}),T.detectDevice){for(b.device={type:"",model:"",orientation:""},g=b.device,o(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(g.type=w[0],g.model="smartTv"):o(/xbox|playstation.3|wii/)?(g.type=w[0],g.model="gameConsole"):o(/ip(a|ro)d/)?(g.type=w[1],g.model="ipad"):o(/tablet/)&&!o(/rx-34/)||o(/folio/)?(g.type=w[1],g.model=String(a(/playbook/)||"")):o(/linux/)&&o(/android/)&&!o(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(g.type=w[1],g.model="android"):o(/kindle/)||o(/mac.os/)&&o(/silk/)?(g.type=w[1],g.model="kindle"):o(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||o(/mb511/)&&o(/rutem/)?(g.type=w[1],g.model="android"):o(/bb10/)?(g.type=w[1],g.model="blackberry"):(g.model=a(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==g.model?(g.type=w[2],g.model=String(g.model)):(g.model="",
o(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?g.type=w[2]:o(/opera/)&&o(/windows.nt.5/)&&o(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?g.type=w[2]:o(/windows.(nt|xp|me|9)/)&&!o(/phone/)||o(/win(9|.9|nt)/)||o(/\(windows 8\)/)?g.type=w[3]:o(/macintosh|powerpc/)&&!o(/silk/)?(g.type=w[3],g.model="mac"):o(/linux/)&&o(/x11/)?g.type=w[3]:o(/solaris|sunos|bsd/)?g.type=w[3]:o(/cros/)?g.type=w[3]:o(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!o(/mobile/)?(g.type=w[3],g.model="crawler"):g.type=w[2])),h=0,u=w.length;h<u;h+=1)p(w[h],g.type===w[h]);T.detectDeviceModel&&p(l(g.model),!0)}if(T.detectScreen&&(g.screen={},x&&x.mq&&(x.mq("only screen and (max-width: 240px)")?(g.screen.size="veryVerySmall",p("veryVerySmallScreen",!0)):x.mq("only screen and (max-width: 320px)")?(g.screen.size="verySmall",p("verySmallScreen",!0)):x.mq("only screen and (max-width: 480px)")&&(g.screen.size="small",p("smallScreen",!0)),g.type!==w[1]&&g.type!==w[2]||x.mq("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)")&&(g.screen.resolution="high",p("highresolution",!0))),g.type===w[1]||g.type===w[2]?(t.onresize=function(t){d(t)},d()):(g.orientation="landscape",p(g.orientation,!0))),T.detectOS&&(b.os={},y=b.os,""!==g.model&&("ipad"===g.model||"iphone"===g.model||"ipod"===g.model?(y.name="ios",f(y,(o(/os\s([\d_]+)/)?RegExp.$1:"").replace(/_/g,"."))):"android"===g.model?(y.name="android",f(y,o(/android\s([\d\.]+)/)?RegExp.$1:"")):"blackberry"===g.model?(y.name="blackberry",f(y,o(/version\/([^\s]+)/)?RegExp.$1:"")):"playbook"===g.model&&(y.name="blackberry",f(y,o(/os ([^\s]+)/)?RegExp.$1.replace(";",""):""))),y.name||(s("win")||s("16bit")?(y.name="windows",s("windows nt 10")?f(y,"10"):s("windows nt 6.3")?f(y,"8.1"):s("windows nt 6.2")||o(/\(windows 8\)/)?f(y,"8"):s("windows nt 6.1")?f(y,"7"):s("windows nt 6.0")?f(y,"vista"):s("windows nt 5.2")||s("windows nt 5.1")||s("windows xp")?f(y,"xp"):s("windows nt 5.0")||s("windows 2000")?f(y,"2k"):s("winnt")||s("windows nt")?f(y,"nt"):s("win98")||s("windows 98")?f(y,"98"):(s("win95")||s("windows 95"))&&f(y,"95")):s("mac")||s("darwin")?(y.name="mac os",s("68k")||s("68000")?f(y,"68k"):s("ppc")||s("powerpc")?f(y,"ppc"):s("os x")&&f(y,(o(/os\sx\s([\d_]+)/)?RegExp.$1:"os x").replace(/_/g,"."))):s("webtv")?y.name="webtv":s("x11")||s("inux")?y.name="linux":s("sunos")?y.name="sun":s("irix")?y.name="irix":s("freebsd")?y.name="freebsd":s("bsd")&&(y.name="bsd")),y.name&&(p(y.name,!0),y.major&&(c(y.name,y.major),y.minor&&c(y.name,y.major,y.minor))),o(/\sx64|\sx86|\swin64|\swow64|\samd64/)?y.addressRegisterSize="64bit":y.addressRegisterSize="32bit",p(y.addressRegisterSize,!0)),T.detectBrowser&&(_=b.browser,o(/opera|webtv/)||!o(/msie\s([\d\w\.]+)/)&&!s("trident")?s("firefox")?(_.engine="gecko",_.name="firefox",f(_,o(/firefox\/([\d\w\.]+)/)?RegExp.$1:"")):s("gecko/")?_.engine="gecko":s("opera")?(_.name="opera",_.engine="presto",f(_,o(/version\/([\d\.]+)/)?RegExp.$1:o(/opera(\s|\/)([\d\.]+)/)?RegExp.$2:"")):s("konqueror")?_.name="konqueror":s("edge")?(_.engine="webkit",_.name="edge",f(_,o(/edge\/([\d\.]+)/)?RegExp.$1:"")):s("chrome")?(_.engine="webkit",_.name="chrome",f(_,o(/chrome\/([\d\.]+)/)?RegExp.$1:"")):s("iron")?(_.engine="webkit",_.name="iron"):s("crios")?(_.name="chrome",_.engine="webkit",f(_,o(/crios\/([\d\.]+)/)?RegExp.$1:"")):s("applewebkit/")?(_.name="safari",_.engine="webkit",f(_,o(/version\/([\d\.]+)/)?RegExp.$1:"")):s("mozilla/")&&(_.engine="gecko"):(_.engine="trident",_.name="ie",!t.addEventListener&&i.documentMode&&7===i.documentMode?f(_,"8.compat"):o(/trident.*rv[ :](\d+)\./)?f(_,RegExp.$1):f(_,o(/trident\/4\.0/)?"8":RegExp.$1)),_.name&&(p(_.name,!0),_.major&&(c(_.name,_.major),_.minor&&c(_.name,_.major,_.minor))),p(_.engine,!0),_.language=e.userLanguage||e.language,p(_.language,!0)),T.detectPlugins){for(_.plugins=[],h=S.length-1;h>=0;h--)E=S[h],M=!1,t.ActiveXObject?M=v(E.progIds):e.plugins&&(M=m(E.substrs)),M&&(_.plugins.push(E.name),p(E.name,!0));e.javaEnabled()&&(_.plugins.push("java"),p("java",!0))}}var y,_,b={},x=t.Modernizr,w=["tv","tablet","mobile","desktop"],T={addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!0},S=[{name:"adobereader",substrs:["Adobe","Acrobat"],progIds:["AcroPDF.PDF","PDF.PDFCtrl.5"]},{name:"flash",substrs:["Shockwave Flash"],progIds:["ShockwaveFlash.ShockwaveFlash.1"]},{name:"wmplayer",substrs:["Windows Media"],progIds:["wmplayer.ocx"]},{name:"silverlight",substrs:["Silverlight"],progIds:["AgControl.AgControl"]},{name:"quicktime",substrs:["QuickTime"],progIds:["QuickTime.QuickTime"]}],E=/[\t\r\n]/g,M=i.documentElement;return b.detect=function(t){return g(t)},b.init=function(){b!==n&&(b.browser={userAgent:(e.userAgent||e.vendor||t.opera).toLowerCase()},b.detect())},b.init(),b}(window,window.navigator,window.document)},{}],340:[function(t,e,i){"use strict";!function(t,i,n){var r=window.matchMedia;void 0!==e&&e.exports?e.exports=n(r):"function"==typeof define&&define.amd?define(function(){return i.enquire=n(r)}):i.enquire=n(r)}(0,void 0,function(t){function e(t,e){var i=0,n=t.length;for(i;i<n&&!1!==e(t[i],i);i++);}function i(t){return"[object Array]"===Object.prototype.toString.apply(t)}function n(t){return"function"==typeof t}function r(t){this.options=t,!t.deferSetup&&this.setup()}function s(e,i){this.query=e,this.isUnconditional=i,this.handlers=[],this.mql=t(e);var n=this;this.listener=function(t){n.mql=t,n.assess()},this.mql.addListener(this.listener)}function o(){if(!t)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!t("only all").matches}return r.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},s.prototype={addHandler:function(t){var e=new r(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var i=this.handlers;e(i,function(e,n){if(e.equals(t))return e.destroy(),!i.splice(n,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";e(this.handlers,function(e){e[t]()})}},o.prototype={register:function(t,r,o){var a=this.queries,h=o&&this.browserIsIncapable;return a[t]||(a[t]=new s(t,h)),n(r)&&(r={match:r}),i(r)||(r=[r]),e(r,function(e){n(e)&&(e={match:e}),a[t].addHandler(e)}),this},unregister:function(t,e){if(e){var i=this.queries[t];return i&&(e?i.removeHandler(e):(i.clear(),delete this.queries[t])),this}}},new o})},{}],341:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,i,r){function s(t,e){return(void 0===t?"undefined":n(t))===e}function o(t){var e=E.className,i=S._config.classPrefix||"";if(M&&(e=e.baseVal),S._config.enableJSClass){var n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(n,"$1"+i+"js$2")}S._config.enableClasses&&(e+=" "+i+t.join(" "+i),M?E.className.baseVal=e:E.className=e)}function a(t,e){if("object"==(void 0===t?"undefined":n(t)))for(var i in t)P(t,i)&&a(i,t[i]);else{t=t.toLowerCase();var r=t.split("."),s=S[r[0]];if(2==r.length&&(s=s[r[1]]),void 0!==s)return S;e="function"==typeof e?e():e,1==r.length?S[r[0]]=e:(!S[r[0]]||S[r[0]]instanceof Boolean||(S[r[0]]=new Boolean(S[r[0]])),S[r[0]][r[1]]=e),o([(e&&0!=e?"":"no-")+r.join("-")]),S._trigger(t,e)}return S}function h(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function l(){return"function"!=typeof i.createElement?i.createElement(arguments[0]):M?i.createElementNS.call(i,"http://www.w3.org/2000/svg",arguments[0]):i.createElement.apply(i,arguments)}function u(t,e){return!!~(""+t).indexOf(e)}function c(t,e){return function(){return t.apply(e,arguments)}}function p(t,e,i){var n;for(var r in t)if(t[r]in e)return!1===i?t[r]:(n=e[t[r]],s(n,"function")?c(n,i||e):n);return!1}function f(){var t=i.body;return t||(t=l(M?"svg":"body"),t.fake=!0),t}function d(t,e,n,r){var s,o,a,h,u="modernizr",c=l("div"),p=f();if(parseInt(n,10))for(;n--;)a=l("div"),a.id=r?r[n]:u+(n+1),c.appendChild(a);return s=l("style"),s.type="text/css",s.id="s"+u,(p.fake?p:c).appendChild(s),p.appendChild(c),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(i.createTextNode(t)),c.id=u,p.fake&&(p.style.background="",p.style.overflow="hidden",h=E.style.overflow,E.style.overflow="hidden",E.appendChild(p)),o=e(c,t),p.fake?(p.parentNode.removeChild(p),E.style.overflow=h,E.offsetHeight):c.parentNode.removeChild(c),!!o}function m(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function v(e,i,n){var r;if("getComputedStyle"in t){r=getComputedStyle.call(t,e,i);var s=t.console;if(null!==r)n&&(r=r.getPropertyValue(n));else if(s){var o=s.error?"error":"log";s[o].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else r=!i&&e.currentStyle&&e.currentStyle[n];return r}function g(e,i){var n=e.length;if("CSS"in t&&"supports"in t.CSS){for(;n--;)if(t.CSS.supports(m(e[n]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var s=[];n--;)s.push("("+m(e[n])+":"+i+")");return s=s.join(" or "),d("@supports ("+s+") { #modernizr { position: absolute; } }",function(t){return"absolute"==v(t,null,"position")})}return r}function y(t,e,i,n){function o(){c&&(delete D.style,delete D.modElem)}if(n=!s(n,"undefined")&&n,!s(i,"undefined")){var a=g(t,i);if(!s(a,"undefined"))return a}for(var c,p,f,d,m,v=["modernizr","tspan","samp"];!D.style&&v.length;)c=!0,D.modElem=l(v.shift()),D.style=D.modElem.style;for(f=t.length,p=0;p<f;p++)if(d=t[p],m=D.style[d],u(d,"-")&&(d=h(d)),D.style[d]!==r){if(n||s(i,"undefined"))return o(),"pfx"!=e||d;try{D.style[d]=i}catch(t){}if(D.style[d]!=m)return o(),"pfx"!=e||d}return o(),!1}function _(t,e,i,n,r){var o=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+O.join(o+" ")+o).split(" ");return s(e,"string")||s(e,"undefined")?y(a,e,n,r):(a=(t+" "+k.join(o+" ")+o).split(" "),p(a,e,i))}function b(t,e,i){return _(t,r,r,e,i)}var x=[],w=[],T={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){w.push({name:t,fn:e,options:i})},addAsyncTest:function(t){w.push({name:null,fn:t})}},S=function(){};S.prototype=T,S=new S,S.addTest("cookies",function(){try{i.cookie="cookietest=1";var t=-1!=i.cookie.indexOf("cookietest=");return i.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(t){return!1}}),S.addTest("geolocation","geolocation"in navigator);var E=i.documentElement,M="svg"===E.nodeName.toLowerCase();M||function(t,i){function r(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function s(){var t=b.elements;return"string"==typeof t?t.split(" "):t}function o(t,e){var i=b.elements;"string"!=typeof i&&(i=i.join(" ")),"string"!=typeof t&&(t=t.join(" ")),b.elements=i+" "+t,c(e)}function a(t){var e=_[t[g]];return e||(e={},y++,t[g]=y,_[y]=e),e}function h(t,e,n){if(e||(e=i),f)return e.createElement(t);n||(n=a(e));var r;return r=n.cache[t]?n.cache[t].cloneNode():v.test(t)?(n.cache[t]=n.createElem(t)).cloneNode():n.createElem(t),!r.canHaveChildren||m.test(t)||r.tagUrn?r:n.frag.appendChild(r)}function l(t,e){if(t||(t=i),f)return t.createDocumentFragment();e=e||a(t);for(var n=e.frag.cloneNode(),r=0,o=s(),h=o.length;r<h;r++)n.createElement(o[r]);return n}function u(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(i){return b.shivMethods?h(i,t,e):e.createElem(i)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+s().join().replace(/[\w\-:]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(b,e.frag)}function c(t){t||(t=i);var e=a(t);return!b.shivCSS||p||e.hasCSS||(e.hasCSS=!!r(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),f||u(t,e),t}var p,f,d=t.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,v=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",y=0,_={};!function(){try{var t=i.createElement("a");t.innerHTML="<xyz></xyz>",p="hidden"in t,f=1==t.childNodes.length||function(){i.createElement("a");var t=i.createDocumentFragment();return void 0===t.cloneNode||void 0===t.createDocumentFragment||void 0===t.createElement}()}catch(t){p=!0,f=!0}}();var b={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:"3.7.3",shivCSS:!1!==d.shivCSS,supportsUnknownElements:f,shivMethods:!1!==d.shivMethods,type:"default",shivDocument:c,createElement:h,createDocumentFragment:l,addElements:o};t.html5=b,c(i),"object"==(void 0===e?"undefined":n(e))&&e.exports&&(e.exports=b)}(void 0!==t?t:this,i);var P;!function(){var t={}.hasOwnProperty;P=s(t,"undefined")||s(t.call,"undefined")?function(t,e){return e in t&&s(t.constructor.prototype[e],"undefined")}:function(e,i){return t.call(e,i)}}(),T._l={},T.on=function(t,e){this._l[t]||(this._l[t]=[]),this._l[t].push(e),S.hasOwnProperty(t)&&setTimeout(function(){S._trigger(t,S[t])},0)},T._trigger=function(t,e){if(this._l[t]){var i=this._l[t];setTimeout(function(){var t;for(t=0;t<i.length;t++)(0,i[t])(e)},0),delete this._l[t]}},S._q.push(function(){T.addTest=a});var A=T._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];T._prefixes=A,S.addTest("inlinesvg",function(){var t=l("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&t.firstChild&&t.firstChild.namespaceURI)});var C="Moz O ms Webkit",O=T._config.usePrefixes?C.split(" "):[];T._cssomPrefixes=O;var L=function(e){var i,n=A.length,s=t.CSSRule;if(void 0===s)return r;if(!e)return!1;if(e=e.replace(/^@/,""),(i=e.replace(/-/g,"_").toUpperCase()+"_RULE")in s)return"@"+e;for(var o=0;o<n;o++){var a=A[o];if(a.toUpperCase()+"_"+i in s)return"@-"+a.toLowerCase()+"-"+e}return!1};T.atRule=L;var k=T._config.usePrefixes?C.toLowerCase().split(" "):[];T._domPrefixes=k;var R=T.testStyles=d;S.addTest("touchevents",function(){var e;if("ontouchstart"in t||t.DocumentTouch&&i instanceof DocumentTouch)e=!0;else{var n=["@media (",A.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");R(n,function(t){e=9===t.offsetTop})}return e});var I={elem:l("modernizr")};S._q.push(function(){delete I.elem});var D={style:I.elem.style};S._q.unshift(function(){delete D.style}),T.testAllProps=_;T.prefixed=function(t,e,i){return 0===t.indexOf("@")?L(t):(-1!=t.indexOf("-")&&(t=h(t)),e?_(t,e,i):_(t,"pfx"))};T.testAllProps=b,S.addTest("flexbox",b("flexBasis","1px",!0)),S.addTest("backgroundcliptext",function(){return b("backgroundClip","text")}),function(){var t,e,i,n,r,o,a;for(var h in w)if(w.hasOwnProperty(h)){if(t=[],e=w[h],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(n=s(e.fn,"function")?e.fn():e.fn,r=0;r<t.length;r++)o=t[r],a=o.split("."),1===a.length?S[a[0]]=n:(!S[a[0]]||S[a[0]]instanceof Boolean||(S[a[0]]=new Boolean(S[a[0]])),S[a[0]][a[1]]=n),x.push((n?"":"no-")+a.join("-"))}}(),o(x),delete T.addTest,delete T.addAsyncTest;for(var F=0;F<S._q.length;F++)S._q[F]();t.Modernizr=S,t.Features=S}(window,document)},{}],342:[function(t,e,i){(function(t){"use strict";var i=void 0!==e&&e.exports&&void 0!==t?t:window;!function(t){var e=t.GreenSockGlobals||t,i=function(t){var i,n=t.split("."),r=e;for(i=0;i<n.length;i++)r[n[i]]=r=r[n[i]]||{};return r}("com.greensock.utils"),n=function t(e){var i=e.nodeType,n="";if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=t(e)}else if(3===i||4===i)return e.nodeValue;return n},r=document,s=r.defaultView?r.defaultView.getComputedStyle:function(){},o=/([A-Z])/g,a=function(t,e,i,n){var r;return(i=i||s(t,null))?(t=i.getPropertyValue(e.replace(o,"-$1").toLowerCase()),r=t||i.length?t:i[e]):t.currentStyle&&(i=t.currentStyle,r=i[e]),n?r:parseInt(r,10)||0},h=function(t){return!!(t.length&&t[0]&&(t[0].nodeType&&t[0].style&&!t.nodeType||t[0].length&&t[0][0]))},l=function(t){var e,i,n,r=[],s=t.length;for(e=0;e<s;e++)if(i=t[e],h(i))for(n=i.length,n=0;n<i.length;n++)r.push(i[n]);else r.push(i);return r},u=/(?:\r|\n|\t\t)/g,c=/(?:\s\s+)/g,p=function(t){return(t.charCodeAt(0)-55296<<10)+(t.charCodeAt(1)-56320)+65536},f=r.all&&!r.addEventListener,d=" style='position:relative;display:inline-block;"+(f?"*display:inline;*zoom:1;'":"'"),m=function(t,e){t=t||"";var i=-1!==t.indexOf("++"),n=1;return i&&(t=t.split("++").join("")),function(){return"<"+e+d+(t?" class='"+t+(i?n++:"")+"'>":">")}},v=i.SplitText=e.SplitText=function(t,e){if("string"==typeof t&&(t=v.selector(t)),!t)throw"cannot split a null element.";this.elements=h(t)?l(t):[t],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)},g=function t(e,i,n){var r=e.nodeType;if(1===r||9===r||11===r)for(e=e.firstChild;e;e=e.nextSibling)t(e,i,n);else 3!==r&&4!==r||(e.nodeValue=e.nodeValue.split(i).join(n))},y=function(t,e){for(var i=e.length;--i>-1;)t.push(e[i])},_=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},b=function(t,e,i){for(var n;t&&t!==e;){if(n=t._next||t.nextSibling)return n.textContent.charAt(0)===i;t=t.parentNode||t._parent}return!1},x=function t(e){var i,n,r=_(e.childNodes),s=r.length;for(i=0;i<s;i++)n=r[i],n._isSplit?t(n):(i&&3===n.previousSibling.nodeType?n.previousSibling.nodeValue+=3===n.nodeType?n.nodeValue:n.firstChild.nodeValue:3!==n.nodeType&&e.insertBefore(n.firstChild,n),e.removeChild(n))},w=function(t,e,i,n,o,h,l){var u,c,p,f,d,m,v,_,w,T,S,E,M=s(t),P=a(t,"paddingLeft",M),A=-999,C=a(t,"borderBottomWidth",M)+a(t,"borderTopWidth",M),O=a(t,"borderLeftWidth",M)+a(t,"borderRightWidth",M),L=a(t,"paddingTop",M)+a(t,"paddingBottom",M),k=a(t,"paddingLeft",M)+a(t,"paddingRight",M),R=.2*a(t,"fontSize"),I=a(t,"textAlign",M,!0),D=[],F=[],N=[],B=e.wordDelimiter||" ",j=e.span?"span":"div",U=e.type||e.split||"chars,words,lines",z=o&&-1!==U.indexOf("lines")?[]:null,G=-1!==U.indexOf("words"),V=-1!==U.indexOf("chars"),X="absolute"===e.position||!0===e.absolute,W=e.linesClass,H=-1!==(W||"").indexOf("++"),q=[];for(z&&1===t.children.length&&t.children[0]._isSplit&&(t=t.children[0]),H&&(W=W.split("++").join("")),c=t.getElementsByTagName("*"),p=c.length,d=[],u=0;u<p;u++)d[u]=c[u];if(z||X)for(u=0;u<p;u++)f=d[u],((m=f.parentNode===t)||X||V&&!G)&&(E=f.offsetTop,z&&m&&Math.abs(E-A)>R&&"BR"!==f.nodeName&&(v=[],z.push(v),A=E),X&&(f._x=f.offsetLeft,f._y=E,f._w=f.offsetWidth,f._h=f.offsetHeight),z&&((f._isSplit&&m||!V&&m||G&&m||!G&&f.parentNode.parentNode===t&&!f.parentNode._isSplit)&&(v.push(f),f._x-=P,b(f,t,B)&&(f._wordEnd=!0)),"BR"===f.nodeName&&f.nextSibling&&"BR"===f.nextSibling.nodeName&&z.push([])));for(u=0;u<p;u++)f=d[u],m=f.parentNode===t,"BR"!==f.nodeName?(X&&(w=f.style,G||m||(f._x+=f.parentNode._x,f._y+=f.parentNode._y),w.left=f._x+"px",w.top=f._y+"px",w.position="absolute",w.display="block",w.width=f._w+1+"px",w.height=f._h+"px"),!G&&V?f._isSplit?(f._next=f.nextSibling,f.parentNode.appendChild(f)):f.parentNode._isSplit?(f._parent=f.parentNode,!f.previousSibling&&f.firstChild&&(f.firstChild._isFirst=!0),f.nextSibling&&" "===f.nextSibling.textContent&&!f.nextSibling.nextSibling&&q.push(f.nextSibling),f._next=f.nextSibling&&f.nextSibling._isFirst?null:f.nextSibling,f.parentNode.removeChild(f),d.splice(u--,1),p--):m||(E=!f.nextSibling&&b(f.parentNode,t,B),f.parentNode._parent&&f.parentNode._parent.appendChild(f),E&&f.parentNode.appendChild(r.createTextNode(" ")),e.span&&(f.style.display="inline"),D.push(f)):f.parentNode._isSplit&&!f._isSplit&&""!==f.innerHTML?F.push(f):V&&!f._isSplit&&(e.span&&(f.style.display="inline"),D.push(f))):z||X?(f.parentNode&&f.parentNode.removeChild(f),d.splice(u--,1),p--):G||t.appendChild(f);for(u=q.length;--u>-1;)q[u].parentNode.removeChild(q[u]);if(z){for(X&&(T=r.createElement(j),t.appendChild(T),S=T.offsetWidth+"px",E=T.offsetParent===t?0:t.offsetLeft,t.removeChild(T)),w=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(_=" "===B&&(!X||!G&&!V),u=0;u<z.length;u++){for(v=z[u],T=r.createElement(j),T.style.cssText="display:block;text-align:"+I+";position:"+(X?"absolute;":"relative;"),W&&(T.className=W+(H?u+1:"")),N.push(T),p=v.length,c=0;c<p;c++)"BR"!==v[c].nodeName&&(f=v[c],T.appendChild(f),_&&f._wordEnd&&T.appendChild(r.createTextNode(" ")),X&&(0===c&&(T.style.top=f._y+"px",T.style.left=P+E+"px"),f.style.top="0px",E&&(f.style.left=f._x-E+"px")));0===p?T.innerHTML="&nbsp;":G||V||(x(T),g(T,String.fromCharCode(160)," ")),X&&(T.style.width=S,T.style.height=f._h+"px"),t.appendChild(T)}t.style.cssText=w}X&&(l>t.clientHeight&&(t.style.height=l-L+"px",t.clientHeight<l&&(t.style.height=l+C+"px")),h>t.clientWidth&&(t.style.width=h-k+"px",t.clientWidth<h&&(t.style.width=h+O+"px"))),y(i,D),y(n,F),y(o,N)},T=function(t,e,i,s){var o,a,h,l,f,d,m,v,y,_=e.span?"span":"div",b=e.type||e.split||"chars,words,lines",x=(b.indexOf("words"),-1!==b.indexOf("chars")),w="absolute"===e.position||!0===e.absolute,T=e.wordDelimiter||" ",S=" "!==T?"":w?"&#173; ":" ",E=e.span?"</span>":"</div>",M=!0,P=r.createElement("div"),A=t.parentNode;for(A.insertBefore(P,t),P.textContent=t.nodeValue,A.removeChild(t),t=P,o=n(t),m=-1!==o.indexOf("<"),!1!==e.reduceWhiteSpace&&(o=o.replace(c," ").replace(u,"")),m&&(o=o.split("<").join("{{LT}}")),f=o.length,a=(" "===o.charAt(0)?S:"")+i(),h=0;h<f;h++)if((d=o.charAt(h))===T&&o.charAt(h-1)!==T&&h){for(a+=M?E:"",M=!1;o.charAt(h+1)===T;)a+=S,h++;h===f-1?a+=S:")"!==o.charAt(h+1)&&(a+=S+i(),M=!0)}else"{"===d&&"{{LT}}"===o.substr(h,6)?(a+=x?s()+"{{LT}}</"+_+">":"{{LT}}",h+=5):d.charCodeAt(0)>=55296&&d.charCodeAt(0)<=56319||o.charCodeAt(h+1)>=65024&&o.charCodeAt(h+1)<=65039?(v=p(o.substr(h,2)),y=p(o.substr(h+2,2)),l=v>=127462&&v<=127487&&y>=127462&&y<=127487||y>=127995&&y<=127999?4:2,a+=x&&" "!==d?s()+o.substr(h,l)+"</"+_+">":o.substr(h,l),h+=l-1):a+=x&&" "!==d?s()+d+"</"+_+">":d;t.outerHTML=a+(M?E:""),m&&g(A,"{{LT}}","<")},S=function t(e,i,n,r){var s,o,h=_(e.childNodes),l=h.length,u="absolute"===i.position||!0===i.absolute;if(3!==e.nodeType||l>1){for(i.absolute=!1,s=0;s<l;s++)o=h[s],(3!==o.nodeType||/\S+/.test(o.nodeValue))&&(u&&3!==o.nodeType&&"inline"===a(o,"display",null,!0)&&(o.style.display="inline-block",o.style.position="relative"),o._isSplit=!0,t(o,i,n,r));return i.absolute=u,void(e._isSplit=!0)}T(e,i,n,r)},E=v.prototype;E.split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,i,n,r=this.elements.length,s=t.span?"span":"div",o=("absolute"===t.position||t.absolute,m(t.wordsClass,s)),a=m(t.charsClass,s);--r>-1;)n=this.elements[r],this._originals[r]=n.innerHTML,e=n.clientHeight,i=n.clientWidth,S(n,t,o,a),w(n,t,this.chars,this.words,this.lines,i,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},E.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var t=this._originals.length;--t>-1;)this.elements[t].innerHTML=this._originals[t];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},v.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(v.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)},v.version="0.5.6"}(i),function(t){var n=function(){return(i.GreenSockGlobals||i).SplitText};"function"==typeof define&&define.amd?define([],n):void 0!==e&&e.exports&&(e.exports=n())}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],343:[function(t,e,i){"use strict";function n(t,e){var i=Object.create(t);for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function t(e,i){if(!(this instanceof t))return new t(e,i);if(("object"!==(void 0===e?"undefined":r(e))||e.length)&&("string"!=typeof e||(e=document.querySelectorAll(e),e.length))&&e){e.length||(e=[e]),this.el=e,this.opt=n({delay:0,threshold:0,stagger:200,staggerOrder:function(t,e){return t.boundingClientRect.top-e.boundingClientRect.top||t.boundingClientRect.left-e.boundingClientRect.left},prepare:function(){},run:function(){}},i),this.observer=new IntersectionObserver(this.onEnter.bind(this),{threshold:this.opt.threshold});for(var s=0;s<this.el.length;s++){var o=this.el[s];this.observer.observe(o),this.opt.prepare(o)}}};s.prototype.onEnter=function(t,e){t.sort(this.opt.staggerOrder);for(var i=0;i<t.length;i++)if(!(t[i].intersectionRatio<=0)){var n=t[i].target,r=this.opt.stagger*i+this.opt.delay;this.opt.run.call(this,n,r),e.unobserve(n)}},s.prototype.destroy=function(){this.observer&&this.observer.disconnect()},e.exports=s},{}],344:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("view/about/teamHover"),s=t("view/about/parallax"),o=n.BaseView.extend({namespace:"about",onEnter:function(){this.teamHover=new r(this.container),this.parallax=new s(this.container)},onEnterCompleted:function(){this.parallax.onResize()},onLeaveCompleted:function(){this.rotate&&this.rotate.destroy(),this.teamHover&&this.teamHover.destroy(),this.parallax&&this.parallax.destroy()}});e.exports=o},{"barba.js":9,"view/about/parallax":345,"view/about/teamHover":346}],345:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lodash/forEach"),o=t("utils/mq"),a=t("utils/offsetTop"),h=t("utils/viewport"),l=t("utils/normalize"),u=t("utils/scroll"),c=function(){function t(e){var i=this;n(this,t),this.root=e,this.active=!1,this.mediumHandler={match:function(){i.active=!0},unmatch:function(){i.active=!1,i.clean()}},o.register("medium",this.mediumHandler),this.init(),this.bind()}return r(t,[{key:"bind",value:function(){this.update=this.update.bind(this),this.onResize=this.onResize.bind(this),this.update(),window.addEventListener("resize",this.onResize)}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onResize),this.raf&&window.cancelAnimationFrame(this.raf)}},{key:"onResize",value:function(){this.init()}},{key:"init",value:function(){var t=this,e=this.root.querySelectorAll("[data-parallax]");this.data=[],s(e,function(e){var i=a(e),n={el:e,speed:parseFloat(e.dataset.parallax),top:i};e.dataset.clone&&(n.clone=t.root.querySelector(e.dataset.clone)),t.data.push(n)})}},{key:"clean",value:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];TweenLite.killTweensOf(e.el),TweenLite.set(e.el,{clearProps:"y"}),e.clone&&(TweenLite.killTweensOf(e.clone),TweenLite.set(e.clone,{clearProps:"y"}))}}},{key:"update",value:function(){if(this.raf=window.requestAnimationFrame(this.update),this.active)for(var t=0;t<this.data.length;t++){var e=this.data[t],i=l(u.y,e.top,e.top+h.height,-10,10)*e.speed;TweenLite.killTweensOf(e.el),TweenLite.to(e.el,2,{y:i}),e.clone&&(TweenLite.killTweensOf(e.clone),TweenLite.to(e.clone,2,{y:i}))}}}]),t}();e.exports=c},{"lodash/forEach":78,"utils/mq":328,"utils/normalize":329,"utils/offsetTop":330,"utils/scroll":333,"utils/viewport":336}],346:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=t("lodash/forEach"),a=function(){function t(e){n(this,t),this.el=e,this.image=this.el.querySelector(".person__image"),this.layer=this.el.querySelector(".person__layer"),this.text=this.el.querySelector(".person__text"),this.bind()}return r(t,[{key:"bind",value:function(){this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.el.addEventListener("mouseenter",this.onEnter),this.el.addEventListener("mouseleave",this.onLeave),this.el.addEventListener("touchstart",this.onEnter),this.el.addEventListener("touchend",this.onLeave),this.el.addEventListener("touchcancel",this.onLeave)}},{key:"destroy",value:function(){this.el.removeEventListener("mouseenter",this.onEnter),this.el.removeEventListener("mouseleave",this.onLeave),this.el.removeEventListener("touchstart",this.onEnter),this.el.removeEventListener("touchend",this.onLeave),this.el.removeEventListener("touchcancel",this.onLeave)}},{key:"onEnter",value:function(){this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this.layer,.5,{opacity:1},0),this.tl.to(this.image,.5,{filter:"grayscale(100%) brightness(1.3)",webkitFilter:"grayscale(100%) brightness(1.3)",scale:1.2},0),this.tl.to(this.text,.5,{force3D:!1,opacity:1},0)}},{key:"onLeave",value:function(){this.tl&&this.tl.kill(),this.tl=new TimelineLite,this.tl.to(this.layer,.5,{opacity:0},0),this.tl.to(this.image,.5,{filter:"grayscale(0%) brightness(1)",webkitFilter:"grayscale(0%) brightness(1)",scale:1},0),this.tl.to(this.text,.5,{force3D:!1,opacity:0,scale:1},0)}}]),t}(),h=function(){function t(){n(this,t),this.instances=[],this.parse=this.parse.bind(this),s.Dispatcher.on("transitionCompleted",this.parse)}return r(t,[{key:"destroy",value:function(){o(this.instances,function(t){t.destroy()})}},{key:"parse",value:function(t,e,i){var n=this;i=i||document.body,this.destroy();var r=i.querySelectorAll(".person");o(r,function(t){n.instances.push(new a(t))})}}]),t}();e.exports=h},{"barba.js":9,"lodash/forEach":78}],347:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=(t("utils/mq"),
t("./common")),a=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.root.querySelectorAll(".duo-text-images.knowledge .content__image")[0].setAttribute("data-parallax",-3),i.initParallax(),i}return s(e,t),e}(o);e.exports=a},{"./common":350,"utils/mq":328}],348:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=t("utils/mq"),l=t("./common"),u=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.visibleBox=!1,i.prepareBox();var s=i.root.querySelectorAll(".bloom-pricing .content__image");return s[0].setAttribute("data-parallax",-8),s[1].setAttribute("data-parallax",-5),i.initParallax(),i}return s(e,t),o(e,[{key:"prepareBox",value:function(){var t=this.root.querySelector(".bloom-box"),e=t.querySelectorAll(".content__image");h.isMoreThan("large")&&(TweenLite.set(e,{opacity:1}),TweenLite.set(e[2],{x:0,y:0}),TweenLite.set(e[3],{x:0,y:50}),TweenLite.set(e[4],{x:0,y:150}),TweenLite.set(e[5],{x:0,y:155}),TweenLite.set(e[6],{x:0,y:160}),TweenLite.set(e[7],{x:0,y:200}))}},{key:"animateBox",value:function(){var t=this.root.querySelector(".bloom-box"),e=t.querySelectorAll(".content__image"),i=this.sy+.7*window.innerHeight;if(h.isMoreThan("large")){i>=t.getBoundingClientRect().top+this.sy&&!this.visibleBox&&(this.visibleBox=!0,TweenLite.to(e,1,{delay:1,x:0,y:0,ease:Expo.easeOut}))}}},{key:"destroy",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"onResize",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onResize",this).call(this)}},{key:"onRAF",value:function(t){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRAF",this).call(this),this.animateBox()}}]),e}(l);e.exports=u},{"./common":350,"utils/mq":328}],349:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("./sidebar"),s=t("./common"),o={Scabal:t("./scabal"),Beobank:t("./beobank"),Bloomlife:t("./bloomlife"),CropTrust:t("./croptrust"),Evs:t("./evs")},a=t("utils/scroll"),h=n.BaseView.extend({namespace:"single-case-study",onEnter:function(){var t=n.HistoryManager.prevStatus();t&&t.namespace===this.namespace&&this.destroy(),this.root=this.container.querySelector("[data-case]"),this.slug=this.root.getAttribute("data-case"),a.y=0,this.sidebar=new r(this.container);var e=this.format(this.slug);o.hasOwnProperty(e)?this.current=new o[e]({root:this.root}):this.current=new s({root:this.root})},onEnterCompleted:function(){var t=this;a.setTo(0),this.current.onResize(),this.sidebar.onResize(),window.setTimeout(function(){t.sidebar.transition=!0},1),window.setTimeout(function(){t.current.parallaxReady=!0},100)},onLeave:function(){this.sidebar&&this.sidebar.onLeave()},destroy:function(){this.current&&this.current.destroy(),this.sidebar&&this.sidebar.destroy(),this.current=null,this.slug=null,this.sidebar=null},onLeaveCompleted:function(){var t=n.HistoryManager.currentStatus();t&&t.namespace!==this.namespace&&this.destroy()},format:function(t){t=t.split(/[-_]/gi);for(var e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join("")}});e.exports=h},{"./beobank":347,"./bloomlife":348,"./common":350,"./croptrust":351,"./evs":352,"./scabal":355,"./sidebar":356,"barba.js":9,"utils/scroll":333}],350:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/scroll"),o=t("utils/viewport"),a=t("lodash/values"),h=t("lodash/forEach"),l=t("utils/normalize"),u=t("utils/mq"),c=t("utils/offsetTop"),p=t("./partials/duoTextImages"),f=t("./partials/duoTextMedia"),d=function(){function t(e){var i=this;n(this,t),this.root=e.root,this.back=this.root.querySelector('[data-component="case-back"]'),this.nav=document.querySelector(".nav"),this.nav.appendChild(this.back),this.stores={duoTextMedia:[],duoTextImages:[]},this.scrollDown=this.root.querySelector(".scroll-down"),this.scrollDown.addEventListener("click",function(){s.goTo(window.innerHeight-250)}),this.resize=this.onResize.bind(this),window.addEventListener("resize",this.resize),this.RAF=window.requestAnimationFrame(this.onRAF.bind(this)),this.initDuoTextMedia(),this.initDuoTextImages(),this.isLarge=!1,this.mediumHandler={match:function(){i.isLarge=!0},unmatch:function(){i.isLarge=!1,i.cleanParallax()}},u.register("large",this.mediumHandler),this.initParallax(),this.parallaxReady=!1}return r(t,[{key:"cleanParallax",value:function(){for(var t=0;t<this.parallax.length;t++){var e=this.parallax[t];TweenLite.killTweensOf(e.el),TweenLite.set(e.el,{clearProps:"y"})}}},{key:"initParallax",value:function(){var t=this,e=this.root.querySelectorAll("[data-parallax]");this.parallax=[],h(e,function(e){var i=c(e);t.parallax.push({el:e,speed:e.dataset.parallax,top:i})})}},{key:"updateParallax",value:function(){if(this.isLarge)for(var t=0;t<this.parallax.length;t++){var e=this.parallax[t];TweenLite.killTweensOf(e.el);var i=l(this.sy,e.top,e.top+o.height,-10,10)*e.speed;TweenLite.to(e.el,this.parallaxReady?2:0,{y:i})}}},{key:"initDuoTextMedia",value:function(){var t=this,e=this.root.querySelectorAll(".duo-text-media");Array.prototype.forEach.call(e,function(e){if(e.getAttribute("data-video-enable")){var i=new f({root:e});t.stores.duoTextMedia.push(i)}})}},{key:"initDuoTextImages",value:function(){var t=this,e=this.root.querySelectorAll(".duo-text-images");Array.prototype.forEach.call(e,function(e){if(e.getAttribute("data-swipe-enable")){var i=new p({root:e});t.stores.duoTextImages.push(i)}})}},{key:"destroy",value:function(){this.back.remove();var t=!0,e=!1,i=void 0;try{for(var n,r=a(this.stores)[Symbol.iterator]();!(t=(n=r.next()).done);t=!0)for(var s=n.value,o=0;o<s.length;o++)s[o].destroy()}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}window.removeEventListener("resize",this.resize),this.RAF&&window.cancelAnimationFrame(this.RAF)}},{key:"onResize",value:function(){this.initParallax()}},{key:"onRAF",value:function(){this.ww=o.width,this.wh=o.height,this.sy=s.y,this.updateParallax(),this.RAF=window.requestAnimationFrame(this.onRAF.bind(this))}}]),t}();e.exports=d},{"./partials/duoTextImages":353,"./partials/duoTextMedia":354,"lodash/forEach":78,"lodash/values":101,"utils/mq":328,"utils/normalize":329,"utils/offsetTop":330,"utils/scroll":333,"utils/viewport":336}],351:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=(t("utils/mq"),t("./common")),a=(t("lodash/forEach"),function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),s=void 0;i.root.querySelectorAll(".timeline .history__point__image img");return s=i.root.querySelectorAll(".wireframes__images img"),s[0].setAttribute("data-parallax",-8),s[1].setAttribute("data-parallax",-3),s[2].setAttribute("data-parallax",-2),s=i.root.querySelectorAll(".carousel__images img"),s[0].setAttribute("data-parallax",-2),s[1].setAttribute("data-parallax",0),s[2].setAttribute("data-parallax",0),s=i.root.querySelectorAll(".crops-maps .content__image img"),s[0].setAttribute("data-parallax",-5),s[1].setAttribute("data-parallax",-2),i.initParallax(),i}return s(e,t),e}(o));e.exports=a},{"./common":350,"lodash/forEach":78,"utils/mq":328}],352:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=(t("utils/mq"),t("./common")),a=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),s=i.root.querySelectorAll(".evs-grid .content__image");return s[0].setAttribute("data-parallax",-3),s[1].setAttribute("data-parallax",-8),s=i.root.querySelectorAll(".evs-ui .content__image"),s[0].setAttribute("data-parallax",-4),i.initParallax(),i}return s(e,t),e}(o);e.exports=a},{"./common":350,"utils/mq":328}],353:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("hammerjs"),o=t("utils/mq"),a=function(){function t(e){n(this,t),this.root=e.root,this.images=this.root.querySelectorAll(".content__right img"),this.pages=this.root.querySelectorAll(".content__pagination li"),this.length=this.images.length,this.index=0,this.onSwipeLeft=this.swipeLeft.bind(this),this.onSwipeRight=this.swipeRight.bind(this),this.onResize=this.resize.bind(this),this.Swipe=new s(this.root,{direction:s.DIRECTION_HORIZONTAL}),this.resize(),window.addEventListener("resize",this.onResize)}return r(t,[{key:"init",value:function(){this.Swipe.on("swipeleft",this.onSwipeLeft),this.Swipe.on("swiperight",this.onSwipeRight),this.update()}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onResize),this.reset()}},{key:"reset",value:function(){this.Swipe.off("swipeleft",this.onSwipeLeft),this.Swipe.off("swiperight",this.onSwipeRight),this.tween&&this.tween.kill(),Array.prototype.forEach.call(this.images,function(t){})}},{key:"resize",value:function(){this.reset(),o.isMoreThan("large")||this.init()}},{key:"update",value:function(){var t=this;this.tween&&this.tween.kill(),this.tween=TweenMax.to(this.images,1,{x:this.index*window.innerWidth*-1,y:0}),Array.prototype.forEach.call(this.pages,function(e,i){e.classList.remove("is-active"),i===t.index&&e.classList.add("is-active")})}},{key:"clamp",value:function(t,e,i){return Math.min(Math.max(t,e),i)}},{key:"swipeLeft",value:function(){this.index=this.clamp(this.index+1,0,this.length-1),this.update()}},{key:"swipeRight",value:function(){this.index=this.clamp(this.index-1,0,this.length-1),this.update()}}]),t}();e.exports=a},{hammerjs:22,"utils/mq":328}],354:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.root=e.root,this.shield=this.root.querySelector(".media__shield"),this.picture=this.root.querySelector(".media__picture"),this.iframe=this.root.querySelector(".media__video"),this.iframe&&(this.source=this.iframe.dataset.src,this.playTransition=null,this.stopTransition=null,this.playing=!1,this.onShieldClick=this.onShieldClick.bind(this),this.shield.addEventListener("click",this.onShieldClick))}return r(t,[{key:"onShieldClick",value:function(){if(this.playing)return void this.videoStop();this.videoPlay()}},{key:"videoPlay",value:function(){var t=this.rewrite(this.source);this.iframe.setAttribute("src",t),TweenMax.set(this.iframe,{display:"block"}),this.kill(),this.playTransition=TweenMax.to([this.shield,this.picture],1,{opacity:0,delay:1,pointerEvents:"none",ease:Quad.easeOut}),this.playing=!0}},{key:"videoStop",value:function(){var t=this;this.kill(),this.stopTransition=TweenMax.to([this.shield,this.picture],1,{opacity:1,delay:1,ease:Quad.easeOut,onComplete:function(){t.iframe.setAttribute("src",t.source),TweenMax.set(t.iframe,{display:"none"})}}),this.playing=!1}},{key:"kill",value:function(){this.playTransition&&this.playTransition.kill(),this.stopTransition&&this.stopTransition.kill()}},{key:"rewrite",value:function(t){return-1!==t.indexOf("?")?t+"&autoplay=1":t+"?autoplay=1"}},{key:"destroy",value:function(){}}]),t}();e.exports=s},{}],355:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=(t("utils/mq"),t("./common")),a=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),s=i.root.querySelectorAll(".scabal-measure .content__image");return s[0].setAttribute("data-parallax",-4),s[1].setAttribute("data-parallax",3),s=i.root.querySelectorAll(".scabal-last .content__image"),s[0].setAttribute("data-parallax",-2),i.initParallax(),i}return s(e,t),e}(o);e.exports=a},{"./common":350,"utils/mq":328}],356:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/viewport"),o=t("utils/scroll"),a=t("utils/mq"),h=t("utils/dispatcher"),l=function(){function t(e){n(this,t),this.root=e,this.nav=document.querySelector(".site-header.nav"),this.siteContainer=document.querySelector(".site"),this.container=this.root.querySelector(".case"),this.left=this.root.querySelector(".sidebar--left"),this.right=this.root.querySelector(".sidebar--right"),this.similar=this.root.querySelector(".similar"),this.siteContainer.appendChild(this.left),this.siteContainer.appendChild(this.right),this.widthSidebar=4,this.barVisible=!1,this.offset=100,this.register()}return r(t,[{key:"register",value:function(){var t=this;this.update=this.update.bind(this),this.onResize=this.onResize.bind(this),this.onSidebarEnter=this.onSidebarEnter.bind(this),this.onSidebarLeave=this.onSidebarLeave.bind(this),this.mediumHandler={match:function(){t.bind()},unmatch:function(){t.unbind()}},Features.firefox||a.register("medium",this.mediumHandler)}},{key:"bind",value:function(){this.isActive=!0,this.onResize(),this.update(),this.left.addEventListener("mouseenter",this.onSidebarEnter),this.left.addEventListener("mouseleave",this.onSidebarLeave),this.right.addEventListener("mouseenter",this.onSidebarEnter),this.right.addEventListener("mouseleave",this.onSidebarLeave),h.on("resize",this.onResize)}},{key:"unbind",value:function(){this.isActive=!1,this.raf&&window.cancelAnimationFrame(this.raf),h.off("resize",this.onResize),this.raf=null,this.left.removeEventListener("mouseenter",this.onSidebarEnter),this.left.removeEventListener("mouseleave",this.onSidebarLeave),this.right.removeEventListener("mouseenter",this.onSidebarEnter),this.right.removeEventListener("mouseleave",this.onSidebarLeave),this.setScale(1)}},{key:"destroy",value:function(){this.unbind(),a.unregister("medium",this.mediumHandler),this.siteContainer.removeChild(this.left),this.siteContainer.removeChild(this.right),this.nav.classList.remove("w-sidebar")}},{key:"onLeave",value:function(){this.left.classList.remove("show"),this.right.classList.remove("show")}},{key:"onResize",value:function(){this.isActive&&(this.limit=this.container.clientHeight-s.height/1.2,this.setOrigin(),this.setScale())}},{key:"getScale",value:function(){if(this.barVisible)return 1;var t=this.container.clientWidth;return t=s.width-20*this.widthSidebar,s.width/t}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.transition||this.container.classList.add("notransition"),TweenLite.set(this.container,{force3D:!0,scale:t||this.getScale()}),this.transition||(this.container.offsetHeight,this.container.classList.remove("notransition"))}},{key:"setOrigin",value:function(){var t=o.y,e=0;t>this.limit-100&&(e=100),TweenLite.set(this.container,{transformOrigin:"50% "+e+"%"})}},{key:"update",value:function(){var t=o.y,e=this.limit;!this.barVisible&&t>this.offset&&t<e?this.showBars():this.barVisible&&t<this.offset&&this.hideBars(),this.barVisible&&t>e&&this.hideBars(),this.raf=requestAnimationFrame(this.update)}},{key:"showBars",value:function(){this.barVisible=!0,this.setOrigin(),this.setScale(),this.container.classList.add("bars"),this.left.classList.add("show"),this.right.classList.add("show"),this.nav.classList.add("w-sidebar")}},{key:"hideBars",value:function(){this.barVisible=!1,this.setOrigin(),this.setScale(),this.container.classList.remove("bars"),this.left.classList.remove("show"),this.right.classList.remove("show"),this.nav.classList.remove("w-sidebar")}},{key:"onSidebarEnter",value:function(t){t.preventDefault();var e=t.currentTarget,i=e.querySelector(".sidebar__image"),n=e.classList.contains("sidebar--left"),r=n?this.right:this.left;TweenLite.killTweensOf([i,this.container,r]),TweenLite.set([this.container,this.similar],{x:n?20:-20}),TweenLite.to(i,.6,{xPercent:n?80:-80,ease:Power4.easeOut}),TweenLite.to(r,.3,{x:n?50:-50,ease:Power4.easeOut})}},{key:"onSidebarLeave",value:function(t){t.preventDefault();var e=t.currentTarget,i=e.querySelector(".sidebar__image");TweenLite.killTweensOf([i,this.container,this.left,this.right]),TweenLite.to(i,.6,{xPercent:0,ease:Power4.easeIn}),TweenLite.set([this.container,this.similar],{x:0,delay:.5}),TweenLite.to([this.left,this.right],.3,{x:0,ease:Power4.easeOut,clearProps:"x"})}}]),t}();e.exports=l},{"utils/dispatcher":321,"utils/mq":328,"utils/scroll":333,"utils/viewport":336}],357:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("form-serialize"),o=t("dropzone"),a=t("lodash/forEach"),h=t("utils/scroll"),l=t("view/contact/rangePicker"),u=t("utils/dispatcher");o.autoDiscover=!1;var c=function(){function t(e){var i=this;if(n(this,t),this.form=e,this.submitEl=this.form.querySelector('[type="submit"]'),this.dropEl=this.form.querySelector(".dropzone"),this.errorContainer=this.form.querySelector(".error-container"),this.errorLabel=this.errorContainer.querySelector("p"),this.form){this.extensionAllowed=["application/pdf","application/msword","application/excel","application/vnd.ms-excel","application/x-excel","application/x-msexcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png"];var r=this.dropEl.dataset.label||"Drag & drop your documents here";Features.desktop||(r="Upload your documents here"),this.dropzone=new o(this.dropEl,{paramName:"file",maxFilesize:20,acceptedFiles:this.extensionAllowed.join(","),accept:function(t,e){var i=t.name.split(".").pop();t.previewElement.querySelector("text tspan").textContent=i.toUpperCase(),e()},previewTemplate:document.querySelector(".preview-template").innerHTML,url:"/fakeurl",autoProcessQueue:!1,uploadMultiple:!0,parallelUploads:100,maxFiles:5,dictDefaultMessage:r,init:function(){this.on("addedfile",function(t){})}}),this.dropzone.on("error",function(t,e){i.dropzone.removeFile(t)}),this.budgetPicker=new l(this.form,"budget"),this.deadlinePicker=new l(this.form,"deadline"),this.bind()}}return r(t,[{key:"bind",value:function(){this.onSubmit=this.onSubmit.bind(this),this.form.addEventListener("submit",this.onSubmit)}},{key:"destroy",value:function(){this.form.removeEventListener("submit",this.onSubmit),this.budgetPicker&&this.budgetPicker.destroy(),this.deadlinePicker&&this.deadlinePicker.destroy();var t=document.querySelectorAll(".dz-hidden-input");a(t,function(t){t.parentNode.removeChild(t)})}},{key:"getFormData",value:function(){return s(this.form,{empty:!1,hash:!0})}},{key:"onSubmit",value:function(t){t&&t.preventDefault(),this.submitEl.disabled=!0,this.type=this.form.parentNode.getAttribute("data-type"),this.type=this.type.charAt(0).toUpperCase()+this.type.slice(1),this.send()}},{key:"initLoading",value:function(){this.isLoading=!0,TweenLite.killTweensOf(this.form),TweenLite.to(this.form,.5,{opacity:.5})}},{key:"endLoading",value:function(){this.isLoading=!1,TweenLite.killTweensOf(this.form),TweenLite.to(this.form,.5,{opacity:1})}},{key:"send",value:function(){var t=this;if(!this.isLoading){this.initLoading(),this.cleanErrors();var e=this.form.getAttribute("action"),i=new FormData(this.form);a(this.dropzone.files,function(t){i.append("files[]",t,t.name)}),fetch(e,{method:this.form.getAttribute("method")||"POST",body:i}).then(function(t){return t.json()}).then(this.parseResponse.bind(this)).catch(function(){t.onError({message:"Sorry, server error",status:"error"}),t.endLoading(),t.submitEl.disabled=!1})}}},{key:"parseResponse",value:function(t){"error"===t.status&&this.onError(t),"success"===t.status&&this.onSucess(t),this.endLoading()}},{key:"onError",value:function(t){this.errorLabel.textContent=t.message,this.errorContainer.style.display="block",a(t.errors,this.appendError.bind(this)),u.emit("scroll:resize"),this.submitEl.disabled=!1}},{key:"onSucess",value:function(t){if("function"==typeof ga&&ga.getAll){var e=ga.getAll()[0].get("name");ga(e+".send","event","Contact","submit",this.type)}var i=new TimelineLite,n=document.querySelector(".contact__feedback"),r=document.querySelector(".contact__main");if(n){n.querySelector(".full-message__content p").textContent=t.message,i.set(r,{display:"none"}),i.set(n,{display:"block"}),h.goToEl(n,-20),u.emit("scroll:resize")}}},{key:"appendError",value:function(t,e){var i=this.form.querySelector('[data-field="'+e+'"]'),n=this.form.querySelector('[name="'+e+'"]');if(n||i){var r=i||n.parentNode,s=document.createElement("p");s.classList.add("error-text"),s.textContent=t[0],r.classList.add("input-field--error"),r.appendChild(s)}}},{key:"cleanErrors",value:function(){this.errorContainer.style.display="",this.errorLabel.textContent="";var t=this.form.querySelectorAll(".input-field--error");a(t,function(t){t.classList.remove("input-field--error");var e=t.querySelector(".error-text");t.removeChild(e)})}}]),t}();e.exports=c},{dropzone:14,"form-serialize":19,"lodash/forEach":78,"utils/dispatcher":321,"utils/scroll":333,"view/contact/rangePicker":359}],358:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("lodash/forEach"),s=t("view/contact/ajaxForm"),o=t("view/contact/tabNavigation"),a=n.BaseView.extend({namespace:"contact",onEnter:function(){var t=this;this.tab=new o(this.container),this.aForms=[];var e=this.container.querySelectorAll(".contact-form");r(e,function(e){t.aForms.push(new s(e))})},onLeaveCompleted:function(){this.form&&this.form.destroy(),this.drop&&this.drop.destroy(),this.tab&&this.tab.destroy(),r(this.aForms,function(t){t.destroy()})}});e.exports=a},{"barba.js":9,"lodash/forEach":78,"view/contact/ajaxForm":357,"view/contact/tabNavigation":360}],359:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/mq"),o=function(){function t(e,i){n(this,t),this.root=e,this.name=i,this.master=this.root.querySelector("#"+this.name),this.master&&(this.select=this.root.querySelector("#"+this.name+"_select"),this.range=this.root.querySelector("#"+this.name+"_range"),this.idk=this.root.querySelector("#"+this.name+"_idk"),this.bind())}return r(t,[{key:"bind",value:function(){var t=this;this.onChange=this.onChange.bind(this),this.mediumHandler={match:function(){t.activateDesktop()},unmatch:function(){t.activateMobile()}},s.register("medium",this.mediumHandler),s.isMoreThan("medium")?this.activateDesktop():this.activateMobile(),this.select.addEventListener("change",this.onChange),this.range.addEventListener("change",this.onChange),this.idk.addEventListener("change",this.onChange)}},{key:"destroy",value:function(){this.select&&this.select.removeEventListener("change",this.onChange),this.range&&this.range.removeEventListener("change",this.onChange),this.idk&&this.idk.removeEventListener("change",this.onChange),this.mediumHandler&&s.unregister("medium",this.mediumHandler)}},{key:"activateMobile",value:function(){this.setValue(this.getValueFromSelect())}},{key:"activateDesktop",value:function(){this.setValue(this.getValueFromCheckbox())}},{key:"getValueFromRange",value:function(){if(this.values=JSON.parse(this.range.dataset.values),this.values){var t=this.values[+this.range.value];if(t)return t.key}}},{key:"getValueFromCheckbox",value:function(){return this.idk.checked?"idk":this.getValueFromRange()}},{key:"getValueFromSelect",value:function(){var t=this.select.selectedIndex;return this.select.options[t].value}},{key:"onChange",value:function(t){var e=t.currentTarget,i=e.getAttribute("name"),n=void 0;i===this.name+"_idk"&&(n=this.getValueFromCheckbox(),this.range.removeAttribute("disabled"),"idk"===n&&this.range.setAttribute("disabled",!0)),i===this.name+"_range"&&(n=this.getValueFromRange()),i===this.name+"_select"&&"idk"!==(n=this.getValueFromSelect())&&(this.idk.checked=!1,this.range.removeAttribute("disabled")),this.setValue(n)}},{key:"setValue",value:function(t){for(var e=document.querySelector('input[data-passive="'+this.select.getAttribute("id")+'"]'),i=[].slice.call(this.select.querySelectorAll("option")),n="idk"===t?"I don't know.":t,r=0;r<i.length;r++){if(i[r].value===n){this.select.selectedIndex=r,e&&(e.value=n);break}}if(this.values){for(var s=0;s<this.values.length;s++){if(this.values[s].key===n){this.range.value=s;break}}this.master.value=t}}}]),t}();e.exports=o},{"utils/mq":328}],360:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/mq"),o=t("lodash/forEach"),a=(t("utils/scroll"),t("utils/dispatcher")),h=function(){function t(e){n(this,t),this.root=e,this.formsContainer=this.root.querySelector(".contact__forms"),this.current=this.getCurrentHash(),this.bind(),this.update()}return r(t,[{key:"bind",value:function(){this.onHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",this.onHashChange)}},{key:"destroy",value:function(){window.removeEventListener("hashchange",this.onHashChange)}},{key:"getCurrentHash",value:function(){return window.location.hash.replace("#","")||"project"}},{key:"getTab",value:function(t){var e=".tab";return t&&(e+='[href="#'+t+'"]'),this.root[t?"querySelector":"querySelectorAll"](e)}},{key:"getView",value:function(t){var e=".contact__forms__single";return t&&(e+='[data-type="'+t+'"]'),this.root[t?"querySelector":"querySelectorAll"](e)}},{key:"onHashChange",value:function(t){t&&t.preventDefault();var e=this.getCurrentHash();e!==this.current&&(this.current=e,this.update())}},{key:"update",value:function(){this.cleanAll(),this.activateView(this.current),a.emit("scroll:resize")}},{key:"cleanAll",value:function(){var t=this.getTab(),e=this.getView();o(t,function(t){t.classList.remove("tab--active")}),o(e,function(t){t.style.display="none"})}},{key:"activateView",value:function(t){var e=this.getTab(t),i=this.getView(t);e&&i&&(e.classList.add("tab--active"),i.style.display="block",s.isLessThan("medium")&&window.scrollTo(0,i.getBoundingClientRect().top-100))}}]),t}();e.exports=h},{"lodash/forEach":78,"utils/dispatcher":321,"utils/mq":328,"utils/scroll":333}],361:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("view/home/panels/panels"),s=(t("view/intro/intro"),t("utils/fitElement")),o=n.BaseView.extend({namespace:"front-page",onEnter:function(){this.panels=new r(this.container),this.panels.setLock("transitionEnd",!0),this.firstPanel=this.panels.getPanelByName("Video"),this.fitVideo=new s(this.container.querySelector('[class*="panel"][class*="__video"] video')),this.firstPanel.animate()},onEnterCompleted:function(){this.panels.setLock("transitionEnd",!1)},onLeave:function(){},onLeaveCompleted:function(){this.panels.destroy(),this.fitVideo.destroy()}});e.exports=o},{"barba.js":9,"utils/fitElement":323,"view/home/panels/panels":367,"view/intro/intro":371}],362:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lodash/forEach"),o=t("utils/mq"),a=t("utils/offsetTop"),h=t("utils/viewport"),l=t("utils/normalize"),u=t("utils/scroll"),c=function(){function t(e){var i=this;n(this,t),this.root=e,this.active=!0,this.mediumHandler={match:function(){i.active=!1,i.clean(),i.destroy()},unmatch:function(){i.active=!0,i.bind()}},this.init(),this.bind(),o.register("medium",this.mediumHandler)}return r(t,[{key:"bind",value:function(){this.update=this.update.bind(this),this.onResize=this.onResize.bind(this),this.update(),window.addEventListener("resize",this.onResize)}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onResize),this.raf&&window.cancelAnimationFrame(this.raf)}},{key:"onResize",value:function(){this.init()}},{key:"init",
value:function(){var t=this,e=this.root.querySelectorAll("[data-parallax]");this.data=[],s(e,function(e){var i=a(e),n={el:e,speed:parseFloat(e.dataset.parallax),top:i};e.dataset.clone&&(n.clone=t.root.querySelector(e.dataset.clone)),t.data.push(n)})}},{key:"clean",value:function(){if(this.data)for(var t=0;t<this.data.length;t++){var e=this.data[t];TweenLite.killTweensOf(e.el),TweenLite.set(e.el,{clearProps:"y"}),e.clone&&(TweenLite.killTweensOf(e.clone),TweenLite.set(e.clone,{clearProps:"y"}))}}},{key:"update",value:function(){if(this.raf=window.requestAnimationFrame(this.update),this.active)for(var t=0;t<this.data.length;t++){var e=this.data[t],i=l(u.y,e.top,e.top+h.height,-10,10)*e.speed;TweenLite.killTweensOf(e.el),TweenLite.to(e.el,2,{y:i}),e.clone&&(TweenLite.killTweensOf(e.clone),TweenLite.to(e.clone,2,{y:i}))}}}]),t}();e.exports=c},{"lodash/forEach":78,"utils/mq":328,"utils/normalize":329,"utils/offsetTop":330,"utils/scroll":333,"utils/viewport":336}],363:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=t("view/home/panels/basePanel"),l=t("view/home/panels/Parallax"),u=t("utils/viewport"),c=t("utils/mq"),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="About",i.root=t.querySelector(".panel--about"),i.inner=i.root.querySelector(".panel--about-inner"),i.blocks=i.inner.children,i.parallax=new l(i.root),i.illus=i.root.querySelectorAll('[class*="panel--about-illustration"]'),i}return s(e,t),o(e,[{key:"inactive",value:function(){this.parallax.clean(),this.parallax.destroy()}},{key:"clean",value:function(){c.isMoreThan("medium")||this.parallax.clean(),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clean",this).call(this)}},{key:"fromVideo",value:function(){var t=this,e=new TimelineMax({onComplete:function(){}}),i=u.height;return e.set(this.blocks,{opacity:0,y:20}),e.add("start"),e.fromTo(this.root,BASE_SCROLL_TIME,{y:i},{y:0}),e.staggerTo(this.blocks,.5,{opacity:1,y:0,ease:Power4.easeInOut},.05,"start+=.25"),TweenLite.from(this.illus,3.5,{yPercent:20,rotation:-15,ease:Power4.easeOut,clearProps:"all",onComplete:function(){c.isMoreThan("medium")&&t.yoyo()}}),e}},{key:"fromWorks",value:function(){var t=this,e=new TimelineMax({onComplete:function(){}});return e.add("start"),TweenLite.from(this.illus,3.5,{yPercent:-10,rotation:-15,ease:Power4.easeOut,clearProps:"all",onComplete:function(){c.isMoreThan("medium")&&t.yoyo()}}),e}},{key:"yoyo",value:function(){new TimelineMax({repeat:-1,yoyo:!0}).to(this.illus,10,{yPercent:5,rotation:2.5,ease:Back.easeInOut})}}]),e}(h);e.exports=p},{"utils/mq":328,"utils/viewport":336,"view/home/panels/Parallax":362,"view/home/panels/basePanel":364}],364:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("utils/viewport"),o=function(){function t(){n(this,t),this.name=void 0,this.root=void 0}return r(t,[{key:"clean",value:function(){this.root.style.opacity="",this.root.style.transform=""}},{key:"active",value:function(){}},{key:"inactive",value:function(){}},{key:"out",value:function(t){var e=new TimelineMax,i=s.height;return e.fromTo(this.root,BASE_SCROLL_TIME,{y:0},{y:t?-i:i}),e}},{key:"in",value:function(t){var e=new TimelineMax,i=s.height;return e.fromTo(this.root,BASE_SCROLL_TIME,{y:t?i:-i},{y:0}),e}}]),t}();e.exports=o},{"utils/viewport":336}],365:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("view/home/panels/basePanel"),h=t("utils/viewport"),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="Clients",i.root=t.querySelector(".panel--clients"),i.elements=t.querySelectorAll(".title > *, .antonyms, .panel--clients__text, .awards__title, .awards li"),i.logos=i.root.querySelectorAll(".list-logos li"),i}return s(e,t),o(e,[{key:"fromWorks",value:function(){var t=new TimelineMax({onComplete:function(){}}),e=h.height;return t.set(this.logos,{opacity:0,y:10}),t.set(this.elements,{opacity:0,y:10}),t.add("start"),t.fromTo(this.root,BASE_SCROLL_TIME,{y:e},{y:0,ease:Power4.easeInOut}),t.staggerTo(this.elements,.5,{opacity:1,y:0,ease:Power4.easeInOut},.05,"start+=.3"),t.staggerTo(this.logos,.5,{force3D:!0,opacity:.3,y:0,ease:Power4.easeInOut},.05,"start+=.6"),t}}]),e}(a);e.exports=l},{"utils/viewport":336,"view/home/panels/basePanel":364}],366:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=t("view/home/panels/basePanel"),a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="Footer",i.root=t.querySelector("footer.footer"),i}return s(e,t),e}(o);e.exports=a},{"view/home/panels/basePanel":364}],367:[function(t,e,i){(function(i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lodash/debounce"),o=t("utils/mq"),a=t("utils/keyboard"),h=t("utils/mouse"),l=t("utils/swipe"),u=t("utils/scroll"),c=t("utils/dispatcher"),p=t("utils/dependentVariable"),f=t("utils/viewport"),d=t("view/home/panels/video"),m=t("view/home/panels/about"),v=t("view/home/panels/works"),g=t("view/home/panels/clients"),y=t("view/home/panels/footer");i.BASE_SCROLL_TIME=.6;var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;n(this,t),this.root=e,this.panelContainer=this.root.querySelector(".panel-container"),this.current=0,this.panels=[new d(e),new m(e),new v(e),new g(e),new y(e)],this.scrollDown=this.root.querySelector(".scroll-down"),this.footerPanel=this.getPanelByName("Footer"),this.fakeScrollbar=new b(this),this.isAnimating=!1,this.active=!1,this.activate(),this.register()}return r(t,[{key:"register",value:function(){var t=this;this.mediumHandler={match:function(){t.bind()},unmatch:function(){t.unbind()}},o.register("medium",this.mediumHandler)}},{key:"getPanel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;return this.panels[t]}},{key:"getPanelByName",value:function(t){for(var e=0;e<this.panels.length;e++)if(this.panels[e].name===t)return this.panels[e]}},{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.getPanel(t).root.classList.add("active")}},{key:"deactivate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.getPanel(t).root.classList.remove("active")}},{key:"bind",value:function(){this.active||(u.goTo(0),this.active=!0,this.prev=this.prev.bind(this),this.next=this.next.bind(this),this.setLock=this.setLock.bind(this),this.onResize=s(this.onResize.bind(this),300),this.isLocked=new p({default:!1,onTrue:function(){},onFalse:function(){}}),this.Keyboard=new a([{key:40,callback:this.next},{key:38,callback:this.prev}]),this.Mouse=new h(this.prev,this.next),this.Swipe=new l(this.prev,this.next),this.footerPanel.root.classList.add("panel"),c.on("panels:setLock",this.setLock),this.scrollDown.addEventListener("click",this.next),u.isLocked.setDependency("panels",!0),this.panels[this.current].active(),window.addEventListener("resize",this.onResize),window.addEventListener("focus",this.onResize),this.onResize())}},{key:"unbind",value:function(){this.active&&(this.active=!1,this.Keyboard&&this.Keyboard.destroy(),this.Mouse&&this.Mouse.destroy(),this.Swipe&&this.Swipe.destroy(),this.footerPanel.root.classList.remove("panel"),this.scrollDown.removeEventListener("click",this.next),u.isLocked.setDependency("panels",!1),c.off("panels:setLock",this.setLock),window.removeEventListener("resize",this.onResize),window.removeEventListener("focus",this.onResize),this.cleanHeight())}},{key:"destroy",value:function(){this.unbind(),o.unregister("medium",this.mediumHandler),this.footerPanel.root.classList.remove("active"),this.fakeScrollbar.destroy(),this.getPanelByName("About")&&this.getPanelByName("About").inactive()}},{key:"onResize",value:function(){if(Features.ios){window.scrollTo(0,0),document.documentElement.style.height=window.innerHeight+"px",this.panelContainer.style.height=window.innerHeight+"px";for(var t=0;t<this.panels.length;t++)this.panels[t].root.style.height=window.innerHeight+"px"}}},{key:"cleanHeight",value:function(){if(Features.ios){document.documentElement.style.height="",this.panelContainer.style.height="";for(var t=0;t<this.panels.length;t++)this.panels[t].root.style.height=""}}},{key:"setLock",value:function(t,e){this.isLocked&&this.isLocked.setDependency(t,e)}},{key:"next",value:function(t){t&&t.preventDefault(),this.jump(this.current+1)}},{key:"prev",value:function(t){t&&t.preventDefault(),this.jump(this.current-1)}},{key:"updateScrollDown",value:function(){var t=this.current===this.panels.length-1;this.scrollDown.classList[t?"add":"remove"]("hide")}},{key:"jump",value:function(t){var e=this;if(!this.isAnimating&&!this.isLocked.status&&!(this.current===t||t>=this.panels.length||t<0)){this.isAnimating=!0;var i=this.current,n=this.getPanel(),r=this.getPanel(t);r.active(),this.activate(t);var s=new TimelineMax({onComplete:function(){e.deactivate(i),n.clean(),r.clean(),n.inactive(),e.isAnimating=!1}});s.add("start");var o=n["to"+r.name],a=r["from"+n.name];o||(o=n.out),a||(a=n.in);var h=t>i;s.add(o.call(n,h),"start"),s.add(a.call(r,h),"start"),this.current=t,this.fakeScrollbar.update(),this.updateScrollDown()}}}]),t}(),b=function(){function t(e){n(this,t),this.panelInstance=e,this.scrollbar=this.panelInstance.root.querySelector(".scrollbar"),this.track=this.scrollbar.querySelector(".scrollbar__track"),this.bind(),this.update()}return r(t,[{key:"bind",value:function(){this.onResize=this.onResize.bind(this),c.on("resize",this.onResize)}},{key:"destroy",value:function(){c.off("resize",this.onResize)}},{key:"onResize",value:function(){this.update()}},{key:"update",value:function(){var t=f.height/this.panelInstance.panels.length,e=100*this.panelInstance.current;TweenLite.set(this.track,{height:t,yPercent:e})}}]),t}();e.exports=_}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash/debounce":76,"utils/dependentVariable":320,"utils/dispatcher":321,"utils/keyboard":326,"utils/mouse":327,"utils/mq":328,"utils/scroll":333,"utils/swipe":335,"utils/viewport":336,"view/home/panels/about":363,"view/home/panels/clients":365,"view/home/panels/footer":366,"view/home/panels/video":368,"view/home/panels/works":369}],368:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=t("view/home/panels/basePanel"),l=t("utils/dispatcher"),u=t("clip-rect"),c=t("utils/mq"),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="Video",i.root=t.querySelector(".panel--video"),i.video=document.querySelector(".panel--video__video"),i.videoEl=i.video.querySelector("video"),l.on("homevideo:reset",function(){i.active()}),i.mediumHandler={unmatch:function(){i.active()}},c.register("medium",i.mediumHandler),i}return s(e,t),o(e,[{key:"clean",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clean",this).call(this)}},{key:"active",value:function(){this.videoEl.currentTime=0,this.videoEl.play()}},{key:"inactive",value:function(){this.videoEl.pause(),this.videoEl.currentTime=0}},{key:"animate",value:function(){if(c.isMoreThan("medium")){this.active(),TweenLite.set(this.video,{clip:"rect(0px,0px,0px,0px)",x:-100});var t=new TimelineLite({delay:0});t.add(new u(this.video,{from:u.LEFT,to:u.RIGHT,duration:2,ease:Power4.easeInOut,reverse:!1,clearProps:!0}),0),t.to(this.video,2,{x:0,ease:Power4.easeInOut},0)}}}]),e}(h);e.exports=p},{"clip-rect":12,"utils/dispatcher":321,"utils/mq":328,"view/home/panels/basePanel":364}],369:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("view/home/panels/basePanel"),h=t("utils/viewport"),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="Works",i.root=t.querySelector(".panel--works"),i.fakeLayer=i.root.querySelector(".panel--works__fakelayer"),i.blocks=i.root.children,i}return s(e,t),o(e,[{key:"fromAbout",value:function(){var t=this;this.tl&&this.tl.kill(),TweenLite.set(this.blocks,{clearProps:"all"}),TweenLite.set(this.fakeLayer,{clearProps:"all"});var e=new TimelineMax({onComplete:function(){}});this.tl=e;var i=h.height;return e.set(this.fakeLayer,{display:"block"}),e.set(this.blocks[0],{width:"100%",opacity:0}),e.set(this.blocks[1],{height:"100%",xPercent:100}),e.set(this.blocks[2],{width:"50%",yPercent:100}),e.set(this.blocks[3],{xPercent:100}),e.add("scroll"),e.fromTo(this.root,BASE_SCROLL_TIME,{y:i},{y:0,ease:Power4.easeInOut},"scroll"),e.add(function(){var e=new TimelineMax({onComplete:function(){TweenLite.set(t.blocks,{clearProps:"all"}),TweenLite.set(t.fakeLayer,{clearProps:"all"})}});e.add("scroll"),e.to(t.blocks[0],2,{ease:Power4.easeOut,opacity:1},"scroll+=.3"),e.add("step0",1),e.to(t.blocks[0],1,{ease:Power4.easeInOut,width:"50%"},"step0"),e.to(t.blocks[1],1,{ease:Power4.easeInOut,xPercent:0},"step0"),e.add("step1","step0+=0.6"),e.to(t.blocks[1],1,{ease:Power4.easeInOut,height:"50.1%"},"step1"),e.to(t.blocks[2],1,{ease:Power4.easeInOut,yPercent:0},"step1"),e.add("step2","step1+=0.6"),e.to(t.blocks[2],1,{ease:Power4.easeInOut,width:"25%"},"step2"),e.to(t.blocks[3],1,{ease:Power4.easeInOut,xPercent:0},"step2")}),e}}]),e}(a);e.exports=l},{"utils/viewport":336,"view/home/panels/basePanel":364}],370:[function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;b=t,s()}function r(){cancelAnimationFrame(w),T&&clearInterval(T),v.domElement.addEventListener("dblclick",null,!1),d=null,m=null,window.removeEventListener("resize",c)}function s(){var t=new Image;t.onload=function(t){o(t.target)},t.crossOrigin="anonymous",t.src=window.EPICINFO.BASEURL+"/assets/images/sprite-logo-e268e0785b.png"}function o(t){y=window.innerWidth,_=window.innerHeight,d=new S.Scene,m=new S.PerspectiveCamera(60,y/_,1,1e4),m.position.z=100,v=new S.WebGLRenderer({alpha:!0,antialias:!(window.devicePixelRatio>1)}),v.setPixelRatio(window.devicePixelRatio),v.setSize(y,_),b.appendChild(v.domElement);var e=t.width,i=t.height,n=i/4,r=e*n,s=new S.DataTexture(h(r,e,"middle"),e,n,S.RGBAFormat,S.FloatType);s.needsUpdate=!0,A.push(s);for(var o=0;o<4;o++){var l=a(t,e,i,4,o),u=new S.DataTexture(l,e,n,S.RGBAFormat,S.FloatType);u.needsUpdate=!0,A.push(u)}var f=new S.DataTexture(h(r,e,"high"),e,n,S.RGBAFormat,S.FloatType);f.needsUpdate=!0,A.push(f),g=new S.ShaderMaterial({uniforms:{positionsA:{type:"t",value:A[M]},positionsB:{type:"t",value:A[P]},timer:{type:"f",value:0},ratio:{type:"f",value:0},mousePos:{type:"v2",value:new S.Vector2(C.x,C.y)}},vertexShader:"\n          varying vec2 vUv;\n          void main() {\n              vUv = vec2(uv.x, uv.y);\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }\n        ",fragmentShader:"\n          //basic simulation: displays the particles in place.\n          uniform sampler2D positionsA;\n          uniform sampler2D positionsB;\n          varying vec2 vUv;\n          uniform float timer;\n          uniform float ratio;\n          uniform vec2 mousePos;\n\n          float mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\n          vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\n          vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}\n\n          float calculateSurface(float x, float time) {\n              float y = (sin(x * 1.0 + time * 1.0) + sin(x * 2.3 + time * 1.5) + sin(x * 3.3 + time * 0.4)) / 3.0;\n              return y;\n          }\n\n          float rand(vec2 co){\n            return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n          }\n\n\n          float noise(vec3 p){\n              vec3 a = floor(p);\n              vec3 d = p - a;\n              d = d * d * (3.0 - 2.0 * d);\n\n              vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n              vec4 k1 = perm(b.xyxy);\n              vec4 k2 = perm(k1.xyxy + b.zzww);\n\n              vec4 c = k2 + a.zzzz;\n              vec4 k3 = perm(c);\n              vec4 k4 = perm(c + 1.0);\n\n              vec4 o1 = fract(k3 * (1.0 / 41.0));\n              vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n              vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n              vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n              return o4.y * d.y + o4.x * (1.0 - d.y);\n          }\n\n          //  Classic Perlin 2D Noise\n          //  by Stefan Gustavson\n          //\n          vec2 fade(vec2 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\n          float cnoise(vec2 P){\n            vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n            vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n            Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n            vec4 ix = Pi.xzxz;\n            vec4 iy = Pi.yyww;\n            vec4 fx = Pf.xzxz;\n            vec4 fy = Pf.yyww;\n            vec4 i = perm(perm(ix) + iy);\n            vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n            vec4 gy = abs(gx) - 0.5;\n            vec4 tx = floor(gx + 0.5);\n            gx = gx - tx;\n            vec2 g00 = vec2(gx.x,gy.x);\n            vec2 g10 = vec2(gx.y,gy.y);\n            vec2 g01 = vec2(gx.z,gy.z);\n            vec2 g11 = vec2(gx.w,gy.w);\n            vec4 norm = 1.79284291400159 - 0.85373472095314 *\n              vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n            g00 *= norm.x;\n            g01 *= norm.y;\n            g10 *= norm.z;\n            g11 *= norm.w;\n            float n00 = dot(g00, vec2(fx.x, fy.x));\n            float n10 = dot(g10, vec2(fx.y, fy.y));\n            float n01 = dot(g01, vec2(fx.z, fy.z));\n            float n11 = dot(g11, vec2(fx.w, fy.w));\n            vec2 fade_xy = fade(Pf.xy);\n            vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n            float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n            return 2.3 * n_xy;\n          }\n\n          void main() {\n\n              // get the index of the particle\n              float indx = texture2D( positionsA, vUv ).a;\n              float delay = indx * .6;\n\n              // calculate ratio for each particle : modified to add a delay\n              float r1 = smoothstep(0.0,1.0, ratio - delay);\n\n              // mix shape 1 and shape 2;\n              vec3 pos = texture2D( positionsA, vUv ).rgb * (1.0-r1);\n\n              pos += texture2D( positionsB, vUv ).rgb * r1;\n\n              vec3 origin = pos;\n\n              vec2 diff = vec2(origin.r, origin.g) - mousePos * 512.0;\n              float dist = length(diff);\n\n              // center particles horizontally during the transition\n              pos.r += (0.0 - pos.r) * smoothstep( 0.0, 2.0, sin ( r1 * 3.14 ));\n\n              // adding noise to the shape\n              pos.r += rand(vec2(pos.r, indx)) * 30.0 * sin ( r1 * 3.14 );\n              pos.g += rand(vec2(pos.g, indx)) * 60.0 * sin ( r1 * 3.14 );\n              pos.b += rand(vec2(pos.b, indx)) * 10.0 * sin ( r1 * 3.14 );\n\n              // defined attractor position\n              float attractorDist = 300.0 + sin(timer * 0.1)*64.0;\n              float attractorAngle = (3.14 * r1 * 2.0) + (timer);\n              vec3 attractor1 = vec3(cos(attractorAngle)*attractorDist, sin(attractorAngle)*attractorDist, -20.0 );\n\n              // mix particle position with the attractor\n              pos += (attractor1 - pos) * ratio * .3 * sin(r1*3.14) ;//* sin(r*3.14);\n\n\n              // wave the icon\n              pos.r += calculateSurface(pos.g * .01, timer*4.0)*8.0;\n              pos.g += calculateSurface( (pos.g + pos.r)*.01, timer*4.0)*6.0;\n              pos.b += calculateSurface((pos.g + pos.r) * .01, timer*4.0)*8.0;\n\n              gl_FragColor = vec4( pos,1.0);\n          }\n\n        "});var w=new S.ShaderMaterial({uniforms:{positions:{type:"t",value:null},pointSize:{type:"f",value:1}},vertexShader:"\n\n          //float texture containing the positions of each particle\n          uniform sampler2D positions;\n          varying vec3 vPos;\n\n          //size\n          uniform float pointSize;\n\n          void main() {\n\n              //the mesh is a nomrliazed square so the uvs = the xy positions of the vertices\n              vPos = texture2D( positions, position.xy ).xyz;\n\n              //pos now contains the position of a point in space taht can be transformed\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( vPos, 1.0 );\n\n              gl_PointSize = pointSize;\n          }\n\n        ",fragmentShader:"\n          varying vec3 vPos;\n\n          void main()\n          {\n              vec4 color = vec4(0.74, 0.60, 0.31, 0.00) * (.5 + smoothstep(-10.0, 10.0, vPos.z)*1.2);\n              color.a = smoothstep(-60.0, -20.0 , vPos.z);\n              gl_FragColor = color;\n          }\n        ",transparent:!0});x=new E(e,i,v,g,w),d.add(x.particles),x.particles.scale.set(.04,.04,.04),m.lookAt(x.particles.position),window.addEventListener("resize",c),c(),p()}function a(t,e,i,n,r){var s=u(null,e,i);s.drawImage(t,0,0);for(var o=i/n,a=s.getImageData(0,r*o,e,o),h=a.data,l=e*o,c=new Float32Array(4*l),p=0;p<l;p++){var f=4*p+3,d=4*p,m=0==h[f]?400*Math.random()-200:p%e-.5*e,v=0==h[f]?400*Math.random()-200:.5*o-parseInt(p/e),g=0==h[f]?-100:0,y=p/l;c[d]=m,c[d+1]=v,c[d+2]=g,c[d+3]=y}return c}function h(t,e,i){for(var n=new Float32Array(4*t),r=0;r<t;r++){var s=r%e-.5*e,o="middle"==i?-200:700+100*Math.random(),a="middle"==i?0:-100,h=r/t,l=4*r;n[l]=s,n[l+1]=o,n[l+2]=a,n[l+3]=h}return n}function l(t,e){var i=document.createElement("canvas");return i.width=t||512,i.height=e||512,i}function u(t,e,i){return t=t||l(e,i),t.width=e||t.width,t.height=i||t.height,t.getContext("2d")}function c(){y=window.innerWidth,_=window.innerHeight,v.setSize(y,_),m.aspect=y/_,m.updateProjectionMatrix()}function p(){x.update(),g.uniforms.timer.value+=.01,v.render(d,m),w=requestAnimationFrame(p)}function f(){O++,M=P,P++,P%=6,g.uniforms.ratio.value=0,g.uniforms.positionsA.value=A[M],g.uniforms.positionsB.value=A[P],TweenMax.killTweensOf(g.uniforms.ratio),TweenMax.to(g.uniforms.ratio,1.3,{value:2,ease:Linear.easeNone})}var d,m,v,g,y,_,b,x,w,T,S=t("three"),E=t("utils/fbo"),M=0,P=0,A=[],C={x:0,y:0},O=0;e.exports={start:n,destroy:r,changeIcon:f}},{three:286,"utils/fbo":322}],371:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("view/intro/canvas"),o=t("utils/dispatcher"),a=t("utils/mq"),h=t("clip-rect"),l=function(){function t(e,i){n(this,t),this.root=e,this.callback=i,this.text=e.querySelector(".intro__text"),this.pieces=this.text.querySelectorAll("span"),this.canvas=this.root.querySelector(".intro__canvas"),this.logo=this.root.querySelector(".intro__logo"),this.sizes=this.calculatePieceSizes(),s.start(this.canvas),this.animate()}return r(t,[{key:"calculatePieceSizes",value:function(){return[76,112,170]}},{key:"done",value:function(){this.callback()}},{key:"destroy",value:function(){s.destroy()}},{key:"animate",value:function(){var t=this,e=new TimelineLite({delay:.5,onComplete:function(){t.done()}});e.set(this.pieces,{opacity:0,y:30}),e.set(this.canvas,{opacity:0,y:10}),e.set(this.logo,{opacity:0,y:-50}),e.add("start"),e.to(this.canvas,1,{opacity:1,y:0},"start"),e.add("change0","start+=1.5"),e.add(s.changeIcon,"change0-=0.5"),e.to(this.pieces[0],.6,{opacity:1,y:0,ease:Power4.easeInOut},"change0"),e.add("change1","change0+=1.5"),e.add(s.changeIcon,"change1-=0.5"),e.to(this.text,.4,{width:"+="+this.sizes[1],ease:Power4.easeIn},"change1"),e.to(this.pieces[1],.6,{opacity:1,y:0,ease:Power4.easeOut},"change1+=0.3"),e.add("change2","change1+=1.5"),e.add(s.changeIcon,"change2-=0.5"),e.to(this.text,.4,{width:"+="+this.sizes[2],ease:Power4.easeIn},"change2"),e.to(this.pieces[2],.6,{opacity:1,y:0,ease:Power4.easeOut},"change2+=0.3"),e.add("change3","change2+=2.5"),e.add(s.changeIcon,"change3-=0.5"),e.staggerTo(this.pieces,.3,{y:30,ease:Power4.easeOut},.1,"change3-=.3"),e.to(this.logo,.3,{opacity:1,y:-40,ease:Power4.easeOut},"change3"),e.add("final","change3+=2.5"),e.add(s.changeIcon,"final-=0.5"),e.to(this.logo.querySelector("svg"),.6,{opacity:0,y:20,ease:Power4.easeIn},"final"),e.to(this.canvas,.6,{opacity:0},"final")}}]),t}(),u=function(){function t(){var e=this;n(this,t),this.valid&&(this.root=document.querySelector(".intro"),this.homeScrollBar=document.querySelector(".panel-container .scrollbar"),this.video=document.querySelector(".panel--about__video"),this.box=document.querySelector(".panel--about__content"),this.boxSolid=document.querySelector(".panel--about__content--solid"),this.textBox=document.querySelector(".animation-about"),this.nav=document.querySelector(".nav__top"),document.body.classList.add("scrollbar-no-transition"),this.homeScrollBar.classList.add("hide"),this.root.style.display="block",o.emit("panels:setLock","intro",!0),this.setInitial(),this.animText=new l(this.root,function(){e.animText.destroy(),e.animate()}))}return r(t,[{key:"setInitial",value:function(){this.video&&TweenLite.set(this.video,{clip:"rect(0px,0px,0px,0px)",x:-100}),this.box&&TweenLite.set(this.box,{left:"0%",opacity:0}),this.boxSolid&&TweenLite.set(this.boxSolid,{left:"0",opacity:0}),this.scrollDown=document.querySelector(".scroll-down"),TweenLite.set(this.scrollDown,{transition:"none",y:80}),this.scrollDown.classList.add("hide"),TweenLite.set(this.nav,{transition:"none"}),this.nav.classList.add("small")}},{key:"animate",value:function(){var t=this,e=new TimelineLite({delay:0,onComplete:function(){t.textBox.classList.add("hover-enlarge"),t.root.style.display="none"}});o.emit("homevideo:reset"),e.add(function(){t.scrollDown.classList.remove("hide"),o.emit("panels:setLock","intro",!1),document.body.classList.remove("scrollbar-no-transition"),t.homeScrollBar.classList.remove("hide"),TweenLite.set(t.scrollDown,{clearProps:"all"})}),e.add(function(){TweenLite.set(t.nav,{clearProps:"all"}),t.nav.classList.remove("small")}),e.add(new h(this.video,{from:h.LEFT,to:h.RIGHT,duration:2,ease:Power4.easeInOut,reverse:!1,clearProps:!0}),0),e.to(this.video,2,{x:0,ease:Power4.easeInOut},0),e.to(this.box,2,{left:"25%",opacity:1,ease:Power4.easeInOut,clearProps:"all"},0),e.to(this.boxSolid,2,{left:"25%",opacity:1,ease:Power4.easeInOut,clearProps:"all"},0),e.to(this.root,1,{width:"50%",opacity:0,ease:"hardEase"},0)}},{key:"valid",get:function(){return a.isMoreThan("medium")}}]),t}();e.exports=u},{"clip-rect":12,
"utils/dispatcher":321,"utils/mq":328,"view/intro/canvas":370}],372:[function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var r=t("barba.js"),s=t("utils/parentSwitcher"),o=t("shared/animateLine"),a=t("view/case-study/partials/duoTextMedia");e.exports=r.BaseView.extend({namespace:"single-microcase",onEnter:function(){var t=this;this.header=document.querySelector(".site-header"),this.content=this.container.querySelector(".microcase__content"),this.close=this.container.querySelector(".microcase__close"),this.line=this.container.querySelector(".line-separator--left"),this.vimeoVideos=this.container.querySelectorAll(".duo-text-media"),this.animLine=new o(this.line),this.animLine.prepare(),this.contentParentSwitcher=new s(this.content,{states:[{limit:0,outside:!1},{limit:"large",outside:!0}]}),this.closeParentSwitcher=new s(this.close,{states:[{limit:0,outside:!1},{limit:"large",outside:!0}]}),this.videos=[],[].concat(n(this.vimeoVideos)).forEach(function(e){t.videos.push(new a({root:e}))}),TweenMax.to(this.header,1,{autoAlpha:0}),TweenMax.set([this.content,this.close],{autoAlpha:0}),this.checkContentMode=this.checkContentMode.bind(this),this.checkContentMode(),window.addEventListener("resize",this.checkContentMode)},checkContentMode:function(){window.innerHeight<this.content.clientHeight+80?this.content.classList.add("static"):this.content.classList.remove("static")},onEnterCompleted:function(){this.animLine.show(),TweenMax.to([this.content,this.close],1,{autoAlpha:1})},onLeave:function(){TweenMax.to([this.content,this.close],1,{autoAlpha:0}),TweenMax.to(this.header,1,{autoAlpha:1})},onLeaveCompleted:function(){this.contentParentSwitcher.destroy(),this.closeParentSwitcher.destroy(),this.videos.forEach(function(t){return t.destroy()}),window.removeEventListener("resize",this.checkContentMode)}})},{"barba.js":9,"shared/animateLine":289,"utils/parentSwitcher":331,"view/case-study/partials/duoTextMedia":354}],373:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("shared/animateLine"),o=function(){function t(e){n(this,t),this.el=e,this.lineLeft=this.el.querySelector(".line-separator--left"),this.lineRight=this.el.querySelector(".line-separator--right"),this.animateLeft=new s(this.lineLeft),this.animateRight=new s(this.lineRight),this.softEase=CustomEase.create("softEase","M0,0 C0,0.6 0,0.7 0.055,0.8 0.105,0.895 0.2,1 1,1"),this.prepare(),this.bind()}return r(t,[{key:"bind",value:function(){this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave)}},{key:"prepare",value:function(){TweenLite.set(this.lineLeft,{opacity:0,width:"0px"}),TweenLite.set(this.lineRight,{opacity:0,width:"0px"})}},{key:"onMouseEnter",value:function(){TweenLite.killTweensOf([this.lineLeft,this.lineRight]),TweenLite.to(this.lineLeft,1,{opacity:1,width:"50px",x:0,delay:.2,autoRound:!1,ease:"softEase"}),TweenLite.to(this.lineRight,1,{opacity:1,width:"50px",x:0,delay:.2,autoRound:!1,ease:"softEase"})}},{key:"onMouseLeave",value:function(){TweenLite.killTweensOf([this.lineLeft,this.lineRight]),TweenLite.to(this.lineLeft,3,{opacity:0,width:"0px",x:0,autoRound:!1,ease:"softEase"}),TweenLite.to(this.lineRight,3,{opacity:0,width:"0px",x:0,autoRound:!1,ease:"softEase"})}}]),t}();e.exports=o},{"shared/animateLine":289}],374:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("barba.js"),o=(t("clip-rect"),t("lodash/forEach")),a=t("utils/mq"),h=t("utils/viewport"),l=t("utils/scroll"),u=t("utils/dispatcher"),c=t("utils/keyboard"),p=t("shared/background"),f=t("view/nav/itemHover"),d=t("shared/bodymovin"),m=function(){function t(){n(this,t),this.root=document.querySelector(".nav__hamburger"),this.rects=this.root.querySelectorAll("rect")}return r(t,[{key:"open",value:function(){this.root.classList?this.root.classList.add("open"):this.root.setAttribute("class","nav__hamburger open")}},{key:"close",value:function(){this.root.classList?this.root.classList.remove("open"):this.root.setAttribute("class","nav__hamburger")}}]),t}(),v=function(){function t(){n(this,t),this.root=document.querySelector(".site-header"),this.root&&(this.hamburger=new m,this.toggler=this.root.querySelector(".nav__toggler"),this.top=this.root.querySelector(".nav__top"),this.content=this.root.querySelector(".nav__content"),this.siteContainer=document.querySelector(".site__container"),this.siteContainerLayer=document.querySelector(".site__container__layer"),this.menuList=this.content.querySelectorAll(".nav__menu .icon, .nav__menu li"),this.cta=this.content.querySelector(".cta"),this.followList=this.content.querySelectorAll(".follow p, .follow li"),this.Bg=p(document.querySelector(".background-pixi")),this.Bg.stop(),this.projects=this.root.querySelector(".similar"),this.projectsTitle=this.projects.querySelector(".title-decorated"),this.projectsList=this.projects.querySelectorAll(".cta-thumb, .cta-skill"),d.parse(null,null,this.root),this.isAnimating=!1,this.isOpen=!1,this.bind())}return r(t,[{key:"bind",value:function(){var t=this;this.toggler.addEventListener("click",this.toggle.bind(this)),u.on("nav:close",this.close.bind(this)),s.Dispatcher.on("initStateChange",function(){t.close()}),new c([{key:27,callback:function(){t.close()}}]);var e=this.root.querySelectorAll(".nav__menu li");o(e,function(t){new f(t)})}},{key:"toggle",value:function(){this[this.isOpen?"close":"open"]()}},{key:"setContainerTransformOrigin",value:function(){var t=l.y,e="50%";t<200?e="0%":t+h.height>l.getMaxScroll()-200&&(e="100%"),this.siteContainer.style.transformOrigin="50% "+e}},{key:"setStopBodymovin",value:function(t){var e=document.querySelectorAll("#barba-wrapper .bodymovin-added:not([data-autostop])");o(e,function(e){d.getBodyMovinByElement(e).isStopped.setDependency("nav",t)})}},{key:"open",value:function(){var t=this;if(!this.isOpen){this.stopTouchMove(),this.Bg.play(),this.isAnimating=!0,this.isOpen=!0,this.setStopBodymovin(!0),u.emit("panels:setLock","nav",!0),u.emit("antonyms:setStop","nav",!0),l.isLocked.setDependency("nav",!0),this.setContainerTransformOrigin(),this.siteContainer.classList.add("small"),this.top.classList.add("small"),this.content.classList.add("show"),this.content.style.visibility="visible",this.hamburger.open(),TweenLite.set([this.menuList,this.cta,this.followList],{y:10,opacity:0}),TweenLite.set(this.projectsTitle,{y:10,opacity:0}),TweenLite.set(this.projectsList,{yPercent:100}),this.tl&&this.tl.kill();var e=new TimelineMax({onComplete:function(){t.isAnimating=!1}});this.tl=e,e.add("start",.2),e.to(this.siteContainerLayer,1,{display:"block",opacity:.6,ease:Power4.easeOut},0),e.staggerTo(this.menuList,.6,{y:0,opacity:1,ease:Power4.easeOut},.1,.4),e.to(this.cta,.8,{y:0,opacity:1},"start+=0.4"),e.staggerTo(this.followList,.8,{y:0,opacity:1},.1,"start+=0.4"),e.staggerTo(this.projectsList,.6,{yPercent:0,ease:Power4.easeOut},.1,"start+=0.6"),e.to(this.projectsTitle,.6,{y:0,opacity:1,ease:Power4.easeOut},"start+=0.8")}}},{key:"close",value:function(){var t=this;if(this.isOpen){this.enableTouchMove(),this.isAnimating=!0,this.isOpen=!1,this.tl&&this.tl.kill();var e=new TimelineMax({onComplete:function(){t.setStopBodymovin(!1),u.emit("panels:setLock","nav",!1),u.emit("antonyms:setStop","nav",!1),l.isLocked.setDependency("nav",!1),t.isAnimating=!1,t.Bg.stop(),t.content.style.visibility="hidden"}});this.tl=e,this.hamburger.close(),e.add("start",0),e.staggerTo(this.menuList,.2,{y:-20,opacity:0,ease:Power4.easeIn},.05),e.to(this.cta,.2,{y:-20,opacity:0,ease:Power4.easeIn},"start+=0.1"),e.staggerTo(this.followList,.2,{y:-20,opacity:0,ease:Power4.easeIn},.05,"start+=0.1"),this.isDesktop?(e.staggerTo(this.projectsList,.5,{yPercent:100,ease:Power4.easeIn},.1,"start+=0.3"),e.to(this.projectsTitle,.2,{y:15,opacity:0,ease:Power4.easeIn},"start+=.5"),e.add(function(){t.top.classList.remove("small"),t.content.classList.remove("show"),t.siteContainer.classList.remove("small")})):(this.top.classList.remove("small"),this.content.classList.remove("show"),this.siteContainer.classList.remove("small")),e.to(this.siteContainerLayer,2,{display:"none",opacity:0,ease:Power4.easeIn},.5)}}},{key:"touchPrevent",value:function(t){t.preventDefault()}},{key:"stopTouchMove",value:function(){document.body.addEventListener("touchmove",this.touchPrevent)}},{key:"enableTouchMove",value:function(){document.body.removeEventListener("touchmove",this.touchPrevent)}},{key:"isDesktop",get:function(){return a.isMoreThan("medium")}}]),t}();e.exports=new v},{"barba.js":9,"clip-rect":12,"lodash/forEach":78,"shared/background":310,"shared/bodymovin":311,"utils/dispatcher":321,"utils/keyboard":326,"utils/mq":328,"utils/scroll":333,"utils/viewport":336,"view/nav/itemHover":373}],375:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("utils/scroll"),s=t("view/nav/nav"),o=n.BaseTransition.extend({start:function(){n.Pjax.canProceedLoading.resolve();var t=0;(s.isOpen||s.isAnimating)&&(t=800),window.setTimeout(this.begin.bind(this),t)},begin:function(){Promise.all([this.fadeOut(),this.scrollUp(),this.newContainerLoading]).then(this.fadeIn.bind(this))},scrollUp:function(){return r.goTo(0,.4)},fadeOut:function(){var t=n.Utils.deferred();return TweenLite.to(this.oldContainer,1,{opacity:0,onComplete:function(){t.resolve()}}),t.promise},fadeIn:function(){var t=this;this.oldContainer.style.display="none";var e=new TimelineLite({onComplete:function(){t.done()}});e.set(this.newContainer,{autoAlpha:0}),e.to(this.newContainer,.6,{autoAlpha:1})}});e.exports=o},{"barba.js":9,"utils/scroll":333,"view/nav/nav":374}],376:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("clip-rect"),s=t("utils/scroll"),o=t("utils/svgPolyShape"),a=t("utils/getParent"),h=t("utils/viewport"),l=t("utils/mq"),u=t("shared/bodymovin"),c=void 0;n.Dispatcher.on("linkClicked",function(t){c=t}),n.Dispatcher.on("initStateChange",function(){c=null});var p=n.BaseTransition.extend({start:function(){n.Pjax.canProceedLoading.resolve(),s.isLocked.setDependency("genericCta",!0),this.clone(),this.siteLayer=document.querySelector(".site__container__layer"),Promise.all([this.grow(),this.newContainerLoading]).then(this.fade.bind(this))},clone:function(){var t=this.ctaBlock.getBoundingClientRect();this.ctaBlock.style.opacity=0,this.cloneBlock=this.ctaBlock.cloneNode(!0),this.cloneBlock.style.cssText="\n      position: fixed;\n      top: "+t.top+"px;\n      left: "+t.left+"px;\n      width: "+t.width+"px;\n      height: "+t.height+"px;\n      z-index: 550;\n    ",document.body.appendChild(this.cloneBlock),this.bm=this.cloneBlock.querySelector("[data-bodymovin]");var e=void 0;this.bm&&(e=this.bm.getBoundingClientRect()),e&&(this.bmInstance=u.getBodyMovinByElement(this.bm),this.bm.style.cssText="\n        position: fixed;\n        top: "+e.top+"px;\n        left: "+e.left+"px;\n        width: "+e.width+"px;\n        height: "+e.height+"px;\n        transform: none;\n        z-index: 900;\n      ",document.body.appendChild(this.bm),this.bmInstance.play()),this.SvgPolyShape=new o([{x:t.left,y:t.top},{x:t.left+t.width,y:t.top},{x:t.left+t.width,y:t.top+t.height},{x:t.left,y:t.top+t.height}]),this.initW=t.width,this.initH=t.height;var i=this.ctaBlock.dataset.bgcolor||getComputedStyle(this.ctaBlock).backgroundColor;this.SvgPolyShape.polygon.style.fill=i},updatePoly:function(){this.SvgPolyShape.update();var t=this.SvgPolyShape.polySize;Math.round(t.width),Math.round(t.height)},grow:function(){var t=this,e=new n.Utils.deferred,i=new TimelineLite({onComplete:function(){TweenLite.set(t.siteLayer,{clearProps:"all"}),e.resolve()},onUpdate:function(){t.updatePoly()}});i.add(new r(this.cloneBlock,{from:r.TOP,to:r.BOTTOM,ease:Power4.easeInOut,duration:.5,reverse:!0,clearProps:!1})),i.add("start",.5);var s=!0;l.isMoreThan("medium")&&(s=!1);var o=h.width,a=h.height,u=.2*h.width,c=u,p=u/(this.initW/this.initH),f=[{x:o/2-c,y:a/2-p},{x:o/2+c,y:a/2-p},{x:o/2-c,y:a/2+p},{x:o/2+c,y:a/2+p}],d=Power4.easeIn,m=Power4.easeOut,v=0;return i.add("init"),i.to(this.siteLayer,1,{opacity:1,display:"block"},0),s||(v=.5,i.to(this.SvgPolyShape.points[0],.5,{x:f[0].x,y:f[0].y,ease:d},"init+=0"),i.to(this.SvgPolyShape.points[1],.5,{x:f[1].x,y:f[1].y,ease:d},"init+=0.03"),i.to(this.SvgPolyShape.points[3],.5,{x:f[2].x,y:f[2].y,ease:d},"init+=0.06"),i.to(this.SvgPolyShape.points[2],.5,{x:f[3].x,y:f[3].y,ease:d},"init+=0.09")),i.to(this.SvgPolyShape.points[0],.5,{x:0,y:s?40:0,ease:m},"init+="+(v+0)),i.to(this.SvgPolyShape.points[1],.5,{x:this.SvgPolyShape.width,y:s?40:0,ease:m},"init+="+(v+.03)),i.to(this.SvgPolyShape.points[3],.5,{x:0,y:this.SvgPolyShape.height,ease:m},"init+="+(v+.06)),i.to(this.SvgPolyShape.points[2],.5,{x:this.SvgPolyShape.width,y:this.SvgPolyShape.height,ease:m},"init+="+(v+.09)),this.bm&&i.to(this.bm,1,{top:-this.bm.clientHeight,left:"-=200",ease:Power4.easeIn},.3),i.timeScale(1),e.promise},fade:function(){var t=this,e=new TimelineLite({onComplete:function(){t.done(),t.SvgPolyShape.destroy(),s.isLocked.setDependency("genericCta",!1)}});this.cloneBlock&&document.body.removeChild(this.cloneBlock),this.bm&&document.body.removeChild(this.bm),s.setTo(0),e.set(this.oldContainer,{display:"none"}),e.set(this.newContainer,{visibility:"visible"}),e.fromTo(this.SvgPolyShape.element,1,{opacity:1},{opacity:0}),e.add("start")},valid:function(){return!!this.getBlockParent()},getBlockParent:function(){return this.ctaBlock=a(c,".generic-cta-transition"),this.ctaBlock}});e.exports=p},{"barba.js":9,"clip-rect":12,"shared/bodymovin":311,"utils/getParent":324,"utils/mq":328,"utils/scroll":333,"utils/svgPolyShape":334,"utils/viewport":336}],377:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("clip-rect"),s=t("utils/getParent"),o=t("utils/dispatcher"),a=t("utils/mq"),h=void 0;n.Dispatcher.on("linkClicked",function(t){h=t}),n.Dispatcher.on("initStateChange",function(){h=null}),window.homeAboutToAboutActive=!1;var l=n.BaseTransition.extend({start:function(){window.homeAboutToAboutActive=!0,this.parent.classList.add("centred"),n.Pjax.canProceedLoading.resolve(),o.emit("panels:setLock","homeAboutToAbout",!0),Promise.all([this.grow(),this.newContainerLoading]).then(this.fade.bind(this))},grow:function(){var t=new n.Utils.deferred,e=new TimelineLite({onComplete:function(){t.resolve()}}),i=this.parent,s=i.parentNode.querySelector(".panel--about-video__content--solid"),o=i.querySelector(".title__divider"),a=o.getBoundingClientRect(),h=o.cloneNode(!0),l=document.querySelector(".home .scroll-down");return s.classList.add("notransition"),TweenLite.set(h,{position:"absolute",top:0,left:0,x:a.left,y:a.top,width:a.width,margin:0}),i.parentNode.appendChild(h),this.dividerClone=h,e.set(s,{backgroundColor:"#171718"}),e.add("start"),e.add(new r(i,{from:r.TOP,to:r.BOTTOM,duration:1,reverse:!0,clearProps:!1}),"start"),e.to(l,.4,{opacity:0,y:100},"start"),e.to(s,1,{left:0,top:0,marginTop:0,marginLeft:0,width:"103%",height:"103%",ease:Power4.easeInOut},"start+=0.2"),t.promise},fade:function(){var t=this,e=new TimelineLite({onComplete:function(){t.done(),TweenLite.to(l,.5,{opacity:1}),window.homeAboutToAboutActive=!1}}),i=this.newContainer.querySelector(".page-header"),n=i.querySelector(".title__divider"),r=i.querySelector(".icon"),s=i.querySelector(".title__title"),o=i.querySelector("p"),a=new SplitText(o,{type:"words"}),h=i.querySelector(".page-header__background"),l=this.newContainer.querySelector(".content"),u=n.getBoundingClientRect();e.set(r,{opacity:0,y:10}),e.set(s,{opacity:0,y:10}),e.set(a.words,{opacity:0,y:10}),e.set(n,{opacity:0,zIndex:99,position:"relative"}),e.set(l,{opacity:0}),e.set(h,{opacity:0,y:0}),e.add("dividerMove"),e.to(this.dividerClone,1,{x:u.left,ease:Power4.easeOut},"dividerMove"),e.to(this.dividerClone,1,{y:u.top,ease:Power4.easeOut},"dividerMove+=.1"),e.set(this.newContainer,{autoAlpha:1},0),e.to(s,.5,{opacity:1,y:0,ease:Power4.easeOut},"dividerMove += 0.2"),e.staggerTo(a.words,1,{opacity:1,y:0,ease:Power4.easeOut},.03,"dividerMove+=.3"),e.to(r,.8,{opacity:1,y:0,ease:Power4.easeOut},"dividerMove += 0.1"),e.set(this.dividerClone,{opacity:0},"dividerMove += 1.1"),e.set(n,{opacity:1},"dividerMove += 1.1"),e.to(h,2,{opacity:1,y:0},"dividerMove += 1.0")},valid:function(){var t=n.HistoryManager.prevStatus(),e=a.isMoreThan("medium");return this.parent=this.getBlockParent(),e&&"front-page"===t.namespace&&this.parent},getBlockParent:function(){return s(h,".animation-about-video")}});e.exports=l},{"barba.js":9,"clip-rect":12,"utils/dispatcher":321,"utils/getParent":324,"utils/mq":328}],378:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("utils/getParent"),s=t("utils/scroll"),o=t("utils/mq"),a=t("utils/viewport"),h=void 0;n.Dispatcher.on("linkClicked",function(t){h=t}),n.Dispatcher.on("initStateChange",function(){h=null});var l=n.BaseTransition.extend({start:function(){s.isLocked.setDependency("homeSliderToCase",!0),this.slide=document.querySelector(".slider__slide.is-next"),this.slide||(this.slide=document.querySelector(".slider__slide.is-current")),this.image=this.slide.querySelector(".slider__image"),this.panelContainer=document.querySelector(".panel-container"),this.scrollbar=this.panelContainer.querySelector(".scrollbar"),this.scrollDown=this.panelContainer.querySelector(".scroll-down"),this.pagination=this.panelContainer.querySelector(".pagination"),Promise.all([this.grow(),this.newContainerLoading]).then(this.fade.bind(this))},grow:function(){var t=new n.Utils.deferred,e=new TimelineLite({onComplete:function(){n.Pjax.canProceedLoading.resolve(),t.resolve()}});e.add("start"),this.scrollDown.classList.add("hide"),this.scrollbar.classList.add("hide");var i=a.width/(a.width-80);return TweenLite.killTweensOf(this.image),e.set(this.image,{zIndex:20}),e.to(this.image,1,{force3D:!0,transformOrigin:"50% 0%",width:"100%",height:100*i+"%",ease:Power4.easeInOut}),e.to(this.pagination,.3,{opacity:0},0),t.promise},fade:function(){this.done(),s.isLocked.setDependency("homeSliderToCase",!1)},valid:function(){return h&&(!!r(h,".homeslider-case")||h.classList.contains("homeslider-case"))&&o.isMoreThan("medium")}});e.exports=l},{"barba.js":9,"utils/getParent":324,"utils/mq":328,"utils/scroll":333,"utils/viewport":336}],379:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("utils/getParent"),s=t("utils/scroll"),o=t("utils/mq"),a=(t("utils/viewport"),void 0);n.Dispatcher.on("linkClicked",function(t){a=t}),n.Dispatcher.on("initStateChange",function(){a=null});var h=n.BaseTransition.extend({start:function(){s.isLocked.setDependency("homeSliderToPage",!0),this.slide=document.querySelector(".slider__slide.is-next"),this.slide||(this.slide=document.querySelector(".slider__slide.is-current")),this.image=this.slide.querySelector(".slider__image"),this.text=this.slide.querySelector(".slider__text"),this.panelContainer=document.querySelector(".panel-container"),this.scrollbar=this.panelContainer.querySelector(".scrollbar"),this.scrollDown=this.panelContainer.querySelector(".scroll-down"),this.pagination=this.panelContainer.querySelector(".pagination"),this.pagination.zIndex=10,this.panel=document.createElement("div"),this.panel.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 50%;\n      background: rgb(23, 23, 24);\n      z-index: -1;\n    ",this.slide.appendChild(this.panel),Promise.all([this.grow(),this.newContainerLoading]).then(this.fade.bind(this))},grow:function(){var t=new n.Utils.deferred,e=new TimelineLite({onComplete:function(){n.Pjax.canProceedLoading.resolve(),t.resolve()}});return e.add("start"),this.scrollDown.classList.add("hide"),this.scrollbar.classList.add("hide"),e.set(this.oldContainer,{opacity:1,zIndex:20}),e.set(this.image,{zIndex:-3}),e.to(this.panel,1,{force3D:!0,width:"100%",ease:Power4.easeInOut}),e.to(this.text,1,{opacity:0},0),e.to(this.pagination,.6,{opacity:0},0),t.promise},fade:function(){var t=this,e=new TimelineLite({onComplete:function(){t.done(),s.isLocked.setDependency("homeSliderToPage",!1),TweenLite.set(t.newContainer,{clearProps:"all"})}});TweenLite.set(this.newContainer,{position:"absolute",top:0,visibility:"visible",left:0,width:"100%"}),e.to(this.oldContainer,.5,{opacity:0})},valid:function(){return a&&(!!r(a,".homeslider-page")||a.classList.contains("homeslider-page"))&&o.isMoreThan("medium")}});e.exports=h},{"barba.js":9,"utils/getParent":324,"utils/mq":328,"utils/scroll":333,"utils/viewport":336}],380:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("lodash/forEach"),o=t("utils/dispatcher"),a=t("utils/scroll"),h=function(){function t(){n(this,t),this.links=document.querySelectorAll(".nav a[href]"),this.bind()}return r(t,[{key:"bind",value:function(){var t=this;this.onClick=this.onClick.bind(this),s(this.links,function(e){e.addEventListener("click",t.onClick)})}},{key:"onClick",value:function(t){t.currentTarget.href===window.location.href&&(t.preventDefault(),t.stopPropagation(),a.setTo(0),o.emit("nav:close"))}}]),t}();e.exports=new h},{"lodash/forEach":78,"utils/dispatcher":321,"utils/scroll":333}],381:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("utils/scroll"),s=t("utils/svgPolyShape"),o=t("utils/getParent"),a=t("utils/mq"),h=t("utils/viewport"),l=void 0;n.Dispatcher.on("linkClicked",function(t){l=t}),n.Dispatcher.on("initStateChange",function(){l=null});var u=n.BaseTransition.extend({start:function(){r.scrollbar.classList.add("hide"),this.clone(),this.siteLayer=document.querySelector(".site__container__layer"),this.left=document.querySelector(".sidebar--left"),this.right=document.querySelector(".sidebar--right"),this.left.classList.remove("show"),this.right.classList.remove("show"),Promise.all([this.grow(),this.newContainerLoading]).then(this.fade.bind(this))},clone:function(){this.imageDiv=this.sidebar.querySelector(".sidebar__image");var t=this.imageDiv.getBoundingClientRect(),e=this.sidebar.querySelector("img"),i=e.currentSrc||e.src;this.SvgPolyShape=new s([{x:t.left,y:t.top},{x:t.left+t.width,y:t.top},{x:t.left+t.width,y:t.top+t.height},{x:t.left,y:t.top+t.height}]),this.initW=t.width,this.initH=t.height;var n='<defs>\n        <pattern id="background" height="100%" width="100%"\n         patternContentUnits="objectBoundingBox" viewBox="0 0 '+this.SvgPolyShape.width+" "+this.SvgPolyShape.height+'"\n         preserveAspectRatio="xMidYMid slice">\n            <image width="'+this.SvgPolyShape.width+'" height="'+this.SvgPolyShape.height+'" preserveAspectRatio="xMidYMid slice" xlink:href="'+i+'" />\n        </pattern>\n    </defs>',r=document.createElement("div");r.innerHTML="<svg>"+n+"</svg>",this.SvgPolyShape.element.appendChild(r.querySelector("defs")),this.SvgPolyShape.polygon.setAttributeNS(null,"fill","url(#background)"),TweenLite.set(this.SvgPolyShape.element,{transform:"translate3d(0,0,0)"}),this.patternSvg=this.SvgPolyShape.element.querySelector("pattern"),this.imageSvg=this.patternSvg.querySelector("image"),this.imageDiv.style.opacity=0},updatePoly:function(){this.SvgPolyShape.update();var t=this.SvgPolyShape.polySize,e=Math.round(t.width),i=Math.round(t.height);this.patternSvg.setAttributeNS(null,"viewBox","0 0 "+e+" "+i),this.imageSvg.setAttributeNS(null,"width",e),this.imageSvg.setAttributeNS(null,"height",i)},grow:function(){var t=this,e=new n.Utils.deferred,i=new TimelineLite({onComplete:function(){TweenLite.set(t.siteLayer,{clearProps:"all"}),r.setTo(0),n.Pjax.canProceedLoading.resolve(),window.setTimeout(function(){e.resolve()},400)},onUpdate:function(){t.updatePoly()}});i.add("start"),this.scaleFactor=1,a.isMoreThan("medium")&&(this.scaleFactor=h.width/(h.width-80));var s=h.width,o=h.height,l=.2*h.width,u=l,c=l/(this.initW/this.initH),p=[{x:s/2-u,y:o/2-c},{x:s/2+u,y:o/2-c},{x:s/2-u,y:o/2+c},{x:s/2+u,y:o/2+c}],f=Power4.easeIn,d=Power4.easeOut;return i.add("init"),i.to(this.siteLayer,1,{opacity:1,display:"block"},0),i.to(this.SvgPolyShape.points[0],.5,{x:p[0].x,y:p[0].y,ease:f},"init+=0"),i.to(this.SvgPolyShape.points[1],.5,{x:p[1].x,y:p[1].y,ease:f},"init+=0.03"),i.to(this.SvgPolyShape.points[3],.5,{x:p[2].x,y:p[2].y,ease:f},"init+=0.06"),i.to(this.SvgPolyShape.points[2],.5,{x:p[3].x,y:p[3].y,ease:f},"init+=0.09"),i.to(this.SvgPolyShape.points[0],.5,{x:0,y:0,ease:d},"init+=0.5"),i.to(this.SvgPolyShape.points[1],.5,{x:this.SvgPolyShape.width,y:0,ease:d},"init+=0.53"),i.to(this.SvgPolyShape.points[3],.5,{x:0,y:this.SvgPolyShape.height*this.scaleFactor,ease:d},"init+=0.56"),i.to(this.SvgPolyShape.points[2],.5,{x:this.SvgPolyShape.width,y:this.SvgPolyShape.height*this.scaleFactor,ease:d},"init+=0.59"),i.timeScale(1),e.promise},fade:function(){var t=this;r.setTo(0);var e=new TimelineLite({onComplete:function(){t.done(),r.scrollbar.classList.remove("hide"),t.SvgPolyShape.destroy(),t.sidebar&&(t.sidebar.style.opacity=1)}});e.set(this.oldContainer,{display:"none"}),e.set(this.newContainer,{visibility:"visible"}),e.add("start")},valid:function(){return!!this.getBlockParent()&&"single-case-study"===n.HistoryManager.prevStatus().namespace},getBlockParent:function(){return this.sidebar=o(l,".sidebar"),this.sidebar}});e.exports=u},{"barba.js":9,"utils/getParent":324,"utils/mq":328,"utils/scroll":333,"utils/svgPolyShape":334,"utils/viewport":336}],382:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("utils/scroll"),s=t("utils/svgPolyShape"),o=t("utils/getParent"),a=t("utils/mq"),h=t("utils/viewport"),l=void 0;n.Dispatcher.on("linkClicked",function(t){l=t}),n.Dispatcher.on("initStateChange",function(){l=null});var u=n.BaseTransition.extend({start:function(){var t=this;r.scrollbar.classList.add("hide"),this.fromMenu=this.workBlock.classList.contains("transition-work--from-menu"),this.isHighlight=this.workBlock.classList.contains("cta-thumb--highlight"),this.clone(),this.preanimation(function(){t.siteLayer=document.querySelector(".site__container__layer"),Promise.all([t.grow(),t.newContainerLoading]).then(t.fade.bind(t))})},preanimation:function(t){var e=this.workBlock.querySelector(".cta-thumb__image"),i=this.workBlock.querySelectorAll(".hide-transition");TweenLite.killTweensOf([e,i]),TweenLite.to(i,.18,{opacity:0}),TweenLite.to(e,.18,{x:0,y:0,scale:1}),window.setTimeout(function(){t()},200)},clone:function(){var t=this.workBlock.getBoundingClientRect(),e=this.workBlock.querySelector("img"),i=e.currentSrc||e.src;this.SvgPolyShape=new s([{x:t.left,y:t.top},{x:t.left+t.width,y:t.top},{x:t.left+t.width,y:t.top+t.height},{x:t.left,y:t.top+t.height}]),this.SvgPolyShape.element.style.opacity=0,this.initW=t.width,this.initH=t.height;var n='<defs>\n        <pattern id="background" height="100%" width="100%"\n         patternContentUnits="objectBoundingBox" viewBox="0 0 '+this.SvgPolyShape.width+" "+this.SvgPolyShape.height+'"\n         preserveAspectRatio="xMidYMid slice">\n            <image width="'+this.SvgPolyShape.width+'" height="'+this.SvgPolyShape.height+'" preserveAspectRatio="xMidYMid slice" xlink:href="'+i+'" />\n        </pattern>\n    </defs>',r=document.createElement("div");r.innerHTML="<svg>"+n+"</svg>",this.fromMenu&&(this.SvgPolyShape.element.style.zIndex=400),this.SvgPolyShape.element.appendChild(r.querySelector("defs")),this.SvgPolyShape.polygon.setAttributeNS(null,"fill","url(#background)"),TweenLite.set(this.SvgPolyShape.element,{transform:"translate3d(0,0,0)"}),this.patternSvg=this.SvgPolyShape.element.querySelector("pattern"),this.imageSvg=this.patternSvg.querySelector("image"),TweenLite.killTweensOf(this.workBlock)},updatePoly:function(t){if(this.SvgPolyShape.update(),!(t>.3&&Features.mobile&&Features.ios)){var e=this.SvgPolyShape.polySize,i=Math.round(e.width),n=Math.round(e.height);this.patternSvg.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.imageSvg.setAttributeNS(null,"width",i),this.imageSvg.setAttributeNS(null,"height",n)}},grow:function(){var t=this;this.updatePoly(),this.workBlock.style.opacity=0,this.SvgPolyShape.element.style.opacity=1;var e=new n.Utils.deferred,i=this,s=new TimelineLite({onComplete:function(){TweenLite.set(t.siteLayer,{clearProps:"all"}),r.setTo(0),n.Pjax.canProceedLoading.resolve(),window.setTimeout(function(){e.resolve()},400)},onUpdate:function(){i.updatePoly(this.progress())}});s.add("start"),this.scaleFactor=1;var o=!0;a.isMoreThan("medium")&&(this.scaleFactor=h.width/(h.width-80),o=!1),Features.firefox&&(this.scaleFactor=1);var l=h.width,u=h.height,c=.2*Math.max(h.width,900),p=c,f=c/(this.initW/this.initH),d=[{x:l/2-p,y:u/2-f},{x:l/2+p,y:u/2-f},{x:l/2-p,y:u/2+f},{x:l/2+p,y:u/2+f}],m=Power4.easeIn,v=Power4.easeOut,g=0;return s.add("init"),s.to(this.siteLayer,1,{opacity:1,display:"block"},0),o||this.isHighlight||(g=.5,s.to(this.SvgPolyShape.points[0],.5,{x:d[0].x,y:d[0].y,ease:m},"init+=0"),s.to(this.SvgPolyShape.points[1],.5,{x:d[1].x,y:d[1].y,ease:m},"init+=0.03"),s.to(this.SvgPolyShape.points[3],.5,{x:d[2].x,y:d[2].y,ease:m},"init+=0.06"),s.to(this.SvgPolyShape.points[2],.5,{x:d[3].x,y:d[3].y,ease:m},"init+=0.09")),s.to(this.SvgPolyShape.points[0],.5,{x:0,y:o?40:0,ease:v},"init+="+(g+0)),s.to(this.SvgPolyShape.points[1],.5,{x:this.SvgPolyShape.width,y:o?40:0,ease:v},"init+="+(g+.03)),s.to(this.SvgPolyShape.points[3],.5,{x:0,y:this.SvgPolyShape.height*this.scaleFactor,ease:v},"init+="+(g+.06)),s.to(this.SvgPolyShape.points[2],.5,{x:this.SvgPolyShape.width,y:this.SvgPolyShape.height*this.scaleFactor,ease:v},"init+="+(g+.09)),s.timeScale(1),e.promise},fade:function(){var t=this;r.setTo(0);var e=new TimelineLite({delay:this.fromMenu?.8:0,onComplete:function(){t.done(),t.SvgPolyShape.destroy(),r.scrollbar.classList.remove("hide"),t.workBlock&&(t.workBlock.style.opacity=1)}});e.set(this.oldContainer,{display:"none"}),e.set(this.newContainer,{visibility:"visible"}),e.add("start")},valid:function(){return!!this.getBlockParent()},getBlockParent:function(){return this.workBlock=o(l,".transition-work"),this.workBlock}});e.exports=u},{"barba.js":9,"utils/getParent":324,"utils/mq":328,"utils/scroll":333,"utils/svgPolyShape":334,"utils/viewport":336}],383:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("gsap"),o=t("vendor/customease");t("vendor/splitText");s.defaultEase=TweenLite.defaultEase=Power4.easeOut,o.create("hardEase","M0,0 C0,0.8 0,0.9 0.05,0.95 0.1,1 0.2,1 1,1"),o.create("softEase","M0,0 C0,0.6 0,0.7 0.055,0.8 0.105,0.895 0.2,1 1,1");var a=t("barba.js"),h=a.Pjax.load;a.Pjax.load=function(){var t=arguments;return this.canProceedLoading=new a.Utils.deferred,this.canProceedLoading.promise.then(function(){return h.apply(a.Pjax,t)})};var l=(t("utils/scroll"),t("utils/viewport"),t("view/nav/nav"),t("shared/antonyms"),t("shared/fakeSelect"),t("shared/bodymovin"),t("shared/appearAnimations/appearAnimations"),t("shared/hoverCtaThumb"),
t("shared/bodymovinHover"),t("shared/share"),t("shared/cookie"),t("shared/newsletter"),t("view/home/home")),u=t("view/works/works"),c=t("view/contact/contact"),p=t("view/about/about"),f=t("view/case-study/case-study"),d=t("view/microcase/microcase"),m=t("view/transitions/fadeTransition"),v=t("view/transitions/workToDetail"),g=t("view/transitions/homeAboutToAbout"),y=t("view/transitions/homeSliderToCase"),_=t("view/transitions/homeSliderToPage"),b=(t("view/transitions/samePage"),t("view/transitions/workSibling")),x=t("view/transitions/genericCta"),w=function(){function t(){n(this,t),this.initViews(),this.initStatic(),this.initBarba()}return r(t,[{key:"initBarba",value:function(){a.Pjax.init(),a.Prefetch.init(),a.Pjax.getTransition=this.getTransition.bind(this),window.EPICINFO.ADMIN_BAR_VISIBLE&&(a.Pjax.preventCheck=function(){return!1})}},{key:"initViews",value:function(){l.init(),u.init(),c.init(),p.init(),f.init(),d.init()}},{key:"initStatic",value:function(){}},{key:"getTransition",value:function(){return v.valid()?v:g.valid()?g:y.valid()?y:_.valid()?_:b.valid()?b:x.valid()?x:m}}]),t}();e.exports=w},{"barba.js":9,gsap:21,"shared/antonyms":290,"shared/appearAnimations/appearAnimations":291,"shared/bodymovin":311,"shared/bodymovinHover":312,"shared/cookie":313,"shared/fakeSelect":314,"shared/hoverCtaThumb":315,"shared/newsletter":316,"shared/share":317,"utils/scroll":333,"utils/viewport":336,"vendor/customease":338,"vendor/splitText":342,"view/about/about":344,"view/case-study/case-study":349,"view/contact/contact":358,"view/home/home":361,"view/microcase/microcase":372,"view/nav/nav":374,"view/transitions/fadeTransition":375,"view/transitions/genericCta":376,"view/transitions/homeAboutToAbout":377,"view/transitions/homeSliderToCase":378,"view/transitions/homeSliderToPage":379,"view/transitions/samePage":380,"view/transitions/workSibling":381,"view/transitions/workToDetail":382,"view/works/works":385}],384:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("packery"),o=t("utils/dispatcher"),a=function(){function t(e,i){n(this,t),this.container=e,this.childs=i,this.packery=new s(e,{transitionDuration:0}),this.onResize(),this.bind()}return r(t,[{key:"bind",value:function(){this.onResize=this.onResize.bind(this),o.on("resize",this.onResize)}},{key:"destroy",value:function(){o.off("resize",this.onResize),this.packery.destroy()}},{key:"onResize",value:function(){this.packery.layout()}}]),t}();e.exports=a},{packery:109,"utils/dispatcher":321}],385:[function(t,e,i){"use strict";var n=t("barba.js"),r=t("view/works/grid"),s=n.BaseView.extend({namespace:"works",onEnter:function(){this.grid=new r(this.container.querySelector(".works"),this.container.querySelector(".works").children)},onEnterCompleted:function(){var t=this;this.grid.onResize(),window.setTimeout(function(){t.grid.onResize()},200)},onLeaveCompleted:function(){this.grid.destroy()}});e.exports=s},{"barba.js":9,"view/works/grid":384}]},{},[288]);
//# sourceMappingURL=../scripts/main-a6ecc68938.min.js.map
